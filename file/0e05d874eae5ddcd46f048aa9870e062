<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" xmlns:wb="http://open.weibo.com/wb">
 <head> 
  <meta name="generator" content="iwms网站管理系统" /> 
  <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script> 
  <title>微信小程序实战，从入门到弃坑-深度学习世界</title> 
  <meta http-equiv="content-type" content="text/html;charset=utf-8" /> 
  <link rel="icon" href="../favicon.ico" type="image/x-icon" /> 
  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" /> 
  <meta name="description" content="最近集中开发了两款微信小程序，分别是好奇心日历（每天一条辞典+一个小投票）和好奇心日报（轻量版），直接上图：" /> 
  <link rel="canonical" href="http://www.dlworld.cn/YuanMaXiaZai/2850.html" /> 
  <link rel="stylesheet" href="../style/iwms/style.css" type="text/css" /> 
  <script type="text/javascript" src="../inc/jquery.js"></script> 
  <script type="text/javascript" src="../inc/iwms.js"></script> 
  <script type="text/javascript">iwms.urlPrefix="../";</script> 
  <script type="text/javascript" src="../inc/show.js"></script> 
 </head> 
 <body> 
  <div class="topBar"> 
   <div class="twidth"> 
    <div style="float:right"> 
     <script type="text/javascript" src="../inc/language.js"></script> 
    </div> 
    <div id="topUser">
     你好，游客 
     <a href="#" onclick="iwms.logPop()">登录</a> 
     <a href="../memberreg.aspx" rel="nofollow">注册</a> 
     <a href="../membernewsadd.aspx" target="_blank" rel="nofollow">发布</a>
     <a href="../search.aspx" rel="nofollow">搜索</a> 
    </div> 
   </div> 
  </div> 
  <div class="twidth"> 
   <div id="sitehead"> 
    <div class="l"></div> 
    <div class="r"></div> 
    <div class="m"> 
     <table width="100%"> 
      <tbody>
       <tr> 
        <td colspan="2"> <script type="text/javascript">iwms.loadAdv("http://www.dlworld.cn/frm_adv.aspx?gid=1");</script> </td> 
       </tr> 
       <tr align="center">
        <td width="160"> <a href="http://www.dlworld.cn/">
          <div style="border: 0;">
           <img src="../upload/sys/16042809518838.png" alt="" width="269" height="75" />
          </div></a> </td>
        <td> <script type="text/javascript">iwms.loadAdv("http://www.dlworld.cn/frm_adv.aspx?gid=2");</script> </td> 
       </tr>
      </tbody>
     </table> 
    </div> 
   </div> 
   <div id="navbar"> 
    <div class="l"></div> 
    <div class="r"></div> 
    <div class="m"> 
     <a href="../default.html" class="first">首页</a>
     <a href="../YeJieDongTai/">业界动态</a>
     <a href="../ShenDuXueXiYingYong/" title="10">深度学习应用</a>
     <a href="../YuYiLiJie/">语义理解</a>
     <a href="../YuanMaXiaZai/" class="thisclass">源码下载</a>
     <a href="../XueXiSuanFa/">学习算法</a>
     <a href="../ZiLiaoXiaZai/">资料下载</a>
     <a href="../ZiDongJiaShi/">自动驾驶</a>
     <a href="http://bbs.chinacloud.cn/showforum-74.aspx" target="_blank">论坛</a> 
    </div> 
   </div> 
   <div id="navsub"> 
    <div class="l"></div> 
    <div class="r"></div> 
    <div class="m"> 
     <a href="/">首页</a> → 
     <a href="../YuanMaXiaZai/">源码下载</a> 
    </div> 
   </div> 
   <table id="middle" width="100%" cellspacing="0" cellpadding="0" style="table-layout:fixed"> 
    <tbody>
     <tr valign="top">
      <td> 
       <div class="mframe mR"> 
        <div class="tl"></div> 
        <div class="tr"></div> 
        <div class="tm"> 
         <div class="moreR">
           背景：
          <script type="text/javascript">WriteBg()</script> 
         </div> 
         <span class="tt">阅读新闻</span> 
        </div> 
        <div class="wrapper"> 
         <div class="ml"></div> 
         <div class="mr"></div> 
         <div class="mm" id="bodyTd"> 
          <div id="printBody" style="word-break:break-all;"> 
           <div style="text-align:center">
            <h1 class="aTitle">微信小程序实战，从入门到弃坑</h1>
           </div> 
           <table width="97%" align="center"> 
            <tbody>
             <tr> 
              <td width="140">[日期：2016-12-30]</td> 
              <td align="center">来源：齐修&nbsp; 作者：</td> 
              <td width="160" align="right">[字体：<a href="javascript:ContentSize(16)">大</a> <a href="javascript:ContentSize(0)">中</a> <a href="javascript:ContentSize(12)">小</a>] </td>
             </tr> 
            </tbody>
           </table> 
           <div id="content">
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">最近集中开发了两款微信小程序，分别是好奇心日历（每天一条辞典+一个小投票）和好奇心日报（轻量版），直接上图：</p> 
            <div class="img_text_center" style="text-align: center; font-size: 16px; line-height: 1.7em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; display: block;" src="../upload/2016-12/161230105246281.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">Paste_Image.png</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">本文将结合具体的实战经验，主要介绍微信小程序的基础知识、开发中遇到的难点、项目的架构设计、最佳实践以及踩过的坑。&nbsp;文章内容较多，如果想看架构设计和躲坑技巧，请直接浏览后面的正文&nbsp;，简书没有目录，也挺伤感的。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">值得再次声明的是：&nbsp;<strong style="text-indent: 0px;">微信小程序的内容部分是hybrid模式，并非原生</strong>&nbsp;，所以性能并不好，绑定的tap事件也有明显的延迟。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: 26.4605px; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block; width: 550px;" src="../upload/2016-12/161230105246283.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">每一个由边框围起来的部分，都是一个最小粒度的原生view</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">如上图所示，每一个由边框围起来的部分，都是一个最小粒度的原生view，可以看出，整个微信小程序的内容部分，就是一个原生view。</p> 
            <h3 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 1.6em; color: #333333; text-rendering: optimizeLegibility; font-size: 18px; text-indent: 1em; background-color: #fefefe;">小程序有哪些基础知识？</h3> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">一个完整的微信小程序是由一个App实例和多个Page实例构成，其中App实例表示该小程序应用，多个Page表示该小程序的多个页面。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">此外，微信小程序并没有提供自定义组件的方式，这就导致微信小程序在开发较复杂应用时，可能会比较艰难。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">微信小程序本身很简单，和一个模板语言的难度几乎相当，翻翻官方教程就可以开始动手搞。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">我也建议大家先动起来，然后再细致啃啃官方文档。由于微信官方文档仍在不断大幅更新中，所以务必查看最新官方文档。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">微信小程序的基础知识主要分为以下几个部分：</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 两种配置文件 &amp;&amp; 两个核心函数</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 WXML模板语法，页面渲染</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 页面间的跳转</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 交互事件</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 官方组件和官方API</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">后文会就每个部分简单介绍介绍...</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">两种配置文件 &amp;&amp; 两个核心函数</h4> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;"><code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-size: 14px; background-color: #f7f7f9;">app.json</code>&nbsp;应用的全局配置文件</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;"><code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">app.json</code>&nbsp;是针对微信小程序的全局配置，主要包含以下几个配置：</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 pages：页面路径的数组，表示小程序要加载的所有页面，其中数组第一项代表小程序的初始页面。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 window：微信原生功能，定制化不强。可设置小程序的状态栏、导航条、标题以及窗口背景色。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 tabBar：微信原生功能，定制化不强。适用于常规的Tab应用，Tab栏可置于顶部或底部；tabBar是一个数组，仅支持2-5个tab。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 networkTimeout：配置小程序网络请求的超时时间。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 debug：调试模式开关，开发模式下建议开启，正式发布别忘了关闭。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/1612301052462810.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">app.json配置的主要区域</p> 
            </div> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;"><code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-size: 14px; background-color: #f7f7f9;">page.json</code>&nbsp;页面的全局配置文件</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">除了上面提到的全局配置，每个页面还可以单独配置&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">page.json</code>&nbsp;，&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">page.json</code>&nbsp;会覆盖&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">app.json</code>&nbsp;中的配置，并只对当前页面生效。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;"><code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">page.json</code>&nbsp;只能对window配置，有两个比较有用的配置项分别是：</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 enablePullDownRefresh：是否开启下拉刷新</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 disableScroll：只能在page.json配置，禁止页面上下滚动，猜测可以实现完美滑屏滑动（未验证）</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;"><code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-size: 14px; background-color: #f7f7f9;">App()</code>&nbsp;小程序注册入口，全局唯一</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">App()用来注册一个小程序，全局只有一个，全局的数据也可以放到这里面来操作。</p> 
            <pre class="prettyprint hljs javascript" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-comment" style="color: #888888;">// 注册微信小程序，全局只有一个</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> appConfig = {
    <span class="hljs-comment" style="color: #888888;">// 小程序生命周期的各个阶段</span>
    onLaunch: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},
    <span class="hljs-attr">onShow</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},
    <span class="hljs-attr">onHide</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},
    <span class="hljs-attr">onError</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},

    <span class="hljs-comment" style="color: #888888;">// 自定义函数或者属性</span>
    ...
};
App(appConfig);

<span class="hljs-comment" style="color: #888888;">// 在别的地方可以获取这个全局唯一的小程序实例</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">const</span> app = getApp();</pre> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">小程序并没有提供销毁的方式，所以只有当小程序进入后台一定时间、或者系统资源占用过高的时候，才会被真正的销毁。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;"><code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-size: 14px; background-color: #f7f7f9;">Page()</code>&nbsp;页面注册入口</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">Page()用来注册一个页面，维护该页面的生命周期以及数据。</p> 
            <pre class="prettyprint hljs javascript" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-comment" style="color: #888888;">// 注册微信小程序，全局只有一个</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> pageConfig = {
    <span class="hljs-attr">data</span>: {},
    <span class="hljs-comment" style="color: #888888;">// 页面生命周期的各个阶段</span>
    onLoad: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},
    <span class="hljs-attr">onShow</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},
    <span class="hljs-attr">onReady</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},
    <span class="hljs-attr">onHide</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},
    <span class="hljs-attr">onUnload</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},
    <span class="hljs-attr">onPullDownRefresh</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},
    <span class="hljs-attr">onReachBottom</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},
    <span class="hljs-attr">onShareAppMessage</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>()</span>{},

    <span class="hljs-comment" style="color: #888888;">// 自定义函数或者属性</span>
    ...
};
Page(pageConfig);

<span class="hljs-comment" style="color: #888888;">// 获取页面堆栈，表示历史访问过的页面，最后一个元素为当前页面</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">const</span> page = getCurrentPages();</pre> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">关于各个生命周期的细节以及流程，参考下图，可以细细品味：</p> 
            <div class="img_text_center" style="text-align: center; font-size: 16px; line-height: 1.7em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; display: block;" src="../upload/2016-12/1612301052462814.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">Paste_Image.png</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;"><code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">app.json</code>&nbsp;和&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">page.json</code>&nbsp;维护了应用和页面的配置属性。&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">App()</code>&nbsp;和&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">Page()</code>&nbsp;维护了应用和页面的各个生命周期以及数据。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">那么，&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">APP</code>&nbsp;和&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">Page</code>&nbsp;如何将数据传递到页面呢？页面又是如何渲染呢？</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">WXML模板语法，页面渲染</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">小程序虽然是hybrid模式，但并不使用HTML渲染，而是全部通过自定义标签来渲染页面。这样做的好处我不清楚，但问题却不少：不能跨浏览器、富文本解析困难，iframe视频不支持，没办法外链跳转。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">和所有的模板语言一样，WXML支持数据绑定、条件渲染、循环、模块化等功能。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">数据绑定</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">在 WXML 中可以使用&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">{{}}</code>&nbsp;将&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">Page</code>&nbsp;的变量或者表达式包裹起来，实现数据绑定，举个例子：</p> 
            <pre class="prettyprint hljs dust" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="xml">// 将message的值渲染到view中
<span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span> </span><span class="hljs-template-variable" style="color: #bc6060;">{{ message }</span><span class="xml">} <span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>

// 将id的值渲染到view的id属性中
<span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span> <span class="hljs-attr">id</span>=<span class="hljs-string" style="color: #880000;">&quot;item-</span></span></span><span class="hljs-template-variable" style="color: #bc6060;">{{id}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string" style="color: #880000;">}&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>

// 根据isSelected的值，输出不同的class
<span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string" style="color: #880000;">&quot;</span></span></span><span class="hljs-template-variable" style="color: #bc6060;">{{isSelected ? 'selected' : ''}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string" style="color: #880000;">}&quot;</span>&gt;</span> HelloWorld <span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>

// 结合template，可以传入更复杂的数据
<span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">template</span> <span class="hljs-attr">is</span>=<span class="hljs-string" style="color: #880000;">&quot;objectCombine&quot;</span> <span class="hljs-attr">data</span>=<span class="hljs-string" style="color: #880000;">&quot;</span></span></span><span class="hljs-template-variable" style="color: #bc6060;">{{...article, categoty, tag: '埃隆马斯克'}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string" style="color: #880000;">}&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">template</span>&gt;</span></span></pre> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">条件渲染</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">条件渲染，适合根据数据输出不同状态的 WXML，举个例子：</p> 
            <pre class="prettyprint hljs dust" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span> <span class="hljs-attr">wx:if</span>=<span class="hljs-string" style="color: #880000;">&quot;</span></span></span><span class="hljs-template-variable" style="color: #bc6060;">{{length &gt; 5}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string" style="color: #880000;">}&quot;</span>&gt;</span> 1 <span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span> <span class="hljs-attr">wx:elif</span>=<span class="hljs-string" style="color: #880000;">&quot;</span></span></span><span class="hljs-template-variable" style="color: #bc6060;">{{length &gt; 2}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string" style="color: #880000;">}&quot;</span>&gt;</span> 2 <span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span> <span class="hljs-attr">wx:else</span>&gt;</span> 3 <span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span></span></pre> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">循环渲染</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">循环渲染，适合遍历数据输出多段 WXML，举个例子：</p> 
            <pre class="prettyprint hljs awk" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-regexp" style="color: #bc6060;">//</span> wx:<span class="hljs-keyword" style="color: #333333; font-weight: bold;">for</span> 表示需要遍历的数据
<span class="hljs-regexp" style="color: #bc6060;">//</span> wx:key 使用唯一的字段来标识，有利于提升性能
<span class="hljs-regexp" style="color: #bc6060;">//</span> wx:<span class="hljs-keyword" style="color: #333333; font-weight: bold;">for</span>-index 表示数组的下标
<span class="hljs-regexp" style="color: #bc6060;">//</span> wx:<span class="hljs-keyword" style="color: #333333; font-weight: bold;">for</span>-item 表示数组的元素
&lt;view wx:<span class="hljs-keyword" style="color: #333333; font-weight: bold;">for</span>=<span class="hljs-string" style="color: #880000;">&quot;{{[{id:1, message: 'HelloWorld1'}, {id:2, message: 'HelloWorld2'}]}}&quot;</span> 
    wx:key=<span class="hljs-string" style="color: #880000;">&quot;id&quot;</span> 
    wx:<span class="hljs-keyword" style="color: #333333; font-weight: bold;">for</span>-index=<span class="hljs-string" style="color: #880000;">&quot;idx&quot;</span> 
    wx:<span class="hljs-keyword" style="color: #333333; font-weight: bold;">for</span>-item=<span class="hljs-string" style="color: #880000;">&quot;item&quot;</span>&gt;
  {{idx}}: {{item.message}}
&lt;<span class="hljs-regexp" style="color: #bc6060;">/view&gt;</span></pre> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;"><code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">wx:key</code>&nbsp;有利于提升重新渲染时的效率，建议添加</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">模块化</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">WXML的模块化，可以让我们复用一些wxml片段，还挺重要的，举个例子：</p> 
            <pre class="prettyprint hljs javascript" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-comment" style="color: #888888;">// 引入wxml模块</span>
&lt;<span class="hljs-keyword" style="color: #333333; font-weight: bold;">import</span> src=<span class="hljs-string" style="color: #880000;">&quot;../../components/grid-article/index&quot;</span>&gt;<span class="xml">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">import</span>&gt;</span>

&lt;block wx:<span class="hljs-keyword" style="color: #333333; font-weight: bold;">for</span>=<span class="hljs-string" style="color: #880000;">&quot;{{posts}}&quot;</span> wx:<span class="hljs-keyword" style="color: #333333; font-weight: bold;">for</span>-item=<span class="hljs-string" style="color: #880000;">&quot;post&quot;</span> wx:key=<span class="hljs-string" style="color: #880000;">&quot;id&quot;</span>&gt;
    <span class="hljs-comment" style="color: #888888;">// 调用wxml模块，同时可传入数据</span>
    &lt;template is=<span class="hljs-string" style="color: #880000;">&quot;grid-article&quot;</span> data=<span class="hljs-string" style="color: #880000;">&quot;{{post}}&quot;</span>&gt;<span class="xml">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">template</span>&gt;</span>
&lt;<span class="hljs-regexp" style="color: #bc6060;">/block&gt;</span></pre> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">数据和页面的状态是一一对应的，微信小程序中，设计一份好的数据结构，对于Page和页面的代码都有很大的帮助。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">微信小程序并不支持a标签，那么多个页面之间如何跳转呢？</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">页面间的跳转</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">小程序以栈的形式维护了历史访问的所有页面，并提供了多种页面间的跳转方式；结合前文提到的App()和Page()的各个生命周期，不同的跳转方式和不同的生命周期关联，如下图：</p> 
            <div class="img_text_center" style="text-align: center; font-size: 16px; line-height: 1.7em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; display: block;" src="../upload/2016-12/1612301052462818.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">Paste_Image.png</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">举个例子，Tab 切换对应的生命周期（以 A、B 页面为 Tabbar 页面，C 是从 A 页面打开的页面，D 页面是从 C 页面打开的页面为例）</p> 
            <div class="img_text_center" style="text-align: center; font-size: 16px; line-height: 1.7em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; display: block;" src="../upload/2016-12/1612301052462821.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">Paste_Image.png</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">好了，APP和Page负责维护小程序的生命周期和数据，模板负责接受数据完成页面渲染，页面间的跳转负责将多个页面贯穿起来，那么，如何发生交互呢？接下来我们简单说一下事件。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">交互事件</h4> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">事件绑定</h4> 
            <pre class="prettyprint hljs javascript" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-comment" style="color: #888888;">// bindtap 和 catchtap的区别在于</span>
<span class="hljs-comment" style="color: #888888;">// bindtap 不会阻止事件冒泡</span>
<span class="hljs-comment" style="color: #888888;">// catchtap会冒泡事件冒泡</span>
&lt;view id=<span class="hljs-string" style="color: #880000;">&quot;tapTest&quot;</span> data-hi=<span class="hljs-string" style="color: #880000;">&quot;WeChat&quot;</span> bindtap=<span class="hljs-string" style="color: #880000;">&quot;tapName&quot;</span>&gt; Click me! <span class="xml">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>
&lt;view id=<span class="hljs-string" style="color: #880000;">&quot;tapTest&quot;</span> data-hi=<span class="hljs-string" style="color: #880000;">&quot;WeChat&quot;</span> catchtap=<span class="hljs-string" style="color: #880000;">&quot;tapName&quot;</span>&gt; Click me! <span class="xml">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>

<span class="hljs-comment" style="color: #888888;">// 绑定的函数tapName只是一个函数名称，默认接受一个event对象作为参数</span>
Page({
  <span class="hljs-attr">tapName</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>(<span class="hljs-params">event</span>) </span>{
    <span class="hljs-built_in" style="color: #397300;">console</span>.log(event)
  }
})</pre> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">接下来，另一个问题是：&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">tapName()</code>&nbsp;如何接受自定义参数呢？</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">事件传参</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">传递自定义参数主要有两种方式：</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">第一种：将参数绑定到wxml标签上，然后通过&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">event.target.dataset</code>&nbsp;获取</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">第二种：直接使用Page.data或其他数据</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">到目前为止，一个完整的小程序框架已经实现</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 小程序只有逻辑和视图两部分，而且不提供组件化解决方案</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 逻辑主要包含四个东西：两个配置文件 &amp;&amp; 两个核心函数</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 视图很简单，模板语法稍微有点不完善</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 逻辑层的数据绑定到视图层是由小程序框架自动支持，数据变化，视图自动变化</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 视图层到逻辑层的，主要通过事件的方式来实现</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 视图之间的跳转，小程序也提供了它自己的方式，并不支持a标签</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">框架有了，小程序还提供了官方组件以便快速开发，提供了API以增强应用能力。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">这块就不具体介绍了，也需要注意小程序的官方文档还在大规模的更新中，务必查看最新版</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">官方组件：&nbsp;<a style="color: #949494; text-decoration: none; transition: 0.25s; outline: none 0px; border-bottom-width: 1px; border-bottom-style: dashed; border-bottom-color: #949494; font-style: italic; font-weight: bold;" href="https://mp.weixin.qq.com/debug/wxadoc/dev/component/?t=20161222" rel="nofollow,noindex" target="_blank">https://mp.weixin.qq.com/debug/wxadoc/dev/component/?t=20161222</a></p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">官方API：&nbsp;<a style="color: #949494; text-decoration: none; transition: 0.25s; outline: none 0px; border-bottom-width: 1px; border-bottom-style: dashed; border-bottom-color: #949494; font-style: italic; font-weight: bold;" href="https://mp.weixin.qq.com/debug/wxadoc/dev/api/?t=20161222" rel="nofollow,noindex" target="_blank">https://mp.weixin.qq.com/debug/wxadoc/dev/api/?t=20161222</a></p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">微信小程序的基础知识就是以上的内容，并不复杂，边查边写都可以。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">接下来会介绍更进阶一些的内容，内容主要结合好奇心日报这个小程序项目，先看效果：</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: 26.4605px; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block; width: 550px;" src="../upload/2016-12/1612301052462817.gif" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">好奇新日报实际效果图</p> 
            </div> 
            <h3 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 1.6em; color: #333333; text-rendering: optimizeLegibility; font-size: 18px; text-indent: 1em; background-color: #fefefe;">如何设计微信小程序？</h3> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">构建系统 &amp;&amp; 目录结构</h4> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">构建系统</h4> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;"> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">由于微信小程序本身对工程化几乎没有任何的支持，所以动手搭建一份：&nbsp;<a style="color: #949494; text-decoration: none; transition: 0.25s; outline: none 0px; border-bottom-width: 1px; border-bottom-style: dashed; border-bottom-color: #949494; font-style: italic; font-weight: bold;" href="https://github.com/qixiuss/wxapp-redux-starter" rel="nofollow,noindex" target="_blank">wxapp-redux-starter</a>&nbsp;。</p> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">使用gulp进行编译构建，主要功能包括：</p> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">76 集成了&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">Redux</code>&nbsp;，数据管理更方便</p> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">76 开发过程中，使用&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">xml</code>&nbsp;取代&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">wxml</code>&nbsp;，对开发工具更友好</p> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">76 开发过程中，使用&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">less</code>&nbsp;取代&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">wxss</code>&nbsp;，功能更强大</p> 76 引入&nbsp;
             <code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">es-promise</code>&nbsp;，以便可以创建并使用&nbsp;
             <code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">Promise</code>&nbsp;
             <br /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">76 添加&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">promisify</code>&nbsp;工具函数，可以便捷的将官方&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">Api</code>&nbsp;转换成&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">Pormise</code>&nbsp;模式</p> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">76 引入&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">normalizr</code>&nbsp;，可以将数据扁平化，更方便进行数据管理</p> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">76 引入&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">babel</code>&nbsp;自动进行&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">ES2015</code>&nbsp;特性转换</p> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">76 对&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">wxml/wxss/js/img</code>&nbsp;压缩，相对开发者工具提供的压缩，会减小一丢丢体积。</p> 
            </div> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">目录结构设计</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">按照pages、components、redux、vendors/libs、images几个核心部分拆分，直接上目录。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/161230105246286.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">小程序工程目录</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">dist目录</code>&nbsp;：构建输出的文件存放到这个目录。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">src目录</code>&nbsp;：开发模式的文件，包括app、页面、组件、图片等静态资源、辅助函数库、Redux数据管理器、第三方工具库。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">gulpfile.js</code>&nbsp;：不用多说，gulp构建任务的入口文件。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">package.json</code>&nbsp;：不用多说，管理者构建任务的依赖。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">thirdPlugins</code>&nbsp;：由于小程序并不支持直接使用npm，我们可以自主拉取构建，然后拷贝到vendors里，有时候需要简单修改。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">构建系统会将src目录下的代码，编译处理后输出到dist目录，小程序开发工具只需要引入dist目录即可。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">有了构建工具，代码开发起来更舒心，但很快就遇到另外一个糟心的问题，那就是如何管理散布在各处的数据？</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">要知道，微信小程序并没有提供组件化方案，所以&nbsp;<strong style="text-indent: 0px;">把组件写成无状态组件</strong>&nbsp;特别适合，但是页面管理太多数据很凌乱，有什么办法可以将数据集中管理呢？</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">引入Redux进行数据集中管理</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">关于Redux相关的内容，之前有三篇博客详细介绍，有兴趣的建议先移步：</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">Redux整体介绍：&nbsp;<a style="color: #949494; text-decoration: none; transition: 0.25s; outline: none 0px; border-bottom-width: 1px; border-bottom-style: dashed; border-bottom-color: #949494; font-style: italic; font-weight: bold;" href="http://www.jianshu.com/p/d296a8c34936" rel="nofollow,noindex" target="_blank">Redux 入门教程，应用的状态管理器</a></p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">对State进行横向和纵向拆分设计：&nbsp;<a style="color: #949494; text-decoration: none; transition: 0.25s; outline: none 0px; border-bottom-width: 1px; border-bottom-style: dashed; border-bottom-color: #949494; font-style: italic; font-weight: bold;" href="http://www.jianshu.com/p/ba8654cb77b6" rel="nofollow,noindex" target="_blank">State设计，Redux 开发第一步</a></p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">Reducer的最佳实践：&nbsp;<a style="color: #949494; text-decoration: none; transition: 0.25s; outline: none 0px; border-bottom-width: 1px; border-bottom-style: dashed; border-bottom-color: #949494; font-style: italic; font-weight: bold;" href="http://www.jianshu.com/p/938f8121ba0f" rel="nofollow,noindex" target="_blank">Reducer 最佳实践，Redux 开发最重要的部分</a></p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">这儿就简单介绍一下，如何在微信小程序中引入Redux 以及 如何将微信小程序和Redux连接起来。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">引入Redux</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">直接在&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">thirdPlugins目录</code>&nbsp;运行&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">yarn add redux / npm install redux</code>&nbsp;，等redux安装好了之后，将&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">dist目录</code>&nbsp;的&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">redux.js/redux.min.js</code>&nbsp;拷贝到vendors目录中。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">需要进行简单的修改才能使用，将压缩版208行代码&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">(i)</code>&nbsp;改成&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">(i || {})</code>&nbsp;即可。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/1612301052462815.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">简单修改，Redux就可以正常使用</p> 
            </div> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">连接微信小程序和Redux</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">将Redux和微信小程序连接起来才会真的有用处。找了个现成的方案&nbsp;<span>charleyw/wechat-weapp-redux</span>&nbsp;，可以直接使用。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">一个完整的Redux方案如下，包括：将Store注入到App中、将state的数据和reducer的方法映射到Page中。一旦state发生变化，Page.data也会更新，进而触发页面的重新渲染。</p> 
            <pre class="prettyprint hljs javascript" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-comment" style="color: #888888;">// APP的逻辑</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">import</span> { createStore, applyMiddleware, combineReducers } <span class="hljs-keyword" style="color: #333333; font-weight: bold;">from</span> <span class="hljs-string" style="color: #880000;">'./vendors/redux.js'</span>;
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">import</span> thunk <span class="hljs-keyword" style="color: #333333; font-weight: bold;">from</span> <span class="hljs-string" style="color: #880000;">'./vendors/redux-thunk.js'</span>;
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">import</span> { Provider } <span class="hljs-keyword" style="color: #333333; font-weight: bold;">from</span> <span class="hljs-string" style="color: #880000;">'./vendors/weapp-redux.js'</span>;

<span class="hljs-comment" style="color: #888888;">// import reducers</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">import</span> { rootReducer } <span class="hljs-keyword" style="color: #333333; font-weight: bold;">from</span> <span class="hljs-string" style="color: #880000;">'./redux/reducer.js'</span>;

<span class="hljs-comment" style="color: #888888;">// 从Storage读取数据</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> entities = wx.getStorageSync(<span class="hljs-string" style="color: #880000;">'entities'</span>) || {};

<span class="hljs-keyword" style="color: #333333; font-weight: bold;">const</span> store = createStore(
    rootReducer, {
        <span class="hljs-comment" style="color: #888888;">// 将读取的数据注入到store中</span>
        entities: entities
    },
    applyMiddleware(
        thunk
    )
);

<span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> appConfig = {
    <span class="hljs-attr">onLaunch</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>() </span>{},

    <span class="hljs-attr">onHide</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>() </span>{
        <span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> state = store.getState(),
            cacheEntities = {};

        <span class="hljs-comment" style="color: #888888;">// 体积大于2M，直接清空，防止缓存占用过大体积</span>
        <span class="hljs-keyword" style="color: #333333; font-weight: bold;">if</span> (sizeof(state.entities) &lt;= <span class="hljs-number" style="color: #880000;">2</span> * <span class="hljs-number" style="color: #880000;">1024</span> * <span class="hljs-number" style="color: #880000;">1024</span>) {
            cacheEntities = state.entities;
        }

        <span class="hljs-comment" style="color: #888888;">// 退出时将entities缓存下来</span>
        wx.setStorageSync(<span class="hljs-string" style="color: #880000;">'entities'</span>, cacheEntities);
    }
};

App(Provider(store)(appConfig));


<span class="hljs-comment" style="color: #888888;">// Page的逻辑</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">import</span> { connect } <span class="hljs-keyword" style="color: #333333; font-weight: bold;">from</span> <span class="hljs-string" style="color: #880000;">'../../vendors/weapp-redux.js'</span>;

<span class="hljs-keyword" style="color: #333333; font-weight: bold;">import</span> { fetchArticleDetail } <span class="hljs-keyword" style="color: #333333; font-weight: bold;">from</span> <span class="hljs-string" style="color: #880000;">'../../redux/models/articles.js'</span>;

<span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> pageConfig = {
    <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">id</span>: <span class="hljs-number" style="color: #880000;">0</span>,
        <span class="hljs-attr">postsHash</span>: {}
    },
    <span class="hljs-attr">onLoad</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>(<span class="hljs-params">params</span>) </span>{
        <span class="hljs-keyword" style="color: #333333; font-weight: bold;">var</span> me = <span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>,
            { id, postsHash } = me.data;

        me.fetchArticleDetail(id, <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>() </span>{}, <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>() </span>{});
    }
}

<span class="hljs-comment" style="color: #888888;">// 考虑到列表页已经获取到部分数据</span>
<span class="hljs-comment" style="color: #888888;">// 为了在详情页第一时间利用这些数据，我们将params传入</span>
<span class="hljs-comment" style="color: #888888;">// 防止以后需要用data的数据，我们将data也一并传入</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> mapStateToData = <span class="hljs-function">(<span class="hljs-params">state, params, data</span>) =&gt;</span> {
    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">return</span> {
        <span class="hljs-attr">id</span>: params.id,
        <span class="hljs-attr">postsHash</span>: state.entities.posts
    }
};

<span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> mapDispatchToPage = <span class="hljs-function"><span class="hljs-params">dispatch</span> =&gt;</span> ({
    <span class="hljs-attr">fetchArticleDetail</span>: <span class="hljs-function">(<span class="hljs-params">id, callback, errorCallback</span>) =&gt;</span> dispatch(fetchArticleDetail(id, callback, errorCallback)),
});

pageConfig = connect(mapStateToData, mapDispatchToPage)(pageConfig)
Page(pageConfig);</pre> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">需要注意的是，为了保证第一时间能拿到数据，我们对&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">wechat-weapp-redux/src/connect.js</code>&nbsp;做了优化调整，修改的地方如下</p> 
            <pre class="prettyprint hljs kotlin" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-comment" style="color: #888888;">// 修改了以下两个函数</span>
<span class="hljs-comment" style="color: #888888;">// 可以对照原项目修改，也可以直接拿我的模板项目使用</span>
function handleChange(options) {
    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">if</span> (!<span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>.unsubscribe) {
        <span class="hljs-keyword" style="color: #333333; font-weight: bold;">return</span>
    }

    const state = <span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>.store.getState();
    <span class="hljs-comment" style="color: #888888;">// 将data也一并传入</span>
    const mappedState = mapState(state, options, <span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>.<span class="hljs-keyword" style="color: #333333; font-weight: bold;">data</span>);
    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">if</span> (!<span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>.<span class="hljs-keyword" style="color: #333333; font-weight: bold;">data</span> || shallowEqual(<span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>.<span class="hljs-keyword" style="color: #333333; font-weight: bold;">data</span>, mappedState)) {
        <span class="hljs-keyword" style="color: #333333; font-weight: bold;">return</span>;
    }
    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>.setData(mappedState)
}

function onLoad(options) {
    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>.store = app.store;
    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">if</span> (!<span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>.store) {
        warning(<span class="hljs-string" style="color: #880000;">&quot;Store对象不存在!&quot;</span>)
    }
    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">if</span> (shouldSubscribe) {
        <span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>.unsubscribe = <span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>.store.subscribe(handleChange.bind(<span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>, options))
        <span class="hljs-comment" style="color: #888888;">// 第一次处理的时候也传入options</span>
        handleChange.apply(<span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>, [options])
    }
    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">if</span> (typeof _onLoad === <span class="hljs-string" style="color: #880000;">'function'</span>) {
        _onLoad.call(<span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>, options)
    }
}</pre> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">引入Redux的优势</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">引入Redux的好处在于可以集中管理数据，并且让Page的代码保持绝对简单，让所有的组件都变成简单可复用的无状态组件。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">此外，Redux还让离线缓存更方便，数据复用更简单。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">引入Redux解决了数据散布各处的问题，参考Redux的管理思路，我们构思了一套简单组件化解决方案：假设我们把所有的组件都设计成无状态组件，而组件的数据来源是Page.data，那么我们是否也可以将组件数据的管理抽离到一个单独的文件中呢？接下来讲讲我们使用的简单的组件化解决方案。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">简单的组件化解决方案</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">这份组件化解决方案的核心就在于把组件的关联数据集中起来管理，只暴露出默认数据和数据的操作函数。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">比如好奇心日报的详情页有个Toolbar，该Toolbar并不复杂，主要提供返回和点赞功能，其中点赞功能只对文章详情有效，研究所详情页会将点赞功能隐藏。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/161230105246287.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">Toolbar组件</p> 
            </div> 
            <pre class="prettyprint hljs javascript" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-comment" style="color: #888888;">// components/toolbar/index.js 文件</span>
<span class="hljs-comment" style="color: #888888;">// 仅提供默认值，不需要和page中的数据保持同步</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> defaultData = {
    <span class="hljs-attr">isPraised</span>: <span class="hljs-literal" style="color: #78a960;">false</span>,
    <span class="hljs-attr">praiseCount</span>: <span class="hljs-number" style="color: #880000;">0</span>,
    <span class="hljs-attr">showPraiseIcon</span>: <span class="hljs-literal" style="color: #78a960;">false</span>,
};
<span class="hljs-comment" style="color: #888888;">// 切换点赞状态</span>
<span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span> <span class="hljs-title" style="color: #880000; font-weight: bold;">togglePraise</span>() </span>{
    <span class="hljs-comment" style="color: #888888;">// 本质上是修改Page.data中的toolbarData</span>
}
<span class="hljs-comment" style="color: #888888;">// 返回上一级</span>
<span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span> <span class="hljs-title" style="color: #880000; font-weight: bold;">navigateToBack</span>(<span class="hljs-params">wx</span>) </span>{
    wx.navigateBack({ <span class="hljs-attr">delta</span>: <span class="hljs-number" style="color: #880000;">1</span> });
}
<span class="hljs-built_in" style="color: #397300;">module</span>.exports = {
    defaultData,

    togglePraise,
    navigateToBack
}

<span class="hljs-comment" style="color: #888888;">// pages/articles/show.js 文件</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">import</span> Toolbar <span class="hljs-keyword" style="color: #333333; font-weight: bold;">from</span> <span class="hljs-string" style="color: #880000;">'../../components/toolbar/index.js'</span>;

<span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> pageConfig = {
    <span class="hljs-attr">data</span>: {
        <span class="hljs-comment" style="color: #888888;">// 其他数据</span>
        id: <span class="hljs-number" style="color: #880000;">0</span>,
        <span class="hljs-comment" style="color: #888888;">// Toolbar数据，单独的一份数据，便于维护</span>
        toolbarData: Toolbar.defaultData
    },
    <span class="hljs-comment" style="color: #888888;">// 点赞或者取消赞</span>
    togglePraise: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>() </span>{
        <span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> me = <span class="hljs-keyword" style="color: #333333; font-weight: bold;">this</span>;

        Toolbar.togglePraise.call(me);
    }
}

<span class="hljs-comment" style="color: #888888;">// 这儿的组件化并不是真正的组件化</span>
<span class="hljs-comment" style="color: #888888;">// 而是将组件相关的逻辑和函数抽离到单独的文件中，保证Page代码清晰。</span>
<span class="hljs-comment" style="color: #888888;">// 同时也为这部分组件逻辑复用提供了可能。</span>
<span class="hljs-comment" style="color: #888888;">// 本质上来说，抽离出的组件都是“操作Page.data的工具函数”，他们也是纯函数，和“操作state的reducer”类似。</span></pre> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">这种Redux的组件化解决方案既简单又好用，保持一定的代码规范即可。这样设计当然是为了复用，同时也让Page的逻辑保持极度精简。</p> 
            <h3 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 1.6em; color: #333333; text-rendering: optimizeLegibility; font-size: 18px; text-indent: 1em; background-color: #fefefe;">开发中遇到了哪些难点 &amp;&amp; 微信小程序有多少坑？</h3> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">微信小程序目前的确算不上公测的版本，开发者工具不完善、真机表现和开发环境差异很大、部分组件性能较差、部分功能有缺陷，只有经历了这些大坑，才会真的知道你有多“爱”微信小程序。这儿总结了开发中的难点以及微信小程序中遇到的比较明显的坑。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">富文本解析</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">微信小程序并不支持HTML标签，所以对于富文本解析来说，难度较大，而且有些功能还没有办法实现，比如：iframe视频、连接跳转等</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">这块功能建议由后台统一转换，如果非得前端转换，建议参考下面的思路。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">非常感谢&nbsp;<a style="color: #949494; text-decoration: none; transition: 0.25s; outline: none 0px; border-bottom-width: 1px; border-bottom-style: dashed; border-bottom-color: #949494; font-style: italic; font-weight: bold;" href="https://github.com/icindy/wxParse" rel="nofollow,noindex" target="_blank">wxParse</a>&nbsp;这款组件，替我省了不少时间。推荐大家使用，期间遇到一些问题，也分享给大家。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 wxParse 默认层级只支持10层html嵌套，如果想要支持更深的层级，在wxParse.xml复制几份template即可。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 wxParse 提供了图片加载成功的回调&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">wxParseImgLoad</code>&nbsp;，很好用。但如果富文本中的图片已经预设宽高比，那么可以不用依赖该回调，在html2jons.js中根据屏幕宽度直接计算出图片高度，先占位，可以避免页面频繁抖动的问题。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 如果你的富文本中有自定义模块，对wxParse.xml中的template进行改造即可。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/161230105246288.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">自定义模块样式</p> 
            </div> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">数据扁平化</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">具体如何扁平化，请移步上一篇博客&nbsp;<a style="color: #949494; text-decoration: none; transition: 0.25s; outline: none 0px; border-bottom-width: 1px; border-bottom-style: dashed; border-bottom-color: #949494; font-style: italic; font-weight: bold;" href="http://www.jianshu.com/p/ba8654cb77b6" rel="nofollow,noindex" target="_blank">State设计，Redux 开发第一步</a>&nbsp;。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">这儿只简单介绍下扁平化应用场景：</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">好奇心日报的研究所是三级表结构：&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">papers &gt; questions &gt; options</code>&nbsp;，后台返回的数据是三级嵌套数据，如果想要修改option.selected字段，需要三级嵌套循环！如果想要获取所有选中的option，需要三级嵌套循环！</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">页面展现速度优化</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">数据复用，比如复用列表页的数据，可以让详情页的标题等字段第一时间呈现出来。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">离线缓存，同样可以让列表页和详情页第一时间呈现出来，甚至有可能减少请求数量。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">无论是数据复用还是离线缓存，配合数据扁平化，都非常好用。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">小程序默认设置代理，会和Shadowsocks等VPN冲突（最新版已修复）</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">解决方法很简单，设置微信小程序不使用代理；或者临时关闭VPN即可。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">最新版开发者工具已经解决该问题。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">最新版微信小程序移除了对Promise的支持。</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">开发者自行引入兼容库即可，推荐&nbsp;<a style="color: #949494; text-decoration: none; transition: 0.25s; outline: none 0px; border-bottom-width: 1px; border-bottom-style: dashed; border-bottom-color: #949494; font-style: italic; font-weight: bold;" href="https://github.com/stefanpenner/es6-promise" rel="nofollow,noindex" target="_blank">es6-promise</a>&nbsp;。使用的时候，直接引入Promise即可。</p> 
            <pre class="prettyprint hljs javascript" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-comment" style="color: #888888;">// 引入Promise</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">import</span> <span class="hljs-built_in" style="color: #397300;">Promise</span> <span class="hljs-keyword" style="color: #333333; font-weight: bold;">from</span> <span class="hljs-string" style="color: #880000;">'../vendors/es6-promise.js'</span>;

<span class="hljs-comment" style="color: #888888;">// 用Promise封装wx.request网络请求</span>
<span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span> <span class="hljs-title" style="color: #880000; font-weight: bold;">request</span>(<span class="hljs-params">method = <span class="hljs-string" style="color: #880000;">'GET'</span></span>) </span>{
    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">return</span> <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>(<span class="hljs-params">url, data = {}</span>) </span>{
        <span class="hljs-keyword" style="color: #333333; font-weight: bold;">return</span> <span class="hljs-keyword" style="color: #333333; font-weight: bold;">new</span> <span class="hljs-built_in" style="color: #397300;">Promise</span>(<span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>(<span class="hljs-params">resolve, reject</span>) </span>{
            wx.request({
                url,
                data,
                method,
                <span class="hljs-attr">header</span>: {
                    <span class="hljs-string" style="color: #880000;">'Content-Type'</span>: <span class="hljs-string" style="color: #880000;">'application/json'</span>
                },
                <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>(<span class="hljs-params">res</span>) </span>{
                    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">let</span> { statusCode, errMsg, data } = res;

                    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">if</span> (statusCode == <span class="hljs-number" style="color: #880000;">200</span> &amp;&amp; data.meta &amp;&amp; data.meta.status == <span class="hljs-number" style="color: #880000;">200</span>) {
                        resolve(data.response);
                    } <span class="hljs-keyword" style="color: #333333; font-weight: bold;">else</span> {
                        reject(<span class="hljs-string" style="color: #880000;">'网路请求错误，请稍后再试~'</span>);
                    }
                },
                <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-keyword" style="color: #333333; font-weight: bold;">function</span>(<span class="hljs-params">err</span>) </span>{
                    reject(<span class="hljs-string" style="color: #880000;">'网路请求不符合规范，请检查域名是否符合要求~'</span>);
                }
            });
        })
    }
}
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">export</span> <span class="hljs-keyword" style="color: #333333; font-weight: bold;">const</span> GET = request(<span class="hljs-string" style="color: #880000;">'GET'</span>);
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">export</span> <span class="hljs-keyword" style="color: #333333; font-weight: bold;">const</span> POST = request(<span class="hljs-string" style="color: #880000;">'POST'</span>);
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">export</span> <span class="hljs-keyword" style="color: #333333; font-weight: bold;">const</span> PUT = request(<span class="hljs-string" style="color: #880000;">'PUT'</span>);
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">export</span> <span class="hljs-keyword" style="color: #333333; font-weight: bold;">const</span> DELETE = request(<span class="hljs-string" style="color: #880000;">'DELETE'</span>);

<span class="hljs-comment" style="color: #888888;">// 用Promise封装小程序的其他API</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">export</span> <span class="hljs-keyword" style="color: #333333; font-weight: bold;">const</span> promisify = <span class="hljs-function">(<span class="hljs-params">api</span>) =&gt;</span> {
    <span class="hljs-keyword" style="color: #333333; font-weight: bold;">return</span> <span class="hljs-function">(<span class="hljs-params">options, ...params</span>) =&gt;</span> {
        <span class="hljs-keyword" style="color: #333333; font-weight: bold;">return</span> <span class="hljs-keyword" style="color: #333333; font-weight: bold;">new</span> <span class="hljs-built_in" style="color: #397300;">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
            api(<span class="hljs-built_in" style="color: #397300;">Object</span>.assign({}, options, { <span class="hljs-attr">success</span>: resolve, <span class="hljs-attr">fail</span>: reject }), ...params);
        });
    }
}
<span class="hljs-comment" style="color: #888888;">// 使用</span>
<span class="hljs-keyword" style="color: #333333; font-weight: bold;">const</span> getLocation = promisify(wx.getLocation);</pre> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">不清楚微信为何会临时移除Promise，统一内置不也挺好？</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">小程序不能实现完美的fullpage效果，会出现上下拉扯的感觉（最新版预计已修复，待实际验证）。</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">小程序一旦滚动顶部或者底部，继续滑动的时候，就会出现拉扯现象。而这个拉扯现象还无法禁止。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">最新版可以对页面配置disableScroll，预计可以修复这个问题，待实际验证。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/1612301052462813.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">fullpage效果</p> 
            </div> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">swiper组件不支持轮播，性能差，文档模糊（部分最新版已修复）</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 swiper组件之前并不支持轮播，最新版已修复</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 swiper组件之前是通过设置left属性来实现动画，在小米5、华为V8等高端等安卓机上能够感受到明显的卡顿，当然原因是X5内核引起的。最新版已修复，换成了transform，性能有一定的提升。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/1612301052462812.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">swiper性能提升</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 文档并未标记可以垂直轮播，但其实是可以的。</p> 
            <pre class="prettyprint hljs javascript" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-comment" style="color: #888888;">// 简单设置vertical即可，但由于官方文档并未备注，尽量不要使用。可以自己开发一个swiper组件。</span>
&lt;swiper vertical=<span class="hljs-string" style="color: #880000;">&quot;true&quot;</span>&gt;<span class="xml">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">swiper</span>&gt;</span></pre> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 swiper组件的小圆点其实是可以定制化的，但是官方文档并未说明，而且开发者工具也看不出来，只有鼠标hover到元素上的时候可以看到相关的class，简单猜测一下，最后分析出来它的实现方式。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/161230105246285.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">swiper圆点的实现原理</p> 
            </div> 
            <pre class="prettyprint hljs scss" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-comment" style="color: #888888;">// 圆点的父元素，用来控制圆点间的间距</span>
<span class="hljs-selector-class" style="color: #880000;">.wx-swiper-dot</span> {
    <span class="hljs-attribute" style="color: #333333; font-weight: bold;">width</span>: <span class="hljs-number" style="color: #880000;">30</span>rpx;
    <span class="hljs-comment" style="color: #888888;">// 圆点，可以通过font-size修改圆点的大小，color修改圆点的颜色</span>
    &amp;:before {
        <span class="hljs-attribute" style="color: #333333; font-weight: bold;">width</span>: <span class="hljs-number" style="color: #880000;">100%</span>;
        <span class="hljs-attribute" style="color: #333333; font-weight: bold;">display</span>: inline-block;
        <span class="hljs-attribute" style="color: #333333; font-weight: bold;">font-size</span>: <span class="hljs-number" style="color: #880000;">56</span>rpx;
        <span class="hljs-attribute" style="color: #333333; font-weight: bold;">content</span>: <span class="hljs-string" style="color: #880000;">'圆点编码'</span>;
    }
    <span class="hljs-comment" style="color: #888888;">// active状态的圆点</span>
    &amp;<span class="hljs-selector-class" style="color: #880000;">.wx-swiper-dot-active</span> {
        &amp;:before {
            <span class="hljs-attribute" style="color: #333333; font-weight: bold;">color</span>: <span class="hljs-number" style="color: #880000;">#ffc81f</span>;
        }
    }
}</pre> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">小程序WXSS的font-face的url不接受路径作为参数</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">可以将字体文件转换为base64，然后引用。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/161230105246282.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">font-face接受base64，不接受url</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">同样，如果想要使用iconfont，也可以使用类似的方案，将iconfont字体文件base64之后再引入。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">小程序的margin表现有问题（最新版已经修复）</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">之前发生margin折叠的时候，会取小的那个值。会导致底部留白等设置失效。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">canvas问题</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">canvas并没有深入研究，目前的发现的问题主要是两个，如下图标记：</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 层级问题，canvas总是会盖在其他元素上面。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 支持度不好，在小米5、iPhone5s画图会出现畸形。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: 26.4605px; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block; width: 550px;" src="../upload/2016-12/1612301052462822.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">canvas绘制饼图有Bug</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">最后通过CSS3的方式绘制饼图</p> 
            <pre class="prettyprint hljs xml" style="padding: 0.5em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; color: #444444; border-radius: 4px; margin: 0px 0px 1.5em; font-size: 14px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; border: none; overflow-x: auto; background-color: #f6f6f6;"><span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">template</span> <span class="hljs-attr">name</span>=<span class="hljs-string" style="color: #880000;">&quot;pie&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string" style="color: #880000;">&quot;com-pie&quot;</span>&gt;</span>
        <span class="hljs-comment" style="color: #888888;">&lt;!-- 小于50% --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string" style="color: #880000;">&quot;percent-1&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string" style="color: #880000;">&quot;transform: rotate(0.4turn);&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string" style="color: #880000;">&quot;percent-2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>
        <span class="hljs-comment" style="color: #888888;">&lt;!-- 大于50% --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string" style="color: #880000;">&quot;percent-1&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string" style="color: #880000;">&quot;transform: rotate(0.5turn);&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string" style="color: #880000;">&quot;percent-2&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string" style="color: #880000;">&quot;opacity:1; transform: rotate(0.3turn);&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name" style="color: #333333; font-weight: bold;">template</span>&gt;</span>

.com-pie {
    position: relative;
    z-index: 0;
    display: inline-block;
    width: 100rpx;
    height: 100rpx;
    line-height: 100rpx;
    border-radius: 50%;
    color: #000;
    background-color: #ebebeb;
    background-image: linear-gradient(to right, transparent 50%, #cccccc 0);
    overflow: hidden;
    .percent-1,
    .percent-2 {
        position: absolute;
        top: 0;
        width: 60%;
        height: 100%;
        left: 50%;
        transform-origin: center left;
    }
    .percent-1 {
        background-color: inherit;
        z-index: -2;
    }
    .percent-2 {
        height: 110%;
        opacity: 0;
        z-index: -1;
        background-color: #cccccc;
    }
    &amp;.selected {
        background-color: #ffe9a5;
        background-image: linear-gradient(to right, transparent 50%, #ffc81f 0);
        .percent-2 {
            background-color: #ffc81f;
        }
    }
}</pre> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">微信小程序的rpx会出现精度问题</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">设置margin-left/margin-right负值，可能导致页面能够左右晃动。&nbsp;<strong style="text-indent: 0px;">猜测</strong>&nbsp;是rpx导致的精度问题。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">rpx本质上会转换为px，在不同宽度的设备上，实际的rpx值会转换为带小数的px值，四舍五入可能出现问题，之前使用rem布局的时候在QQ浏览器遇到过类似的问题。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/1612301052462820.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">rpx精度问题</p> 
            </div> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">wx.request表现不合理，并且携带特殊字符会报错</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 请求返回404错误，也会触发success回调。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">不要想当然的认为会触发fail回调，判断一个请求成功或失败，请使用wx.request返回的状态来判断。只有不符合规范的请求，才会触发fail。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/161230105246284.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">wx.request回调</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 请求的数据中，如果有特殊字符（比如\u2820），会报错。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">只会在真机上出现，开发者工具没毛病。估计会有更多的特殊字符会导致这个问题。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: 26.4605px; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block; width: 550px;" src="../upload/2016-12/1612301052462816.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">特殊字符导致wx.request挂掉</p> 
            </div> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">开发者工具，切换页面的时候，有时候wxml不会同步切换</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">希望微信什么时候能解决一下。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">微信小程序给wxml模板赋值的时候，解构放到前面可能会报错</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">最新版会遇到这个问题，老版本虽然不会报错，但是在部分真机上会出现问题。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">原因未知，遇到这个问题的朋友可以考虑绕过去。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/1612301052462811.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">解构赋值导致报错</p> 
            </div> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">微信小程序的scroll-view暴露的bindscroll函数并不能实时监听</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">依赖实时获取滚动位置的功能不能实现。比如滚动时toolbar的动态隐藏和显示。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">最新版开发工具不能关掉自动刷新</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">微信小程序的会默认监听文件变化，然后自动刷新。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">但不足的是每次都是全量刷新，而不是模块的热替换，反而会影响开发速度，尤其对于喜欢频繁Command + S的开发者，你会发现你的小程序在不断的刷新。建议关闭。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: 26.4605px; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block; width: 550px;" src="../upload/2016-12/1612301052462819.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">建议关闭监听文件变化</p> 
            </div> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">但最新版开发者工具，不勾选也会自动刷新。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">微信小程序不支持&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-size: 14px; background-color: #f7f7f9;">requestAnimationFrame</code></h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">微信小程序不支持&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">requestAnimationFrame</code>&nbsp;，所以部分性能优化做不了。不支持的原因未知。</p> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">Page.onload函数可以接受参数</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">该参数是有URL决定的，也就是URL携带的参数。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">官方文档这块写的有点混淆，特意拿出来说一下。举个例子：url中传递的时候&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">id=1</code>，那么&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">option.id=1</code>&nbsp;，而不是什么&nbsp;<code style="padding: 2px 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 3px; border: none; font-weight: 600; font-size: 14px; background-color: #f7f7f9;">option.query</code>&nbsp;。</p> 
            <div style="font-size: 16px; line-height: 27.2px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">
             <img class="alignCenter" style="max-width: 96%; height: auto; vertical-align: middle; border-style: none; margin: 0px auto 10px; text-align: center; display: block;" src="../upload/2016-12/161230105246289.png" alt="" /> 
             <p style="margin: 0px 0px 0.75em; line-height: 1.7em; text-indent: 1em;">Page.onload参数文档描述混淆</p> 
            </div> 
            <h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe;">真机上有概率卡死，目前不确定是代码问题还是小程序的问题。</h4> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">有遇到类似问题的朋友欢迎指出。</p> 
            <h3 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 1.6em; color: #333333; text-rendering: optimizeLegibility; font-size: 18px; text-indent: 1em; background-color: #fefefe;">总结说点啥？</h3> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">本文主要围绕微信小程序的基础知识、如何设计微信小程序、开发过程中遇到的问题三个方面介绍。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">微信小程序的基础知识主要包括：</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 两种配置文件 &amp;&amp; 两个核心函数</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 WXML模板语法，页面渲染</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 页面间的跳转</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 交互事件</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 官方组件和官方API</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">如何设计微信小程序的内容主要包括：</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 构建系统 &amp;&amp; 目录结构</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 引入Redux进行数据集中管理</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">76 简单的组件化解决方案</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">最后还介绍开发过程中遇到的难点 以及 微信小程序的大小坑。</p> 
            <p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe;">微信小程序本身并不复杂，开发过程却比较艰辛，尤其是第一次在真机上运行的时候，觉得这个世界恶意满满。</p>
           </div> 
          </div> 
          <div style="padding:0 15px"> 
           <ul id="digg" class="digg"> 
            <li class="digg1">0</li> 
            <li class="digg2"><a href="###" onclick="iwms.diggIt(this,iwms.aId)">顶一下</a></li> 
           </ul> 
          </div> 
          <div style="padding-right:20px;text-align:right;clear:both"> 
           <div style="width:240px;"> 
            <wb:share-button appkey="6EgHA9" addition="full" type="button" ralateuid="2841727664"></wb:share-button>
           </div> 
           <a href="###" onmouseover="fav.disp(this)" class="fav">收藏</a> 
           <script type="text/javascript">mail.smtp=true;</script> 
           <a href="###" onclick="mail.disp(this)" class="mail">推荐</a> 
           <a href="javascript:doPrint()" class="print">打印</a> 
           <script type="text/javascript">editLink(2850,"admin")</script> | 录入：
           <a href="../memberProfile.aspx?id=1" target="_blank">admin</a> | 阅读：
           <span id="news_hits"></span> 次 
          </div> 
          <div class="nearNews"> 
           <div class="prevNews">
            <a href="../YuanMaXiaZai/2845.html">源码解析--YYCache</a>
           </div> 
           <div class="nextNews">
            <a href="../YuanMaXiaZai/2891.html">最全面的深度学习自学资源汇总</a>
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="bl"></div> 
        <div class="br"></div> 
        <div class="bm"></div> 
       </div> 
       <div style="margin:0 0 3px 0;"> 
        <wb:bulkfollow uids="3957339731,2509905220,3967699952,3292475223,3965601723,2841727664,5041592143,1750765385,2509964282" height="250" type="1" width="695" count="9" color="C2D9F2,FFFFFF,0082CB,666666" titlebar="n" info="n"></wb:bulkfollow> 
       </div> 
       <div class="mframe mR"> 
        <div class="tl"></div> 
        <div class="tr"></div> 
        <div class="tm"> 
         <span class="tt">相关新闻</span> &nbsp; &nbsp; &nbsp; 
        </div> 
        <div class="wrapper"> 
         <div class="ml"></div> 
         <div class="mr"></div> 
         <div class="mm"> 
         </div> 
        </div> 
        <div class="bl"></div> 
        <div class="br"></div> 
        <div class="bm"></div> 
       </div> 
       <div class="mframe mR"> 
        <div class="tl"></div> 
        <div class="tr"></div> 
        <div class="tm"> 
         <span class="tt">本文评论</span> 　　
         <a href="../rm2850.aspx" target="_blank">查看全部评论</a> 
         <span class="gray">(0)</span> 
        </div> 
        <div class="wrapper"> 
         <div class="ml"></div> 
         <div class="mr"></div> 
         <div class="mm"> 
          <table width="100%" style="margin:6px"> 
           <tbody>
            <tr>
             <td width="300"> 
              <form action="" name="fmRemarkSt" onsubmit="return remark.post(this);"> 
               <input type="hidden" value="1" name="face" /> 表情： 
               <img src="../pic/b.gif" alt="表情" class="face1" style="cursor:pointer;vertical-align:middle" onclick="remark.dispFace(this)" onmouseout="remark.hideFace()" /> 姓名： 
               <input type="text" name="username" value="" maxlength="15" style="width:60px" class="inputbg" /> 
               <input type="checkbox" id="rmAnonymitySt" onclick="remark.anony(this)" />
               <label for="rmAnonymitySt">匿名</label> 字数 
               <input type="text" id="bodyLen" size="3" readonly="readonly" style="border-width:0;background:transparent;vertical-align:middle" value="0" /> 
               <br /> 点评： 
               <textarea name="body" cols="40" rows="4" onkeydown="remark.dispLen(this)" onkeyup="remark.handle(event,this);remark.dispLen(this)" style="width:20em;height:60px;margin:3px 0;overflow-y:auto"></textarea> 
               <br /> 　　　
               <input type="checkbox" checked="checked" id="rmAgreeSt" />
               <label for="rmAgreeSt">同意评论声明</label> 　　　
               <button type="submit" style="width:50px">发表</button> 
              </form> </td>
             <td> 评论声明 
              <ul style="list-style-type:square;margin:5px 0 0 1em;padding:0"> 
               <li>尊重网上道德，遵守中华人民共和国的各项有关法律法规</li> 
               <li>承担一切因您的行为而直接或间接导致的民事或刑事法律责任</li> 
               <li>本站管理人员有权保留或删除其管辖留言中的任意内容</li> 
               <li>本站有权在网站内转载或引用您的评论</li> 
               <li>参与本评论即表明您已经阅读并接受上述条款</li> 
              </ul> </td>
            </tr> 
           </tbody>
          </table> 
          <script type="text/javascript" src="../inc/remark.js"></script> 
          <script type="text/javascript">
			remark.maxSize=200;
			remark.minSize=2;
			remark.sourceEle=$(document.fmRemarkSt).find("button").get(0);
			iwms.vCode="D654BBC9";
			iwms.user.name.length==0 ? $i("rmAnonymitySt").click() : $i("rmAnonymitySt").form.username.value=iwms.user.name;
		</script> 
          <div class="reCont" id="reContainer"></div> 
         </div> 
        </div> 
        <div class="bl"></div> 
        <div class="br"></div> 
        <div class="bm"></div> 
       </div> </td>
      <td width="250" valign="top"> 
       <div class="lframe"> 
        <div class="tl"></div> 
        <div class="tr"></div> 
        <div class="tm"> 
         <span class="tt">Digg排行</span> 
        </div> 
        <div class="wrapper"> 
         <div class="ml"></div> 
         <div class="mr"></div> 
         <div class="mm"> 
          <ul class="dnl"> 
           <li><a href="../YuanMaXiaZai/65.html" target="_blank" class="highlight"><span class="diggN">3</span>10 种机器学习算法的要点 附代码</a></li> 
           <li><a href="../YuanMaXiaZai/2756.html" target="_blank" class="highlight" title="给深度学习入门者Python快速教程 - 基础篇"><span class="diggN">2</span>给深度学习入门者Python快速教程</a></li> 
           <li><a href="../YuanMaXiaZai/1425.html" target="_blank" class="highlight" title="干货分享 | 深度学习零基础进阶大法！"><span class="diggN">2</span>干货分享 | 深度学习零基础进阶</a></li> 
           <li><a href="../YuanMaXiaZai/1789.html" target="_blank" class="highlight" title="零基础入门深度学习(四)：循环神经网络"><span class="diggN">1</span>零基础入门深度学习(四)：循环神</a></li> 
           <li><a href="../YuanMaXiaZai/779.html" target="_blank" class="highlight" title="人脸检测发展：从VJ到深度学习（上）"><span class="diggN">1</span>人脸检测发展：从VJ到深度学习（</a></li> 
           <li><a href="../YuanMaXiaZai/2891.html" target="_blank" class="highlight" title="最全面的深度学习教程自学资源汇总"><span class="diggN">0</span>最全面的深度学习教程自学资源汇</a></li> 
           <li><a href="../YuanMaXiaZai/2850.html" target="_blank" class="highlight"><span class="diggN">0</span>微信小程序实战，从入门到弃坑</a></li> 
           <li><a href="../YuanMaXiaZai/2845.html" target="_blank"><span class="diggN">0</span>源码解析--YYCache</a></li> 
           <li><a href="../YuanMaXiaZai/2844.html" target="_blank" title="协作翻译 | Scala 中 10 个超赞的集合操作函数"><span class="diggN">0</span>协作翻译 | Scala 中 10 个超赞</a></li> 
           <li><a href="../YuanMaXiaZai/2832.html" target="_blank"><span class="diggN">0</span>深入浅出朴素贝叶斯理论</a></li> 
          </ul> 
         </div> 
        </div> 
        <div class="bl"></div> 
        <div class="br"></div> 
        <div class="bm"></div> 
       </div> 
       <div class="wrapper"> 
        <div id="nav_keleyi_com" style="height:477px;position:relative;top:0;width:250px;"> 
         <img src="../../upload/sys/top/kjtt.jpg" alt="" style="width:250px;height:477px;" /> 
        </div> 
       </div> <script type="text/javascript">
	      function menuFixed(id) {
	          var obj = document.getElementById(id);
	          var _getHeight = obj.offsetTop;

	          window.onscroll = function() {
	              changePos(id, _getHeight);
	          }
	      }
	      function changePos(id, height) {
	          var obj = document.getElementById(id);
	          var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
	          if (scrollTop < height) {
	              obj.style.position = 'relative';
	          } else {
	              obj.style.position = 'fixed';
	          }
	      }
                </script> <script type="text/javascript">
                    window.onload = function() {
                        menuFixed('nav_keleyi_com');
                    }
                </script> </td>
     </tr> 
    </tbody>
   </table> 
   <div id="footer"> 
    <p style="text-align: center; line-height: 150%; margin-top: 7px;">版权所有:&copy; 2016&nbsp;<a href="http://www.cstor.cn/" target="_blank">南京云创大数据科技股份有限公司</a>（股票代码：835305），保留一切权利。<a href="http://www.miibeian.gov.cn" target="_blank">苏ICP备11060547号-19</a>&nbsp;</p> 
    <p style="text-align: center; line-height: 150%; margin-top: 7px;">本站所转载、链接、引用及翻译的内容等，其版权属于各自合法的拥有者。</p> 
    <p>本站创建、管理、商务合作：zhujiguangjie#163.com(用@代替#)</p> 
    <p> <script type="text/javascript">// <![CDATA[
var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1258851398'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/stat.php%3Fid%3D1258851398%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
// ]]></script> </p> Powered by 
    <span style="font-weight:bold;font-family:arial;"><a href="http://www.iwms.net/" target="_blank" title="iwms (.net framework 2.x/3.x Access)">iwms 6.0</a></span>
    <script type="text/javascript">iwms.aId=2850;$(function(){iwms.imgCont=$i('content');iwms.imgResize();InitContStyle();iwms.getVars();})</script> 
   </div> 
  </div>  
 </body>
</html>