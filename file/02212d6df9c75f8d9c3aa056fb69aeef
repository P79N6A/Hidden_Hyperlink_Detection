<!DOCTYPE html>
<html lang="zh-CN">
 <head> 
  <meta charset="UTF-8" /> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
  <link rel="profile" href="http://gmpg.org/xfn/11" /> 
  <link rel="pingback" href="http://www.shilib.com/xmlrpc.php" /> 
  <title>框架 C Jackie Soon</title> 
  <link rel="dns-prefetch" href="//fonts.googleapis.com" /> 
  <link rel="dns-prefetch" href="//s.w.org" /> 
  <link rel="alternate" type="application/rss+xml" title="Jackie Soon &raquo; Feed" href="http://www.shilib.com/feed/" /> 
  <link rel="alternate" type="application/rss+xml" title="Jackie Soon &raquo; 评论Feed" href="http://www.shilib.com/comments/feed/" /> 
  <link rel="alternate" type="application/rss+xml" title="Jackie Soon &raquo; 框架分类目录Feed" href="http://www.shilib.com/category/framework/feed/" /> 
  <script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.shilib.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.3"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script> 
  <style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style> 
  <link rel="stylesheet" id="flat-fonts-css" href="//fonts.googleapis.com/css?family=Handlee%7CRoboto:400,700%7CRoboto+Slab%7CRoboto+Condensed" media="all" /> 
  <link rel="stylesheet" id="flat-theme-css" href="http://www.shilib.com/wp-content/themes/flat/assets/css/flat.min.css?ver=1.7.7" media="all" /> 
  <link rel="stylesheet" id="flat-style-css" href="http://www.shilib.com/wp-content/themes/flat/style.css?ver=4.7.3" media="all" /> 
  <script src="http://www.shilib.com/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script> 
  <script src="http://www.shilib.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script> 
  <script src="http://www.shilib.com/wp-content/themes/flat/assets/js/flat.min.js?ver=1.7.7"></script> 
  <!--[if lt IE 9]>
<script src='http://www.shilib.com/wp-content/themes/flat/assets/js/html5shiv.min.js?ver=3.7.2'></script>
<![endif]--> 
  <link rel="https://api.w.org/" href="http://www.shilib.com/wp-json/" /> 
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.shilib.com/xmlrpc.php?rsd" /> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.shilib.com/wp-includes/wlwmanifest.xml" /> 
  <meta name="generator" content="WordPress 4.7.3" /> 
  <style type="text/css"></style>
  <style type="text/css">#masthead .site-title {font-family:Handlee}body {font-family:Roboto }h1,h2,h3,h4,h5,h6 {font-family:Roboto Slab}#masthead .site-description, .hentry .entry-meta {font-family:Roboto Condensed}</style>
  <style type="text/css" id="custom-background-css">
body.custom-background { background-image: url("http://www.shilib.com/wp-content/themes/flat/assets/img/default-background.jpg"); background-position: left top; background-size: auto; background-repeat: repeat; background-attachment: scroll; }
</style> 
  <link rel="icon" href="http://www.shilib.com/wp-content/uploads/2017/03/e1fe9925bc315c6038d2d86284b1cb13485477f3-150x150.jpg" sizes="32x32" /> 
  <link rel="icon" href="http://www.shilib.com/wp-content/uploads/2017/03/e1fe9925bc315c6038d2d86284b1cb13485477f3.jpg" sizes="192x192" /> 
  <link rel="apple-touch-icon-precomposed" href="http://www.shilib.com/wp-content/uploads/2017/03/e1fe9925bc315c6038d2d86284b1cb13485477f3.jpg" /> 
  <meta name="msapplication-TileImage" content="http://www.shilib.com/wp-content/uploads/2017/03/e1fe9925bc315c6038d2d86284b1cb13485477f3.jpg" /> 
 </head> 
 <body class="archive category category-framework category-92 custom-background" itemscope="" itemtype="http://schema.org/WebPage"> 
  <div id="page"> 
   <div style="height:10px;backgroundcolor:black;"></div> 
   <div class="container"> 
    <div class="row row-offcanvas row-offcanvas-left"> 
     <div id="secondary" class="col-lg-3"> 
      <header id="masthead" class="site-header" role="banner"> 
       <div class="hgroup"> 
        <h1 class="site-title display-title-logo"><a href="http://www.shilib.com/" title="Jackie Soon" rel="home"><img itemprop="primaryImageofPage" alt="Jackie Soon" src="http://www.shilib.com/wp-content/uploads/2017/03/e1fe9925bc315c6038d2d86284b1cb13485477f3.jpg" /><span itemprop="name">Jackie Soon</span></a></h1>
        <h2 itemprop="description" class="site-description">Emali:jackiesun2023@gmail.com Github:https://github.com/jackie202333 Facebook:https://facebook.com/jackie2023</h2> 
       </div> 
       <button type="button" class="btn btn-link hidden-lg toggle-sidebar" data-toggle="offcanvas" aria-label="Sidebar"><i class="fa fa-gear"></i></button> 
       <button type="button" class="btn btn-link hidden-lg toggle-navigation" aria-label="Navigation Menu"><i class="fa fa-bars"></i></button> 
       <nav id="site-navigation" class="navigation main-navigation" role="navigation"> 
        <div class="nav-menu"></div> 
       </nav> 
      </header> 
      <div class="sidebar-offcanvas"> 
       <div id="main-sidebar" class="widget-area" role="complementary"> 
        <aside id="categories-2" class="widget widget_categories"> 
         <h3 class="widget-title">文章目录</h3> 
         <ul> 
          <li class="cat-item cat-item-2"><a href="http://www.shilib.com/category/others/">其他文章</a> (2) </li> 
          <li class="cat-item cat-item-89"><a href="http://www.shilib.com/category/web-design/">前端</a> (1) 
           <ul class="children"> 
            <li class="cat-item cat-item-100"><a href="http://www.shilib.com/category/web-design/bootstrap/">BootStrap</a> (1) </li> 
           </ul> </li> 
          <li class="cat-item cat-item-90"><a href="http://www.shilib.com/category/program/">后端</a> (6) 
           <ul class="children"> 
            <li class="cat-item cat-item-68"><a href="http://www.shilib.com/category/program/java/">Java</a> (5) </li> 
            <li class="cat-item cat-item-78"><a href="http://www.shilib.com/category/program/linux/">Linux</a> (1) </li> 
           </ul> </li> 
          <li class="cat-item cat-item-93"><a href="http://www.shilib.com/category/bigdata-2/">大数据</a> (2) 
           <ul class="children"> 
            <li class="cat-item cat-item-97"><a href="http://www.shilib.com/category/bigdata-2/hadoop/">Hadoop</a> (2) </li> 
           </ul> </li> 
          <li class="cat-item cat-item-91"><a href="http://www.shilib.com/category/database/">数据库</a> (4) 
           <ul class="children"> 
            <li class="cat-item cat-item-72"><a href="http://www.shilib.com/category/database/mongodb/">MongoDB</a> (1) </li> 
            <li class="cat-item cat-item-74"><a href="http://www.shilib.com/category/database/mysql/">MySQL</a> (2) </li> 
            <li class="cat-item cat-item-69"><a href="http://www.shilib.com/category/database/redis/">Redis</a> (1) </li> 
           </ul> </li> 
          <li class="cat-item cat-item-92 current-cat"><a href="http://www.shilib.com/category/framework/">框架</a> (3) 
           <ul class="children"> 
            <li class="cat-item cat-item-102"><a href="http://www.shilib.com/category/framework/hibernate/">Hibernate</a> (1) </li> 
            <li class="cat-item cat-item-70"><a href="http://www.shilib.com/category/framework/spring/">Spring</a> (2) </li> 
           </ul> </li> 
          <li class="cat-item cat-item-94"><a href="http://www.shilib.com/category/algorithmdatastrueture/">算法与数据结构</a> (1) 
           <ul class="children"> 
            <li class="cat-item cat-item-75"><a href="http://www.shilib.com/category/algorithmdatastrueture/algorithm/">Algorithm</a> (1) </li> 
           </ul> </li> 
          <li class="cat-item cat-item-120"><a href="http://www.shilib.com/category/design-model/">设计模式</a> (3) </li> 
         </ul> 
        </aside> 
        <aside id="calendar-4" class="widget widget_calendar"> 
         <h3 class="widget-title">日期查看</h3> 
         <div id="calendar_wrap" class="calendar_wrap">
          <table id="wp-calendar"> 
           <caption>
            2017年三月
           </caption> 
           <thead> 
            <tr> 
             <th scope="col" title="星期一">一</th> 
             <th scope="col" title="星期二">二</th> 
             <th scope="col" title="星期三">三</th> 
             <th scope="col" title="星期四">四</th> 
             <th scope="col" title="星期五">五</th> 
             <th scope="col" title="星期六">六</th> 
             <th scope="col" title="星期日">日</th> 
            </tr> 
           </thead> 
           <tfoot> 
            <tr> 
             <td colspan="3" id="prev"><a href="http://www.shilib.com/2016/12/">&laquo; 12月</a></td> 
             <td class="pad">&nbsp;</td> 
             <td colspan="3" id="next" class="pad">&nbsp;</td> 
            </tr> 
           </tfoot> 
           <tbody> 
            <tr> 
             <td colspan="2" class="pad">&nbsp;</td>
             <td>1</td>
             <td>2</td>
             <td>3</td>
             <td>4</td>
             <td>5</td> 
            </tr> 
            <tr> 
             <td>6</td>
             <td>7</td>
             <td>8</td>
             <td><a href="http://www.shilib.com/2017/03/09/" aria-label="于2017年3月9日上发布的文章">9</a></td>
             <td>10</td>
             <td>11</td>
             <td>12</td> 
            </tr> 
            <tr> 
             <td>13</td>
             <td>14</td>
             <td>15</td>
             <td>16</td>
             <td>17</td>
             <td>18</td>
             <td>19</td> 
            </tr> 
            <tr> 
             <td>20</td>
             <td>21</td>
             <td>22</td>
             <td>23</td>
             <td>24</td>
             <td>25</td>
             <td>26</td> 
            </tr> 
            <tr> 
             <td id="today">27</td>
             <td>28</td>
             <td>29</td>
             <td>30</td>
             <td>31</td> 
             <td class="pad" colspan="2">&nbsp;</td> 
            </tr> 
           </tbody> 
          </table>
         </div> 
        </aside> 
        <aside id="tag_cloud-4" class="widget widget_tag_cloud"> 
         <h3 class="widget-title">文章标签</h3> 
         <div class="tagcloud">
          <a href="http://www.shilib.com/tag/aop/" class="tag-link-113 tag-link-position-1" title="1个话题" style="font-size: 8pt;">AOP</a> 
          <a href="http://www.shilib.com/tag/gc/" class="tag-link-108 tag-link-position-2" title="1个话题" style="font-size: 8pt;">GC</a> 
          <a href="http://www.shilib.com/tag/git/" class="tag-link-127 tag-link-position-3" title="1个话题" style="font-size: 8pt;">git</a> 
          <a href="http://www.shilib.com/tag/github/" class="tag-link-125 tag-link-position-4" title="1个话题" style="font-size: 8pt;">github</a> 
          <a href="http://www.shilib.com/tag/hadoop%e7%94%9f%e6%80%81/" class="tag-link-123 tag-link-position-5" title="2个话题" style="font-size: 14.3pt;">Hadoop生态</a> 
          <a href="http://www.shilib.com/tag/hibernate/" class="tag-link-119 tag-link-position-6" title="1个话题" style="font-size: 8pt;">Hibernate</a> 
          <a href="http://www.shilib.com/tag/ioc/" class="tag-link-112 tag-link-position-7" title="1个话题" style="font-size: 8pt;">IOC</a> 
          <a href="http://www.shilib.com/tag/java/" class="tag-link-107 tag-link-position-8" title="4个话题" style="font-size: 22pt;">java</a> 
          <a href="http://www.shilib.com/tag/java-%e5%9f%ba%e7%a1%80/" class="tag-link-110 tag-link-position-9" title="1个话题" style="font-size: 8pt;">Java 基础</a> 
          <a href="http://www.shilib.com/tag/java%e9%ab%98%e7%ba%a7/" class="tag-link-109 tag-link-position-10" title="1个话题" style="font-size: 8pt;">Java高级</a> 
          <a href="http://www.shilib.com/tag/jvm/" class="tag-link-106 tag-link-position-11" title="3个话题" style="font-size: 18.5pt;">jvm</a> 
          <a href="http://www.shilib.com/tag/linux/" class="tag-link-117 tag-link-position-12" title="1个话题" style="font-size: 8pt;">Linux</a> 
          <a href="http://www.shilib.com/tag/mongodb/" class="tag-link-85 tag-link-position-13" title="1个话题" style="font-size: 8pt;">MongoDb</a> 
          <a href="http://www.shilib.com/tag/mysql/" class="tag-link-115 tag-link-position-14" title="1个话题" style="font-size: 8pt;">MySQL</a> 
          <a href="http://www.shilib.com/tag/redis/" class="tag-link-83 tag-link-position-15" title="1个话题" style="font-size: 8pt;">Redis</a> 
          <a href="http://www.shilib.com/tag/shell/" class="tag-link-118 tag-link-position-16" title="1个话题" style="font-size: 8pt;">Shell</a> 
          <a href="http://www.shilib.com/tag/spring/" class="tag-link-81 tag-link-position-17" title="1个话题" style="font-size: 8pt;">Spring</a> 
          <a href="http://www.shilib.com/tag/spring-ioc/" class="tag-link-111 tag-link-position-18" title="2个话题" style="font-size: 14.3pt;">Spring IOC</a> 
          <a href="http://www.shilib.com/tag/%e5%89%8d%e7%ab%af/" class="tag-link-124 tag-link-position-19" title="1个话题" style="font-size: 8pt;">前端</a> 
          <a href="http://www.shilib.com/tag/%e5%bc%80%e5%8f%91%e8%a7%84%e8%8c%83/" class="tag-link-126 tag-link-position-20" title="1个话题" style="font-size: 8pt;">开发规范</a> 
          <a href="http://www.shilib.com/tag/%e6%8e%92%e5%ba%8f%e7%ae%97%e6%b3%95/" class="tag-link-104 tag-link-position-21" title="1个话题" style="font-size: 8pt;">排序算法</a> 
          <a href="http://www.shilib.com/tag/%e6%95%b0%e6%8d%ae%e5%ba%93%e4%bc%98%e5%8c%96/" class="tag-link-116 tag-link-position-22" title="2个话题" style="font-size: 14.3pt;">数据库优化</a> 
          <a href="http://www.shilib.com/tag/%e6%97%b6%e9%97%b4%e5%a4%8d%e6%9d%82%e5%ba%a6/" class="tag-link-105 tag-link-position-23" title="1个话题" style="font-size: 8pt;">时间复杂度</a> 
          <a href="http://www.shilib.com/tag/%e6%b3%a8%e8%a7%a3/" class="tag-link-114 tag-link-position-24" title="1个话题" style="font-size: 8pt;">注解</a> 
          <a href="http://www.shilib.com/tag/%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f/" class="tag-link-121 tag-link-position-25" title="3个话题" style="font-size: 18.5pt;">设计模式</a>
         </div> 
        </aside> 
        <aside id="archives-4" class="widget widget_archive"> 
         <h3 class="widget-title">文章归档</h3> 
         <ul> 
          <li><a href="http://www.shilib.com/2017/03/">2017年三月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2016/12/">2016年十二月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2016/10/">2016年十月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2016/09/">2016年九月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2016/08/">2016年八月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2016/07/">2016年七月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2016/06/">2016年六月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2016/05/">2016年五月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2016/04/">2016年四月</a>&nbsp;(2)</li> 
          <li><a href="http://www.shilib.com/2016/01/">2016年一月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2015/11/">2015年十一月</a>&nbsp;(2)</li> 
          <li><a href="http://www.shilib.com/2015/10/">2015年十月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2015/09/">2015年九月</a>&nbsp;(2)</li> 
          <li><a href="http://www.shilib.com/2015/06/">2015年六月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2015/05/">2015年五月</a>&nbsp;(1)</li> 
          <li><a href="http://www.shilib.com/2015/03/">2015年三月</a>&nbsp;(3)</li> 
          <li><a href="http://www.shilib.com/2015/02/">2015年二月</a>&nbsp;(1)</li> 
         </ul> 
        </aside> 
       </div> 
      </div> 
     </div> 
     <div id="primary" class="content-area col-lg-9" itemprop="mainContentOfPage"> 
      <h1 class="page-title">分类：框架</h1> 
      <div id="content" class="site-content" role="main"> 
       <article itemscope="" itemtype="http://schema.org/Article" id="post-113" class="post-113 post type-post status-publish format-standard hentry category-hibernate tag-hibernate"> 
        <header class="entry-header"> 
         <h2 class="entry-title" itemprop="name"> <a itemprop="url" href="http://www.shilib.com/hibernate-%e5%9f%ba%e7%a1%80%e6%80%bb%e7%bb%93hibernate-001/" title="链向Hibernate 基础总结Hibernate-001的固定链接" rel="bookmark">Hibernate 基础总结Hibernate-001</a> </h2> 
         <div class="entry-meta">
          <span class="entry-date"><a href="http://www.shilib.com/hibernate-%e5%9f%ba%e7%a1%80%e6%80%bb%e7%bb%93hibernate-001/" rel="bookmark"><time class="entry-date published" datetime="2015-11-27T13:52:09+00:00" itemprop="datepublished">2015年11月27日</time></a></span> by 
          <span class="author vcard" itemscope="" itemprop="author" itemtype="http://schema.org/Person"><a class="url fn n" href="http://www.shilib.com/author/jackie2023/" rel="author" itemprop="url"><span itemprop="name">jackie2023</span></a></span>
          <span class="sep">&middot;</span>
          <span class="comments-link"><span><span class="screen-reader-text">Hibernate 基础总结Hibernate-001</span>已关闭评论</span></span>
         </div> 
        </header> 
        <div class="entry-content" itemprop="articleBody"> 
         <h1>1、什么是Hibernate</h1> 
         <p>1）Hibernate是数据访问层的框架，对JDBC进行了封装，是针对数据访问层的面向对象的解决方案。<br /> 2）Hibernate允许我们直接访问对象，然后将访问自动转化为SQL去执行，从而达到间接访问数据库的目的，简化代码开发，提升开发效率。</p> 
         <h1><a name="t1"></a>2、为什么使用Hibernate</h1> 
         <p>1）使用JDBC开发出现的问题<br /> C需要在代码中写大量的SQL<br /> C需要给大量的？赋值<br /> C需要将结果集转换为实体对象<br /> C在SQL中可能会写不同数据库特定的函数，移植性差。例如分页查询、主键生成方法、数据库函数等。<br /> 2）使用Hibernate可以解决上面的问题<br /> C基本上不需要写SQL，因为Hibernate可以自动生成SQL并执行<br /> C可以自动给？赋值<br /> C可以自动将结果集转换为实体对象<br /> CHibernate提供通用的API来访问不同的数据库，移植性好。<br /> 3）补充JDBC与Hibernate的优缺点<br /> a、JDBC优点：效率高<br /> b、Hibernate缺点：效率相对于JDBC要低</p> 
         <h1><a name="t2"></a>*3、Hibernate的设计原理（思想）</h1> 
         <p>1）Hibernate是采用了ORM的思想，对JDBC进行的封装。<br /> 2）ORM：Object Relation Mapping，即对象关系映射，指的是Java对象和关系数据库的映射。<br /> Hibernate框架是ORM的一种实现，解决了对象和数据库数据映射问题。在数据库添加或更新时，可以将一个对象自动写入或更新数据表；查询时，可以将记录自动封装成对象返回。这些操作在中间执行时所涉及的细节开发者不用参与和关注。<br /> C之前使用JDBC开发时，需要知道数据库表和实体对象的关系，以及字段和对象属性的关系，比如需要知道COST表和Cost对象的关系。那么这种关系我们之前是手动维护的，比如：<br /> cost.setName(rs.getString(“name”));<br /> ps.setString(2,cost.getName());<br /> CORM思想是希望将这种关系的维护提炼出来，用一个公共的组件描述，那么在我们访问数据库时，需要使用这种关系时，可以复用基于ORM思想提炼出来的关系<br /> C正是由于存在这样通用关系的描述，Hibernate才可以让我们直接访问Java对象，从而通过关系转换成SQL自动执行。<br /> CHibernate中将这种关系定义在XML配置文件中。</p> 
         <h1><a name="t3"></a>4、Hibernate体系结构</h1> 
         <p>1）hibernate.cfg.xml(1个)<br /> 是Hibernate的主配置文件，用于配置数据库连接参数，以及Hibernate框架参数。<br /> 2）POJO实体类(n个)<br /> 是Java类型，用于封装表中的数据<br /> 3）xxx.hbm.xml(n个)<br /> 是关系映射文件，用于配置表与实体类的关系，以及表中字段与类中属性的关系。<br /> 4）Hibernate底层API<br /> 主要是用于解析主配置文件，以及关系映射文件，然后根据关系自动生成SQL并执行。</p> 
         <h1><a name="t4"></a>5、Hibernate常用API</h1> 
         <p>1）Configuration<br /> 用于解析主配置文件的，同时也可以加载hbm.xml信息<br /> 2）SessionFactory<br /> 用于创建Session对象，对JDBC的connection对象的封装。<br /> 3）Session<br /> 是数据库连接会话，相当于是数据库连接。负责执行增删改操作，提供了save,update,delete等方法。<br /> 注意：此Session和HttpSession没有任何关系。<br /> 4）Transaction<br /> 用于控制事务。默认情况下，Hibernate不会自动提交，因此需要事务控制才能对数据库更新。<br /> 5）Query<br /> 用于做特殊查询（HQL）</p> 
         <h1><a name="t5"></a>*6、Hibernate使用步骤</h1> 
         <p>1）导包（Hibernate开发包、数据库驱动包）<br /> 2）引入主配置文件hibernate.cfg.xml<br /> 3）创建实体类Emp<br /> 4）*创建关系映射文件Emp.hbm.xml<br /> C该配置文件必须和实体类同名<br /> C该配置文件必须和实体类位于同一个包下<br /> C在主配置文件中引入该关系映射文件<br /> 5）使用Hibernate的API，来进行增、删、改、查</p> 
         <h1><a name="t6"></a>*7、Hibernate映射类型</h1> 
         <p>1）Hibernate中支持2种映射类型<br /> CJava类型<br /> CHibernate定义的类型<br /> 2）使用Java类型不能自动处理布尔值，如果想使用Java类型来处理，需要自己定义一个类型，该类型需要实现一个接口UserType<br /> 举例：创建类<br /> com.*.type.MyBoolean implements UserType<br /> 在hbm.xml中，type=”com.*.type.MyBoolean”<br /> 3）Hibernate定义的映射类型（推荐使用）<br /> C整数：byte,short,integer,long<br /> C小数：float,double<br /> C字符：string<br /> C日期(年月日)：date<br /> 可以将数据库日期类型转换为java.sql.Date<br /> C时间(时分秒)：time<br /> 可以将数据库日期类型转换为java.sql.Time<br /> C时间戳(年月日时分秒)：timestamp<br /> 可以将数据库日期类型转换为java.sql.Timestamp<br /> C布尔：<br /> yes_no：数据库中存y/n，对应属性true/false<br /> true_false:数据库中存t/f，对应属性true/false<br /> 使用：<br /> type=”timestamp”<br /> 注意：</p> 
         <p>hibernate定义的映射类型都是小写的</p> 
         <h1><a name="t7"></a>8、Hibernate主键生成方式</h1> 
         <p>Hibernate框架提供了多种主键生成方式，使用时，通过hbm.xml文件&lt;id&gt;元素部分，利用&lt;generator class=”主键生成类型”&gt;指定。<br /> 1）sequence<br /> C是采用sequence来生成ID，针对的是Oracle数据库<br /> C&lt;generator class=”sequence”&gt;<br /> &lt;param name=”sequence”&gt;序列名&lt;/param&gt;<br /> &lt;/generator&gt;<br /> 2）identity<br /> C采用数据库主键自增长的机制来生成ID，针对初Oracle外的数据库，如MySQL，SqlServer<br /> C&lt;generator class=”identity”&gt;&lt;/generator&gt;<br /> 注意：创建表时，指定主键可以自增长<br /> 3）native<br /> CHibernate会根据你设置的方言，判断出是哪种数据库，如果是Oracle就使用sequence方式生成主键，如果不是就使用identity方式生成主键。<br /> C&lt;generator class=”native”&gt;<br /> &lt;param name=”sequence”&gt;序列名&lt;/param&gt;<br /> &lt;/generator&gt;<br /> 4）increment<br /> C也是采用自增长的方式生成主键，但是这种方式不是用数据库的机制，而是Hibernate自己的机制，并且适用于所有的数据库。<br /> CHibernate提供一个组件，在需要主键时，它会从表中查询出最大的ID值，然后+1，以此结果作为新的主键。<br /> C&lt;generator class=”increment”&gt;&lt;/generator&gt;<br /> C注意：通常不用，原因时在并发量大时可能会出现并发问题。<br /> 5）assigned<br /> CHibernate放弃生成主键，由程序员自行维护主键字段的值。<br /> C&lt;generator class=”assigned”&gt;&lt;/generator&gt;<br /> 6）uuid、hilo（高低位算法）<br /> C采用uuid/hilo算法来生成一个主键，该主键是一个没有规律的，不重复的，长的字符串<br /> C&lt;generator class=”uuid”&gt;&lt;/generator&gt;</p> 
         <h1><a name="t8"></a>*9、Hibernate一级缓存(默认开启)</h1> 
         <p>1）什么是一级缓存？<br /> CHibernate在创建Session时，会自动的给Session分配一块内存空间，用于存储该Session取到的对象值，那么这个内存空间就是一级缓存，或称为Session级缓存。<br /> 2）一级缓存的维护<br /> C在使用Session进行查询时，Hibernate会优先上一级缓存中查找对应的数据，如果缓存中已经存在则直接返回，不用查库。如果缓存中不存在，再去执行查询数据库的行为。减少了对数据库的访问。<br /> CSession在执行完查询数据库后，会将新查到的数据自动放入一级缓存中。<br /> 3）一级缓存的管理<br /> Csession.evict(Object);<br /> 把传入的对象从一级缓存中移除。<br /> Csession.clear();<br /> 移除一级缓存中所有的对象。<br /> Csession.close();<br /> 关闭session，释放缓存空间。<br /> 4）*重点关注<br /> CSession级缓存是独享的，即每创建一个Session对象，就给这个对象分配一个独立的缓存区，其他的Session不能访问当前Session的缓存区。<br /> CSession仅仅是把查询到的数据放入缓存区，没有查询过的，是不会放入缓存区。<br /> 注意：<br /> C一级缓存缓存的目标只能是实体对象</p> 
         <h1><a name="t9"></a>10、Hibernate对象持久性</h1> 
         <p>1）Hibernate中实体对象具有3种状态，围绕着这三种状态的转换过程，我们称之为对象持久性。<br /> 2）3种状态<br /> a、临时态<br /> C通过new创建的对象是临时态的<br /> C临时态的对象可以被垃圾回收<br /> C持久态的对象通过delete方法可以转化为临时态<br /> *b、持久态<br /> C通过session的save,update方法可以将临时态/游离态的对象转化为持久态<br /> C通过session的get,load方法将查询到的对象默认置为持久态<br /> 特点：<br /> C持久态的对象不能被垃圾回收<br /> C持久态的对象存在于一级缓存中，由Session负责管理<br /> C持久态的对象可以自动的与数据库同步更新<br /> C持久态的对象同步的时机是事务提交时即ts.commit，实际上是调用session.flush()时触发同步的，commit方法中调用了session.flush()<br /> 注意：session.flush();//将缓存中改变的对象数据更新到数据库记录仅仅是触发同步，但并没有提交事务<br /> 即：ts.commit()=session.flush()+原有事务提交功能<br /> c、游离态<br /> C通过session的evict,clear,close方法可以将持久态的对象转化为游离态（从一级缓存中移除）<br /> C游离态的对象可以被垃圾回收</p> 
         <h1><a name="t10"></a>11、flush()和commit()扩展：</h1> 
         <p>session.flash()和缓存相关。执行时会清除session缓存并向数据库发送SQL语句并执行，但此时如果数据库当前存在一个事务，数据库会先将这些SQL语句缓存起来，那么此时在数据库中是无法看到SQL语句执行结果的。除非执行commit提交了事务。只要没有执行commit()方法，就能通过rollback()方法进行回滚。<br /> 1）session在什么情况下清理缓存：<br /> C默认情况下，当应用程序提交事务，如：Transaction.commit;<br /> C当我们显示调用flush的时候<br /> C在执行某些查询的时候，如：iterate<br /> 2）flush执行的顺序：hibernate按照save,update,delete顺序提交相关操作。<br /> 3）commit()和事务相关，执行时会先隐式调用flush()方法，再提交事务。执行之后无法rollback()进行回滚。</p> 
         <h1><a name="t11"></a>*12、Hibernate延迟加载</h1> 
         <p>1）什么是延迟加载？<br /> Hibernate中有一些方法，在查询时并不是立刻查询数据库返回结果，而是给返回一个空(属性值)对象，当我们真正去使用这个对象getter时，才触发查询。这种将查询时机推迟到使用时间的机制，称之为延迟加载。<br /> 2）哪些方法具有延迟加载机制<br /> a、session.load(Emp.class, id);//查询单个对象<br /> C当调用该方法时，Hibernate并没有立刻查询数据库，而是new Emp()，然后setId(id)，即我们得到的对象是一个只有id有值，其他属性为空的对象。<br /> C当我们调用该对象时，比如e.getName()时，此时会触发查询。我们使用这个对象任何一个属性都可以触发查询，但使用id却不触发。<br /> C不管是调用哪个属性触发的查询，那么本次查询都会将当前的记录完整的返回，此时对象中属性都可以有值。<br /> b、query.iterate();//查询多个对象集合<br /> C当调用该方法时，Hibernate会返回一个迭代器，迭代器中存的是一个空(属性空)的对象，该对象中仅仅是id有值，其他属性为空。<br /> C此时，Hibernate执行了一次查询，但是为了效率，仅仅是查询出了ID的值select id from emp;<br /> C当我们从迭代器中读取出对象，并且使用该对象时会触发真正的查询，将其他属性都查询出来，此时是根据当前对象的ID查询当前ID对应的一条记录，并非是查询所有的记录。<br /> c、关联属性查询<br /> 3）延迟加载的好处<br /> C可以提升内存资源的使用率<br /> C可以降低对数据的并发访问（使用时机错开）<br /> 4）在使用延迟加载时要注意，不能在使用对象前关闭Session否则会报错：<br /> LazeInitializationException：No Session<br /> 两种解决办法：<br /> C不使用延迟加载的方法session.load()、query.iterate()，可使用session.get()、query.list()等<br /> C在使用对象后关闭Session<br /> 5）在项目中，采用OpenSessionInView的机制来保证session关闭的时机。<br /> a、OpenSessionInView指的是在视图层加载阶段保证Session处于非close状态，而视图层加载完成后，再关闭Session。<br /> b、如何实现<br /> CServlet：监听器</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;MyFilter&nbsp;implents&nbsp;Filter{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;doFilter(request,response,chain){</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//添加逻辑C前期处理</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//通过过滤器，调用后续资源</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chain.doFilter(request,response);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//添加逻辑C后期处理（关闭session）</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">}</li> 
          </ol> 
         </div> 
         <p>CStruts2：拦截器<br /> 创建拦截器OpenSessionInViewInterceptor，在拦截方法中，先调用ai.invoke()，该方法实际上会调用Action的业务方法，并根据返回值找Result，且加载JSP页面，因此在此方法后调用HibernateUtil.closeSession()方法就相当于是在页面加载完成后关闭Session，从而达到了推迟关闭Session的目的。</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;MyInterceptor&nbsp;<span class="keyword">implements</span>&nbsp;Interceptor{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;&nbsp;String&nbsp;intercept(ActionInvocation&nbsp;in){</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//前期处理</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.invoke();<span class="comment">//执行ActionCResult</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//后期处理（关闭session）</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt">}</li> 
          </ol> 
         </div> 
         <p>CSpring：AOP<br /> 6）延迟加载实现原理<br /> a、Hibernate是采用CGLIB的动态代理技术，在我们调用load,iterate方法时，返回的是指定类型的子类对象，这种在程序运行过程中创建子类对象的方式称为动态代理技术。<br /> b、代码解读<br /> public class Emp$.$.EnhancerByCGLIB$.$.88def978 extends Emp {//.是分割示意用，避免本编辑器排版紊乱，实际没有<br /> //覆写get方法<br /> public String getName() {<br /> if(没有查询过) {<br /> 1.查询并给当前对象所有属性赋值<br /> 2.设置当前对象为查询后的状态<br /> }<br /> return this.name;<br /> }<br /> …<br /> }<br /> *c、session.get()和session.load()方法区别<br /> Cload()采用延迟加载；get()采用立刻加载<br /> Cload()返回的是一个动态代理类；get()返回的是实体类POJO<br /> Cload()在没有符合条件的记录时会抛出ObjectNotFoundException；get()会返回一个null</p> 
         <h1><a name="t12"></a>13、扩展1（大批量数据的分批同步处理方法―避免缓存溢出）</h1> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt">Session&nbsp;session&nbsp;=&nbsp;HibernateUtil.getSession();</li> 
           <li class="">Transaction&nbsp;ts&nbsp;=&nbsp;session.beginTransaction();</li> 
           <li class="alt"><span class="keyword">for</span>(<span class="keyword">int</span>&nbsp;i=<span class="number">0</span>;i&lt;<span class="number">10000</span>;i++){<span class="comment">//不做处理，容易使一级缓存溢出</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;Foo&nbsp;foo&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;Foo();<span class="comment">//foo处于临时态</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//TODO&nbsp;设置不同属性</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;session.save(foo);<span class="comment">//foo处于持久状态，会放入缓存</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>(i%<span class="number">20</span>==<span class="number">0</span>){</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session.flush();<span class="comment">//将缓存foo对象同步</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session.clear();<span class="comment">//清除缓存foo对象</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt">}</li> 
           <li class="">tv.commit();<span class="comment">//不能分批提交，即不可破坏事务的完整性</span></li> 
           <li class="alt">session.close();</li> 
          </ol> 
         </div> 
         <p>&nbsp;</p> 
         <h1><a name="t13"></a>14、扩展2（大批量数据对象的单独处理方法―避免缓存溢出）</h1> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="keyword">for</span>(String&nbsp;id&nbsp;:&nbsp;ids){<span class="comment">//如果数据量大，所有取出的对象放进一级缓存而不作处理，容易溢出</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;Foo&nbsp;foo&nbsp;=&nbsp;(Foo)session.load(Foo.<span class="keyword">class</span>,id)</li> 
           <li class="alt"><span class="comment">//处理foo</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;session.evict(foo);<span class="comment">//手动移除对象，提升健壮性</span></li> 
           <li class="alt">}</li> 
          </ol> 
         </div> 
         <p>&nbsp;</p> 
         <p>转载自：http://www.csdn.net/</p> 
         <p>原作者：CSDN某博主</p> 
         <p>如果文章内容侵犯了您的著作权益，请联系博主（Email:jackiesun2023@gmail.com）删除，谢谢!</p> 
        </div> 
       </article> 
       <article itemscope="" itemtype="http://schema.org/Article" id="post-103" class="post-103 post type-post status-publish format-standard hentry category-spring tag-aop tag-spring-ioc tag-114"> 
        <header class="entry-header"> 
         <h2 class="entry-title" itemprop="name"> <a itemprop="url" href="http://www.shilib.com/springioc%e6%8e%a7%e5%88%b6%e5%8f%8d%e8%bd%ac%e3%80%81aop%e9%9d%a2%e5%90%91%e5%88%87%e9%9d%a2%e7%bc%96%e7%a8%8b%e3%80%81log4j%e3%80%81%e6%b3%a8%e8%a7%a3%e9%85%8d%e7%bd%ae-spring-002/" title="链向SpringIOC(控制反转)、AOP(面向切面编程)、Log4j、注解配置-Spring-002的固定链接" rel="bookmark">SpringIOC(控制反转)、AOP(面向切面编程)、Log4j、注解配置-Spring-002</a> </h2> 
         <div class="entry-meta">
          <span class="entry-date"><a href="http://www.shilib.com/springioc%e6%8e%a7%e5%88%b6%e5%8f%8d%e8%bd%ac%e3%80%81aop%e9%9d%a2%e5%90%91%e5%88%87%e9%9d%a2%e7%bc%96%e7%a8%8b%e3%80%81log4j%e3%80%81%e6%b3%a8%e8%a7%a3%e9%85%8d%e7%bd%ae-spring-002/" rel="bookmark"><time class="entry-date published" datetime="2015-11-17T13:17:24+00:00" itemprop="datepublished">2015年11月17日</time></a></span> by 
          <span class="author vcard" itemscope="" itemprop="author" itemtype="http://schema.org/Person"><a class="url fn n" href="http://www.shilib.com/author/jackie2023/" rel="author" itemprop="url"><span itemprop="name">jackie2023</span></a></span>
          <span class="sep">&middot;</span>
          <span class="comments-link"><span><span class="screen-reader-text">SpringIOC(控制反转)、AOP(面向切面编程)、Log4j、注解配置-Spring-002</span>已关闭评论</span></span>
         </div> 
        </header> 
        <div class="entry-content" itemprop="articleBody"> 
         <p>&nbsp;</p> 
         <h1><a name="t0"></a>1.什么是Spring，有什么作用</h1> 
         <p>CSpring框架属于一个解决方案框架，可以对其他技术和框架进行整合应用。<br /> C*好处是：<strong>将程序中的各个组件和框架技术进行解耦，便于日后系统维护，升级和扩展操作</strong>。<br /> C在SSH中，会将Action，DAO组件都交给Spring框架管理，由Spring框架创建这些对象，建立这些对象关联。</p> 
         <h1><a name="t1"></a>*2.Spring都含有哪些功能</h1> 
         <p>CSpring框架提供了一个核心容器，该容器可以负责管理程序中的DAO、Action等组件(相当于工厂的作用)<br /> C提供了对其他技术，例如JDBC，Hibernate，Struts等框架整合API<br /> C提供了IOC机制，实现组件对象关系的解耦<br /> C提供了AOP机制，可以降低共通组件和一批目标组件的耦合度<br /> C提供了事务管理功能<br /> C提供了一个Spring MVC框架实现</p> 
         <h1><a name="t2"></a>*3.Spring框架容器</h1> 
         <p>Spring框架容器可以管理DAO、Action等Bean组件。该容器具有以下功能：<br /> C可以创建Bean组件对象<br /> C可以初始化Bean组件对象<br /> C可以销毁Bean组件对象<br /> C容器具有IOC和AOP机制</p> 
         <h1><a name="t3"></a>*4.Spring基本使用</h1> 
         <p>1)创建和管理程序组件对象<br /> C引入Spring IOC开发包（commons-logging.jar、spring.jar）<br /> C在src下添加Spring配置文件applicationContext.xml<br /> C将Bean组件定义到Spring配置文件applicationContext.xml中<br /> &lt;bean id=”标识符” class=”包名.类名”&gt;&lt;/bean&gt;<br /> C(编码)实例化Spring容器对象利用getBean获取Bean对象实例<br /> // 实例化Spring容器对象<br /> String conf = “/applicationContext.xml”;<br /> ApplicationContext ac = new ClassPathXmlApplicationContext(conf);<br /> // 从容器中获取Bean</p> 
         <p>类名 对象名 = (类名) ac.getBean(“标识符”);</p> 
         <p>示例：</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;JdbcCostDao&nbsp;<span class="keyword">implements</span>&nbsp;CostDao&nbsp;{</li> 
           <li class=""></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;JdbcCostDao()&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“JdbcCostDao构造”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class=""></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;init()&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“初始化JdbcCostDao”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class=""></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Override</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;save()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“采用jdbc保存对象”</span>);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Override</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;delete()&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;s&nbsp;=&nbsp;<span class="keyword">null</span>;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s.length();<span class="comment">//&nbsp;模拟异常</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“采用jdbc删除对象”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class=""></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;destory()&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“释放资源”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">}</li> 
          </ol> 
         </div> 
         <div class="dp-highlighter bg_html"> 
          <div class="bar"></div> 
          <ol class="dp-xml" start="1"> 
           <li class="alt"><span class="tag">&lt;</span><span class="tag-name">bean</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“jdbcCostDao”</span>&nbsp;<span class="attribute">scope</span>=<span class="attribute-value">“singleton”</span>&nbsp;<span class="attribute">init-method</span>=<span class="attribute-value">“init”</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">destroy-method</span>=<span class="attribute-value">“destory”</span>&nbsp;<span class="attribute">class</span>=<span class="attribute-value">“com.test.dao.JdbcCostDao”</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag-name">bean</span><span class="tag">&gt;</span></li> 
          </ol> 
         </div> 
         <div class="dp-highlighter bg_java"> 
          <div class="bar"></div> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="comment">//&nbsp;测试回收</span></li> 
           <li class=""><span class="annotation">@Test</span></li> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;test2()&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;实例化Spring容器对象</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;conf&nbsp;=&nbsp;<span class="string">“/applicationContext.xml”</span>;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;AbstractApplicationContext&nbsp;ac&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;ClassPathXmlApplicationContext(conf);</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;从容器中获取Bean</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;CostDao&nbsp;costDao&nbsp;=&nbsp;(CostDao)&nbsp;ac.getBean(<span class="string">“jdbcCostDao”</span>);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;costDao.save();</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;ac.close();<span class="comment">//&nbsp;释放容器对象C&gt;触发释放Bean对象C&gt;触发destory-method方法</span></li> 
           <li class="alt">}</li> 
          </ol> 
         </div> 
         <p>运行结果：</p> 
         <div class="dp-highlighter bg_plain"> 
          <div class="bar"></div> 
          <ol start="1"> 
           <li class="alt">采用jdbc保存对象</li> 
           <li class="">释放资源</li> 
          </ol> 
         </div> 
         <p>*a.控制Bean对象创建模式<br /> 在使用时，可以在&lt;bean&gt;定义部分利用scope属性指定bean对象采用单例模式创建还是原型模式创建。<br /> scope=”singleton”表示单例模式(默认值)<br /> scope=”prototype”表示原型模式，每次调用getBean都返回一个新的Bean对象。<br /> 如果应用Web程序中，通过配置可以扩展出request，session等属性值<br /> b.控制Bean对象创建时机<br /> scope=”singleton”时，Bean对象是在容器实例化时创建。在&lt;bean&gt;中使用lazy-init=”true”可以将Bean创建推迟到getBean方法。<br /> scope=”prototype”时，Bean对象是在getBean方法时创建。<br /> c.追加初始化和销毁方法<br /> 在&lt;bean&gt;中利用init-method指定一个初始化方法。可以在对象创建之后自动调用。<br /> &lt;bean init-method=”myinit”&gt;创建Bean对象后，会自动执行myinit方法。<br /> 同理，可以通过destroy-method属性指定方法名。当对象被垃圾回收前自动调用该方法执行资源释放工作。该属性仅适用于singleton模式的Bean对象，当执行Spring容器close()时，容器会释放Bean单例对象，会触发destroy-method=”mydestroy”中的mydesctory方法。</p> 
         <h1><a name="t4"></a>*5.Spring的核心IoC容器</h1> 
         <p>a.IoC概念<br /> Inversion of Control 控制反转或反向控制（控制转移）<br /> 2004 Martin fowler提出的IoC思想。IOC解决两个Bean组件调用问题，可以降低两个Bean组件对象之间的耦合度。所谓控制指的是对象的创建、初始化和销毁过程。当一个组件发生变更后，该逻辑需要响应修改，控制反转确切讲应该是控制的转移，意思是将控制逻辑由使用一方转移到第三框架或容器负责。当再发生组件变更后，只需要修改框架或容器配置，不需要修改关联组件。<br /> IoC思想：两个组件之间调用(例如A调用B)，原有方式是A负责创建B对象；现在变成了B对象由第三方框架或容器负责实例化，然后给A对象注入。即A对象获取B对象的方式发生了反转。<br /> IoC技术方案有两种：依赖注入（DI:Dependency Injection）和依赖查找<br /> Spring采用依赖注入技术实现IoC控制。<br /> 依赖技术主要以下两种方式：<br /> Cset方式注入(推荐)<br /> 在A中定义setB(B b),接收传进来的B对象<br /> C构造方式注入<br /> 在A中定义构造方法 public A(B b){}<br /> b.IoC使用方法(setter注入实现)<br /> C编写Action,定义到Spring配置中<br /> C编写DAO,定义到Spring配置中<br /> C在Action中定义DAO接口类型变量和setter方法<br /> C在Action的&lt;bean&gt;配置中使用下面配置<br /> &lt;bean id=”addCostAction”…&gt;<br /> &lt;property name=”属性名” &nbsp; ref=”要注入的Bean对象id值”&gt;</p> 
         <p>&lt;/property&gt;</p> 
         <p>&lt;/bean&gt;</p> 
         <p>示例：</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;AddCostAction&nbsp;{</li> 
           <li class=""></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;属性（略）</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;定义注入属性</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;CostDao&nbsp;costDao;</li> 
           <li class=""></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;CostDao&nbsp;getCostDao()&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;costDao;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class=""></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Spring容器会自动调用该方法注入costDao</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;setCostDao(CostDao&nbsp;costDao)&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.costDao&nbsp;=&nbsp;costDao;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;String&nbsp;exeucte()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“开始处理资费添加请求”</span>);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;CostDao&nbsp;costDao&nbsp;=&nbsp;new&nbsp;JdbcCostDao();//采用注入的方式替代直接生成，以此解耦</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;costDao.save();</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="string">“success”</span>;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">}</li> 
          </ol> 
         </div> 
         <p>applicationContext.xml中配置：</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt">&lt;bean&nbsp;id=<span class="string">“hibernateCostDAO”</span>&nbsp;<span class="keyword">class</span>=<span class="string">“com.test.dao.HibernateCostDAO”</span>&gt;&lt;/bean&gt;</li> 
           <li class=""></li> 
           <li class="alt">&lt;bean&nbsp;id=<span class="string">“addCostAction”</span>&nbsp;scope=<span class="string">“prototype”</span>&nbsp;<span class="keyword">class</span>=<span class="string">“com.test.action.AddCostAction”</span>&gt;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&lt;!C&nbsp;setter注入配置，将hibernateCostDAO对象给action的setCostDao方法传入&nbsp;C&gt;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class="string">“costDao”</span>&nbsp;ref=<span class="string">“hibernateCostDAO”</span>&gt;&lt;/property&gt;</li> 
           <li class="">&lt;/bean&gt;</li> 
          </ol> 
         </div> 
         <p>c.IoC使用方法(构造方式注入实现)<br /> C编写Action组件<br /> C编写DAO组件<br /> C在Action中添加带有DAO参数的构造方法<br /> C在Action的&lt;bean&gt;定义中，使用下面配置<br /> &lt;bean id=”deleteCostAction” class=””&gt;<br /> &lt;constructor-arg<br /> index=”参数索引值,从0开始” ref=”要注入的Bean对象id值”&gt;<br /> &lt;/constructor-arg&gt;</p> 
         <p>&lt;/bean&gt;</p> 
         <p>示例：</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;DeleteCostAction&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;CostDao&nbsp;costDao;</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;DeleteCostAction()&nbsp;{</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;DeleteCostAction(CostDao&nbsp;costDao)&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.costDao&nbsp;=&nbsp;costDao;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;String&nbsp;exeucte()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“删除资费请求的处理”</span>);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;costDao.delete();</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="string">“success”</span>;</li> 
           <li class=""></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">}</li> 
          </ol> 
         </div> 
         <p>applicationContext.xml中配置：</p> 
         <div class="dp-highlighter bg_html"> 
          <ol class="dp-xml" start="1"> 
           <li class="alt"><span class="tag">&lt;</span><span class="tag-name">bean</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“jdbcCostDao”</span>&nbsp;<span class="attribute">scope</span>=<span class="attribute-value">“singleton”</span>&nbsp;<span class="attribute">init-method</span>=<span class="attribute-value">“init”</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">destroy-method</span>=<span class="attribute-value">“destory”</span>&nbsp;<span class="attribute">class</span>=<span class="attribute-value">“com.test.dao.JdbcCostDao”</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag-name">bean</span><span class="tag">&gt;</span></li> 
           <li class="alt"></li> 
           <li class=""><span class="tag">&lt;</span><span class="tag-name">bean</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“deleteCostAction”</span>&nbsp;<span class="attribute">class</span>=<span class="attribute-value">“com.test.action.DeleteCostAction”</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">&lt;!C&nbsp;构造参数注入配置，将jdbcCostDao对象给action的构造方法的第一个参数传入&nbsp;C&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">constructor-arg</span>&nbsp;<span class="attribute">index</span>=<span class="attribute-value">“0”</span>&nbsp;<span class="attribute">ref</span>=<span class="attribute-value">“jdbcCostDao”</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag-name">constructor-arg</span><span class="tag">&gt;</span></li> 
           <li class="alt"><span class="tag">&lt;/</span><span class="tag-name">bean</span><span class="tag">&gt;</span></li> 
          </ol> 
         </div> 
         <p>d.各种类型数据的注入<br /> C注入Bean对象(重点)<br /> &lt;property name=”属性名”&nbsp; ref=”Bean对象id”&gt;<br /> &lt;/property&gt;<br /> C注入基本类型<br /> 可以注入一个数值，一个字符串数据。<br /> &lt;property name=”属性名”&nbsp; value=”值”&gt;<br /> &lt;/property&gt;<br /> C集合类型<br /> 注入List,Set,Map,Properties类型</p> 
         <p>示例：</p> 
         <div class="dp-highlighter bg_html"> 
          <ol class="dp-xml" start="1"> 
           <li class="alt"><span class="tag">&lt;</span><span class="tag-name">bean</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“messagebean”</span>&nbsp;<span class="attribute">class</span>=<span class="attribute-value">“com.test.action.MessageBean”</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">property</span>&nbsp;<span class="attribute">name</span>=<span class="attribute-value">“dir”</span>&nbsp;<span class="attribute">value</span>=<span class="attribute-value">“D:\\images\”</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">property</span>&nbsp;<span class="attribute">name</span>=<span class="attribute-value">“size”</span>&nbsp;<span class="attribute">value</span>=<span class="attribute-value">“10240”</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">&lt;!C&nbsp;注入List&nbsp;C&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">property</span>&nbsp;<span class="attribute">name</span>=<span class="attribute-value">“types”</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">list</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span>jpg<span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span>jpeg<span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span>gif<span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">list</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">&lt;!C&nbsp;注入Set&nbsp;C&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">property</span>&nbsp;<span class="attribute">name</span>=<span class="attribute-value">“cites”</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">set</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span>北京<span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span>上海<span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span>广州<span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">set</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">&lt;!C&nbsp;注入Map&nbsp;C&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">property</span>&nbsp;<span class="attribute">name</span>=<span class="attribute-value">“books”</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">map</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">entry</span>&nbsp;<span class="attribute">key</span>=<span class="attribute-value">“1001”</span>&nbsp;<span class="attribute">value</span>=<span class="attribute-value">“Java语言基础”</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag-name">entry</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">entry</span>&nbsp;<span class="attribute">key</span>=<span class="attribute-value">“1002”</span>&nbsp;<span class="attribute">value</span>=<span class="attribute-value">“JavaWeb基础”</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag-name">entry</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">entry</span>&nbsp;<span class="attribute">key</span>=<span class="attribute-value">“1003”</span>&nbsp;<span class="attribute">value</span>=<span class="attribute-value">“SSH框架技术”</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag-name">entry</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">map</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">&lt;!C&nbsp;注入Properties&nbsp;C&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">property</span>&nbsp;<span class="attribute">name</span>=<span class="attribute-value">“dbParams”</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">props</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">prop</span>&nbsp;<span class="attribute">key</span>=<span class="attribute-value">“username”</span><span class="tag">&gt;</span>root<span class="tag">&lt;/</span><span class="tag-name">prop</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">prop</span>&nbsp;<span class="attribute">key</span>=<span class="attribute-value">“password”</span><span class="tag">&gt;</span>123456<span class="tag">&lt;/</span><span class="tag-name">prop</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">prop</span>&nbsp;<span class="attribute">key</span>=<span class="attribute-value">“driverClassName”</span><span class="tag">&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/</span><span class="tag-name">prop</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">props</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span></li> 
           <li class=""><span class="tag">&lt;/</span><span class="tag-name">bean</span><span class="tag">&gt;</span></li> 
          </ol> 
         </div> 
         <p>对应接收注入的Java文件：</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="comment">/**</span></li> 
           <li class=""><span class="comment">&nbsp;*&nbsp;@Description:测试注入数据类别</span></li> 
           <li class="alt"><span class="comment">&nbsp;*</span></li> 
           <li class=""><span class="comment">&nbsp;*/</span></li> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;MessageBean&nbsp;{</li> 
           <li class=""></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;String&nbsp;dir;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;<span class="keyword">int</span>&nbsp;size;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;List&lt;String&gt;&nbsp;types;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;Set&lt;String&gt;&nbsp;cites;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;Map&lt;String,&nbsp;String&gt;&nbsp;books;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;Properties&nbsp;dbParams;</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;List&lt;String&gt;&nbsp;getTypes()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;types;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;setTypes(List&lt;String&gt;&nbsp;types)&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.types&nbsp;=&nbsp;types;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;String&nbsp;getDir()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;dir;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;setDir(String&nbsp;dir)&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.dir&nbsp;=&nbsp;dir;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">int</span>&nbsp;getSize()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;size;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;setSize(<span class="keyword">int</span>&nbsp;size)&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.size&nbsp;=&nbsp;size;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;Set&lt;String&gt;&nbsp;getCites()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;cites;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;setCites(Set&lt;String&gt;&nbsp;cites)&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.cites&nbsp;=&nbsp;cites;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;Map&lt;String,&nbsp;String&gt;&nbsp;getBooks()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;books;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;setBooks(Map&lt;String,&nbsp;String&gt;&nbsp;books)&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.books&nbsp;=&nbsp;books;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;Properties&nbsp;getDbParams()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;dbParams;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;setDbParams(Properties&nbsp;dbParams)&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.dbParams&nbsp;=&nbsp;dbParams;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;show()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“C显示注入参数C“</span>);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“dir:”</span>&nbsp;+&nbsp;dir);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“size:”</span>&nbsp;+&nbsp;size);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“允许上传的类型如下：”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;(String&nbsp;s&nbsp;:&nbsp;types)&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(s);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“城市信息：”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;(String&nbsp;s&nbsp;:&nbsp;cites)&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(s);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“图书信息:”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set&lt;Entry&lt;String,&nbsp;String&gt;&gt;&nbsp;book&nbsp;=&nbsp;books.entrySet();</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;(Entry&nbsp;en&nbsp;:&nbsp;book)&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(en.getKey()&nbsp;+&nbsp;<span class="string">“:”</span>&nbsp;+&nbsp;en.getValue());</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“显示数据库连接参数：”</span>);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set&nbsp;keys&nbsp;=&nbsp;dbParams.keySet();</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>&nbsp;(Object&nbsp;key&nbsp;:&nbsp;keys)&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.println(key&nbsp;+&nbsp;<span class="string">“=”</span>&nbsp;+&nbsp;dbParams.getProperty(key.toString()));</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">}</li> 
          </ol> 
         </div> 
         <p>测试程序：</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;TestMessageBean&nbsp;{</li> 
           <li class=""></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Test</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;test1()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;conf&nbsp;=&nbsp;<span class="string">“/applicationContext.xml”</span>;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext&nbsp;ac&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;ClassPathXmlApplicationContext(conf);</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBean&nbsp;bean&nbsp;=&nbsp;(MessageBean)&nbsp;ac.getBean(<span class="string">“messagebean”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bean.show();</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt">}</li> 
          </ol> 
         </div> 
         <p>测试结果：</p> 
         <div class="dp-highlighter bg_plain"> 
          <ol start="1"> 
           <li class="alt">C显示注入参数C</li> 
           <li class="">dir:D:\\images\</li> 
           <li class="alt">size:10240</li> 
           <li class="">允许上传的类型如下：</li> 
           <li class="alt">jpg</li> 
           <li class="">jpeg</li> 
           <li class="alt">gif</li> 
           <li class="">城市信息：</li> 
           <li class="alt">北京</li> 
           <li class="">上海</li> 
           <li class="alt">广州</li> 
           <li class="">图书信息:</li> 
           <li class="alt">1001:Java语言基础</li> 
           <li class="">1002:JavaWeb基础</li> 
           <li class="alt">1003:SSH框架技术</li> 
           <li class="">显示数据库连接参数：</li> 
           <li class="alt">password=123456</li> 
           <li class="">driverClassName=com.mysql.jdbc.Driver</li> 
           <li class="alt">username=root</li> 
          </ol> 
         </div> 
         <p>&nbsp;</p> 
         <h1><a name="t5"></a>6.Spring的AOP机制</h1> 
         <p>1)什么是AOP，解决什么问题<br /> CAspect Oriented Programming被称为面向方面(切面)编程。<br /> CAOP主要解决共通组件与某一批目标组件作用关系，以低耦合方式建立关联。<br /> CAOP编程核心是对方面处理（共通功能)进行解耦。OOP编程核心是对象。<br /> CAOP编程是以OOP为基础，在OOP基础之上改善程序中对象结构，使得对象关系更加灵活，易于维护和扩展。</p> 
         <p>2)AOP相关概念<br /> a.方面(Aspect)：<br /> 方面封装了共通处理，在AOP编程中，可以灵活作用到另外一批目标组件的方法上。<br /> b.切入点(Pointcut)<br /> 切入点负责指定哪些组件和方法，是方面切入的目标。采用一个表达式指定<br /> c.通知(Advice)<br /> 通知负责指定切入点和目标组件方法之间的作用时机。例如先执行目标方法，再执行方面处理。或者先执行方面处理，再执行目标方法。<br /> Spring提供以下5种通知类型：<br /> C前置通知(aop:before):先执行方面处理，再执行目标方法<br /> C后置通知(aop:after-returning):先执行目标方法，未抛出异常，再执行方面处理；有异常则不会执行方面组件<br /> C最终通知(aop:after):先执行目标方法，有无异常，都会再执行方面处理<br /> C环绕通知(aop:around):先执行方面处理前置部分，接着执行目标方法，然后再回到方面处理的后置部分。<br /> C异常通知(aop:after-throwing):先执行目标方法，发生异常再执行方面处理；没有抛出异常不会执行。<br /> try{<br /> //前置通知C执行方面处理<br /> //环绕的前置部分<br /> 执行目标方法<br /> //环绕的后置部分<br /> //后置通知C执行方面处理<br /> }catch(){<br /> //异常通知C执行方面处理<br /> }finally{<br /> //最终通知C执行方面处理<br /> }<br /> d.目标组件(Target)<br /> 切入点表达式指定的组件就是目标组件。<br /> e.连接点(JoinPoint)<br /> 连接点的集合是切入点。连接点指的是方面组件与某个目标组件相结合的信息。通过该对象可以获取目标组件类型和方法等信息。<br /> f.动态代理(AutoProxy)<br /> Spring框架采用动态代理技术实现了AOP机制。<br /> 当采用了AOP之后，Spring容器返回的目标Bean对象，是Spring动态生成的一个代理类型。该代理类负责去调用原目标组件方法和方面处理的功能。<br /> Spring中提供两种生成动态代理类的方法。<br /> CJDK Proxy API技术<br /> 针对有接口实现的目标组件。采用实现原目标接口的方法生成一个类型。<br /> public class $Proxy4 implements CostDao{<br /> public void save(){<br /> //调用JdbcCostDao的save()<br /> //调用方面LoggerAop的功能<br /> }<br /> public void findAll(){<br /> //调用JdbcCostDao的findAll()<br /> //调用方面LoggerAop的功能<br /> }<br /> }<br /> CCGLIB技术<br /> 针对没有接口实现的目标组件。采用继承方法生成一个子类。<br /> public class $$EnhancerByCGLIB$232 extends 原目标组件类型{<br /> public void save(){<br /> super.save();//调用原目标方法<br /> //调用方面组件处理<br /> }<br /> }</p> 
         <p>3)AOP使用步骤<br /> a.记录用户进入系统后执行的操作<br /> C编写方面，将共通功能封装<br /> C添加Spring配置，将组件定义成方面组件<br /> C添加Spring配置，定义切入点<br /> C添加Spring配置，定义通知</p> 
         <p>方面代码：</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;OptLogger&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**</span></li> 
           <li class="alt"><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;pjp</span></li> 
           <li class=""><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;连接点（需用环绕通知切入）</span></li> 
           <li class="alt"><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;Throwable</span></li> 
           <li class=""><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;Object&nbsp;log(ProceedingJoinPoint&nbsp;pjp)&nbsp;<span class="keyword">throws</span>&nbsp;Throwable&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;obj&nbsp;=&nbsp;pjp.proceed();<span class="comment">//&nbsp;执行目标组件方法处理</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;获取当前请求要执行的Action目标组件类型</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;className&nbsp;=&nbsp;pjp.getTarget().getClass().getName();</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;获取当前请求要执行的方法名</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;methodName&nbsp;=&nbsp;pjp.getSignature().getName();</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;根据类名和方法名形成key</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;key&nbsp;=&nbsp;className&nbsp;+&nbsp;<span class="string">“.”</span>&nbsp;+&nbsp;methodName;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;解析opt.properties，根据key获取操作动作描述</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;optName&nbsp;=&nbsp;PropertiesUtil.getProperty(key);</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">“XXX在”</span>&nbsp;+&nbsp;<span class="keyword">new</span>&nbsp;Date()&nbsp;+&nbsp;<span class="string">“时间做了”</span>&nbsp;+&nbsp;optName&nbsp;+&nbsp;<span class="string">“操作”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;obj;<span class="comment">//&nbsp;将proceed目标方法结果返回</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt">}</li> 
           <li class="">PropertiesUtil用于读取配置文件，可将特定操作（类+方法转换成中文描述）</li> 
           <li class="alt">&lt;pre&nbsp;name=<span class="string">“code”</span>&nbsp;<span class="keyword">class</span>=<span class="string">“java”</span>&gt;<span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;PropertiesUtil&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;<span class="keyword">static</span>&nbsp;Properties&nbsp;props&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;Properties();</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">static</span>{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">try</span>{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;inStream&nbsp;=&nbsp;PropertiesUtil.<span class="keyword">class</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getClassLoader().getResourceAsStream(</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">“opt.properties”</span>);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;props.load(inStream);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class="keyword">catch</span>(Exception&nbsp;ex){</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ex.printStackTrace();</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">static</span>&nbsp;String&nbsp;getProperty(String&nbsp;key){</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;val&nbsp;=&nbsp;props.getProperty(key);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;val;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class=""></li> 
           <li class="alt">}</li> 
          </ol> 
         </div> 
         <p>opt.properties：（使用native2ascii tool工具将中文转码）<br /> #use jdk/bin/native2ascii tool<br /> #以下分别对应：资费添加操作、资费删除操作<br /> com.test.action.AddCostAction.exeucte=\u8d44\u8d39\u6dfb\u52a0\u64cd\u4f5c<br /> com.test.action.DeleteCostAction.exeucte=\u8d44\u8d39\u5220\u9664\u64cd\u4f5c</p> 
         <pre></pre> 
         <p>配置代码：</p> 
         <div class="dp-highlighter bg_html"> 
          <ol class="dp-xml" start="1"> 
           <li class="alt"><span class="comments">&lt;!C&nbsp;AOP配置&nbsp;C&gt;</span></li> 
           <li class=""><span class="tag">&lt;</span><span class="tag-name">bean</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“optLogger”</span>&nbsp;<span class="attribute">class</span>=<span class="attribute-value">“com.test.aspect.OptLogger”</span><span class="tag">&gt;</span></li> 
           <li class="alt"><span class="tag">&lt;</span><span class="tag-name">aop:config</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">&lt;!C&nbsp;指定切入点&nbsp;C&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">aop:pointcut</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“actionPointcut”</span>&nbsp;<span class="attribute">expression</span>=<span class="attribute-value">“within(com.test.action.*)”</span>&nbsp;<span class="tag">/&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">&lt;!C&nbsp;将id=optLogger的Bean指定为方面组件&nbsp;C&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">aop:aspect</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“optLoggerAspect”</span>&nbsp;<span class="attribute">ref</span>=<span class="attribute-value">“optLogger”</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">&lt;!C&nbsp;指定通知，控制方面和目标组件作用时机&nbsp;C&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">aop:around</span>&nbsp;<span class="attribute">pointcut-ref</span>=<span class="attribute-value">“actionPointcut”</span>&nbsp;<span class="attribute">method</span>=<span class="attribute-value">“log”</span>&nbsp;<span class="tag">/&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">aop:aspect</span><span class="tag">&gt;</span></li> 
           <li class="alt"><span class="tag">&lt;/</span><span class="tag-name">aop:config</span><span class="tag">&gt;</span></li> 
          </ol> 
         </div> 
         <p>4)切入点表达式<br /> 切入点是用一个表达式表示，用于指定目标及其方法。<br /> *a.方法限定表达式<br /> 可以指定哪些方法启用方面组件功能<br /> execution(修饰符? 返回类型 方法名(参数列表) throws异常?)<br /> 示例1:<br /> //匹配容器中所有Bean对象的findAll方法<br /> execution(* findAll(..))<br /> //匹配容器中所有Bean对象的find开头方法<br /> execution(* find*(..))<br /> 示例2:<br /> //匹配JdbcCostDao所有方法<br /> execution(* org.dao.JdbcCostDao.*(..))<br /> 示例3:<br /> //匹配org.dao包下所有类的所有方法<br /> execution(* org.dao.*.*(..))<br /> //匹配org.dao包及其子包所有类所有方法<br /> execution(* org.dao..*.*(..))<br /> *b.类型限定表达式<br /> 可以限定某个类型的所有方法启用方面within(类型)<br /> 示例1：<br /> //匹配JdbcCostDao所有方法<br /> within(org.dao.JdbcCostDao)<br /> 示例2：<br /> //匹配org.dao下所有类的所有方法<br /> within(org.dao.*)<br /> 示例3：<br /> //匹配org.dao下及其子包所有类所有方法<br /> within(org.dao..*)<br /> *c.Bean名称限定表达式<br /> 可以利用Bean对象的id进行限定<br /> bean(id或name值)<br /> &lt;bean id=”” name=””&gt;<br /> name属性作用与id相同，id要求更严格，不允许使用/等特殊字符，name允许。<br /> 示例1:<br /> //匹配容器中所有id以Dao结尾的Bean对象<br /> bean(*Dao)<br /> d.参数限定表达式<br /> args(参数类型)<br /> 示例1:<br /> //匹配所有Bean对象中有一个参数，而且是String类型的方法<br /> args(java.lang.String)</p> 
         <p>提示：上述表达式可以利用&amp;&amp;,||连接在一起使用。</p> 
         <p>5)通知方法定义<br /> //前置通知方法<br /> public void xxx(){}<br /> //后置通知方法<br /> public void xxx(Object retVal){}<br /> 参数retVal可以接收目标方法返回值<br /> //最终通知方法<br /> public void xxx(){}<br /> *//环绕通知方法<br /> public Object xxx(ProceedingJoinPoint pjp){}<br /> *//异常通知方法<br /> public void xxx(Exception e){}<br /> 参数e可以接收目标方法抛出的异常对象</p> 
         <p>（示例：如6中用Log4j记录程序异常信息并保存下来）</p> 
         <h1><a name="t6"></a>7.Log4j</h1> 
         <p>log4j.jar工具是Apache组织下的一个日志组件，可以将消息按不同级别不同输出方式记录下来。<br /> log4j工具主要有以下3部分构成。<br /> C日志器Logger<br /> 负责提供输出不同级别消息的方法。消息可以分为调试、普通、警告、错误、致命级别，不同级别信息利用不同日志器的方法输出。<br /> C输出器Appender<br /> 负责控制信息输出的方式，例如控制台输出、文件输出等。<br /> C布局器Layout</p> 
         <p>负责将消息格式化。</p> 
         <p><strong>对应关系：一个Logger可以指定多个不同的Appender，每个Appender可以指定一个Layout。</strong></p> 
         <p>使用步骤：</p> 
         <p>C引入log4j.jar开发包</p> 
         <p>C在Java代码中获取Logger对象,之后利用它的debug(),error()输出信息</p> 
         <p>C在src下添加log4j.properties配置文件指定消息输出的级别，输出的appender和输出的layout格式。</p> 
         <p>提示：项目中由于SSH框架利用Log4j工具输出调试和异常信息，因此遇到错误提示不明确时，可以添加log4j.properties配置将级别调到DEBUG查看。</p> 
         <p>如配置文件，log4j.properties：</p> 
         <div class="dp-highlighter bg_plain"> 
          <ol start="1"> 
           <li class="alt">log4j.rootLogger=error,myconsole,myfile</li> 
           <li class=""></li> 
           <li class="alt">log4j.appender.myfile=org.apache.log4j.FileAppender</li> 
           <li class="">log4j.appender.myfile.File=D:\\log4j.html</li> 
           <li class="alt">log4j.appender.myfile.layout=org.apache.log4j.HTMLLayout</li> 
           <li class=""></li> 
           <li class="alt">log4j.appender.myconsole=org.apache.log4j.ConsoleAppender</li> 
           <li class="">log4j.appender.myconsole.layout=org.apache.log4j.SimpleLayout</li> 
          </ol> 
         </div> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt"><span class="comment">/**</span></li> 
           <li class=""><span class="comment">&nbsp;*&nbsp;@Description:异常记录方面组件</span></li> 
           <li class="alt"><span class="comment">&nbsp;*/</span></li> 
           <li class=""><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;ExceptionLogger&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;获取日志器</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;<span class="keyword">static</span>&nbsp;Logger&nbsp;logger&nbsp;=&nbsp;Logger.getLogger(ExceptionLogger.<span class="keyword">class</span>);</li> 
           <li class="alt"></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;ex就是目标方法抛出的异常对象</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;logException(Exception&nbsp;ex)&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;System.out.println(“将异常写入文件”&nbsp;+&nbsp;ex);</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;采用Log4j日志工具记录异常信息</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(ex);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(ex.getStackTrace()[<span class="number">0</span>]);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt">}</li> 
          </ol> 
         </div> 
         <div class="dp-highlighter bg_html"> 
          <ol class="dp-xml" start="1"> 
           <li class="alt"><span class="comments">&lt;!C&nbsp;AOP配置&nbsp;C&gt;</span></li> 
           <li class=""><span class="tag">&lt;</span><span class="tag-name">bean</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“exceptionLogger”</span>&nbsp;<span class="attribute">class</span>=<span class="attribute-value">“com.test.aspect.ExceptionLogger”</span><span class="tag">&gt;</span></li> 
           <li class="alt"><span class="tag">&lt;/</span><span class="tag-name">bean</span><span class="tag">&gt;</span></li> 
           <li class=""><span class="comments">&lt;!C&nbsp;指定切入点&nbsp;C&gt;</span></li> 
           <li class="alt"><span class="tag">&lt;</span><span class="tag-name">aop:pointcut</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“daoPointcut”</span>&nbsp;<span class="attribute">expression</span>=<span class="attribute-value">“within(com.test.dao..*)”</span>&nbsp;<span class="tag">/&gt;</span></li> 
           <li class=""><span class="tag">&lt;</span><span class="tag-name">aop:config</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">&lt;!C&nbsp;将id=exceptionLogger的Bean指定为方面组件&nbsp;C&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">&lt;!C&nbsp;trowing指定logException方法的参数名，用于接收目标方法抛出的异常对象&nbsp;C&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">aop:aspect</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“exceptionLoggerAspect”</span>&nbsp;<span class="attribute">ref</span>=<span class="attribute-value">“exceptionLogger”</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">aop:after-throwing</span>&nbsp;<span class="attribute">pointcut-ref</span>=<span class="attribute-value">“daoPointcut”</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">method</span>=<span class="attribute-value">“logException”</span>&nbsp;<span class="attribute">throwing</span>=<span class="attribute-value">“ex”</span>&nbsp;<span class="tag">/&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">aop:aspect</span><span class="tag">&gt;</span></li> 
           <li class="alt"><span class="tag">&lt;/</span><span class="tag-name">aop:config</span><span class="tag">&gt;</span></li> 
          </ol> 
         </div> 
         <p>在配置文件指定的地方生产文件如下：</p> 
         <div class="dp-highlighter bg_plain"> 
          <ol start="1"> 
           <li class="alt">D:\\log4j.html</li> 
          </ol> 
         </div> 
         <p>Log session start time Wed Jun 22 17:00:13 CST 2016</p> 
         <hr noshade="noshade" size="1" /> 
         <p>Log session start time Wed Jun 22 17:03:39 CST 2016</p> 
         <table border="1" width="100%" cellspacing="0" cellpadding="4"> 
          <tbody> 
           <tr> 
            <th>Time</th> 
            <th>Thread</th> 
            <th>Level</th> 
            <th>Category</th> 
            <th>Message</th> 
           </tr> 
           <tr> 
            <td>0</td> 
            <td title="main thread">main</td> 
            <td title="Level"><strong>ERROR</strong></td> 
            <td title="com.test.aspect.ExceptionLogger category">com.test.aspect.ExceptionLogger</td> 
            <td title="Message">java.lang.NullPointerException</td> 
           </tr> 
           <tr> 
            <td>1</td> 
            <td title="main thread">main</td> 
            <td title="Level"><strong>ERROR</strong></td> 
            <td title="com.test.aspect.ExceptionLogger category">com.test.aspect.ExceptionLogger</td> 
            <td title="Message">com.test.dao.JdbcCostDao.delete(JdbcCostDao.java:22)</td> 
           </tr> 
          </tbody> 
         </table> 
         <table border="1" width="100%" cellspacing="0" cellpadding="4"> 
          <tbody> 
           <tr> 
            <th>Time</th> 
            <th>Thread</th> 
            <th>Level</th> 
            <th>Category</th> 
            <th>Message</th> 
           </tr> 
           <tr> 
            <td>0</td> 
            <td title="main thread">main</td> 
            <td title="Level"><strong>ERROR</strong></td> 
            <td title="com.test.aspect.ExceptionLogger category">com.test.aspect.ExceptionLogger</td> 
            <td title="Message">java.lang.NullPointerException</td> 
           </tr> 
           <tr> 
            <td>3</td> 
            <td title="main thread">main</td> 
            <td title="Level"><strong>ERROR</strong></td> 
            <td title="com.test.aspect.ExceptionLogger category">com.test.aspect.ExceptionLogger</td> 
            <td title="Message">com.test.dao.JdbcCostDao.delete(JdbcCostDao.java:22)</td> 
           </tr> 
          </tbody> 
         </table> 
         <h1><a name="t7"></a>8.Spring注解配置</h1> 
         <p>1)什么是注解<br /> 注解技术是JDK5.0开始提供的。<br /> 它的标记格式为”@名称”，它可以定义在类前、方法前、成员变量前。<br /> 2)使用注解的好处<br /> 现在的框架都提供了注解配置，利用注解技术去简化或替代原有的XML配置。<br /> 3)Spring的组件扫描技术<br /> Spring可以自动扫描指定包下的Class组件,如果发现类定义前面有以下几个标记<br /> @Controller（Action组件应用）<br /> @Service（Service业务组件应用）<br /> @Repository（DAO组件应用）<br /> @Component（其他组件应用）<br /> 就会将该组件扫描到Spring容器，由容器负责管理和对象的创建，等价于XML中&lt;bean&gt;定义。<br /> 使用方法：<br /> C在applicationContext.xml中开启组件扫描功能 &lt;context:component-scan base-package=”指定包路径”/&gt;<br /> C在Action或DAO等组件类定义前使用上述标记。默认用类名首字母小写当id，也可以采用@Repository(“指定id”)格式<br /> 其他&lt;bean&gt;属性注解标记：<br /> @Scope(“prototype”或”singleton”)等价于scope属性<br /> @PreDestory等价于destory-method属性<br /> @PostConstruct等价于init-method属性<br /> 4)注入的注解<br /> @Resource<br /> @Autowired<br /> 上面两种标记都可以实现类型匹配注入，但是如果遇到多个匹配对象时，会发生异常。这时需要指定注入哪个id的Bean<br /> @Resource(name=”指定id”)<br /> @Autowired()<br /> @Qualifier(“指定id”)<br /> 上面标记可以写在变量定义前或set方法前。写在变量定义前时，set可省略。<br /> 5)AOP注解配置<br /> 使用方法：<br /> C在applicationContext.xml中开启AOP的注解配置&lt;aop:aspectj-autoproxy/&gt;<br /> C在方面组件中类定义前使用下面标记<br /> @Component //将Bean扫描到容器<br /> @Aspect //将Bean升级为方面组件<br /> C在方面组件中定义一个空方法，利用@Point标记定义切入表达式<br /> @Pointcut(“切入表达式”)<br /> public void mypoint(){}<br /> C在方面组件处理方法上，使用下面通知标记<br /> @Before 前置通知标记<br /> @Around 环绕通知标记<br /> @AfterReturning 后置通知标记<br /> @AfterThrowing 异常通知标记<br /> @After 最终通知标记</p> 
         <p>&nbsp;</p> 
         <p>转载自：http://www.csdn.net/</p> 
         <p>原作者：CSDN某博主</p> 
         <p>如果文章内容侵犯了您的著作权益，请联系博主（Email:jackiesun2023@gmail.com）删除，谢谢!</p> 
        </div> 
       </article> 
       <article itemscope="" itemtype="http://schema.org/Article" id="post-101" class="post-101 post type-post status-publish format-standard hentry category-spring tag-ioc tag-spring tag-spring-ioc"> 
        <header class="entry-header"> 
         <h2 class="entry-title" itemprop="name"> <a itemprop="url" href="http://www.shilib.com/spring-ioc%e5%9f%ba%e7%a1%80spring-001/" title="链向Spring IOC基础Spring-001的固定链接" rel="bookmark">Spring IOC基础Spring-001</a> </h2> 
         <div class="entry-meta">
          <span class="entry-date"><a href="http://www.shilib.com/spring-ioc%e5%9f%ba%e7%a1%80spring-001/" rel="bookmark"><time class="entry-date published" datetime="2015-10-25T13:13:49+00:00" itemprop="datepublished">2015年10月25日</time></a></span> by 
          <span class="author vcard" itemscope="" itemprop="author" itemtype="http://schema.org/Person"><a class="url fn n" href="http://www.shilib.com/author/jackie2023/" rel="author" itemprop="url"><span itemprop="name">jackie2023</span></a></span>
          <span class="sep">&middot;</span>
          <span class="comments-link"><span><span class="screen-reader-text">Spring IOC基础Spring-001</span>已关闭评论</span></span>
         </div> 
        </header> 
        <div class="entry-content" itemprop="articleBody"> 
         <p><strong>一：IOC编程概念</strong></p> 
         <p>1.IOC控制反转：就是把创建对象（bean）和维护对象关系的权利从程序中转移到spring中容器中，程序的本身不在维护关系和创建对象。</p> 
         <p>2.di:实际上和IOC是同一个概念，只是认为di表示更准确而已。</p> 
         <p><strong>二：一个简单的IOC案例</strong></p> 
         <p>1）编写一个Animal接口</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt">&lt;span&nbsp;style=<span class="string">“font-size:18px;”</span>&gt;<span class="keyword">package</span>&nbsp;com.cloud.ioc;</li> 
           <li class=""><span class="keyword">public</span>&nbsp;<span class="keyword">interface</span>&nbsp;Animal&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;eat();</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;sleep();</li> 
           <li class="alt">}&lt;/span&gt;</li> 
          </ol> 
         </div> 
         <p>2）编写一个Dog类</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt">&lt;span&nbsp;style=<span class="string">“font-size:18px;”</span>&gt;<span class="keyword">package</span>&nbsp;com.cloud.ioc;</li> 
           <li class=""></li> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;Dog&nbsp;<span class="keyword">implements</span>&nbsp;Animal{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;String&nbsp;name;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;<span class="keyword">int</span>&nbsp;age;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Override</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;eat()&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>(age&gt;<span class="number">3</span>)</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(name+<span class="string">“:今年”</span>+age+<span class="string">“岁了,可以食物”</span>);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(name+<span class="string">“:今年”</span>+age+<span class="string">“岁了,不会吃食物”</span>);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Override</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;sleep()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>(age&gt;<span class="number">3</span>)</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(name+<span class="string">“:今年”</span>+age+<span class="string">“岁了,睡觉时间长”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(name+<span class="string">“:今年”</span>+age+<span class="string">“岁了,很活泼”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;String&nbsp;getName()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;name;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;setName(String&nbsp;name)&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.name&nbsp;=&nbsp;name;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">int</span>&nbsp;getAge()&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;age;</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">void</span>&nbsp;setAge(<span class="keyword">int</span>&nbsp;age)&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.age&nbsp;=&nbsp;age;</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">}</li> 
           <li class="alt">&lt;/span&gt;</li> 
          </ol> 
         </div> 
         <p>3）applicationContext.xml配置文件</p> 
         <div class="dp-highlighter bg_html"> 
          <ol class="dp-xml" start="1"> 
           <li class="alt"><span class="tag">&lt;</span><span class="tag-name">span</span>&nbsp;<span class="attribute">style</span>=<span class="attribute-value">“font-size:18px;”</span><span class="tag">&gt;</span><span class="tag">&lt;</span><span class="tag-name">beans</span>&nbsp;<span class="attribute">xmlns</span>=<span class="attribute-value">“http://www.springframework.org/schema/beans”</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">xmlns:xsi</span>=<span class="attribute-value">“http://www.w3.org/2001/XMLSchema-instance”</span>&nbsp;<span class="attribute">xmlns:mvc</span>=<span class="attribute-value">“http://www.springframework.org/schema/mvc”</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">xmlns:context</span>=<span class="attribute-value">“http://www.springframework.org/schema/context”</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">xmlns:aop</span>=<span class="attribute-value">“http://www.springframework.org/schema/aop”</span>&nbsp;<span class="attribute">xmlns:tx</span>=<span class="attribute-value">“http://www.springframework.org/schema/tx”</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">xsi:schemaLocation</span>=”http://www.springframework.org/schema/beans</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context/spring-context-3.2.xsd</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx/spring-tx-3.2.xsd&nbsp;“<span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">bean</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">“myDog”</span>&nbsp;<span class="attribute">class</span>=<span class="attribute-value">“com.cloud.ioc.Dog”</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">property</span>&nbsp;<span class="attribute">name</span>=<span class="attribute-value">“name”</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span>小白<span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">property</span>&nbsp;<span class="attribute">name</span>=<span class="attribute-value">“age”</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span>2<span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span></li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span></li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;/</span><span class="tag-name">bean</span><span class="tag">&gt;</span></li> 
           <li class="alt"><span class="tag">&lt;/</span><span class="tag-name">beans</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag-name">span</span><span class="tag">&gt;</span></li> 
          </ol> 
         </div> 
         <p>&nbsp;</p> 
         <p>4）编写测试类</p> 
         <div class="dp-highlighter bg_java"> 
          <ol class="dp-j" start="1"> 
           <li class="alt">&lt;span&nbsp;style=<span class="string">“font-size:18px;”</span>&gt;<span class="keyword">package</span>&nbsp;com.cloud.ioc;</li> 
           <li class=""></li> 
           <li class="alt"><span class="keyword">import</span>&nbsp;org.springframework.context.ApplicationContext;</li> 
           <li class=""><span class="keyword">import</span>&nbsp;org.springframework.context.support.ClassPathXmlApplicationContext;</li> 
           <li class="alt"><span class="keyword">public</span>&nbsp;<span class="keyword">class</span>&nbsp;TestIOC&nbsp;{</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span>&nbsp;<span class="keyword">static</span>&nbsp;<span class="keyword">void</span>&nbsp;main(String[]&nbsp;args)&nbsp;{</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext&nbsp;ac&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;ClassPathXmlApplicationContext(<span class="string">“applicationContext.xml”</span>);</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dog&nbsp;dog&nbsp;=&nbsp;(Dog)&nbsp;ac.getBean(<span class="string">“myDog”</span>);</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dog.eat();</li> 
           <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dog.sleep();</li> 
           <li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;}</li> 
           <li class="">}&lt;/span&gt;</li> 
          </ol> 
         </div> 
         <p><strong>三：IOC关系图解</strong></p> 
         <p><img src="http://img.blog.csdn.net/20160623221257188?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /></p> 
         <p>&nbsp;</p> 
         <p>&nbsp;</p> 
         <p>转载自：http://www.csdn.net/</p> 
         <p>原作者：CSDN某博主</p> 
         <p>如果文章内容侵犯了您的著作权益，请联系博主（Email:jackiesun2023@gmail.com）删除，谢谢!</p> 
        </div> 
       </article> 
      </div> 
      <footer class="site-info" itemscope="" itemtype="http://schema.org/WPFooter"> 
       <a href="http://www.shilib.com" title=" ">@Jackie Soon&nbsp;&nbsp;&nbsp;&amp;nbsp2015-09-12</a>. 
       <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260802220'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1260802220%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script> 
      </footer> 
     </div> 
    </div> 
   </div> 
  </div> 
  <script src="http://www.shilib.com/wp-includes/js/wp-embed.min.js?ver=4.7.3"></script>  
 </body>
</html>