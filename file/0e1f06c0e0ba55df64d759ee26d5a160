<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
 <head profile="http://gmpg.org/xfn/11"> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
  <title>Oracle</title> 
  <meta name="robots" content="noindex,noodp,noydir" /> 
  <link rel="dns-prefetch" href="//www.askmaclean.com" /> 
  <link rel="dns-prefetch" href="//s.w.org" /> 
  <link rel="alternate" type="application/rss+xml" title="Oracle数据库服务热线：13764045638   诗檀软件 &raquo; Feed" href="http://www.askmaclean.com/feed" /> 
  <link rel="alternate" type="application/rss+xml" title="Oracle数据库服务热线：13764045638   诗檀软件 &raquo; 评论Feed" href="http://www.askmaclean.com/comments/feed" /> 
  <link rel="alternate" type="application/rss+xml" title="Oracle数据库服务热线：13764045638   诗檀软件 &raquo; Oracle标签Feed" href="http://www.askmaclean.com/archives/tag/oracle/feed" /> 
  <link rel="canonical" href="http://www.askmaclean.com/archives/tag/oracle" /> 
  <script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.askmaclean.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.3"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script> 
  <style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style> 
  <link rel="stylesheet" id="yarppWidgetCss-css" href="http://www.askmaclean.com/wp-content/plugins/yet-another-related-posts-plugin/style/widget.css?ver=4.7.3" type="text/css" media="all" /> 
  <link rel="stylesheet" id="minimum-theme-css" href="http://www.askmaclean.com/wp-content/themes/minimum/style.css?ver=2.4.2" type="text/css" media="all" /> 
  <script type="text/javascript" src="http://www.askmaclean.com/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script>
  <script>jQueryWP = jQuery;</script> 
  <script type="text/javascript" src="http://www.askmaclean.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script> 
  <!--[if lt IE 9]>
<script type='text/javascript' src='http://www.askmaclean.com/wp-content/themes/genesis/lib/js/html5shiv.min.js?ver=3.7.3'></script>
<![endif]--> 
  <link rel="https://api.w.org/" href="http://www.askmaclean.com/wp-json/" /> 
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.askmaclean.com/xmlrpc.php?rsd" /> 
  <link rel="icon" href="http://www.askmaclean.com/wp-content/themes/minimum/images/favicon.ico" /> 
  <link rel="pingback" href="http://www.askmaclean.com/xmlrpc.php" /> 
  <link rel="next" href="http://www.askmaclean.com/archives/tag/oracle/page/2" /> 
  <style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style> 
 </head> 
 <body class="archive tag tag-oracle tag-2277 custom-header header-full-width sidebar-content"> 
  <div id="wrap">
   <div id="header">
    <div class="wrap">
     <div id="title-area">
      <p id="title"><a href="http://www.askmaclean.com/">Oracle数据库服务热线：13764045638 诗檀软件</a></p>
      <p id="description">诗檀软件 邮箱: service@parnassusdata.com , ORACLE QQ群号：171092051，微信公众号: askMaclean</p>
     </div>
    </div>
   </div>
   <div id="nav">
    <div class="wrap">
     <ul id="menu-top-menu" class="menu genesis-nav-menu menu-primary js-superfish">
      <li id="menu-item-18648" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18648"><a href="http://www.parnassusdata.com/oracle-edu/">Oracle OCP/OCM培训</a></li> 
      <li id="menu-item-8924" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-has-children menu-item-8924"><a href="http://www.askmaclean.com/">了解 Maclean Liu 刘相兵 @诗檀软件</a> 
       <ul class="sub-menu"> 
        <li id="menu-item-8927" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8927"><a href="http://www.askmaclean.com/about-me">About Me</a></li> 
       </ul> </li> 
      <li id="menu-item-12379" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-12379"><a target="_blank" href="http://www.shoug.info">上海Oracle用户组</a></li> 
      <li id="menu-item-8922" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-8922"><a target="_blank" href="http://www.askmaclean.com/sitemap.html">网站地图</a> 
       <ul class="sub-menu"> 
        <li id="menu-item-12343" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-12343"><a target="_blank" href="http://www.askmaclean.com/archives/exadata.html">Exadata专题</a></li> 
        <li id="menu-item-12904" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12904"><a href="http://www.askmaclean.com/archives/maclean-write-oracle-basic.html">Maclean写的Oracle入门书</a></li> 
        <li id="menu-item-13033" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13033"><a href="http://www.askmaclean.com/archives/oracle-latch.html">Oracle Latch全解</a></li> 
        <li id="menu-item-12667" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12667"><a href="http://www.askmaclean.com/archives/oracle-sql-tuning.html">Oracle SQL性能优化专题</a></li> 
        <li id="menu-item-12550" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12550"><a href="http://www.askmaclean.com/archives/12c-new-feature-summary.html">Oracle Database 12c新特性</a> 
         <ul class="sub-menu"> 
          <li id="menu-item-12649" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12649"><a href="http://www.askmaclean.com/archives/pluggable-container-db-12c.html">12c PDB/CDB特性专题</a></li> 
         </ul> </li> 
        <li id="menu-item-11149" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11149"><a target="_blank" href="https://blogs.oracle.com/askmaclean/">blogs.oracle.com上的镜像</a></li> 
        <li id="menu-item-11506" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11506"><a target="_blank" href="http://feed.askmaclean.com/">Oracle Feed World</a></li> 
        <li id="menu-item-11685" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11685"><a href="http://train.askmaclean.com">自学Oracle之窗</a></li> 
       </ul> </li> 
      <li id="menu-item-13936" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13936"><a href="http://www.parnassusdata.com/zh-hans/emergency-services">24*7 Oracle紧急服务</a></li> 
      <li id="menu-item-14298" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-14298"><a href="http://parnassusdata.com/oracle-recovery-landing/index.html">诗檀软件PRM-DUL</a> 
       <ul class="sub-menu"> 
        <li id="menu-item-13894" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13894"><a href="http://zcdn.parnassusdata.com/DUL4108.zip">下载PRM Oracle灾难恢复软件</a></li> 
        <li id="menu-item-12272" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-12272"><a target="_blank" href="http://www.askmaclean.com/archives/oracle-database-recover.html">Oracle数据恢复专题</a></li> 
       </ul> </li> 
      <li id="menu-item-14675" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14675"><a href="http://www.askmaclean.com/archives/oracle-dul.html">Oracle DUL Data Unloader数据恢复工具</a></li> 
      <li id="menu-item-16422" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-16422"><a href="http://www.askmaclean.com/archives/oracle-dul-data-unloader-data-recovery-tool-information-summary.html">Oracle DUL LEARN MORE</a></li> 
     </ul>
    </div>
   </div>
   <div id="inner">
    <div id="content-sidebar-wrap">
     <div id="content" class="hfeed">
      <div class="post-14669 post type-post status-publish format-standard hentry category-oracle category-backup-recover tag-asm tag-data-unloader tag-dul tag-oracle entry">
       <h2 class="entry-title"><a href="http://www.askmaclean.com/archives/oracle-dul.html" rel="bookmark">Oracle DUL Data Unloader数据恢复工具信息汇总</a></h2> 
       <div class="post-info">
        <span class="date published time" title="2014-01-28T11:35:05+00:00">2014/01/28</span> by 
        <span class="author vcard"><span class="fn"><a href="http://www.askmaclean.com/archives/author/admin" rel="author">Maclean Liu</a></span></span> 
        <span class="post-comments"><a href="http://www.askmaclean.com/archives/oracle-dul.html#comments"><span class="ds-thread-count" data-thread-key="14669" data-replace="1">5 Comments</span></a></span> 
       </div>
       <div class="entry-content">
        <p>PRM-DUL是开放的ORACLE DUL 软件，点击下面的链接下载PRM-DUL</p> 
        <p><a href="http://7xl1jo.com2.z0.glb.qiniucdn.com/DUL3206.zip">DUL FOR LINUX平台</a>(已更新为PRM-DUL)</p> 
        <p><a href="http://7xl1jo.com2.z0.glb.qiniucdn.com/DUL3206.zip">DUL FOR Windows平台</a>&nbsp;(已更新为PRM-DUL)</p> 
        <p>&nbsp;</p> 
        <h2><a href="http://www.parnassusdata.com/zh-hans/emergency-services">如果自己搞不定可以找诗檀软件专业ORACLE数据库修复团队成员帮您恢复!</a></h2> 
        <h2>诗檀软件专业数据库修复团队</h2> 
        <h2>服务热线 ： 13764045638&nbsp; &nbsp;QQ号:47079569 &nbsp; &nbsp;邮箱：service@parnassusdata.com</h2> 
        <p>Oracle DUL Data Unloader数据恢复工具信息汇总</p> 
        <p><a href="http://www.askmaclean.com/archives/oracle-dul.html/dulruler" rel="attachment wp-att-16216"><img class="aligncenter size-full wp-image-16216" src="http://www.askmaclean.com/wp-content/uploads/2014/01/DULRULER.gif" alt="DULRULER" width="438" height="82" /></a></p> 
        <h2>Oracle DUL 是Oracle公司内部的数据库恢复工具，由在荷兰的Oracle Support，Bernard van Duijnen开发：</h2> 
        <ul> 
         <li><span style="color: #ff0000;">DUL不是Oracle的一个产品</span></li> 
         <li><span style="color: #ff0000;">DUL不是一个受Oracle支持的产品</span></li> 
         <li><span style="color: #ff0000;">DUL被严格限制为Oracle Support售后支持部门内部使用</span></li> 
         <li><span style="color: #ff0000;">DUL的使用在国外需要经过Oracle公司的内部审批，首先你必须购买了Oracle的标准服务PS才可能用到DUL，否则甚至没有资格使用DUL</span></li> 
         <li><span style="color: #ff0000;">DUL被严格控制的一个原因是其采用了部分Oracle源代码，所以必须被严格控制</span></li> 
        </ul> 
        <p><a href="http://www.askmaclean.com/wp-content/uploads/2014/01/oracle-dul-1.png"><img class="aligncenter wp-image-15927" src="http://www.askmaclean.com/wp-content/uploads/2014/01/oracle-dul-1-1024x555.png" alt="oracle-dul-1" width="1008" height="547" srcset="http://www.askmaclean.com/wp-content/uploads/2014/01/oracle-dul-1-1024x555.png 1024w, http://www.askmaclean.com/wp-content/uploads/2014/01/oracle-dul-1-300x163.png 300w, http://www.askmaclean.com/wp-content/uploads/2014/01/oracle-dul-1.png 1366w" sizes="(max-width: 1008px) 100vw, 1008px" /></a></p> 
        <p>大约从DUL 9开始，Bernard van Duijnen为了限制外界使用DUL，所以给DUL加上了软件时间锁，即他会定期编译不同平台上的DUL(DUL基于C语言编写)并定期上传到ORACLE 内部的DUL workspace(基于stbeehive的空间)，Oracle Support可以使用内部VPN登陆后下载。就是说 好比bernard.van.duijnen 在10月1日发布了一个版本，日期锁是30天，那么这个版本到11月1日基本就失效了， DUL不是简单的读OS时间，所以改OS时间是没用的。 因为Oracle的datafile里也记录了一个当前时间，所以DUL读的是datafile里的时间。 一般用户不可能为了用DUL去改那个时间。</p> 
        <p><img class="aligncenter" src="http://7xi9ig.com2.z0.glb.qiniucdn.com/IMG_0909.JPG" alt="" width="459" height="344" /></p> 
        <p>注意由于bernard.van.duijnen同学不提供HP-UX平台上的DUL，所以DUL没有HP-UX的对应版本。</p> 
        <p>同时早期的Oracle DUL版本用在现在的版本10g、11g、12c的数据库基本是用不了了，因为太老了。 &nbsp;在美国使用DUL是被严格控制的，在中国国内的话 基本就是Oracle ACS 高级客户服务部门对外在用，购买ORACLE ACS现场服务的价格还是很贵的。</p> 
        <p>附件为一个Oracle ACS提供DUL 服务的介绍文档（当然原厂现场服务是比较昂贵的，且前提是用户已经每年购买了PS标准服务，否则甚至无法购买ACS高级服务的现场服务)：</p> 
        <div class="page" title="Page 1"> 
         <div class="section"> 
          <div class="layoutArea"> 
           <div class="column"> 
            <p><a href="http://www.askmaclean.com/wp-content/uploads/2014/01/DUL.pdf">DUL C DATA RECOVERY UNLOADER DataSheet</a></p> 
           </div> 
          </div> 
         </div> 
        </div> 
        <p><a href="http://www.askmaclean.com/wp-content/uploads/2014/01/DUL.pdf">http://www.askmaclean.com/wp-content/uploads/2014/01/DUL.pdf</a></p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p><a href="http://www.askmaclean.com/wp-content/uploads/2014/01/DUL-Users-and-Configuration-Guide-V10.2.4.27.pdf">DUL 10的英文版使用手册：</a></p> 
        <p><a href="http://www.askmaclean.com/wp-content/uploads/2014/01/DUL-Users-and-Configuration-Guide-V10.2.4.27.pdf">DUL User’s and Configuration Guide V10.2.4.27</a></p> 
        <p><a href="http://www.askmaclean.com/wp-content/uploads/2014/01/DUL-Users-and-Configuration-Guide-V10.2.4.27.pdf">http://www.askmaclean.com/wp-content/uploads/2014/01/DUL-Users-and-Configuration-Guide-V10.2.4.27.pdf</a></p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>DUL可以从已经损坏严重的数据库中抽取数据， DUL可以直接扫描Oracle Datafile数据文件，并识别表头块segment header，访问Extent盘区信息，并从中读取实际行数据。 后续DUL能生成SQLLDR形式的导入文件，或者EXP格式的DMP文件。</p> 
        <p>如果SYSTEM表空间数据文件还在，那么 DUL读取Oracle数据字典。否则DUL采取采用的形式实际读取行，并根据内部算法判断字段类型，字段长度。</p> 
        <p>DUL可以基本上处理所有的常见行类型，包括常规行、迁移行、链式行、多盘区和簇表等；处理这些行时不需要额外人工介入。跨平台抽取也是OK的。 &nbsp;DUL直接从Oracle Datafile抽取数据，而无需Oracle数据库实例。 其实施脏读，假设每个事务均已经提交。 DUL不检测是否需要做介质恢复，即便是损坏的数据块也可以读出。 支持DMT和LMT表空间。 由于是脏读，所以DUL恢复数据后一般建议由应用验证数据。</p> 
        <p>兼容性方面DUL可以处理从不同操作系统上拷贝过来的数据文件。支持大多数数据库结构： 链式行、迁移行、hash/index 簇，LONG，RAW，ROWID，DATE，Number，多FreeList，高水位，NULL等等。 DUL 兼容ORACLE 6,7,8和9以及10g 11g 12c。</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p><a href="http://www.askmaclean.com/wp-content/uploads/2014/01/PRM-Schema-level-DataBridge-1.png"><img class="aligncenter size-full wp-image-15926" src="http://www.askmaclean.com/wp-content/uploads/2014/01/PRM-Schema-level-DataBridge-1.png" alt="PRM Schema-level DataBridge (1)" width="1004" height="376" srcset="http://www.askmaclean.com/wp-content/uploads/2014/01/PRM-Schema-level-DataBridge-1.png 1004w, http://www.askmaclean.com/wp-content/uploads/2014/01/PRM-Schema-level-DataBridge-1-300x112.png 300w" sizes="(max-width: 1004px) 100vw, 1004px" /></a></p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>诗檀软件(Maclean 所在的公司）开发了DUL的同类产品 ，PRM-DUL。 在DUL的基础上引入了图形化界面GUI和DataBridge（数据无需落地成为SQLLDR文件，直接像DBLINK一样传输到目标数据库)等功能；同时由于PRM-DUL是基于JAVA编写的，所以可以跨所有平台，包括HP-UX。</p> 
        <p><a href="http://parnassusdata.com/sites/default/files/ParnassusData_PRMForOracle_3206.zip">PRM-DUL的免费版本下载：</a></p> 
        <p><a href="http://parnassusdata.com/sites/default/files/ParnassusData_PRMForOracle_3206.zip">http://parnassusdata.com/sites/default/files/ParnassusData_PRMForOracle_3206.zip</a></p> 
        <p><a href="http://www.parnassusdata.com/sites/default/files/ParnassusData%20Recovery%20Manager%20For%20Oracle%20Database%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C%20v0.3.pdf">PRM-DUL的使用手册&nbsp;http://www.parnassusdata.com/sites/default/files/ParnassusData%20Recovery%20Manager%20For%20Oracle%20Database%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C%20v0.3.pdf</a></p> 
        <p>&nbsp;</p> 
        <p>PRM-DUL的免费版本默认每张表只能抽取一万行数据，如果你的数据库很小以至于没有超过一万行数据的表，那么可以直接使用免费的PRM-DUL。 如果你的数据库较大且数据十分重要，那么可以考虑购买企业版的PRM-DUL，企业版PRM-DUL 针对一套数据库提供一个License软件使用许可证，一个License的价格是7500元人民币(含17%增值税)。</p> 
        <p>同时PRM-DUL还提供部分免费的License：</p> 
        <p><a title="免费开放几个PRM-DUL 企业版License Key" href="http://www.askmaclean.com/archives/free-prm-dul-license-key.html" target="_blank">免费开放几个PRM-DUL 企业版License Key</a></p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>如果你的Oracle数据库恢复case在使用DUL后仍搞不定，那么可以考虑通过服务恢复：</p> 
        <p>诗檀软件目前提供几乎所有场景的Oracle恢复情况，包括：数据库无法打开，表被误DROP、TRUNCATE、DELETE等，ASM Diskgroup无法MOUNT等。</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>PRM-DUL 基于JAVA开发，这保证了PRM可以跨平台运行，无论是AIX、Solaris、HPUX等Unix平台， Redhat、Oracle Linux、SUSE等Linux平台，还是Windows平台上均可以直接运行PRM。</p> 
        <p>&nbsp;</p> 
        <p>PRM-DUL支持的操作系统平台：</p> 
        <p>&nbsp;</p> 
        <table> 
         <tbody> 
          <tr> 
           <td width="284">Platform Name</td> 
           <td width="284">Supported</td> 
          </tr> 
          <tr> 
           <td width="284">AIX POWER</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">Solaris Sparc</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">Solaris X86</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">Linux X86</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">Linux X86-64</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">HPUX</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">MacOS</td> 
           <td width="284">Yes</td> 
          </tr> 
         </tbody> 
        </table> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>PRM-DUL目前支持的数据库版本</p> 
        <p>&nbsp;</p> 
        <table> 
         <tbody> 
          <tr> 
           <td width="284">ORACLE DATABASE VERSION</td> 
           <td width="284">Supported</td> 
          </tr> 
          <tr> 
           <td width="284">Oracle 7</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">Oracle 8</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">Oracle 8i</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">Oracle 9i</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">Oracle 10g</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">Oracle 11g</td> 
           <td width="284">Yes</td> 
          </tr> 
          <tr> 
           <td width="284">Oracle 12c</td> 
           <td width="284">Yes</td> 
          </tr> 
         </tbody> 
        </table> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>PRM-DUL目前支持的多语言：</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <table> 
         <tbody> 
          <tr> 
           <td width="130">语言</td> 
           <td width="164">字符集</td> 
           <td width="161">对应的编码</td> 
          </tr> 
          <tr> 
           <td width="130">中文 简体/繁体</td> 
           <td width="164">ZHS16GBK</td> 
           <td width="161">GBK</td> 
          </tr> 
          <tr> 
           <td width="130">中文 简体/繁体</td> 
           <td width="164">ZHS16DBCS</td> 
           <td width="161">CP935</td> 
          </tr> 
          <tr> 
           <td width="130">中文 简体/繁体</td> 
           <td width="164">ZHT16BIG5</td> 
           <td width="161">BIG5</td> 
          </tr> 
          <tr> 
           <td width="130">中文 简体/繁体</td> 
           <td width="164">ZHT16DBCS</td> 
           <td width="161">CP937</td> 
          </tr> 
          <tr> 
           <td width="130">中文 简体/繁体</td> 
           <td width="164">ZHT16HKSCS</td> 
           <td width="161">CP950</td> 
          </tr> 
          <tr> 
           <td width="130">中文 简体/繁体</td> 
           <td width="164">ZHS16CGB231280</td> 
           <td width="161">GB2312</td> 
          </tr> 
          <tr> 
           <td width="130">中文 简体/繁体</td> 
           <td width="164">ZHS32GB18030</td> 
           <td width="161">GB18030</td> 
          </tr> 
          <tr> 
           <td width="130">日文</td> 
           <td width="164">JA16SJIS</td> 
           <td width="161">SJIS</td> 
          </tr> 
          <tr> 
           <td width="130">日文</td> 
           <td width="164">JA16EUC</td> 
           <td width="161">EUC_JP</td> 
          </tr> 
          <tr> 
           <td width="130">日文</td> 
           <td width="164">JA16DBCS</td> 
           <td width="161">CP939</td> 
          </tr> 
          <tr> 
           <td width="130">韩语</td> 
           <td width="164">KO16MSWIN949</td> 
           <td width="161">MS649</td> 
          </tr> 
          <tr> 
           <td width="130">韩语</td> 
           <td width="164">KO16KSC5601</td> 
           <td width="161">EUC_KR</td> 
          </tr> 
          <tr> 
           <td width="130">韩语</td> 
           <td width="164">KO16DBCS</td> 
           <td width="161">CP933</td> 
          </tr> 
          <tr> 
           <td width="130">法语</td> 
           <td width="164">WE8MSWIN1252</td> 
           <td width="161">CP1252</td> 
          </tr> 
          <tr> 
           <td width="130">法语</td> 
           <td width="164">WE8ISO8859P15</td> 
           <td width="161">ISO8859_15</td> 
          </tr> 
          <tr> 
           <td width="130">法语</td> 
           <td width="164">WE8PC850</td> 
           <td width="161">CP850</td> 
          </tr> 
          <tr> 
           <td width="130">法语</td> 
           <td width="164">WE8EBCDIC1148</td> 
           <td width="161">CP1148</td> 
          </tr> 
          <tr> 
           <td width="130">法语</td> 
           <td width="164">WE8ISO8859P1</td> 
           <td width="161">ISO8859_1</td> 
          </tr> 
          <tr> 
           <td width="130">法语</td> 
           <td width="164">WE8PC863</td> 
           <td width="161">CP863</td> 
          </tr> 
          <tr> 
           <td width="130">法语</td> 
           <td width="164">WE8EBCDIC1047</td> 
           <td width="161">CP1047</td> 
          </tr> 
          <tr> 
           <td width="130">法语</td> 
           <td width="164">WE8EBCDIC1147</td> 
           <td width="161">CP1147</td> 
          </tr> 
          <tr> 
           <td width="130">德语</td> 
           <td width="164">WE8MSWIN1252</td> 
           <td width="161">CP1252</td> 
          </tr> 
          <tr> 
           <td width="130">德语</td> 
           <td width="164">WE8ISO8859P15</td> 
           <td width="161">ISO8859_15</td> 
          </tr> 
          <tr> 
           <td width="130">德语</td> 
           <td width="164">WE8PC850</td> 
           <td width="161">CP850</td> 
          </tr> 
          <tr> 
           <td width="130">德语</td> 
           <td width="164">WE8EBCDIC1141</td> 
           <td width="161">CP1141</td> 
          </tr> 
          <tr> 
           <td width="130">德语</td> 
           <td width="164">WE8ISO8859P1</td> 
           <td width="161">ISO8859_1</td> 
          </tr> 
          <tr> 
           <td width="130">德语</td> 
           <td width="164">WE8EBCDIC1148</td> 
           <td width="161">CP1148</td> 
          </tr> 
          <tr> 
           <td width="130">意大利语</td> 
           <td width="164">WE8MSWIN1252</td> 
           <td width="161">CP1252</td> 
          </tr> 
          <tr> 
           <td width="130">意大利语</td> 
           <td width="164">WE8ISO8859P15</td> 
           <td width="161">ISO8859_15</td> 
          </tr> 
          <tr> 
           <td width="130">意大利语</td> 
           <td width="164">WE8PC850</td> 
           <td width="161">CP850</td> 
          </tr> 
          <tr> 
           <td width="130">意大利语</td> 
           <td width="164">WE8EBCDIC1144</td> 
           <td width="161">CP1144</td> 
          </tr> 
          <tr> 
           <td width="130">泰语</td> 
           <td width="164">TH8TISASCII</td> 
           <td width="161">CP874</td> 
          </tr> 
          <tr> 
           <td width="130">泰语</td> 
           <td width="164">TH8TISEBCDIC</td> 
           <td width="161">TIS620</td> 
          </tr> 
          <tr> 
           <td width="130">阿拉伯语</td> 
           <td width="164">AR8MSWIN1256</td> 
           <td width="161">CP1256</td> 
          </tr> 
          <tr> 
           <td width="130">阿拉伯语</td> 
           <td width="164">AR8ISO8859P6</td> 
           <td width="161">ISO8859_6</td> 
          </tr> 
          <tr> 
           <td width="130">阿拉伯语</td> 
           <td width="164">AR8ADOS720</td> 
           <td width="161">CP864</td> 
          </tr> 
          <tr> 
           <td width="130">西班牙语</td> 
           <td width="164">WE8MSWIN1252</td> 
           <td width="161">CP1252</td> 
          </tr> 
          <tr> 
           <td width="130">西班牙语</td> 
           <td width="164">WE8ISO8859P1</td> 
           <td width="161">ISO8859_1</td> 
          </tr> 
          <tr> 
           <td width="130">西班牙语</td> 
           <td width="164">WE8PC850</td> 
           <td width="161">CP850</td> 
          </tr> 
          <tr> 
           <td width="130">西班牙语</td> 
           <td width="164">WE8EBCDIC1047</td> 
           <td width="161">CP1047</td> 
          </tr> 
          <tr> 
           <td width="130">葡萄牙语</td> 
           <td width="164">WE8MSWIN1252</td> 
           <td width="161">CP1252</td> 
          </tr> 
          <tr> 
           <td width="130">葡萄牙语</td> 
           <td width="164">WE8ISO8859P1</td> 
           <td width="161">ISO8859_1</td> 
          </tr> 
          <tr> 
           <td width="130">葡萄牙语</td> 
           <td width="164">WE8PC850</td> 
           <td width="161">CP850</td> 
          </tr> 
          <tr> 
           <td width="130">葡萄牙语</td> 
           <td width="164">WE8EBCDIC1047</td> 
           <td width="161">CP1047</td> 
          </tr> 
          <tr> 
           <td width="130">葡萄牙语</td> 
           <td width="164">WE8ISO8859P15</td> 
           <td width="161">ISO8859_15</td> 
          </tr> 
          <tr> 
           <td width="130">葡萄牙语</td> 
           <td width="164">WE8PC860</td> 
           <td width="161">CP860</td> 
          </tr> 
          <tr> 
           <td width="130"></td> 
           <td width="164"></td> 
           <td width="161"></td> 
          </tr> 
         </tbody> 
        </table> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>PRM-DUL支持的表存储类型：</p> 
        <p>&nbsp;</p> 
        <table> 
         <tbody> 
          <tr> 
           <td width="284">表存储类型</td> 
           <td width="284">Supported</td> 
          </tr> 
          <tr> 
           <td width="284">Cluster Table簇表</td> 
           <td width="284">YES</td> 
          </tr> 
          <tr> 
           <td width="284">索引组织表，分区或非分区</td> 
           <td width="284">YES</td> 
          </tr> 
          <tr> 
           <td width="284">普通堆表，分区或非分区</td> 
           <td width="284">YES</td> 
          </tr> 
          <tr> 
           <td width="284">普通堆表 启用基本压缩</td> 
           <td width="284">YES(Future)</td> 
          </tr> 
          <tr> 
           <td width="284">普通堆表 启用高级压缩</td> 
           <td width="284">NO</td> 
          </tr> 
          <tr> 
           <td width="284">普通堆表 启用混合列压缩</td> 
           <td width="284">NO</td> 
          </tr> 
          <tr> 
           <td width="284">普通堆表 启用加密</td> 
           <td width="284">NO</td> 
          </tr> 
          <tr> 
           <td width="284">带有虚拟字段virtual column的表</td> 
           <td width="284">NO</td> 
          </tr> 
          <tr> 
           <td width="284">链式行、迁移行 chained rows 、migrated rows</td> 
           <td width="284">YES</td> 
          </tr> 
         </tbody> 
        </table> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>注意事项： 对于virtual column、11g optimized default column而言 数据抽取可能没问题，但会丢失对应的字段。 这2个都是11g之后的新特性，使用者较少。</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>PRM-DUL支持的数据类型</p> 
        <p>&nbsp;</p> 
        <table> 
         <tbody> 
          <tr> 
           <td>数据类型</td> 
           <td width="104">Supported</td> 
          </tr> 
          <tr> 
           <td>BFILE</td> 
           <td width="104">No</td> 
          </tr> 
          <tr> 
           <td>Binary XML</td> 
           <td width="104">No</td> 
          </tr> 
          <tr> 
           <td>BINARY_DOUBLE</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>BINARY_FLOAT</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>BLOB</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>CHAR</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>CLOB and NCLOB</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>Collections (including VARRAYS and nested tables)</td> 
           <td width="104">No</td> 
          </tr> 
          <tr> 
           <td>Date</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>INTERVAL DAY TO SECOND</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>INTERVAL YEAR TO MONTH</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>LOBs stored as SecureFiles</td> 
           <td width="104">Future</td> 
          </tr> 
          <tr> 
           <td>LONG</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>LONG RAW</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>Multimedia data types (including Spatial, Image, and Oracle Text)</td> 
           <td width="104">No</td> 
          </tr> 
          <tr> 
           <td>NCHAR</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>Number</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>NVARCHAR2</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>RAW</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>ROWID, UROWID</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>TIMESTAMP</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>TIMESTAMP WITH LOCAL TIMEZONE</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>TIMESTAMP WITH TIMEZONE</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>User-defined types</td> 
           <td width="104">No</td> 
          </tr> 
          <tr> 
           <td>VARCHAR2 and VARCHAR</td> 
           <td width="104">Yes</td> 
          </tr> 
          <tr> 
           <td>XMLType stored as CLOB</td> 
           <td width="104">No</td> 
          </tr> 
          <tr> 
           <td>XMLType stored as Object Relational</td> 
           <td width="104">No</td> 
          </tr> 
         </tbody> 
        </table> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>PRM-DUL对ASM的支持</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <table> 
         <tbody> 
          <tr> 
           <td width="284">功能</td> 
           <td width="284">Supported</td> 
          </tr> 
          <tr> 
           <td width="284">支持直接从ASM中抽取数据，无需拷贝到文件系统上</td> 
           <td width="284">YES</td> 
          </tr> 
          <tr> 
           <td width="284">支持从ASM中拷贝数据文件</td> 
           <td width="284">YES</td> 
          </tr> 
          <tr> 
           <td width="284">支持修复ASM metadata</td> 
           <td width="284">YES</td> 
          </tr> 
          <tr> 
           <td width="284">支持图形化展示ASM黑盒</td> 
           <td width="284">Future</td> 
          </tr> 
         </tbody> 
        </table> 
        <p>&nbsp;</p> 
        <p><a href="http://www.askmaclean.com/archives/oracle-dul-data-unloader-data-recovery-tool-information-summary.html/dul1" rel="attachment wp-att-16258"><img class="aligncenter size-full wp-image-16258" src="http://www.askmaclean.com/wp-content/uploads/2014/12/dul1.png" sizes="(max-width: 706px) 100vw, 706px" srcset="http://www.askmaclean.com/wp-content/uploads/2014/12/dul1-300x108.png 300w, http://www.askmaclean.com/wp-content/uploads/2014/12/dul1.png 706w" alt="dul1" width="706" height="253" /></a></p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>以下 为ORACLE DUL 工具使用手册：</p> 
        <p>&nbsp;</p> 
        <p>ORACLE DUL 的原理和功能列表：</p> 
        <p>&nbsp;</p> 
        <h2><strong>独立的C-</strong><strong>程序</strong></h2> 
        <p>DUL是一个独立的C程序，它直接从数据文件的表中检索行。 Oracle的RDBMS软件完全不被使用。 DUL进行脏读，它假定每个事务被提交。它也不检查/是否需要完成介质恢复。</p> 
        <h2><strong>最后一招</strong></h2> 
        <p>DUL旨在检索无法用其他方法检索的数据。它不是EXP，SQL *加等等的替代选择，而是最后的方案。不用于正常的生产环境。</p> 
        <p>在使用DUL之前，你必须知道RDBMS有许多隐藏的功能可以强制打开坏数据库。无记录的init.ora参数和事件可以用于跳过前滚，禁用回滚，禁用特定SMON行动，推进数据库scn等等。</p> 
        <p>&nbsp;</p> 
        <h2><strong>数据库损坏 C 数据块OK</strong></h2> 
        <p>数据库可以被破坏，但单独的数据块必须是100％正确。在所有导出进行检查时，确保块没有损坏并属于正确的数据段。如果扫描时遇到损坏的块，一个错误信息被打印在加载程序（loader）文件和标准输出。导出将继续下一行或块。</p> 
        <p><strong>cluster/</strong><strong>表/</strong><strong>索引中的行</strong></p> 
        <p>DUL能且只能导出索引/表/cluster中数据。它不会转储触发器，存储过程，也不会创建表或视图的SQL脚本。 （但描述它们的数据字典表可以被导出）。该数据将被导出为在适合SQL * Loader或IMP的格式。同时，SQL * Loader的匹配控制文件也会生成。</p> 
        <p>DUL可以导出索引和索引组织表。索引的导出能用来确定表应该有多少行或标识缺失的行。</p> 
        <p>&nbsp;</p> 
        <h2><strong>跨平台导出</strong></h2> 
        <p>&nbsp;</p> 
        <p>支持跨平台导出。数据库可以从与DUL-主机不同的操作系统被复制。 （迄今所涉及的数据库/系统：Sequent/ptx, Vax Vms, Alpha Vms, MVS, HP9000/8xx, IBM AIX, SCO Unix, Alpha OSF/1, Intel Windows NT）。</p> 
        <p>在“init.dul”中的配置参数必须进行修改，以匹配原始平台和O / S，而非导出执行的平台。</p> 
        <p>&nbsp;</p> 
        <h2><strong>强大功能</strong></h2> 
        <p>DUL不会转储，运行或挂起不论数据库的破坏有多严重；（几乎）支持所有Oracle功能</p> 
        <p>对于所有数据库结构的面支持：行链接，行迁移，散列/索引集群，longs，raws，行id，日期，数字，多空闲列表组（multiple free list groups），段高水位（segment high water mark），NULLs，显示NULL列尾部，无限扩展，Oracle8的新数据块布局，分区表。</p> 
        <p>后来增加的有lobs，压缩索引，9iR2压缩表。可变数组（varray）和抽象数据类型ADTs（用户定义的对象）在SQL * Loader模式下被部分支持。</p> 
        <p>ASM是完全支持的，文件可以从ASM磁盘组中提取。不使用装载的ASM实例，磁盘直接访问。支持非默认的ASM分配单元大小。</p> 
        <p>使用unexp命令套件，数据可以从导出的转储文件中恢复。Unpump的一些初步工作已完成，以支持数据pump文件。</p> 
        <p>&nbsp;</p> 
        <h2><strong>支持的RDBMS</strong><strong>版本</strong></h2> 
        <p>DUL能用于Oracle 6以上版本。 DUL已通过从6.0.26到10.2的所有版本。即使旧版数据块header布局（6.0.27.2前）也支持。</p> 
        <h2><strong>多字节支持</strong></h2> 
        <p>DUL本质上是一个单一字节的应用程序。它的命令解析器不理解多字节字符，但导出任何多字节的数据库是可以的。对于所有可能情况都有解决方法。</p> 
        <p>DUL可转换为UTF8。这是为了存储在UTF16的 NCLOBS。</p> 
        <p>&nbsp;</p> 
        <h2><strong>限制</strong></h2> 
        <p><strong>MLSLABELS</strong></p> 
        <p>不支持受信任的Oracle多级安全标贴。</p> 
        <p><strong>（LONG</strong><strong>）RAW</strong></p> 
        <p>DUL可以导出（long）raws。目前在SQL * Loader中合适的格式来保存所有的long raws。所以long raws和blobs可以在这两种模式下被导出。</p> 
        <p>&nbsp;</p> 
        <p><strong>ORACLE8</strong><strong>对象选项和LOBS</strong></p> 
        <p>&nbsp;</p> 
        <p>尚不支持嵌套表，如果需要请告知我来添加。支持varray和ADT，以及储存为核心lob的。 在SQL * Loader模式和EXP模式下都支持CLOBS，NCLOBS。 BLOBS在EXP模式下最好处理，在SQL * Loader模式下产生的十六进制格式当前未能正确加载。</p> 
        <h2><strong>可移植性</strong></h2> 
        <p>通过ANSI-C编译器，DUL可以移植到任何操作系统。 DUL已经被移植到许多UNIX变体，VMS和WindowsNT。目前，所有构建都使用gcc和Linux的交叉编译环境完成。</p> 
        <p>&nbsp;</p> 
        <h2><strong>RDBMS </strong><strong>内部知识</strong></h2> 
        <p>对Oracle RDBMS内部的良好掌握是成功地使用DUL的必要前提。例如数据服务器内部（DSI）文档和教程提供一个良好的基础。甚至还有专门的DUL模块。</p> 
        <h2><strong>设置和使用</strong><strong>DUL</strong></h2> 
        <p><strong>配置文件</strong></p> 
        <p>针对DUL有两个配置文件。 “init.dul”包含所有的配置参数。 （缓存大小，header布局的详细内容，oracle数据块大小，输出文件格式）在控制文件中，“control.dul”，数据库的数据文件名和asm磁盘可以被指定。</p> 
        <p><strong>可用数据字典</strong></p> 
        <p>如果组成SYSTEM表空间的数据文件可用，那Oracle数据字典就可用。Oracle分配给这些文件的数字和你给定的名称（不需要是Oracle知道的原始名称），必须列入“control.dul”文件。您还需要包括文件数和其他表空间的文件名，这些表空间是最终想要导出表及其数据。不包含这些文件不会影响数据字典导出步骤，但会影响之后的表导出。</p> 
        <p>&nbsp;</p> 
        <h2><strong>当USER$, OBJ$, TAB$ and COL$</strong><strong>能被导出时，使用DUL</strong></h2> 
        <p>步骤如下：</p> 
        <ul> 
         <li>在目标数据库配置DUL。这表示要创建一个正确的dul和control.dul。 SYSTEM表空间的数据文件数量和名称必须与任何你要导出表和数据的表空间的数据文件一并包括在control.dul文件中。对于Oracle8及以上版本，表空间数和相关文件数必须在每个数据文件中指定。</li> 
         <li>使用”BOOTSTRAP；”命令来准备导出。在引导过程中会发现一个兼容的段，找到bootstrap$表导出。不再需要旧的“dul dictv7.ddl”。</li> 
        </ul> 
        <p>&nbsp;</p> 
        <p><img class="aligncenter" src="http://7xi9ig.com2.z0.glb.qiniucdn.com/Screenshot%202016-01-05%2015.26.11.png" alt="" width="528" height="330" /></p> 
        <ul> 
         <li>导出数据文件被包括在“dul”文件中的表。使用以下命令之一： 
          <ul> 
           <li>“UNLOAD TABLE&nbsp;<em>[ owner&gt;.]table&nbsp;</em>;（别忘了分号） 
            <ul> 
             <li>这将导出表定义和表的数据。</li> 
            </ul> </li> 
           <li>“UNLOAD USER&nbsp;<em>user name&nbsp;</em>; 
            <ul> 
             <li>这为指定的用户导出所有表和数据。</li> 
            </ul> </li> 
           <li>“UNLOAD DATABASE ;</li> 
          </ul> </li> 
        </ul> 
        <p>这导出所有可用的数据库表。 （除了用户SYS）。</p> 
        <p>&nbsp;</p> 
        <p><img class="aligncenter" src="http://7xi9ig.com2.z0.glb.qiniucdn.com/Screenshot%202016-01-05%2015.38.44.png" alt="" width="459" height="102" /></p> 
        <p>&nbsp;</p> 
        <p><img class="aligncenter" src="http://7xi9ig.com2.z0.glb.qiniucdn.com/Screenshot%202016-01-05%2015.39.11.png" alt="" width="458" height="330" /></p> 
        <p>&nbsp;</p> 
        <p>unload user SCOTT;</p> 
        <p>&nbsp;</p> 
        <p><img class="aligncenter" src="http://7xi9ig.com2.z0.glb.qiniucdn.com/Screenshot%202016-01-05%2015.42.52.png" alt="" width="481" height="102" /></p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <h2><strong>没有可用的数据字典</strong></h2> 
        <p>如果SYSTEM表空间的数据文件不可用，那么虽然可以unload 导出数据，但USER，TABLE和COLUM名称是未知的。识别表会是艰巨的任务。但它可以（并已经）被完成。你需要深入了解你的应用程序和应用程序表。列类型可以由DUL猜测，但表和列名丢失了。来自同一数据库但旧了几周的任何SYSTEM表空间可以有很大的帮助！DUL使用的多数信息不改变。 （只有dataobj＃是在truncate或索引重建过程中）</p> 
        <p>&nbsp;</p> 
        <h2><strong>使用DUL而</strong><strong>不用SYSTEM</strong><strong>表空间</strong></h2> 
        <p>步骤如下：</p> 
        <ul> 
         <li>在目标数据库配置DUL。这表示创建一个正确的dul和control.dul。 （见<u>端口具体参数</u>）。在这种情况下，control.dul文件需要将被导出的表和数据的数量和数据文件名，但它并不需要SYSTEM表空间信息。</li> 
         <li>SCAN DATABASE;&nbsp; ：扫描数据库，创建程度和分段图</li> 
         <li>SCAN TABLES; or SCAN EXTENTS; ：收集行统计</li> 
         <li>从步骤3的输出中识别丢失的表。</li> 
         <li>导出识别出的表。</li> 
        </ul> 
        <p>&nbsp;</p> 
        <h2><strong>自动搜索</strong></h2> 
        <p>&nbsp;</p> 
        <p>为了便于寻找丢失的表：在seen_tab.dat和seen_col.dat扫描的统计信息可以被加载到一个全新的数据库。如果你要重建表（但愿创建表的脚本仍可用），那么通过两个SQL * Plus脚本（fill.sql和getlost.sql），“丢失”表的结构信息可以匹配到“可见”表被扫描的信息。</p> 
        <p>&nbsp;</p> 
        <h2><strong>提示和陷阱</strong></h2> 
        <p>&nbsp;</p> 
        <ul> 
         <li>名称与DUL不是真正相关的，仅与必须加载数据的人相关。但是，如果你不知道被导出的数据来自哪个表，它就没有任何价值。</li> 
         <li>猜测的列可能是错误的。即使算法保守，在不确定时决定UNKNOWN。</li> 
         <li>显示NULL尾部列不存储在数据库中。因此，如果最后一列只包含空值，那扫描将无法找到。 （在导出显示NULL列尾部被正确处理时）。</li> 
         <li>当一个表被删除，该描述仅从数据字典中被移除。除非数据块被重新用于新的段，否则不会被重写。所以扫描软件可以看到被删除的表。</li> 
         <li>没有行的表会被忽视。较新的对象ID比旧对象更高。如果表被重建，或者如果有同一表的测试和生产版本，对象的id可用于决定。</li> 
        </ul> 
        <p><strong>DDL</strong><strong>（</strong><strong>DUL</strong><strong>描述语言）导出语句概述</strong></p> 
        <p>DUL使用类似SQL的命令界面。有导出区段，表，用户或整个数据库的DDL语句。所需的数据字典信息可以在DDL语句中指定或取自先前导出的数据字典。以下三个语句将导出DEPT表。如果数据字典和区段地图可用，最常见的形式是：</p> 
        <p>UNLOAD TABLE scott.dept;</p> 
        <p>所有相关信息也能在语句中指定：</p> 
        <p>REM Columns with type in the correct order</p> 
        <p>REM The segment header loaction in the storage clause</p> 
        <p>UNLOAD TABLE dept( deptno NUMBER, dname CHAR, loc CHAR)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STORAGE( EXTENTS ( FILE 1 BLOCK 1205 ));</p> 
        <p>&nbsp;</p> 
        <p>Oracle版本6：</p> 
        <p>REM version 6 data blocks have segment header location in each block&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALTER SESSION SET USE_SCANNED_EXTENT_MAP = TRUE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UNLOAD TABLE dept( deptno NUMBER, dname CHAR, loc CHAR)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STORAGE( EXTENTS ( FILE 1 BLOCK 1205 ));</p> 
        <p>Oracle 7：</p> 
        <p>REM Oracle7 data blocks have object id in each block</p> 
        <p>ALTER SESSION SET USE_SCANNED_EXTENT_MAP = TRUE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UNLOAD TABLE dept( deptno NUMBER, dname CHAR, loc CHAR)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STORAGE( OBJNO 1501 );</p> 
        <p>&nbsp;</p> 
        <p><strong>DUL</strong><strong>输出格式</strong></p> 
        <p>只有完好无损的行会被写入输出文件。对它来说，各行是缓存的。buffer的大小可以通过init.dul的参数BUFFER来更改。高BUFFER参数不等同于较快的速度，它应该大到足以容纳一个完整的行。不完整或损坏的行不会被写出。 init.dul参数FILE_SIZE_IN_MB可用于将输出（在适当的边界）分割成多个文件，每个文件可以单独加载。</p> 
        <p>有三种不同的输出格式模式</p> 
        <ul> 
         <li>导出模式</li> 
         <li>SQL * Loader模式：流数据文件</li> 
         <li>SQL * Loader模式：固定的物理记录数据文件</li> 
        </ul> 
        <p>&nbsp;</p> 
        <h2><strong>导出模式</strong></h2> 
        <p>生成的文件与由EXP生成的表模式导出完全不同！该文件是IMP能加载的最小格式。每个表中将生成单独的IMP可加载文件。它是单一的表转储文件。它包含一个header，一个insert table语句和表数据。表补助grant，存储子句，或触发器将不被包括在内。一个最小的create table语句被包含在内（无存储子句，只有列名和没有精度的类型）。在生成的header中文件中的字符集指示是V6类型。它被设置为表示基于ASCII的字符集。</p> 
        <p>要启用导出模式， 将init.dul参数EXPORT_MODE设置为TRUE。</p> 
        <p>由于生成的伪转储文件不包含字符集信息集NLS_LANG以匹配原始数据库。在导出模式，不进行字符集转换。</p> 
        <p>&nbsp;</p> 
        <p><strong>SQL * Loader</strong><strong>模式</strong></p> 
        <p>数据在此模式要么完全不能转换，要么全部被转换为UTF8，前提是设置了LDR_OUTPUT_IN_UTF8。在混合字符集环境中此设置是必需的，因为一个数据文件的内容必须有一个单独的字符集。&lt;\ p&gt;</p> 
        <p>在加载数据时，你可能需要设置NLS_LANG以匹配原始数据库，从而防止不必要的字符集转换。</p> 
        <p>在两种SQL * Loader输出格式中，列将被空格分隔并被双引号括起来。数据中的任何双引号将增加一倍。SQL * Loader会识别这点并只加载一个。使用init.dul参数LDR_ENCLOSE_CHAR，你能将包围列的字符从双引号更改为任何想要的字符。</p> 
        <p>有两种类型的物理记录模式：</p> 
        <p><strong>数据流模式</strong></p> 
        <p>&nbsp;</p> 
        <p>在流模式下没什么特别的，每条记录后会有换行符打印出来。这是紧凑模式，可用于数据不包含换行符的情况。要启用数据流模式，设置LDR_PHYS_REC_SIZE = 0</p> 
        <p>init.dul</p> 
        <p>&nbsp;</p> 
        <p><strong>固定的物理记录</strong></p> 
        <p>如果数据可包含换行符，这个模式是必不可少的。一个逻辑记录和一个完整的行可以由多个物理记录组成。默认的记录长度为81，这很适合VT220的屏幕。物理记录大小可用init.dul的LDR_PHYS_REC_SIZE指定。</p> 
        <p><strong>输出文件名</strong></p> 
        <p>生成的文件名是：<em>owner name_table name</em>.ext。IMP可加载文件的扩展名为“.dmp”。“.dat”和“.ctl”被用于SQL * Loader数据文件和控制文件。为了防止变量替换和其他不好的影响，奇怪的字符被剥离。（只有字母数字和’_’被允许）。</p> 
        <p>如果设置了FILE参数，生成的名称将是FILEnnn.ext。如果文件系统不支持足够长的文件名，可以用这个方法处理。 （旧的窗口，6.3文件名格式）</p> 
        <p>&nbsp;</p> 
        <p><strong>一些</strong><strong>DUL INTERNALS</strong></p> 
        <p><strong>要求信息</strong></p> 
        <p>&nbsp;</p> 
        <p>要从数据库块中导出表数据必须了解以下信息：</p> 
        <ol> 
         <li>列/cluster簇信息：列的数量和类型。CHAR或VARCHAR列的最大长度。集群列数以及集群中的表数量。这个信息可以由unload语句提供，或者从先前导出的USER $，OBJ $，TAB $和COL $中获得。</li> 
         <li>段/区段的信息：当导出表时，在数据段头块的extent表被用于定位所有数据块。这个数据段头块（文件号和块号）的位置来自数据字典或可在unload语句中指定。如果该段头不正确/不可用，那必须用另一种方法。 DUL能通过扫描整个数据库创建自己的区段地图。 （以DUL与扫描数据库语句单独运行。）</li> 
        </ol> 
        <p><strong>二进制HEADER</strong></p> 
        <p>&nbsp;</p> 
        <p>在块头的C-Structs不被直接复制，它们通过特殊功能被检索。结构成员的所有补偿都被编入DUL。这种方法使跨平台导出实现。（在HP导出MVS创建的数据文件）除了字节顺序，至今只有四个布局类型被发现。</p> 
        <ol> 
         <li>VAX VMS和Netware：在结构成员之间无对齐填充。</li> 
         <li>韩国Ticom Unix机器：结构成员的16位对齐。</li> 
         <li>MS / DOS ：16位对齐和16位字长。</li> 
         <li>世界上其他（包括Alpha&nbsp;VMS）：结构成员对成员大小对齐。</li> 
        </ol> 
        <p>&nbsp;</p> 
        <p><strong>机器依赖</strong></p> 
        <p>&nbsp;</p> 
        <p>（数据库）机器依赖用以下参数配置：</p> 
        <ul> 
         <li>一个word（大/小端）的字节顺序</li> 
         <li>在DBA（块地址）FILE#的低部分的位数量</li> 
         <li>在一个C-Struct中的成员对齐</li> 
         <li>oracle文件头块之前的块或字节数</li> 
         <li>在段头结构中使用的词的大小</li> 
        </ul> 
        <p><strong>导出数据字典</strong></p> 
        <p>&nbsp;</p> 
        <p>如果数据字典的文件存在且未破坏，DUL可以导出数据库的数据字典。对于要使用的数据字典，内部表必须首先导出至外部文件：（USER $，OBJ $，TAB $和COL $）。bootstrap命令将找到并导出所需的表。</p> 
        <p>&nbsp;</p> 
        <p><strong>DDL</strong><strong>（</strong><strong>DUL</strong><strong>描述语言）规范</strong></p> 
        <p>&nbsp;</p> 
        <p>DDL（DUL描述语言）规范</p> 
        <pre>DDL（DUL描述语言）规范
[ ALTER SESSION ] SET init.dul parameter =  value ;
     Most parameters can be changed on the fly. 

BOOTSTRAP [LOCATE | GENERATE | COMPLETE
           | UNLOAD   Bootstrap$ segment header block address ];
     Bootstraps the data dictionary. Default is COMPLETE.
     LOCATE finds and unloads the bootstrap$ table.
     GENERATE builds a ddl file based on inforation in the cache.
     COMPLETE is in fact LOCATE, followed by GENERATE (two times)

COMMIT;
     Writes the changed block to the data file.

CREATE BLOCK INDEX  index_name  ON  device ;


</pre> 
        <p><a href="http://www.askmaclean.com/archives/oracle-dul-data-unloader-data-recovery-tool-information-summary.html/dul-block-index" rel="attachment wp-att-16259"><img class="aligncenter size-full wp-image-16259" src="http://www.askmaclean.com/wp-content/uploads/2014/12/dul-block-index.jpg" sizes="(max-width: 800px) 100vw, 800px" srcset="http://www.askmaclean.com/wp-content/uploads/2014/12/dul-block-index-300x225.jpg 300w, http://www.askmaclean.com/wp-content/uploads/2014/12/dul-block-index-768x576.jpg 768w, http://www.askmaclean.com/wp-content/uploads/2014/12/dul-block-index.jpg 800w" alt="dul block index" width="800" height="600" /></a></p> 
        <p>&nbsp;</p> 
        <p>块索引包含在损坏的文件系统中找到的有效Oracle块的地址。用于合并多个磁盘映像或从损坏的文件系统导出。只有在极端的文件系统损坏情况下很有用。</p> 
        <p>&nbsp;</p> 
        <pre>DESCRIBE  owner_name  . table_name ;

DUMP [ TABLESPACE  tablespace_no ]
     [ FILE  file_no  ]
     [ BLOCK  block_no  ]
     [ LEVEL  level_no  ] ;
     Not a complete blockdump, mainly used for debugging.
     The block address is remembered.

EXTRACT  asm file name  to  output file name  ;
     Copies any ASM file from a disk group to the file system.
     (there was a problem with online redologs this needs more testing)

MERGE block_index INTO [  segment  ];

</pre> 
        <p>&nbsp;</p> 
        <p><img class="aligncenter" src="http://7xi9ig.com2.z0.glb.qiniucdn.com/Screenshot%202016-01-05%2015.41.08.png" alt="" width="376" height="395" /></p> 
        <p>合并命令使用索引文件中的信息来定位文件数和对象id的组合的可能数据块，每个候选块与在数据文件中的当前块进行比较。如果当前块是坏的，或有一个更旧的scn，候选人将被写入数据文件。这只有在极端的文件系统损坏情况下很有用。</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <pre>REM any_text_you_like_till_End_Of_Line : comment
REM  NOT allowed inside ddl statements. ( To avoid a two layer lexical scan).

ROLLBACK; # Cancels the UPDATE statements.

SHOW     DBA  dba ;                # dba -&gt; file_no block_no calculator
	   | DBA  rfile_no block_no ;  # file_no block_no -&gt; dba calculator
	   | SIZES ;                   # show some size of important structs
	   | PARAMETER;                # shows the values of all parameters
	   | LOBINFO;                  # lob indexes found with SCAN DATABASE
       | DATAFILES;                # summary of configured datafiles
       | ASM DISKS;                # summary of configured asm disks
       | ASM FILES;                # summary of configured datafiles on asm
       | ASM FILE  cid      # extent information for asm file

UNEXP [TABLE] [  owner  . ]  table name 
       (  column list  ) [ DIRECT ]
       DUMP FILE  dump file name
       FROM  begin offset  [ UNTIL  end offset  ]
       [ MINIMUM  minimal number of columns  COLUMNS ] ;

       To unload data from a corrupted exp dump file. No special setup
       or configuration is required, just the compatible parameter.
       The start offset should be where a row actually begins.

UNPUMP
       To unload data from a corrupted expdp (datapump) dump file.
       This is still work in progress, the basic commands work
       but rather complex to use. Contact me if this is needed.

UNLOAD DATABASE;

UNLOAD USER user_name;

UNLOAD [TABLE]  [  schema_name . ]  table_name 
              [ PARTITION(  partition_name ) ]
              [ SUBPARTITION(  sub_partition_name ) ]
              [ (  column_definitions ) ]
              [  cluster_clause  ]
              [  storage_clause  ] ;

UNLOAD EXTENT  table_name 
              [ (  column_definitions  ) ]
              [ TABLESPACE  tablespace_no  ] 
              FILE  extent_start_file_number
              BLOCK extent_start_block_number 
              BLOCKS  extent_size_in oracle_blocks ;

UNLOAD LOB SEGMENT FOR [  schema_name . ]  table_name   [ (  column name  ) ] ;

UNLOAD LOB SEGMENT STORAGE ( SEGOBJNO data obj#) ;

UPDATE [ block_address ] SET UB1|UB2|UB4 @ offset_in_block = new_value ;
UPDATE [ block_address ] SET  block element name  = new_value ;
        Now and then we can repair something.
	Patches the current block and dumps it.
	You can issue multiple UPDATE commands.
	Block is not written yet, use COMMIT to write. 

storage_clause ::=
        STORAGE ( storage_specification  [ more_storage_specs ] )

storage_specification ::=
        OBJNO object_id_number 
|       TABNO cluster_table_number
|       SEGOBJNO cluster/data_object_number       /* v7/v8 style data block id */
|       FILE  data_segment_header_file_number     /* v6 style data block id */
        BLOCK data_segment_header_block_number )   
|       any_normal_storage_specification_but_silently_ignored

SCAN DATABASE;

</pre> 
        <p>&nbsp;</p> 
        <p>扫描所有数据文件的所有块。生产了两个或三个文件：</p> 
        <ol> 
         <li>找到的段头（索引/集群/表）的dat信息：（对象ID，文件号和块号）。</li> 
         <li>连续的表/群集的数据块的dat信息。 （对象ID（V7），段头的文件和块号（V6），文件好和第一个块的块号，块号，表号）</li> 
         <li>每个lob数据块的dat信息，这个文件（可选的，仅在init.dul：SCAN_DATABASE_SCANS_LOB_SEGMENTS= TRUE）可能很大。同时，需要的内存大小可能会产生问题。目的有两个：1：在导出表时可能解决损坏的lob索引。 2：导出lob段（已删除的lob或无lob索引或父表的lob段）。SCANNEDLOBPAGE.dat字段的含义：（segobj#，lobid，fat_page_no，version( wrap, base)，ts#，file#，block#）</li> 
        </ol> 
        <p>&nbsp;</p> 
        <p><img class="aligncenter" src="http://7xi9ig.com2.z0.glb.qiniucdn.com/Screenshot%202016-01-05%2015.43.23.png" alt="" width="451" height="363" /></p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p><a href="http://www.askmaclean.com/archives/oracle-dul-data-unloader-data-recovery-tool-information-summary.html/dul_intro1" rel="attachment wp-att-16261"><img class="aligncenter size-full wp-image-16261" src="http://www.askmaclean.com/wp-content/uploads/2014/12/dul_intro1.png" sizes="(max-width: 603px) 100vw, 603px" srcset="http://www.askmaclean.com/wp-content/uploads/2014/12/dul_intro1-300x125.png 300w, http://www.askmaclean.com/wp-content/uploads/2014/12/dul_intro1.png 603w" alt="dul_intro1" width="603" height="251" /></a></p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p><strong>DDL</strong><strong>（</strong><strong>DUL</strong><strong>描述语言）概述</strong></p> 
        <p><strong>UNLOAD EXTENT</strong><strong>和</strong><strong>UNLOAD TABLE</strong><strong>规则：</strong></p> 
        <p><strong>extent map 盘区地图</strong></p> 
        <p>UNLOAD TABLE要求一个<strong>extent map 盘区地图</strong>。在99.99％的情况下，段头中的<strong>extent map 盘区地图</strong>是可用的。在罕见的0.01％的情况下，段头丢失。可以用扫描数据库命令创建一个区段地图。仅当参数USE_SCANNED_EXTENT_MAP被设为TRUE时，自生成的区段地图才在导出时被使用。</p> 
        <p>所有数据块有它们所属一些段的ID。但是V6和V7之间有根本区别。由Oracle版本6创建的数据块有段头块的地址。由Oracle7创建的数据块在header中有段对象ID。</p> 
        <p>&nbsp;</p> 
        <p><strong>列定义</strong></p> 
        <p>列定义必须指定列存储在段中的顺序，由col$.segcol#指定。这不需要与在CREATE TABLE语句中指定的列顺序相同。集群列被移到前面，long移到后面。使用ALTER TABLE命令添加到表的列总是最后保存。</p> 
        <p><strong>导出单个区段</strong></p> 
        <p>UNLOAD EXTENT可用于导出一个或多个相邻块。要导出的区段必须用STROEAGE子句指定：要指定单个区段，使用：STORAGE（EXTENTS（FILE fno BLOCK bno BLOCKS #blocks））（FILE和BLOCK指定第一个块，BLOCKS 区段大小）</p> 
        <p><strong>DUL</strong><strong>具体列类型</strong></p> 
        <p>有两个额外的DUL特定数据类型：</p> 
        <ol> 
         <li>IGNORE：该列将被跳过，就好像它不存在。</li> 
         <li>UNKNOWN：每列会有一个启发式猜测将。</li> 
        </ol> 
        <p>在SQL * Loader模式还有更多DUL特定的数据类型：</p> 
        <ol> 
         <li>HEXRAW：列是十六进制转储。</li> 
         <li>LOBINFO：显示LOB定位的一些信息。</li> 
         <li>BINARY NUMBER：作为在LOB索引中使用的机器字。</li> 
        </ol> 
        <p>&nbsp;</p> 
        <p><strong>识别</strong><strong>USER $</strong><strong>，</strong><strong>OBJ $</strong><strong>，</strong><strong>$ TAB</strong><strong>和</strong><strong>COL $</strong></p> 
        <p>DUL使用与RDBMS相同的bootstrap程序。即它使用系统数据文件头的root dba来定位bootstrap$&nbsp;表。由于版本不同，root dba可能是包含bootstrap$地址的兼容段位置，或较新版本中是bootstrap$表本身的地址。bootstrap$表被导出，它的内容是分析以查找头四表（USER $，OBJ $，$ TAB和COL $）。其他表是基于头四个表的信息被导出的。</p> 
        <p>&nbsp;</p> 
        <p><strong>SCAN 扫描命令概述</strong></p> 
        <p>SCAN TABLES和SCAN EXTENTS扫描相同的信息，并生成类似的输出。所有行的所有列都被检查。每一列收集以下统计数据：</p> 
        <ul> 
         <li>行在数据块中多久显示一次。</li> 
         <li>最大的内部列长度。</li> 
         <li>列是NULL的情况有多久。</li> 
         <li>列由至少75％可打印的ASCII组成的情况有多久。</li> 
         <li>列由100％可打印的ASCII组成的情况有多久。</li> 
         <li>列是一个有效的Oracle数字的情况有多久。</li> 
         <li>列是一个不错的数字的情况有多久。 （没有多少以零开头或结尾 ）</li> 
         <li>列是一个有效的日期的情况有多久。</li> 
         <li>列是一个可能有效的rowid的情况有多久。</li> 
        </ul> 
        <p>这些统计被组合并有一种列类型被提出。使用该建议，五行被导出显示结果。这些统计数据转储到两个文件（seen_tab.dat和seen_col.dat）。有SQL * Loader和SQL * Plus脚本可以自动完成识别过程的一部分。 （目前称为getlost选项）。</p> 
        <p>&nbsp;</p> 
        <p><strong>描述describe</strong></p> 
        <p>有一个描述命令。它会显示表格的字典信息，在DUL的字典缓存中可用。</p> 
        <p><strong>DUL</strong><strong>启动顺序</strong></p> 
        <p>在启动过程中，DUL经过以下步骤：</p> 
        <ul> 
         <li>参数文件“dul”被处理。</li> 
         <li>DUL控制文件（默认“dul”）被扫描。</li> 
         <li>尝试加载USER$，OBJ$，TAB $和COL $的转储，如果有则放到DUL的数据字典缓存中。</li> 
         <li>尝试加载dat和col.dat。</li> 
         <li>接受DDL语句或运行指定为第一个参数的DDL脚本。</li> 
        </ul> 
        <p>&nbsp;</p> 
        <p><strong>init.dul中可以指定的DUL 参数</strong></p> 
        <p>ALLOW_TRAILER_MISMATCH</p> 
        <p>BOOLEAN</p> 
        <p>强烈不推荐使用，不太会产生更多的行。只有在你完全理解它的意思及为什么想使用时才能使用。跳过正确块trailer的检查。在这个测试中失败的块是损坏的碎片。但这样省去了修补一些块的麻烦。</p> 
        <p>&nbsp;</p> 
        <p>ALLOW_DBA_MISMATCH</p> 
        <p>BOOLEAN</p> 
        <p>强烈不推荐使用，不太会产生更多的行。只有在你完全理解它的意思及为什么想使用时才能使用。跳过正确块trailer的检查。在这个测试中失败的块是损坏的碎片。但这样省去了修补一些块的麻烦。</p> 
        <p>&nbsp;</p> 
        <p>ALLOW_OTHER_OBJNO</p> 
        <p>BOOLEAN</p> 
        <p>如果你的字典比你的数据文件更旧，那数据对象ID对于被truncate的表有所不同。当这个参数设为true，它会发出警告，但使用来自段头的值。所有其他块都被全面检查。这只用于特例。</p> 
        <p>ASCII2EBCDIC</p> 
        <p>BOOLEAN</p> 
        <p>(var)char字段必须从 EBCDIC 转译为 ASCII。（针对在ASCII主机上导出MVS数据库）</p> 
        <p>BUFFER</p> 
        <p>NUMBER (字节)</p> 
        <p>在导出和SQL * Loader模式中使用的行输出缓冲区（buffer）的大小。它在各行被首先存储到该缓冲区中。只有没有错误的完整行被写入输出文件。</p> 
        <p>COMPATIBLE</p> 
        <p>NUMBER</p> 
        <p>数据库版本，有效值为 6，7，8或9。必须指定参数。</p> 
        <p>&nbsp;</p> 
        <p>CONTROL_FILE</p> 
        <p>TEXT</p> 
        <p>DUL 控制文件名（默认：“ control.dul”）。</p> 
        <p>&nbsp;</p> 
        <p>DB_BLOCK_SIZE</p> 
        <p>NUMBER</p> 
        <p>字节表示的Oracle块大小（最大32K）</p> 
        <p>&nbsp;</p> 
        <p>DC_COLUMNS</p> 
        <p>NUMBER</p> 
        <p>DC_OBJECTS</p> 
        <p>NUMBER</p> 
        <p>DC_TABLES</p> 
        <p>NUMBER</p> 
        <p>DC_USERS</p> 
        <p>NUMBER</p> 
        <p>dul 字典缓存大小。如果其中一个过低，高速缓存将被自动调整大小。</p> 
        <p>&nbsp;</p> 
        <p>EXPORT_MODE</p> 
        <p>BOOLEAN</p> 
        <p>使用export&nbsp;导出模式或 SQL*Loader 模式。</p> 
        <p>&nbsp;</p> 
        <p>FILE</p> 
        <p>TEXT</p> 
        <p>（转储或数据）文件名生成的基础。对类似8.3 DOS的文件系统使用。</p> 
        <p>&nbsp;</p> 
        <p>FILE_SIZE_IN_MB</p> 
        <p>NUMBER (Megabytes)</p> 
        <p>最大转储文件大小。转储文件被分割成多个部分。每个文件都有一个完整的头，并能被单独加载。</p> 
        <p>&nbsp;</p> 
        <p>LDR_ENCLOSE_CHAR</p> 
        <p>TEXT</p> 
        <p>括起SQL* Loader模式中字段的字符。The character to enclose fields in SQL*Loader mode.</p> 
        <p>LDR_PHYS_REC_SIZE</p> 
        <p>NUMBER</p> 
        <p>生成的loader数据文件的物理记录大小。</p> 
        <p>&nbsp;</p> 
        <p>LDR_PHYS_REC_SIZE = 0没有固定的记录，每个记录以一个换行符结束。</p> 
        <p>LDR_PHYS_REC_SIZE &gt; 2: 固定的记录大小。</p> 
        <p>MAX_OPEN_FILES</p> 
        <p>在操作系统级别同时保持开放的数据文件最大#。</p> 
        <p>&nbsp;</p> 
        <p>OSD_BIG_ENDIAN_FLAG</p> 
        <p>机器语言表示的字节顺序。Big Endian一开始也被称为MSB。 DUL根据在运行的机器设置默认值。要了解这个被称为Big Endian的原因，阅读格列佛游记。</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <pre>OSD_DBA_FILE_BITS
以位表示的DBA中文件编号大小。更精确的说是文件号的低序部分的大小。
OSD_FILE_LEADER_SIZE
bytes/blocks added before the real oracle file header block
OSD_C_STRUCT_ALIGNMENT
C 结构成员对齐（0,16或23）。默认的32对于大多数端口是正确的。 
OSD_WORD_SIZE
一个机器字的大小总是32，除了MS/DOS(16)
PARSE_HEX_ESCAPES
Boolean 默认 FALSE
在解析时，在字符串使用\\xhh十六进制转义序列。如果设置为true，则奇怪的字符可以使用转义序列来指定。该功能也用于指定多字节字符。
USE_SCANNED_EXTENT_MAP
BOOLEAN
导出表时，在ext.dat使用扫描好的区段地图。一般算法在段头使用区段地图。只有当一些段头丢失或不正确时，该参数才有用。
WARN_RECREATE_FILES
BOOLEAN (TRUE)
如果现有的文件被覆盖，设置为FALSE以取消警告信息。
WRITABLE_DATAFILES
BOOLEAN (FALSE)
DUL的一般使用只会读取数据库文件。然而，UPDATE和 SCAN RAW DEVICE也将写出。参数能防止有意外损坏。

示例 init.dul :
# sample init.dul configuration parameters
# these must be big enough for the database in question
# the cache must hold all entries from the dollar tables.
dc_columns = 200000
dc_tables = 10000
dc_objects = 10000
dc_users = 40

# OS specific parameters
osd_big_endian_flag = false
osd_dba_file_bits = 10
osd_c_struct_alignment = 32
osd_file_leader_size = 1

# database parameters
db_block_size = 8k

# loader format definitions
LDR_ENCLOSE_CHAR = &quot;
LDR_PHYS_REC_SIZE = 81
配置端口相关的参数
从RDBMS版本10G 开始，osd参数易于配置。通常，所有参数都可以使用其默认值。唯一可能要注意的是osd_big_endian_flag，在原始数据库平台与当前机器不同的情况下进行跨平台导出时，如果osd_big_endian_flag设置不正确，当检查文件头时让会在启动时被检测。
已知参数集合
对于预10G数据库没有在OSD的OSD维基页面列表（操作系统Dependend），几乎每一个平台参数已知参数列表。如果你的平台不在列表中，你可以使用下面的建议确定的参数。 （然后请通知我，让我可以将它们添加到列表中。）
osd_big_endian_flag
big endian 或 little endian（机器表示的字节顺序）：HP，SUN和大型机通常big endian：OSD_BIG_ENDIAN_FLAG = TRUE。 DEC和Intel平台是little endian ：OSD_BIG_ENDIAN_FLAG = FALSE。默认值对DUL正在运行的平台是正确的。
这点没有标准的技巧，以下在UNIX系统上可能有效：
  echo dul | od -x
  If the output is like:
     0000000 6475 6c0a
     0000004
  You are on a big endian machine (OSD_BIG_ENDIAN_FLAG=TRUE).

  If you see:
     0000000 7564 0a6c
     0000004
  This is a little endian machine (OSD_BIG_ENDIAN_FLAG=FALSE).
osd_dba_file_bits
在DBA用于文件号的低位部分的位数量。执行以下查询：
SQL&gt; select dump(chartorowid('0.0.1')) from dual;
  
  Typ=69 Len=6: 8,0,0,0,0,0    -&gt;       osd_dba_file_bits =  5 (SCO)
  Typ=69 Len=6: 4,0,0,0,0,0    -&gt;       osd_dba_file_bits =  6 (Sequent , HP)
  Typ=69 Len=6: 1,0,0,0,0,0    -&gt;       osd_dba_file_bits =  8 (NCR,AIX)
  Typ=69 Len=6: 0,16,0,0,0,0   -&gt;       osd_dba_file_bits = 12 (MVS)
  Typ=69 Len=10: 0,0,0,0,0,64,0,0,0,0      osd_dba_file_bits = 10 (Oracle8)      
OSD_C_STRUCT_ALIGNMENT
在数据文件头的结构布局。 0：在C-结构（VAX/ VMS只）成员之间没有填充16：一些韩国ticom机和MS/ DOS32：结构成员按成员大小排列。 （所有其他包括ALPHA / VMS）检查以下查询：
SELECT * FROM v$type_size
WHERE type IN ( 'KCBH', 'KTNO', 'KCBH', 'KTBBH', 'KTBIT', 'KDBH'
              , 'KTECT', 'KTETB', 'KTSHC') ;
一般情况下，会出现osd_c_struct_alignment=32以及如下：
K        KTNO     TABLE NUMBER IN CLUSTER                   1
KCB      KCBH     BLOCK COMMON HEADER                      20
KTB      KTBIT    TRANSACTION VARIABLE HEADER              24
KTB      KTBBH    TRANSACTION FIXED HEADER                 48
KDB      KDBH     DATA HEADER                              14
KTE      KTECT    EXTENT CONTROL                           44
KTE      KTETB    EXTENT TABLE                              8
KTS      KTSHC    SEGMENT HEADER                            8

8 rows selected.
仅对于VAX/ VMS和Netware，会出现 osd_c_struct_alignment=0和如下输出：
COMPONEN TYPE     DESCRIPTION                      SIZE
-------- -------- -------------------------------- ----------
K        KTNO     TABLE NUMBER IN CLUSTER                   1
KCB      KCBH     BLOCK COMMON HEADER                      20
KTB      KTBIT    TRANSACTION VARIABLE HEADER              23
KTB      KTBBH    TRANSACTION FIXED HEADER                 42
KDB      KDBH     DATA HEADER                              14
KTE      KTECT    EXTENT CONTROL                           39
KTE      KTETB    EXTENT TABLE                              8
KTS      KTSHC    SEGMENT HEADER                            7

8 rows selected.
如果有一个不同的列表，这将需要一些主要黑客攻击和嗅探，还可能对DUL有重大变化。 （电子邮件Bernard.van.Duijnen@oracle.com）
osd_file_leader_size

在Oracle文件头前的块/字节数。 Unix数据文件有一个额外的领先块（文件大小，块大小幻数）大量（&gt;100）被看作是一个字节偏移，少数被看作Oracle块号。
Unix    :       osd_file_leader_size = 1
Vms     :       osd_file_leader_size = 0
Desktop :       osd_file_leader_size = 1 (or 512 for old personal oracle)
Others  :       Unknown ( Use Andre Bakker's famous PATCH utility to find out)
                An Oracle7 file header block starts with the pattern 0X0B010000.
你可以在可选的第三个字段的control.dul中添加一个额外的字节偏移（如在原始设备的AIX或DEC UNIX数据文件）
控制文件语法规范
控制文件（默认名称“control.dul”）用于指定ASM磁盘，块索引和数据文件名。control的格式已被扩展。
目前在DUL控制文件中有三种类型的定义。在单独的行中的每个条目。 ASM磁盘必须先于ASM文件。
control_file_line ::= asm_disk_spec | file_piece_spec | block_index_spec
如果兼容是10或更高，你也可以指定ASM磁盘。它对于指定设备名称通常足够。所有属性都是由头部检查自动检索。当头部检查是不可能时才需要完整的语法，用于有损坏的header的磁盘。语法是：
DISK  device name [  disk group options  ]

 disk group option  ::= GROUP  disk group name 
                           | DISK_NO  disk number in group 
                           | F1B1  File1 Block1 location
块索引是在损坏的文件系统上访问Oracle块的一种方式。通常，损坏的文件系统没有被全部删除，它不是空的。由于oracle块的特定布局，it is possible to datablocks an store their location in the block index。参见 create block index命令。block_index_name是一个普通的标识符，它用于构建一个唯一的文件名。
BLOCK INDEX  block_index_name
每个条目可以包含一个数据文件的一部分。最小单位是一个数据块。这种的话，将对于DUL太大的数据文件分割成多个部分是可能的，其中每个部分小于2GB。
一般指定的文件名就足够了。即使对于单个块。如果compatible为10或更高，文件号和表空间号将从文件头读取。
如果指定的细节与文件头不同，DUL会给出一个警告，但使用你的定义。这是为了能在文件损坏的头块导出文件。对于调试，可以转储文件头。
可选的额外leader 偏移是一个额外的字节偏移，它将被添加到该数据文件的所有lseek() 操作。这样就可以跳过一些AIX原始设备额外的4K块，或在原始设备上Tru64d 额外的64K。
file_piece_spec ::= 
         [ [ tablespace_no ] relative_file_number]data_file_name
         [ optional extra leader offset ]
         [ startblock block_no ]
         [ endblock block_no ]
示例
# AIX version 7 example with one file on raw device
   1 /usr/oracle/dbs/system.dbf
   8 /dev/rdsk/data.dbf 4096

# Oracle8 example with a datafile split in multiple parts, each part smaller than 2GB
   0  1 /fs1/oradata/PMS/system.dbf
   1  2 /tmp/huge_file_part1 startblock 1 endblock 1000000
   1  2 /tmp/huge_file_part2 startblock 1000001 endblock 2000000
   1  2 /mnt3/huge_file_part3 startblock 2000001 endblock 2550000

# ASM disks for two disk groups
disk /media/maxtor/asm/dgn1
disk /media/maxtor/asm/dgn2
disk /media/maxtor/asm/dgn3
disk /media/maxtor/asm/dgn4
disk /media/maxtor/asm/dgodd

# system datafile in the first asm disk group
+DGN/db102/datafile/system.257.621616979

# users datafile in a different disk group
+DGODD/db102/datafile/users.257.621616683

# a so called big file tablespace, use 1024 for the file#
 8 1024 /home/oracle/v102/dbs/bigfilets

# Or let DUL find out itself from the header
 /home/oracle/v102/dbs/bigfilets

# one tablespace with a different block size
/home/oracle/v102/dbs/ts16k.dbf block_size 16k

# or let DUL find out by header inspection
/home/oracle/v102/dbs/ts16k.dbf


</pre> 
        <h3>Sample unload session: data dictionary usable for DUL</h3> 
        <p><a href="http://www.askmaclean.com/archives/oracle-dul-data-unloader-data-recovery-tool-information-summary.html/dul_bootstrap" rel="attachment wp-att-16260"><img class="aligncenter size-full wp-image-16260" src="http://www.askmaclean.com/wp-content/uploads/2014/12/dul_bootstrap.png" sizes="(max-width: 973px) 100vw, 973px" srcset="http://www.askmaclean.com/wp-content/uploads/2014/12/dul_bootstrap-300x283.png 300w, http://www.askmaclean.com/wp-content/uploads/2014/12/dul_bootstrap-768x725.png 768w, http://www.askmaclean.com/wp-content/uploads/2014/12/dul_bootstrap.png 973w" alt="dul_bootstrap" width="973" height="918" /></a></p> 
        <pre>
示例导出会话：可用于DUL的数据字典
1.	创建一个合适的“init.dul”
2.	创建control.dul

sqlplus /nolog
    connect / as sysdba
    startup mount
    set trimspool on pagesize 0 linesize 256 feedback off
    column name format a200
    spool control.dul
    select ts#, rfile#, name from v$datafile;
    exit
edit the result

For Oracle8 a different query must be used:
   select ts#, rfile#, name from v$datafile;
1.	启动DUL和bootstrap；
$ dul

Data UnLoader 10.2.1.16 - Oracle Internal Only - on Thu Jun 28 11:37:24 2007
with 64-bit io functions

Copyright (c) 1994 2007 Bernard van Duijnen All rights reserved.

 Strictly Oracle Internal use Only
DUL&gt; bootstrap;
Probing file = 1, block = 377
. unloading table                BOOTSTRAP$      57 rows unloaded
DUL: Warning: Dictionary cache DC_BOOTSTRAP is empty
Reading BOOTSTRAP.dat 57 entries loaded
Parsing Bootstrap$ contents
DUL: Warning: Recreating file &quot;dict.ddl&quot;
Generating dict.ddl for version 10
 OBJ$: segobjno 18, file 1
 TAB$: segobjno 2, tabno 1, file 1
 COL$: segobjno 2, tabno 5, file 1
 USER$: segobjno 10, tabno 1, file 1
Running generated file &quot;@dict.ddl&quot; to unload the dictionary tables
. unloading table                      OBJ$   52275 rows unloaded
. unloading table                      TAB$    1943 rows unloaded
. unloading table                      COL$   59310 rows unloaded
. unloading table                     USER$      70 rows unloaded
Reading USER.dat 70 entries loaded
Reading OBJ.dat
 52275 entries loaded and sorted 52275 entries
Reading TAB.dat 1943 entries loaded
Reading COL.dat 59310 entries loaded and sorted 59310 entries
Reading BOOTSTRAP.dat 57 entries loaded
...
Some more messages for all the other TABLES
...
Database character set is WE8ISO8859P1
Database national character set is AL16UTF16
DUL&gt; unload user SCOTT;
About to unload SCOTT's tables ...
. unloading table                       EMP      14 rows unloaded
示例导出会话：无法用于DUL的数据字典
1.	创建一个合适的“init.dul”（见配置指南）
2.	创建control.dul见上文
3.	扫描数据库的段头和区段：
$ dul
UnLoader: Version 2.0.0.0 - Very Restricted on Tue May 16 11:10:16 1995
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
DUL&gt; scan database;
data file 1 20480 blocks scanned
data file 4 7680 blocks scanned
data file 5 512 blocks scanned
DUL&gt;quit
1.	重启DUL和扫描找到的表获得列统计，这生成了大量输出：
echo scan tables \; | dul &gt; scan.out&amp;

[ many lines here]


Object id 1601 table number 0
UNLOAD TABLE T1601_0 ( C1 NUMBER, C2 UNKNOWN, C3 UNKNOWN, C4 NUMBER, C5 DATE
        , C6 NUMBER, C7 NUMBER, C8 NUMBER )
    STORAGE ( TABNO 0 EXTENTS( FILE 1 BLOCK 10530));

Colno  Seen MaxIntSz Null% C75% C100 Num% NiNu% Dat% Rid%
    1    14        3    0%   0%   0% 100% 100%   0%   0%
    2    14        6    0% 100% 100% 100%  14%   0%  21%
    3    14        9    0% 100% 100% 100%  14%   0%   0%
    4    14        3    7%   0%   0% 100% 100%   0%   0%
    5    14        7    0%   0%   0%   0%   0% 100%   0%
    6    14        3    0%   0%   0% 100% 100%   0%   0%
    7    14        2   71%   0%   0% 100% 100%   0%   0%
    8    14        2    0%   0%   0% 100% 100%   0%   0%

&quot;7369&quot; &quot;SMITH&quot; &quot;CLERK&quot; &quot;7902&quot; &quot;17-DEC-1980 AD 00:00:00&quot; &quot;800&quot; &quot;&quot; &quot;20&quot;

&quot;7499&quot; &quot;-0.000025253223&quot; &quot;SALESMAN&quot; &quot;7698&quot; &quot;20-FEB-1981 AD 00:00:00&quot; &quot;1600&quot; &quot;30+

0&quot; &quot;30&quot;

&quot;7521&quot; &quot;WARD&quot; &quot;SALESMAN&quot; &quot;7698&quot; &quot;22-FEB-1981 AD 00:00:00&quot; &quot;1250&quot; &quot;500&quot; &quot;30&quot;

&quot;7566&quot; &quot;JONES&quot; &quot;MANAGER&quot; &quot;7839&quot; &quot;02-APR-1981 AD 00:00:00&quot; &quot;2975&quot; &quot;&quot; &quot;20&quot;

&quot;7654&quot; &quot;MARTIN&quot; &quot;SALESMAN&quot; &quot;7698&quot; &quot;28-SEP-1981 AD 00:00:00&quot; &quot;1250&quot; &quot;1400&quot; &quot;30&quot;

[ many more lines here ]
这看着很眼熟，使用以上信息和你对emp表的了解来编写：
UNLOAD TABLE emp ( empno number, ename char, job char, mgr number,
        hiredate date, sal number, comm number deptno number)
 STORAGE ( TABNO 0 EXTENTS( FILE 1 BLOCK 10530));
1.	用这个语句来导出emp：
$ dul
UnLoader: Version 2.0.0.0 - Very Restricted on Tue May 16 11:46:33 1995
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
Loaded 350 segments
Loaded 204 extents
Extent map sorted
DUL&gt; UNLOAD TABLE emp ( empno number, ename char, job char, mgr number,
DUL 2&gt; hiredate date, sal number, comm number deptno number)
DUL 3&gt; STORAGE ( TABNO 0 EXTENTS( FILE 1 BLOCK 10530));
. unloading table                       EMP      14 rows unloaded
DUL&gt;quit
 
示例导出会话：不正确的init.dul参数
错误的 osd_dba_file_bits大小
这会产生类似如下的输出。通常这不应该发生，因为你应该创建一个演示数据库，并通过DUL记录的（HTML页）查询进行检查。
在DBA的失配是只在文件号（括号内第一号）的部分。第二个数字，块号，是正确的。
Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Wed Sep 3 10:40:33 1997
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
Session altered.
Session altered.
Session altered.
Session altered.
Session altered.
DUL: Warning: Block[1][2] DBA in block mismatch [4][2]
DUL: Warning: Bad cache layer header file#=1, block#=2

DUL: Warning: Block[1][3] DBA in block mismatch [4][3]
DUL: Warning: Bad cache layer header file#=1, block#=3

...........and etc..........
错误的osd_file_leader_size
这可能会造成类似如下的输出，但还有许多其他可能。在这里，我们block off号是固定的。In this case we are a fixed number of blocks off.文件号是正确的。块号的差是恒定的：
Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Wed Sep 3 10:44:23 1997
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
Session altered.
Session altered.
Session altered.
Session altered.
Session altered.

DUL: Warning: Block[1][2] DBA in block mismatch [1][3]
DUL: Warning: Bad cache layer header file#=1, block#=2

DUL: Warning: Block[1][3] DBA in block mismatch [1][4]
DUL: Warning: Bad cache layer header file#=1, block#=3

...........and etc..........
错误的osd_c_struct_alignment
这可能会产生类似如下的输出：
Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Wed Sep 3 10:46:10 1997
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
Session altered.
Session altered.
Session altered.
Session altered.
Session altered.
. unloading table OBJ$

DUL: Warning: file# 0 is out of range
DUL: Warning: Cannot read data block file#=0, block# = 262145
OS error 2: No such file or directory

DUL: Warning: file# 0 is out of range
DUL: Warning: Cannot read data block file#=0, block# = 262146
OS error 2: No such file or directory

...........and etc..........
错误的db_block_size
当DB_BLOCK_SIZE设置过小时会生成以下输出。正确值是4096，而设置为2048。通常情况下，此参数值应取自Oracle实例的init.ora文件中，且将无法正确设置。
Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Thu Sep 4 12:38:25 1997
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
Session altered.
Session altered.
Session altered.
Session altered.
Session altered.
DUL: Warning: Block[1][2] DBA in block mismatch [513][1159680]
DUL: Warning: File=1, block 2: illegal block version 2
DUL: Warning: Block[1][2] Illegal block type[0]
DUL: Warning: Bad cache layer header file#=1, block#=2

DUL: Warning: Block[1][4] DBA in block mismatch [1][2]
DUL: Warning: File[1]Block[4]INCSEQ mismatch[90268!=0]
DUL: Warning: Bad cache layer header file#=1, block#=4

DUL: Warning: Block[1][6] DBA in block mismatch [1][3]
DUL: Warning: File[1]Block[6]INCSEQ mismatch[139591710!=86360346]
DUL: Warning: Bad cache layer header file#=1, block#=6

...........and etc..........
QUOTE MISSING
如果收到以下错误，这是由于数据字典表“USER$，OBJ$，$ TAB和COL$”没有被正确生成。要解决这个错误，简单地删除所有dictv6.ddl或dictv7.ddl创建.dat和.ctl文件并重启。
Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Wed Sep 3 10:49:30 1997

Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Wed Sep 3 10:49:30 1997

DUL: Error: Quote missing
从损坏的EXP转储文件拯救数据 - UNEXP教程
如果你不了解EXP转储文件的结构任何东西，这就比较困难。以下是一个快速解释。除了文件头，转储文件有识别各个部分的标记。在每个表部分会有SQL语句。最有趣的部分是create table语句，接下来是插入到表语句。插入语句后直接跟绑定信息，（列数，以及每列的类型和绑定长度和其他一些信息）。接下来是实际的列。每列之前是两个字节长度，后跟实际列数据。可能较长的列有几个技巧。列数据的结尾以特殊的长度标记OXFFFF标志。行的开头没有标记。损坏后的重新同步是试错。损坏一般不能立即检测到。该格式与DIRECT导出略有不同，所以你必须要对DIRECT导出使用DIRECT选项。指定的偏移量是一个行的开头。一般来说第一个直接在绑定数组之后，但为最佳的灵活性，你可以从行数据的任何地方开始。
第一步是扫描转储文件来找到偏移和SQL语句。每个输出行从项目被找到的偏移位置开始。

<img class="aligncenter" src="http://7xi9ig.com2.z0.glb.qiniucdn.com/Screenshot%202016-01-05%2016.04.31.png" alt="" width="481" height="219" />
DUL&gt;  scan dump file expdat.dmp;
0: CSET: 1 (US7ASCII)                # Character set info from the header
3: SEAL EXPORT:V10.02.01             # the Seal - the exp version tag
20: DBA SYSTEM                       # exp done as SYSTEM
8461: CONNECT SCOTT                  # section for user SCOTT
8475: TABLE &quot;EMP&quot;
                                     # complete create table staement
8487: CREATE TABLE &quot;EMP&quot; (&quot;EMPNO&quot; NUMBER(4, 0), &quot;ENAME&quot; VARCHAR2(10),
&quot;JOB&quot; VARCHAR2(9), &quot;MGR&quot; NUMBER(4, 0), &quot;HIREDATE&quot; DATE, &quot;SAL&quot; NUMBER(7, 2),
&quot;COMM&quot; NUMBER(7, 2), &quot;DEPTNO&quot; NUMBER(2, 0))  PCTFREE 10 PCTUSED 40
INITRANS 1 MAXTRANS 255 STORAGE(INITIAL 65536 FREELISTS 1
FREELIST GROUPS 1 BUFFER_POOL DEFAULT) TABLESPACE &quot;USERS&quot; LOGGING NOCOMPRESS

                                     # Insert statement
8829: INSERT INTO &quot;EMP&quot; (&quot;EMPNO&quot;, &quot;ENAME&quot;, &quot;JOB&quot;, &quot;MGR&quot;, &quot;HIREDATE&quot;,
&quot;SAL&quot;, &quot;COMM&quot;, &quot;DEPTNO&quot;) VALUES (:1, :2, :3, :4, :5, :6, :7, :8)

                                     # BIND information
8957: BIND information for 8 columns
 col[  1] type 2 max length 22
 col[  2] type 1 max length 10 cset 31 (WE8ISO8859P1) form 1
 col[  3] type 1 max length 9 cset 31 (WE8ISO8859P1) form 1
 col[  4] type 2 max length 22
 col[  5] type 12 max length 7
 col[  6] type 2 max length 22
 col[  7] type 2 max length 22
 col[  8] type 2 max length 22
Conventional export                  # Conventional means NOT DIRECT

9003: start of table data            # Here begins the first row
现在从create table语句和直接/常规信息和列数据的开头创建unexp语句。
UNEXP TABLE &quot;EMP&quot; (&quot;EMPNO&quot; NUMBER(4, 0), &quot;ENAME&quot; VARCHAR2(10),
&quot;JOB&quot; VARCHAR2(9), &quot;MGR&quot; NUMBER(4, 0), &quot;HIREDATE&quot; DATE, &quot;SAL&quot; NUMBER(7, 2),
&quot;COMM&quot; NUMBER(7, 2), &quot;DEPTNO&quot; NUMBER(2, 0))
dump file expdat.dmp from 9003;

Unloaded 14 rows, end of table marker at 9670 # so we have our famous 14 rows
这将创建普通SQL * Loader文件和匹配的控制文件。在输出文件中一个额外的列被添加，这是与行的状态有关。 AP表示行是部分的，（缺失一些列）R指重新同步，这是一个再同步之后的第一行。 O表示重叠，之前的一行有错误，但新行与另一行部分重叠。






目录
~~~~~~~~~~~~~~~~~
1.简介
2.使用DUL
2.1创建一个适当的init.dul文件
2.2创建control.dul文件
2.3导出对象信息
2.4调用DUL
2.5重建数据库
3.如何重建存储在数据字典的对象定义？
4当段头块被损坏时，如何导出数据？
5. 当文件头块被损坏时，如何导出数据？
6.如何导出数据，而无需系统表空间？
7.附录A：哪里可以找到可执行文件？
8.参考
1.简介
~~~~~~~~~~~~~~~
本文档解释了如何使用DUL，而不是对Bernard的数据导出能力的完整解释。
本文件仅供内部使用，不应在任何时候给予客户，DUL应始终被分析师使用或在分析师监督下使用。
DUL（数据导出）尝试从Oracle数据库中检索无法检索的数据。这不是导出工具或
SQL * Loader的替代选择。该数据库可能被破坏，但一个单独的数据块必须是100％正确的。在所有导出时，块会被检查，以确保块没有损坏且属于正确的段。如果一个损坏的块被DUL检测到，错误信息会被打印到loader文件，并输出到标准输出，但是这不会终止下一行或块的导出。

2.使用DUL
~~~~~~~~~~~~
首先，你必须获得存在于数据块的对象所需的信息，这些统计将被加载到DUL字典以导出数据库对象。
这个信息是从在数据库创建时被创建的USER $，OBJ $，$ TAB和COL $表中检索的
，它们可以基于这一事实：由于SQL，BSQ的刚性性质，对象号在这些表是固定的而被导出。 DUL可以在系统的系统表空间中找到信息，因此，如果（多个）数据文件不存在，（多个）表数据文件必须包含在控制文件中，参见第6章。
2.1创建相应的“init.dul”文件
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
REM平台指定参数(NT)
REM能获取的最常见平台的一列参数。
osd_big_endian_flag=false
osd_dba_file_bits=10
osd_c_struct_alignment=32
osd_file_leader_size=1
osd_word_size = 32
REM DUL字典缓存的大小。如果其中某一个过低，启动将失败。
dc_columns=2000000
dc_tables=10000
dc_objects=1000000
dc_users=400
dc_segments=100000
控制文件的位置和文件名，默认值是control.dul
在当前目录control_file = D:\Dul\control_orcl.dul

数据库块大小，可以在init.ora中的文件中找到，或在服务器管理器中执行“show parameter %db_block_size%” 被检索到
（svrmgr23/ 30 /l）将该参数更改为损坏数据块的块大小。
db_block_size=4096。

当数据需要导出/导入格式，它可以/必须被指定。
 这将创建Oracle导入工具适用的文件，虽然生成的文件与由EXP工具生成的表模式导出完全不同。
它是有一个创建表结构语句和表数据的单个表转储文件。
grants，存储子句，触发器不包括在这个转储文件中！
export_mode=true

REM兼容参数可以被指定且可以是6，7或8
compatible=8

该参数是可选的并能在REM不支持的长文件名（e.g. 8.3 DOS）的平台，或当文件格式DUL使用 “owner_name.table_name.ext”不可接受时被指定。
在这里，转储文件会类似dump001.ext，dump002.ext，等。
file = dump

完整的列表可在HTML部分“DUL参数”获取，虽然这init.dul文件在大多数情况可行，且包含所有正确参数以成功完成导出。
2.2 创建“control.dul”文件
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
你需要对有关逻辑表空间和物理数据文件有一定了解，或你可以在数据库被加载时进行以下查询：
Oracle 6, 7
―――C
&gt; connect internal
&gt; spool control.DUL
&gt; select * from v$dbfile;
&gt; spool off

Oracle 8
――C
&gt; connect internal
&gt; spool control.DUL
&gt; select ts#, rfile#, name from v$datafile;
&gt; spool off

如果需要的话，编辑spool文件和变化，数据文件的位置和stripe out不必要的信息，如表头，反馈行，等...
示例控制文件像这样：
Edit the spool file and change, if needed, the datafile location and stripe
out unnecessary information like table headers, feedback line, etc…
A sample control file looks something like this :
REM Oracle7 control file
1 D:\DUL\DATAFILE\SYS1ORCL.DBF
3 D:\DUL\DATAFILE\DAT1ORCL.DBF
7 D:\DUL\DATAFILE\USR1ORCL.DBF
REM Oracle8 control file
0 1 D:\DUL\DATAFILE\SYS1ORCL.DBF
1 2 D:\DUL\DATAFILE\USR1ORCL.DBF
1 3 D:\DUL\DATAFILE\USR2ORCL.DBF
2 4 D:\DUL\DATAFILE\DAT1ORCL.DBF

注：每个条目可以包含一个数据文件的一部分，当你需要拆分对于DUL太大的数据文件时，这就有用了，这样每个部分就小于比方说2GB了。 例如 ：
REM Oracle8 其中一个数据文件被分割成多部分，每部分小于1GB！ 
0 1 D:\DUL\DATAFILE\SYS1ORCL.DBF
1 2 D:\DUL\DATAFILE\USR1ORCL.DBF startblock 1 endblock 1000000
1 2 D:\DUL\DATAFILE\USR1ORCL.DBF startblock 1000001 endblock 2000000
1 2 D:\DUL\DATAFILE\USR1ORCL.DBF startblock 2000001 endblock 2550000
2.3 Unload the object information
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
以适当DDL（DUL描述语言）脚本启动BUL工具。由于数据库版本不同，有3个可用脚本来导出USER$，$ OBJ，TAB$和COL$表。
Oracle6 :&gt; dul8.exe dictv6.ddl
Oracle7 :&gt; dul8.exe dictv7.ddl
Oracle8 :&gt; dul8.exe dictv8.ddl

Data UnLoader: Release 8.0.5.3.0 C Internal Use Only C on Tue Jun 22 22:19:
Copyright (c) 1994/1999 Bernard van Duijnen All rights reserved.

Parameter altered
Session altered.
Parameter altered
Session altered.
Parameter altered
Session altered.
Parameter altered
Session altered.
. unloading table OBJ$ 2271 rows unloaded
. unloading table TAB$ 245 rows unloaded
. unloading table COL$ 10489 rows unloaded
. unloading table USER$ 22 rows unloaded
. unloading table TABPART$ 0 rows unloaded
. unloading table IND$ 274 rows unloaded
. unloading table ICOL$ 514 rows unloaded
. unloading table LOB$ 13 rows unloaded

Life is DUL without it
这将 USER$, OBJ$, TAB$ and COl$ 数据字典表的数据导出到 SQL*Loader 文件，这不能被处理到导入格式的转储文件中。 , this can not be manipulated into dump files
of the import format. 参数 export_mode = false 被硬编码到ddl脚本且不能更改为值“true”，因为这会导致DUL产生错误而失败：

. unloading table OBJ$
DUL: Error: Column “DATAOBJ#” actual size(2) greater than length in column
definition(1)
………….etc……………

2.4 调用DUL
~~~~~~~~~~~~~~
在交互模式下启动DUL，你也可以准备一个包含所有ddl命令以导出数据库必要数据的脚本。我会在本文档中描述最常用的命令，但不是完整的可指定参数列表。完整的列表可以在 “DDL描述”部分找到。
DUL&gt; unload database;
=&gt; 这将导出整个数据库表（包括sys'tables）
DUL&gt; unload user ;
=&gt; 这将导出所有特定用户所拥有的表。
DUL&gt; unload table ;
=&gt; 这将卸载由用户名拥有的指定表
DUL&gt; describe ;
=&gt; 将表示表列以及指定用户所拥有的（多个）数据文件的指向。will represent the table columns with there relative pointers to the datafile(s) owned by the specified user.

DUL&gt; scan database;
=&gt;扫描所有数据文件的所有块。
生成两个文件：
1：找到的段头的seg.dat信息（索引/集群/表）
（对象ID，文件号和块号）。
2：连续的表/集群的数据块的ext.dat信息。
（对象ID（V7），文件和段头的块号（V6），文件号和第一个块的块号，块的数量，表数量）
DUL&gt; scan tables;
=&gt;使用seg.dat和ext.dat作为输入。
扫描所有数据段中的所有表（一个头块和至少匹配至少一个表的一个区段）。

2.5重建数据库
~~~~~~~~~~~~~~~~~~~~~~~~
创建新的数据库，并使用导入或SQL * Loader来恢复被DUL检索到的数据。需要注意的是，当你只导出表结构数据时，索引，grants，PL / SQL和触发器将不再在新的数据库中存在。为了获得与之前数据库的完全相同的副本，你需要重新运行表，索引，PL / SQL等的创建脚本。
如果你没有这些脚本，那么你将需要执行在文档第3部分描述的步骤。

3.如何重建存储在数据字典的对象定义
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~~~
要通过DUL重建PL / SQL（程序包，过程，函数或触发器），grants，索引，约束或存储子句（旧的表结构）是可以的，但就是有点棘手。您需要使用DUL导出相关的数据字典表，然后加载这些表到一个健康的数据库，一定要使用与SYS或（系统）不同的用户。加载损坏数据库的数据字典表到健康数据库字典可能也会破坏健康的数据库。

示例从损坏的数据库检索pl/sql packages / procedures /functions的详情：
1）按照在“使用DUL”一节中的步骤解释并导出数据字典表“source$”
2）创建一个新的用户登录到一个健康数据库，并指定所需的默认和临时表空间。
3）将连接，资源， imp_full_database授权给新用户。
4）导入/加载表“source$”到新创建的模式：
例如：imp80 userid=newuser/passw file=d:\dul\scott_emp.dmp
log=d:\dul\impemp.txt full=y
5）现在，您可以从表查询以在损坏的数据库中重建pl/sql packages / procedures /functions。在WebIv可以找到产生这样的PL / SQL创建脚本。
相同的步骤可以用于重建索引，约束，和存储参数，或者为相应的用户重新授权。请注意，你总是需要使用某种类型的脚本，可以重建对象并包括损坏的数据库版本的所有功能。例如：当损坏的数据库是7.3.4版本，你有几个位图索引，如果你会使用支持7.3.2版本或之前的脚本，那么你将无法成功重建位图索引！

4. 当段头块被损坏时，如何导出数据 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~
当DUL不能以正常方式检索数据块信息，它可以扫描数据库来创建其自己的段/区段地图。要从数据文件导出数据，扫描数据库的过程是必要的。
（为了说明这个例子，我根据段头块复制一个空块）
1）创建一个适当的“init.dul”（见2.1）和“control.dul”（见2.2）的文件。
2）导出表。这将失败，并指出段头块有损坏：
DUL&gt; unload table scott.emp;
. unloading table EMP
DUL: Warning: Block is never used, block type is zero
DUL: Error: While checking tablespace 6 file 10 block 2
DUL: Error: While processing block ts#=6, file#=10, block#=2
DUL: Error: Could not read/parse segment header
0 rows unloaded
3）运行扫描数据库命令：
DUL&gt; scan database;
tablespace 0, data file 1: 10239 blocks scanned
tablespace 6, data file 10: 2559 blocks scanned
4）向DUL说明它应该使用自己的生成的区段地图，而不是段头信息。
DUL&gt; alter session set use_scanned_extent_map = true;
Parameter altered
Session altered.
DUL&gt; unload table scott.emp;
. unloading table EMP 14 rows unloaded

5. 当数据文件头块损坏时，如何导出数据 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~
在你打开数据库时，数据文件头块的损坏总是会列出。这不像一个头段块的损坏（见第4点），其中的数据库可以成功打开，且当你进行表查询时，损坏会列出。DUL从这种情况中恢复没有问题，尽管有其他恢复这种情况的方法，如为数据文件头块打补丁。
你将收到如下错误：
ORACLE instance started.
Total System Global Area 11739136 bytes
Fixed Size 49152 bytes
Variable Size 7421952 bytes
Database Buffers 4194304 bytes
Redo Buffers 73728 bytes
Database mounted.
ORA-01122: database file 10 failed verification check
ORA-01110: data file 10: ‘D:\DATA\TRGT\DATAFILES\JUR1TRGT.DBF’
ORA-01251: Unknown File Header Version read for file number 10

6.如何卸载数据，而无需系统表空间
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
如果数据文件不能用于系统表空间，导出仍可继续，但对象信息无法从数据字典表USER $，OBJ $，$ TAB和COL $检索。所以所有者名称，表名和列名不会被加载到DUL字典。识别表会是一项艰巨的任务，且这里需要对RDBMS内部有很好的了解。
首先，你需要对你的应用和它的表有很好的了解。
列类型可以有DUL猜测，但表和列名都将丢失。
任何同一个数据库旧的系统表空间（可能是几周前的）可以是很大的帮助！
1）如上述的步骤1和2，创建 “init.dul”文件和“control.dul”文件。在这种情况下，控制文件将包含所有你想要恢复的数据文件，但不需要系统表空间的信息。
2）然后你调用DUL并输入以下命令：
DUL&gt; scan database;
data file 6 1280 blocks scanned
这将创建区段和段地图。也许DUL命令解释程序也将被终止。
3）重新调用DUL命令解释器并执行以下操作：
Data UnLoader: Release 8.0.5.3.0 C Internal Use Only C on Tue Aug 03 13:33:
Copyright (c) 1994/1999 Oracle Corporation, The Netherlands. All rights res
Loaded 4 segments
Loaded 2 extents
Extent map sorted
DUL&gt; alter session set use_scanned_extent_map = true;
DUL&gt; scan tables; (or scan extents;)
Scanning tables with segment header
Oid 1078 fno 6 bno 2 table number 0
UNLOAD TABLE T_O1078 ( C1 NUMBER, C2 UNKNOWN, C3 UNKNOWN )
STORAGE ( TABNO 0 EXTENTS( FILE 6 BLOCK 2));
Colno Seen MaxIntSz Null% C75% C100 Num% NiNu% Dat% Rid%
1 4 2 0% 0% 0% 100% 100% 0% 0%
2 4 10 0% 100% 100% 100% 0% 0% 0%
3 4 8 0% 100% 100% 100% 0% 0% 50%
“10” “ACCOUNTING” “NEW YORK”
“20” “RESEARCH” “DALLAS”
“30” “SALES” “CHICAGO”
“40” “OPERATIONS” “BOSTON”
Oid 1080 fno 6 bno 12 table number 0
UNLOAD TABLE T_O1080 ( C1 NUMBER, C2 UNKNOWN, C3 UNKNOWN, C4 NUMBER,
C5 DATE, C6 NUMBER, C7 NUMBER, C8 NUMBER )
STORAGE ( TABNO 0 EXTENTS( FILE 6 BLOCK 12));
Colno Seen MaxIntSz Null% C75% C100 Num% NiNu% Dat% Rid%
1 14 3 0% 0% 0% 100% 100% 0% 0%
2 14 6 0% 100% 100% 100% 0% 0% 21%
3 14 9 0% 100% 100% 100% 0% 0% 0%
4 14 3 7% 0% 0% 100% 100% 0% 0%
5 14 7 0% 0% 0% 0% 0% 100% 0%
6 14 3 0% 0% 0% 100% 100% 0% 0%
7 14 2 71% 0% 0% 100% 100% 0% 0%
8 14 2 0% 0% 0% 100% 100% 0% 0%
“7369” “SMITH” “CLERK” “7902” “17-DEC-1980 AD 00:00:00″ “800” “” “20”
“7499” “ALLEN” “SALESMAN” “7698” “20-FEB-1981 AD 00:00:00″ “1600” “300” “30”
“7521” “WARD” “SALESMAN” “7698” “22-FEB-1981 AD 00:00:00″ “1250” “500” “30”
“7566” “JONES” “MANAGER” “7839” “02-APR-1981 AD 00:00:00″ “2975” “” “20”
“7654” “MARTIN” “SALESMAN” “7698” “28-SEP-1981 AD 00:00:00″ “1250” “1400” “30”
Note : it might be best that you redirect the output to a logfile since
commands like the “scan tables” can produce a lot of output.
On Windows NT you can do the following command :
C:\&gt; dul8 &gt; c:\temp\scan_tables.txt
scan tables;
exit;
4）从步骤3的输出中找到丢失的表;如果你仔细看上面的输出会发现，unload语法已经给出，但表的名称将是格式T_0 ，列名称将是格式的C ；数据类型不会精确匹配之前的数据类型。
特别查找像“Oid 1078 fno 6 bno 2 table number 0”的字符串，其中：
oid = object id, will be used to unload the object 对象id，会被用于导出对象
fno = (data)file number （数据）文件号
bno = block number 块号
5）使用“unload table”命令导出找出的表：
DUL&gt; unload table dept (deptno number(2), dname varchar2(14),
loc varchar2(13)) storage (OBJNO 1078)
Unloading extent(s) of table DEPT 4 rows.







评论：
DUL盘头副本
盘头副本
盘头副本
最近有ASM磁盘头的额外副本。通过使用kfed与修复选项，此副本可以用来修复真正的头。
位置
此副本被存储为PST的最后一个块。这意味着它在分配单元1的最后一个块（原来是au 0的块0）。分配单位的默认大小为为1M，元数据块的默认大小为4K，这表示每个au中有256块。所以，通常副本在au1 block 254（ASM从零计数，原始的在分配单元0块0）
kfed修复
确定唯一的问题是与丢失/损坏的磁盘头后，该修复程序很简单，只要：
$ kfed repair
如果su大小为非标准的，以上会失败，显示如下：
KFED-00320: Invalid block num1 =  [3] , num2 =  [1] , error = [type_kfbh]
但这是预料之中的，且没有任何损害。你只需要指定正确的au大小。例如4MB AU的命令是：
$ kfed repair ausz=4194304 
DUL
DUL将检查/使用头复制（总是？或者只在主头损坏的情况下？）如果头损坏，但副本是好的，警告使用kfed？
参考
Bug 5061821 OS工具可以摧毁ASM磁盘头fixed 11.2.0.1，11.1.0.7，10.2.0.5和更高。
注意417687.1在现有的一个磁盘头损坏后创建一个新的ASM磁盘头
rdbms/src/client/tools/kfed/kfed.c




DUL导出扫描的lob

我们的想法是直接从LOB段导出LOB。
我们需要弄清楚：
1. 它是CLOB还是BLOB
2. 对于CLOB，它的字符集，单字节或UCS16，字节大小
3. 块大小，在头中的lob page＃是一个fat page number
4. 缺失页应当被发出为全零
5. 大小未知，只需要剥离trailing zeroes（但对于字节大小）？
实施的变更：
1.添加LOB段ID来扫描lob页面信息，因为大多数属性适用于段。即扫描的lob页缓存的布局是：segid，lobid，fatpageno（chunk＃），version wrap, vsn base, ts#, file#, block#
要做的事：
1.导出所有LOB的命令。一个LOB段提供命令中所有的常用属性。
2.从LOB段指定lobid，可选的大小，和可选的DBA列表中导出单个lob的命令
3.分析生成导出LOB段命令的命令
4.分析生成从段中导出每个LOB命令的命令
需要考虑的事项：
1.	更改 file#, block# 为单个dba？pro no calculations, contra more difficult to read?




我正与客户在处理一个数据打捞作业。从DUL网站下载的DUL工具不能正常工作！

dul4x86-linux.tar.gz给出错误：version ‘GLIBC_2.11’ not found

dul4i386-linux.as3.tar.gz给出错误：You need a more recent DUL version for this os.你需要一个较新的版本DUL这个操作系统。

客户端Linux版本：2.6.32-400.33.2.el5uek

请帮忙！！！


Linux有两个版本，这是第二个，被正常启动的。由于内建复制的保护，您必须确保从Bernard的网站上下载最新的版本。如果你确实有最新的下载，那么只有Bernard可以重新编译并重新分配一个新的可执行版本。 DUL大约每45天失效。




我们处在关键时刻，需要DUL从一个production down降数据库中提取数据。
- 数据库在NOARCHIVELOG模式/ Windows 64位平台。
- 由于go life，没有可用的数据库备份
- 数据库较小，但非常重要。
- 从早晨开始有介质故障损坏了除真正客户数据的数据文件之外的所有数据库的数据文件。
- 根据每db验证工具输出，系统表空间100％损坏。
- 任何地方都没有系统表空间的备份，甚至测试系统是作为新的数据库创建的，因此对象ID，rfile号是不一样的。

我们尝试了以下内容：
1.	使用系统数据文件从生产中导出数据（由于系统数据文件被破坏，无法bootstrap）
2.	使用系统数据文件从TEST中导出数据（成功bootstrap，但无法导出，因为不匹配rfile＃，TS＃，和对象ID ..预想到的结果，但值得一试）
3.	仅使用实际数据的数据文件导出数据，成功生成scaned_tables，并且我们已向客户请求提供表的列表来map，但我不确定他们能否提供清晰信息。

感谢提供任何建议，类似于：
- 有没有什么办法来修复损坏的系统表空间的数据文件，并用它进行数据导出。
- 或者，有没有办法从TEST使用系统数据文件（不同的数据库作为新安装），其中rfile#, ts#，和对象id的错配。


</pre> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <h3>DUL’s PRINCIPLES and FEATURE LIST</h3> 
        <h4>STANDALONE C-PROGRAM</h4> 
        <p>DUL is a standalone C program that directly retrieves rows from tables in data files. The Oracle RDBMS software is NOT used at all. DUL does dirty reads, it assumes that every transaction is committed. Nor does it check/require that media recovery has been done.</p> 
        <h4>LAST RESORT</h4> 
        <p>DUL is intended to retrieve data that cannot be retrieved otherwise. It is NOT an alternative for EXP, SQL*Plus etc. It is meant to be a last resort, not for normal production usage.</p> 
        <p>Before you use DUL you must be aware that the rdbms has many hidden features to force a bad database open. Undocumented init.ora parameters and events can be used to skip roll forward, to disable rollback, disable certain SMON actions, advance the database scn and more.</p> 
        <h4>DATABASE CORRUPT C BLOCKS OK</h4> 
        <p>The database can be corrupted, but an individual data block used must be 100% correct. During all unloading checks are made to make sure that blocks are not corrupted and belong to the correct segment. If during a scan a bad block is encountered, an error message is printed in the loader file and to standard output. Unloading will continue with the next row or block.</p> 
        <h4>ROWS in CLUSTERS/TABLES/INDEXES</h4> 
        <p>DUL can and will only unload index/table/cluster data. It will NOT dump triggers, stored procedures nor create sql scripts for tables or views. (But the data dictionary tables describing them can be unloaded). The data will be unloaded in a format suitable for SQL*Loader or IMP. A matching control file for SQL*Loader is generated as well.</p> 
        <p>DUL can unload indices and index organized tables. Index unload is usefull to determine how many rows a table should have or to identify the missing rows.</p> 
        <h4>CROSS PLATFORM&nbsp;UNLOADING</h4> 
        <p>Cross-platform unloading is supported. The database can be copied from a different operating system than the DUL-host. (Databases/systems done so far: Sequent/ptx, Vax Vms, Alpha Vms, MVS, HP9000/8xx, IBM AIX, SCO Unix, Alpha OSF/1, Intel Windows NT).</p> 
        <p>The configuration parameters within “init.dul” will have to be modified to match those of the original platform and O/S rather than the platform from which the unload is being done.</p> 
        <h4>ROBUST</h4> 
        <p>DUL will not dump, spin or hang no matter how badly corrupted the database is.</p> 
        <h4>(NEARLY) ALL ORACLE FEATURES SUPPORTED</h4> 
        <p>Full support for all database constructs: row chaining, row migration, hash/index clusters, longs, raws, rowids, dates, numbers, multiple free list groups, segment high water mark, NULLS, trailing NULL columns, and unlimited extents, new block layout of Oracle8, partitioned tables.</p> 
        <p>Later additions are lobs, compressed indexes, 9ir2 compressed tables. Varrays and ADTs (user defined objects) are partly supported in sql*loader mode.</p> 
        <p>ASM is fully supported, files can be extracted from an asm disk group. No mounted ASM instance is used, the disks are accessed directly. Non default asm allocation unit sizes are supported.</p> 
        <p>Data can be recovered from export dump files with the unexp command suite. Some initial work has been done for unpump to support data pump files.</p> 
        <h4>SUPPORTED RDBMS VERSIONS</h4> 
        <p>DUL should work with all versions starting oracle 6. DUL has been tested with versions from 6.0.26 up to 10.2. Even the old block header layout (pre 6.0.27.2) is supported.</p> 
        <h4>MULTI BYTE SUPPORT</h4> 
        <p>DUL itself is essentially a single byte application. The command parser does not understand multi byte characters, but it is possible to unload any multi byte database. For all possible caveats there is a work around.</p> 
        <p>DUL can optionally convert to UTF8. This is for NCLOBS that are stored in UTF16.</p> 
        <h4>RESTRICTIONS</h4> 
        <h5>MLSLABELS</h5> 
        <p>Multi Level Security Lables of trusted oracle are not supported.</p> 
        <h5>(LONG) RAW</h5> 
        <p>DUL can unload (long) raws. Nowadays there is suitable format in SQL*Loader to preserve all long raws. So Long raws and blobs can be unloaded in both modes.</p> 
        <h5>ORACLE8 OBJECT OPTION AND LOBS</h5> 
        <p>Nested tables are not yet supported, if they are needed let me know and it will be added. Varrays and ADTs are supported, also those that are stored as a kernel lob. CLOBS, NCLOBS are supported both in SQL*Loader mode and in exp mode. BLOBS are best handled in exp mode, the generated hex format in SQL*Loader mode is not loaded correctly currently.</p> 
        <h4>PORTABLE</h4> 
        <p>DUL can be ported to any operating system with an ANSI-C compiler. DUL has been ported to many UNIX variants, VMS and WindowsNT. Currently all builds are done using gcc and a cross compiler environment on Linux</p> 
        <h4>RDBMS INTERNALS</h4> 
        <p>A good knowledge of the Oracle RDBMS internals is a pre requisite to be able to use DUL successfully. For instance the Data Server Internals (DSI) courses give a good foundation. There is even a <a href="http://st-curr.us.oracle.com/9i_DSI/DSI401e/html/module3/topic00.htm">module</a> dedicated to DUL</p> 
        <pre> <a name="setup"></a></pre> 
        <h3>SETTING UP and USING&nbsp;DUL</h3> 
        <h4>CONFIGURATION FILES</h4> 
        <p>There are two configuration files for DUL. “init.dul” contains all configuration parameters. (size of caches, details of header layout, oracle block size, output file format) In the control file, “control.dul”, the database data file names and the asm disks can be specified.<a name="with system"></a></p> 
        <h4>DATA&nbsp;DICTIONARY&nbsp;AVAILABLE</h4> 
        <p>The Oracle data dictionary is available if the data files which made up the SYSTEM TableSpace are available and useable. The number which Oracle assigned to these files and the name you have given them, which does not have to be the original name which Oracle knew, must be included in the “control.dul” file. You also need to eventually include the file numbers and names of any files from other TableSpaces for which you wish to eventually unload TABLES&nbsp;and their data. The lack of inclusion of these files will not affect the data dictionary unload step but it will affect later TABLE unloading.</p> 
        <h5>USING DUL WHEN <i>USER$, OBJ$, TAB$ and COL$</i> CAN&nbsp;BE&nbsp; UNLOADED</h5> 
        <p>Steps to follow:</p> 
        <ol> 
         <li>configure DUL for the target database. This means creating a correct <a href="https://stbeehive.oracle.com/content/dav/st/DUL/Documents/ucg10.html#config">init.dul </a>and control.dul. The SYSTEM&nbsp;TableSpace’s data file numbers and names must be included within the control.dul file along with any data files for TableSpaces from which you wish to unload TABLEs and their data. For Oracle8 and higher the tablespace number and the relative file number must be specified for each datafile.</li> 
         <li>Use the ” BOOTSTRAP; ” command to prepare for unloading. The bootstrap process will find a compatibility segment, find the bootstrap$ table unload The old ” dul dictv7.ddl”re no longer needed.</li> 
         <li>Unload the tables for which data files have been included within the “control.dul” file. Use one of the following commands: 
          <ul> 
           <li>“UNLOAD TABLE <i>[ owner&gt;.]table </i>; (do not forget the semicolon) 
            <ul> 
             <li>This will unload the one table definition and the table’s data.</li> 
            </ul> </li> 
           <li>“UNLOAD USER <i>user name </i>; 
            <ul> 
             <li>This unloads all tables and data for the specified user.</li> 
            </ul> </li> 
           <li>“UNLOAD DATABASE ; 
            <ul> 
             <li>This unloads all of the database tables available. (except the user SYS).</li> 
            </ul> </li> 
          </ul> </li> 
        </ol> 
        <p><a name="without system"></a></p> 
        <h4>NO DATA&nbsp;DICTIONARY&nbsp;AVAILABLE</h4> 
        <p>If data files are not available for the SYSTEM&nbsp;TableSpace the unload can still continue but USER, TABLE and COLUM names will not be known. Identifying the tables can be an overwhelming task. But it can be (and has been) done. You need in depth knowledge about your application and the application tables. Column types can be guessed by DUL, but table and column names are lost. Any old SYSTEM tablespace from the same database but weeks old can be of great help!. Most of the information that DUL uses does not change. (only the dataobj# is during truncate or index rebuild)</p> 
        <h5>USING DUL WITHOUT SYSTEM TABLESPACE</h5> 
        <p>Steps to follow:</p> 
        <ol> 
         <li>configure DUL for the target database. This means creating a correct init.dul and control.dul. (See <a href="https://stbeehive.oracle.com/content/dav/st/DUL/Documents/ucg10.html#config">Port specific parameters </a>). In this case control.dul file will need the numbers and names of datafiles from which TABLEs and data will be unloaded but it does not require the SYSTEM TableSpace’s information.</li> 
         <li>SCAN DATABASE; : scan the database, build extent and segment map</li> 
         <li>SCAN TABLES; or SCAN EXTENTS; : gather row statistics</li> 
         <li>Identify the lost tables from the output of step 3.</li> 
         <li>UNLOAD the identified tables.</li> 
        </ol> 
        <h5>AUTOMATED SEARCH</h5> 
        <p>To ease the hunt for the lost tables: the scanned statistical information in seen_tab.dat and seen_col.dat can be loaded into a fresh database. If you recreate the tables ( Hopefully the create table scripts are still available) then structure information of a “lost” table can be matched to the “seen” tables scanned information with two SQL*Plus scripts. (fill.sql and getlost.sql).</p> 
        <h5>HINTS AND PITFALLS</h5> 
        <ul> 
         <li>Names are not really relevant for DUL, only for the person who must load the data. But the unloaded data does not have any value, if you do not know from which table it came.</li> 
         <li>The guessed column types can be wrong. Even though the algorithm is conservative and decides UNKNOWN if not sure.</li> 
         <li>Trailing NULL columns are not stored in the database. So if the last columns only contain NULL’s than the scanner will NOT find them. (During unload trailing NULL columns are handled correctly).</li> 
         <li>When a table is dropped, the description is removed from the data dictionary only. The data blocks are not overwritten unless they are reused for a new segment. So the scanner software can see a table that has been dropped.</li> 
         <li>Tables without rows will go unnoticed.</li> 
         <li>Newer objects have a higher object id than older objects. If an table is recreated, or if there is a test and a production version of the same table the object id can be used to decide.</li> 
        </ul> 
        <p><a name="overview"></a></p> 
        <h3>DDL (DUL Description Language) UNLOAD STATEMENT OVERVIEW</h3> 
        <p>DUL uses an SQL like command interface. There are DDL statements to unload extents, tables, users or the entire database. Data dictionary information required can be specified in the ddl statements or taken from the previously unloaded data dictionary. The following three statements will unload the DEPT table. The most common form is if the data dictionary and the extent map are available:</p> 
        <pre>         UNLOAD TABLE scott.dept;
</pre> 
        <p>All relevant information can be specified in the statement as well:</p> 
        <pre>        REM Columns with type in the correct order
        REM The segment header loaction in the storage clause
        UNLOAD TABLE dept( deptno NUMBER, dname CHAR, loc CHAR)
               STORAGE( EXTENTS ( FILE 1 BLOCK 1205 ));

</pre> 
        <p>Oracle version 6:</p> 
        <pre>        REM version 6 data blocks have segment header location in each block
        ALTER SESSION SET USE_SCANNED_EXTENT_MAP = TRUE;
        UNLOAD TABLE dept( deptno NUMBER, dname CHAR, loc CHAR)
               STORAGE( EXTENTS ( FILE 1 BLOCK 1205 ));
</pre> 
        <p>Oracle7:</p> 
        <pre>        REM Oracle7 data blocks have object id in each block

        ALTER SESSION SET USE_SCANNED_EXTENT_MAP = TRUE;
        UNLOAD TABLE dept( deptno NUMBER, dname CHAR, loc CHAR)
               STORAGE( OBJNO 1501 );
</pre> 
        <p><a name="output format"></a></p> 
        <h3>DUL’S OUTPUT FORMAT.</h3> 
        <p>Only complete good rows are written to the output file. For this each row is buffered. The size of the buffer can changed with the init.dul parameter BUFFER. There is no speed gained with a high BUFFER parameter, it should just be big enough to hold a complete row. Incomplete or bad rows are not written out. The FILE_SIZE_IN_MB init.dul parameter can be used to split the output (at a proper boundary) into multiple files, each file can be loaded individually.</p> 
        <p>There are three different modes of output format.</p> 
        <ul> 
         <li>Export mode</li> 
         <li>SQL*Loader mode: stream data files</li> 
         <li>SQL*Loader mode: Fixed physical record data files</li> 
        </ul> 
        <h4>EXPORT&nbsp;MODE</h4> 
        <p>The generated file is completely different from a table mode export generated by EXP! The file is the minimal format that IMP can load. For each table a separate IMP loadable file will be generated. It is a single table dump file. It contains a header an insert table statement and the table data. Table grants, storage clauses, or triggers will not be included. An minimal create table statement is included (no storage clause just column names and types without precision). The character set indication in the file in the generated header is V6 style. It is set to mean ASCII based characterset.</p> 
        <p>To enable export mode, set the init.dul parameter EXPORT_MODE to TRUE.</p> 
        <p>As the generated pseudo dump file does not contain character set information set NLS_LANG to match that of the original database. In export mode no character set conversion is done.</p> 
        <h4>SQL*LOADER&nbsp;MODES</h4> 
        <p>The data in the is either not converted at all, or everthing is converted to UTF8 if LDR_OUTPUT_IN_UTF8 is set. This setting is required in mixed character set environments as the contents of a data file must have a single character set.&lt;\P&gt;</p> 
        <p>When loading the data you probably need to set NLS_LANG to match that of the original database to prevent unwanted character set conversion.</p> 
        <p>For both SQL*Loader output formats the columns will be space separated and enclosed in double quotes. Any double quote in the data will be doubled. SQL*Loader recognizes this and will load only one. The character used to enclose the columns can be changed from double quote to any character you like with the init.dul parameter LDR_ENCLOSE_CHAR.</p> 
        <p>There are two styles of physical record organization:</p> 
        <h5>Stream Mode</h5> 
        <p>Nothing special is done in stream mode, a newline is printed after each record. This is a compact format and can be used if the data does not contain newline characters. To enable stream mode set LDR_PHYS_REC_SIZE = 0 in init.dul.</p> 
        <h5>Fixed Physical Records</h5> 
        <p>This mode is essential if the data can contain newlines. One logical record, one comlete row, can be composed of multiple physical records. The default is record length is 81, this fits nicely on the screen of a VT220. The physical record size can be specified with LDR_PHYS_REC_SIZE in init.dul.</p> 
        <h4>OUTPUT&nbsp;FILE&nbsp;NAMES</h4> 
        <p>The file names generated are: <i>owner name_table name</i>.ext. The extension is “.dmp” for IMP loadable files. “.dat” and “.ctl” are used for the SQL*Loader datafile and the control file. To prevent variable substitution and other unwanted side effects, strange characters are stripped.(Only alpha numeric and ‘_’ are allowed).</p> 
        <p>If the FILE parameter is set the generated names will be FILEnnn.ext. This possibility is a work around if the file system does not support long enough file names. (Old windows with 6.3 filename format)</p> 
        <p><a name="internals"></a></p> 
        <h3>SOME DUL INTERNALS</h3> 
        <h5>REQUIRED INFORMATION</h5> 
        <p>To unload table data from a database block the following information must be known:</p> 
        <ol> 
         <li>Column/Cluster Information: The number and type of the columns. For char or varchar columns the maximum length as well. The number of cluster columns and the table number in the cluster. This information can be supplied in the unload statement or it can be taken from the previously unloaded USER$, OBJ$, TAB$ and COL$.</li> 
         <li>Segment/Extent information: When unloading a table the extent table in the data segment header block is used to locate all data blocks. The location of this segment header block (file number and block number) is taken from the data dictionary or can be specified in the unload statement. If the segment header is not correct/available then another method must be used. DUL can build its own extent map by scanning the whole database. (in a separate run of DUL with the scan database statement.)</li> 
        </ol> 
        <h5>BINARY HEADERS</h5> 
        <p>C-Structs in block headers are not copied directly, they are retrieved with specialized functions. All offsets of structure members are programmed into DUL. This approach makes it possible to cross-unload. (Unload an MVS created data file on an HP) Apart from byte order only four layout types have been found so far.</p> 
        <ol> 
         <li>Vax VMS and Netware : No alignment padding between structure members.</li> 
         <li>Korean Ticom Unix machines : 16 bit alignment of structure members.</li> 
         <li>MS/DOS 16 bit alignment and 16 bit wordsize.</li> 
         <li>Rest of the world (Including Alpha VMS) structure member alignment on member size.</li> 
        </ol> 
        <h5>MACHINE DEPENDENCIES</h5> 
        <p>Machine dependencies (of the database) are configurable with parameters:</p> 
        <ul> 
         <li>Order of bytes in a word (big/little endian).</li> 
         <li>Number of bits for the low part of the FILE# in a DBA (Block Address).</li> 
         <li>Alignment of members in a C-struct.</li> 
         <li>Number of blocks or bytes before the oracle file header block.</li> 
         <li>Size of a word used in the segment header structure.</li> 
        </ul> 
        <h5>UNLOADING THE DATA DICTIONARY</h5> 
        <p>DUL can use the data dictionary of the database to be unloaded if the files for it exist and are uncorrupted. For the data dictionary to be used, internal tables must be unloaded first to external files: (USER$, OBJ$, TAB$ and COL$). The bootstrap command will find and unload the required tables.</p> 
        <p><a name="ddl"></a></p> 
        <h3>DDL ( DUL DESCRIPTION LANGUAGE ) SPECIFICATION</h3> 
        <pre>[ ALTER SESSION ] SET <i>init.dul parameter</i> = <i> value </i>;
     Most parameters can be changed on the fly. 

BOOTSTRAP [LOCATE | GENERATE | COMPLETE
           | UNLOAD <i>  Bootstrap$ segment header block address </i>];
     Bootstraps the data dictionary. Default is COMPLETE.
     LOCATE finds and unloads the bootstrap$ table.
     GENERATE builds a ddl file based on inforation in the cache.
     COMPLETE is in fact LOCATE, followed by GENERATE (two times)

COMMIT;
     Writes the changed block to the data file.

CREATE BLOCK INDEX <i> index_name </i> ON <i> device</i> ;
</pre> 
        <p>A block index contains address of valid oracle blocks found in a corrupt file system. Useful to merge multiple disk images or to unload from corrupted file systems. This is only useful in extreme file system corruption scenarios.</p> 
        <pre>DESCRIBE <i> owner_name </i> . <i>table_name</i> ;

DUMP [ TABLESPACE <i> tablespace_no </i>]
     [ FILE <i> file_no </i> ]
     [ BLOCK <i> block_no </i> ]
     [ LEVEL <i> level_no </i> ] ;
     Not a complete blockdump, mainly used for debugging.
     The block address is remembered.

EXTRACT <i> asm file name </i> to <i> output file name </i> ;
     Copies any ASM file from a disk group to the file system.
     (there was a problem with online redologs this needs more testing)

MERGE <i>block_index</i> INTO [ <i> segment </i> ];
</pre> 
        <p>The merge command uses the information in the index file to locate possible data blocks it looks for a combination of file numbers and object id, each candidate block is compared to the current block in the datafile. If the current block is bad, or has an older scn the candidate will will be written into the datafile. This is only useful in extreme file system corruption scenarios.</p> 
        <pre>REM <i>any_text_you_like_till_End_Of_Line </i>: comment
REM  NOT allowed inside ddl statements. ( To avoid a two layer lexical scan).

ROLLBACK; # Cancels the UPDATE statements.

SHOW     DBA  dba ;                # dba -&gt; file_no block_no calculator
	   | DBA  rfile_no block_no ;  # file_no block_no -&gt; dba calculator
	   | SIZES ;                   # show some size of important structs
	   | PARAMETER;                # shows the values of all parameters
	   | LOBINFO;                  # lob indexes found with SCAN DATABASE
       | DATAFILES;                # summary of configured datafiles
       | ASM DISKS;                # summary of configured asm disks
       | ASM FILES;                # summary of configured datafiles on asm
       | ASM FILE <i> cid </i>     # extent information for asm file

UNEXP [TABLE] [ <i> owner </i> . ] <i> table name </i>
       ( <i> column list </i> ) [ DIRECT ]
       DUMP FILE <i> dump file name</i>
       FROM <i> begin offset </i> [ UNTIL <i> end offset </i> ]
       [ MINIMUM <i> minimal number of columns </i> COLUMNS ] ;

       To unload data from a corrupted exp dump file. No special setup
       or configuration is required, just the compatible parameter.
       The start offset should be where a row actually begins.

UNPUMP
       To unload data from a corrupted expdp (datapump) dump file.
       This is still work in progress, the basic commands work
       but rather complex to use. Contact me if this is needed.

UNLOAD DATABASE;

UNLOAD USER <i>user_name</i>;

UNLOAD [TABLE]  [ <i> schema_name </i>. ] <i> table_name </i>
              [ PARTITION( <i> partition_name </i>) ]
              [ SUBPARTITION( <i> sub_partition_name </i>) ]
              [ ( <i> column_definitions </i>) ]
              [ <i> cluster_clause </i> ]
              [ <i> storage_clause </i> ] ;

UNLOAD EXTENT <i> table_name </i>
              [ ( <i> column_definitions </i> ) ]
              [ TABLESPACE <i> tablespace_no </i> ] 
              FILE  <i>extent_start_file_number</i>
              BLOCK <i>extent_start_block_number </i>
              BLOCKS  <i>extent_size_in oracle_blocks</i> ;

UNLOAD LOB SEGMENT FOR [ <i> schema_name </i>. ] <i> table_name </i>  [ ( <i> column name </i> ) ] ;

UNLOAD LOB SEGMENT STORAGE ( SEGOBJNO <i>data obj#</i>) ;

UPDATE [ block_address ] SET UB1|UB2|UB4 @ offset_in_block = new_value ;
UPDATE [ block_address ] SET <i> block element name </i> = new_value ;
        Now and then we can repair something.
	Patches the current block and dumps it.
	You can issue multiple UPDATE commands.
	Block is not written yet, use COMMIT to write. 

<i>storage_clause</i> ::=
        STORAGE ( <i>storage_specification </i> [ <i>more_storage_specs</i> ] )

<i>storage_specification</i> ::=
        OBJNO <i>object_id_number </i>
|       TABNO <i>cluster_table_number</i>
|       SEGOBJNO <i>cluster/data_object_number</i>       /* v7/v8 style data block id */
|       FILE  <i>data_segment_header_file_number</i>     /* v6 style data block id */
        BLOCK <i>data_segment_header_block_number </i>)   
|       <i>any_normal_storage_specification_but_silently_ignored</i>

SCAN DATABASE;
</pre> 
        <p>Scans all blocks of all data files. Two or three files are generated:</p> 
        <ol> 
         <li>SEG.dat information of found segment headers (index/cluster/table): (object id, file number, and block number).</li> 
         <li>EXT.dat information of contiguous table/cluster data blocks. (object id(V7), file and block number of segment header (V6), file number and block number of first block, number of blocks, number of tables)</li> 
         <li>SCANNEDLOBPAGE.dat information for each lob datablock, this file (optional, only if init.dul:SCAN_DATABASE_SCANS_LOB_SEGMENTS=TRUE) can possibly be huge. Also the required memory size can be problematic. The purpose is twofold: 1: to possibly work around corrupt lob indexes during unload table. 2: unload lob segments (for deleted lobs or lob segments without lob index or parent table) Meaning of the fields in SCANNEDLOBPAGE.dat: (segobj#, lobid, fat_page_no, version( wrap, base), ts#, file#, block#)</li> 
        </ol> 
        <pre>SCAN DUMP FILE <i> dump file name</i>
        [ FROM <i> begin offset </i> ]
        [ UNTIL <i> end offset </i> ];

        Scans an  export dump file to produce to provide the
        create/insert statements and the offsets in the dump file.

SCAN LOB SEGMENT <i>   storage clause </i>;
SCAN LOB SEGMENT FOR <i> table name </i> [. <i> column name</i>] ;
        Scans the lob segment to produce LOBPAGE.dat information,
        but then for this segment only. Probably quicker and
        smaller. For partitioned objects use scan database.

SCAN TABLES;
        Uses SEG.dat and EXT.dat as input.
        Scans all tables in all data segments (a header block and at least one
        matching extent with at least 1 table).

SCAN EXTENTS;
        Uses SEG.dat and EXT.dat as input.
        All extents for which no corresponding segment header has been found.
        (Only useful if a tablespace is not complete, or a segment header
        is corrupt).

EXIT QUIT and EOF all cause DUL to terminate.

</pre> 
        <p><a name="desc"></a></p> 
        <h3>DDL ( DUL DESCRIPTION LANGUAGE ) DESCRIPTION</h3> 
        <h4>Rules for UNLOAD EXTENT and UNLOAD TABLE:</h4> 
        <h4>Extent Map</h4> 
        <p>UNLOAD TABLE requires an extent map. In 99.99% of the cases the extent map in the segment header is available. In the rare 0.01% that the segment header is lost an extent map can be build with the scan database command. The self build extent map will ONLY be used during an unload if the parameter USE_SCANNED_EXTENT_MAP is set to TRUE.</p> 
        <p>All data blocks have some ID of the segment they belong to. But there is a fundamental difference between V6 and V7. Data blocks created by Oracle version 6 have the address of the segment header block. Data blocks created by Oracle7 have the segment object id in the header.</p> 
        <h4>Column Specification</h4> 
        <p>The column definitions must be specified in the order the columns are stored in the segment, that is ordered by col$.segcol#. This is not necessarily the same order as the columns where specified in the create table statement. Cluster columns are moved to the front, longs to the end. Columns added to the table with alter table command, are always stored last.</p> 
        <h4>Unloading a single extent</h4> 
        <p>UNLOAD EXTENT can be used to unload 1 or more adjacent blocks. The extent to be unloaded must be specified with the STORAGE clause: To specify a single extent use: STORAGE ( EXTENTS( FILE <i>fno</i> BLOCK <i>bno</i> BLOCKS <i>#blocks</i>) ) (FILE and BLOCK specify the first block, BLOCKS the size of the extent)</p> 
        <h4>DUL specific column types</h4> 
        <p>There are two extra DUL specific data types:</p> 
        <ol> 
         <li>IGNORE: the column will be skipped as if it was not there at all.</li> 
         <li>UNKNOWN: a heuristic guess will be made for each column.</li> 
        </ol> 
        <p>In SQL*Loader mode there are even more DUL specific data types:</p> 
        <ol> 
         <li>HEXRAW: column is HEX dumped.</li> 
         <li>LOBINFO: show some information from LOB locators .</li> 
         <li>BINARY NUMBER: Machine word as used in a LOB index.</li> 
        </ol> 
        <h4>Identifying USER$, OBJ$, TAB$ and COL$</h4> 
        <p>DUL uses the same bootstrap procedure as the rdbms. That is it uses the root dba from the system datafile header to locate the bootstrap$ table. Depending on the version this root dba is either the location of the compatibility segment containing the bootstrap$ address or for the newer versions the address of the bootstrap$ table itself. The bootstrap$ table is unloaded and its contents is parsed to find the first four tables (USER$, OBJ$, TAB$ and COL$). The other tables are unloaded based on information in these first four.</p> 
        <h4>DESCRIPTION OF SCAN COMMANDS</h4> 
        <p>SCAN TABLES and SCAN EXTENTS scan for the same information and produce similar output. ALL columns of ALL rows are inspected. For each column the following statistics are gathered:</p> 
        <ul> 
         <li>How often the column is seen in a data block.</li> 
         <li>The maximum internal column length.</li> 
         <li>How often the column IS NULL.</li> 
         <li>How often the column consists of at least 75% printable ascii.</li> 
         <li>How often the column consists of 100% printable ascii.</li> 
         <li>How often the column is a valid oracle number.</li> 
         <li>How often the column is a nice number. (not many leading or trailing zero’s)</li> 
         <li>How often the column is a valid date.</li> 
         <li>How often the column is a possible valid rowid.</li> 
        </ul> 
        <p>These statistics are combined and a column type is suggested. Using this suggestion five rows are unloaded to show the result. These statistics are dumped to two files (seen_tab.dat and seen_col.dat). There are SQL*Loader and SQL*Plus scripts available to automate a part of the identification process. (Currently known as the getlost option).</p> 
        <h4>DESCRIBE</h4> 
        <p>There is a describe command. It will show the dictionary information for the table, available in DUL’s dictionary cache.<a name="startup"></a></p> 
        <h3>DUL STARTUP SEQUENCE</h3> 
        <p>During startup DUL goes through the following steps:</p> 
        <ul> 
         <li>the parameter file “init.dul” is processed.</li> 
         <li>the DUL control file (default “control.dul”) is scanned.</li> 
         <li>Try to load dumps of the USER$, OBJ$, TAB$ and COL$ if available into DUL’s data dictionary cache.</li> 
         <li>Try to load seg.dat and col.dat.</li> 
         <li>Accept DDL-statements or run the DDL script specified as first arg.</li> 
        </ul> 
        <p><a name="init.dul"></a></p> 
        <h3>DUL parameters to be specified in init.dul:</h3> 
        <dl> 
         <dt>
          ALLOW_TRAILER_MISMATCH
         </dt> 
         <dd>
          BOOLEAN
         </dd> 
         <dd>
          Strongly discouraged to use, will seldom produce more rows. Use only if you fully understand what it means and why you want it. skips the check for correct block trailer. The blocks failing this test are split of corrupt. But it saves you the trouble to patch some blocks.
         </dd> 
         <dt>
          ALLOW_DBA_MISMATCH
         </dt> 
         <dd>
          BOOLEAN
         </dd> 
         <dd>
          Strongly discouraged to use, will seldom produce more rows. Use only if you fully understand what it means and why you want it. Skips the check for correct block address. The blocks failing this test are probably corrupt. But it saves you the trouble to patch some blocks.
         </dd> 
         <dt>
          ALLOW_OTHER_OBJNO
         </dt> 
         <dd>
          BOOLEAN
         </dd> 
         <dd>
          If your dictionary is older than your datafiles then the data object id’s can differ for truncated tables. With this parameter set to true it will issue a warning but use the value from segment header. All other blocks are fully checked. This is for special cases only.
         </dd> 
         <dt>
          ASCII2EBCDIC
         </dt> 
         <dd>
          BOOLEAN
         </dd> 
         <dd>
          Must (var)char fields be translated from EBCDIC to ASCII. (For unloading MVS database on a ASCII host)
         </dd> 
         <dt>
          BUFFER
         </dt> 
         <dd>
          NUMBER (bytes)
         </dd> 
         <dd>
          row output buffer size used in both export and SQL*Loader mode. In each row is first stored in this buffer. Only complete rows without errors are written to the output file.
         </dd> 
         <dt>
          COMPATIBLE
         </dt> 
         <dd>
          NUMBER
         </dd> 
         <dd>
          Database version , valid values are 6, 7, 8 or 9. This parameter must be specified
         </dd> 
         <dt>
          CONTROL_FILE
         </dt> 
         <dd>
          TEXT
         </dd> 
         <dd>
          Name of the DUL control file (default: “control.dul”).
         </dd> 
         <dt>
          DB_BLOCK_SIZE
         </dt> 
         <dd>
          NUMBER
         </dd> 
         <dd>
          Oracle block size in bytes (Maximum 32 K)
         </dd> 
         <dt>
          DC_COLUMNS
         </dt> 
         <dd>
          NUMBER
         </dd> 
         <dt>
          DC_OBJECTS
         </dt> 
         <dd>
          NUMBER
         </dd> 
         <dt>
          DC_TABLES
         </dt> 
         <dd>
          NUMBER
         </dd> 
         <dt>
          DC_USERS
         </dt> 
         <dd>
          NUMBER
         </dd> 
         <dd>
          Sizes of dul dictionary caches. If one of these is too low the cache will be automatically resized.
         </dd> 
         <dt>
          EXPORT_MODE
         </dt> 
         <dd>
          BOOLEAN
         </dd> 
         <dd>
          EXPort like output mode or SQL*Loader format
         </dd> 
         <dt>
          FILE
         </dt> 
         <dd>
          TEXT
         </dd> 
         <dd>
          Base for (dump or data) file name generation. Use this on 8.3 DOS like file systems
         </dd> 
         <dt>
          FILE_SIZE_IN_MB
         </dt> 
         <dd>
          NUMBER (Megabytes)
         </dd> 
         <dd>
          Maximum dump file size. Dump files are split into multiple parts. Each file has a complete header and can be loaded individually.
         </dd> 
         <dt>
          LDR_ENCLOSE_CHAR
         </dt> 
         <dd>
          TEXT
         </dd> 
         <dd>
          The character to enclose fields in SQL*Loader mode.
         </dd> 
         <dt>
          LDR_PHYS_REC_SIZE
         </dt> 
         <dd>
          NUMBER
         </dd> 
         <dd>
          Physical record size for the generated loader datafile.
         </dd> 
         <dd>
          LDR_PHYS_REC_SIZE = 0 No fixed records, each record is terminated with a newline.
         </dd> 
         <dd>
          LDR_PHYS_REC_SIZE &gt; 2: Fixed record size.
         </dd> 
         <dt>
          MAX_OPEN_FILES
         </dt> 
         <dd>
          Maximum # of database files that are concurrently kept open at the OS level.
         </dd> 
         <dt>
          OSD_BIG_ENDIAN_FLAG
         </dt> 
         <dd>
          Byte order in machine word. Big Endian is also known as MSB first. DUL sets the default according to the machine it is running on. For an explanation why this is called Big Endian, you should read Gullivers Travels.
         </dd> 
         <dt>
          OSD_DBA_FILE_BITS
         </dt> 
         <dd>
          File Number Size in DBA in bits. Or to be more precise the size of the low order part of the file number.
         </dd> 
         <dt>
          OSD_FILE_LEADER_SIZE
         </dt> 
         <dd>
          bytes/blocks added before the real oracle file header block
         </dd> 
         <dt>
          OSD_C_STRUCT_ALIGNMENT
         </dt> 
         <dd>
          C Structure member alignment (0,16 or 32). The default of 32 is correct for most ports.
         </dd> 
         <dt>
          OSD_WORD_SIZE
         </dt> 
         <dd>
          Size of a machine word always 32, except for MS/DOS(16)
         </dd> 
         <dt>
          PARSE_HEX_ESCAPES
         </dt> 
         <dd>
          Boolean default FALSE
         </dd> 
         <dd>
          Use \\xhh hex escape sequences in strings while parsing. If set to true then strange characters can be specified using escape sequences. This feature is also for specifying multi-byte characters.
         </dd> 
         <dt>
          USE_SCANNED_EXTENT_MAP
         </dt> 
         <dd>
          BOOLEAN
         </dd> 
         <dd>
          Use the scanned extent map in ext.dat when unloading a table. The normal algorithme uses the extent map in the segment header. This parameter is only useful if some segment headers are missing or incorrect.
         </dd> 
         <dt>
          WARN_RECREATE_FILES
         </dt> 
         <dd>
          BOOLEAN (TRUE)
         </dd> 
         <dd>
          Set to FALSE to suppress the warning message if an existing file is overwritten.
         </dd> 
         <dt>
          WRITABLE_DATAFILES
         </dt> 
         <dd>
          BOOLEAN (FALSE)
         </dd> 
         <dd>
          Normal use of DUL will only read the database files. However the UPDATE and the SCAN RAW DEVICE will write as well. The parameter is there to prevent accidental damage.
         </dd> 
        </dl> 
        <p>SAMPLE init.dul :</p> 
        <pre># sample init.dul configuration parameters
# these must be big enough for the database in question
# the cache must hold all entries from the dollar tables.
dc_columns = 200000
dc_tables = 10000
dc_objects = 10000
dc_users = 40

# OS specific parameters
osd_big_endian_flag = false
osd_dba_file_bits = 10
osd_c_struct_alignment = 32
osd_file_leader_size = 1

# database parameters
db_block_size = 8k

# loader format definitions
LDR_ENCLOSE_CHAR = &quot;
LDR_PHYS_REC_SIZE = 81
</pre> 
        <p><a name="config"></a></p> 
        <h3>Configuring the port dependent parameters</h3> 
        <p>Starting from rdbms version 10G osd parameters are easy to configure. Typically all parameters can be used at their defaults. The only one that might need attention is osd_big_endian_flag, when doing a cross platform unload, where the original database platform is different from the current machine. If osd_big_endian_flag is set incorrectly, it is detected at startup, when doing file header inspection.</p> 
        <h4>Collection of known Parameters</h4> 
        <p>For pre 10G databases there is a list of known parameters in the osd wiki page <a href="https://stbeehive.oracle.com/teamcollab/wiki/DUL:Operating+System+Dependent+Parameters">list of osd (Operating System Dependend) parameters </a>for almost every platform. If your platform is not in the list you can use the suggestions below to determine the parameters. (And then please inform me so I can add them to the list.)</p> 
        <h5>osd_big_endian_flag</h5> 
        <p>big endian or little endian (byte order in machine words): HP, SUN and mainframes are generally big endian: OSD_BIG_ENDIAN_FLAG = TRUE. DEC and Intel platforms are little endian: OSD_BIG_ENDIAN_FLAG = FALSE. The default is correct for the platform where DUL is running on.</p> 
        <p>There is no standard trick for this, the following might work on a unix system:</p> 
        <pre>  echo dul | od -x
  If the output is like:
     0000000 6475 6c0a
     0000004
  You are on a big endian machine (OSD_BIG_ENDIAN_FLAG=TRUE).

  If you see:
     0000000 7564 0a6c
     0000004
  This is a little endian machine (OSD_BIG_ENDIAN_FLAG=FALSE).
</pre> 
        <h5>osd_dba_file_bits</h5> 
        <p>The number of bits in a dba used for the low order part of file number. Perform the following query:</p> 
        <pre>  SQL&gt; select dump(chartorowid('0.0.1')) from dual;
  
  Typ=69 Len=6: 8,0,0,0,0,0    -&gt;       osd_dba_file_bits =  5 (SCO)
  Typ=69 Len=6: 4,0,0,0,0,0    -&gt;       osd_dba_file_bits =  6 (Sequent , HP)
  Typ=69 Len=6: 1,0,0,0,0,0    -&gt;       osd_dba_file_bits =  8 (NCR,AIX)
  Typ=69 Len=6: 0,16,0,0,0,0   -&gt;       osd_dba_file_bits = 12 (MVS)
  Typ=69 Len=10: 0,0,0,0,0,64,0,0,0,0      osd_dba_file_bits = 10 (Oracle8)       
</pre> 
        <h5>OSD_C_STRUCT_ALIGNMENT</h5> 
        <p>Structure layout in data file headers. 0: No padding between members in a C-struct (VAX/VMS only) 16: Some korean ticom machines and MS/DOS 32: Structure members are member size aligned. (All others including ALPHA/VMS) Check the following query:</p> 
        <pre>SELECT * FROM v$type_size
WHERE type IN ( 'KCBH', 'KTNO', 'KCBH', 'KTBBH', 'KTBIT', 'KDBH'
              , 'KTECT', 'KTETB', 'KTSHC') ;
</pre> 
        <p>In general osd_c_struct_alignment = 32 and the following output is expected:</p> 
        <pre>K        KTNO     TABLE NUMBER IN CLUSTER                   1
KCB      KCBH     BLOCK COMMON HEADER                      20
KTB      KTBIT    TRANSACTION VARIABLE HEADER              24
KTB      KTBBH    TRANSACTION FIXED HEADER                 48
KDB      KDBH     DATA HEADER                              14
KTE      KTECT    EXTENT CONTROL                           44
KTE      KTETB    EXTENT TABLE                              8
KTS      KTSHC    SEGMENT HEADER                            8

8 rows selected.
</pre> 
        <p>For VAX/VMS and Netware ONLY osd_c_struct_alignment = 0 and this output is expected:</p> 
        <pre>COMPONEN TYPE     DESCRIPTION                      SIZE
-------- -------- -------------------------------- ----------
K        KTNO     TABLE NUMBER IN CLUSTER                   1
KCB      KCBH     BLOCK COMMON HEADER                      20
KTB      KTBIT    TRANSACTION VARIABLE HEADER              23
KTB      KTBBH    TRANSACTION FIXED HEADER                 42
KDB      KDBH     DATA HEADER                              14
KTE      KTECT    EXTENT CONTROL                           39
KTE      KTETB    EXTENT TABLE                              8
KTS      KTSHC    SEGMENT HEADER                            7

8 rows selected.
</pre> 
        <p>If there is a different list this will require some major hacking and sniffing and possibly a major change to DUL. (Email Bernard.van.Duijnen@oracle.com)</p> 
        <h5>osd_file_leader_size</h5> 
        <p>Number of blocks/bytes before the oracle file header. Unix datafiles have an extra leading block ( file size, block size magic number) A large number ( &gt; 100) is seen as a byte offset, a small number is seen as a number of oracle blocks.</p> 
        <pre>Unix    :       osd_file_leader_size = 1
Vms     :       osd_file_leader_size = 0
Desktop :       osd_file_leader_size = 1 (or 512 for old personal oracle)
Others  :       Unknown ( Use Andre Bakker's famous PATCH utility to find out)
                An Oracle7 file header block starts with the pattern 0X0B010000.
</pre> 
        <p>You can add an additional byte offset in control.dul in the optional third field (for instance for AIX or DEC UNIX data files on raw device)<a name="control.dul"></a></p> 
        <h3>Control file syntax specification</h3> 
        <p>A control file (default name “control.dul”) is used to specify asm disks, block indexes and the data file names. The format of the control has been extended</p> 
        <p>Currently there are three types of specifications in the DUL control file. Each entry on a separate line. The asm disks must precede the asm files.</p> 
        <pre>  control_file_line ::= asm_disk_spec | file_piece_spec | block_index_spec
</pre> 
        <p>If COMPATIBLE is 10 or higher you can also specify asm disks. Its generally sufficent to specify the device name. All properties are automatically retrieved by header inspection. The full syntax is only needed when header inspection is impossible, that is for disks with corrupt headers. The syntax is:</p> 
        <pre>DISK <i> device name</i> [ <i> disk group options </i> ]

<i> disk group option </i> ::= GROUP <i> disk group name </i>
                           | DISK_NO <i> disk number in group </i>
                           | F1B1 <i> File1 Block1 location</i>
</pre> 
        <p>A block index is a way to access oracle blocks on corrupt file systems. In general a corrupt file system is not wiped out, its not empty. Due to the specific layout of oracle blocks it is possible to datablocks an store their location in the block index. See also the <i>create block index command </i>. A <i>block_index_name</i> is a normal identifier, it is used to construct an unique file name.</p> 
        <pre>BLOCK INDEX <i> block_index_name</i></pre> 
        <p>Each entry can contain a part of a datafile. The smallest unit is a single data block. This way it is possible to split datafiles that are too big for DUL in parts where each part is smaller than 2GB.</p> 
        <p>In general it is sufficient to specify the file name. Even for a single block. If compatible is 10 or higher the file numbers and the tablespace numbers will be read from the file header.</p> 
        <p>If the specified details are different from the file header DUL will give a warning but use your specification. This is to be able to unload files with a corrupted header block. For debugging it is possible to dump the file header.</p> 
        <p>The optional extra leader offset is an extra byte offset, that will be added to all lseek() operations for that datafile. This makes it possible to skip over the extra 4k block for some AIX raw devices, or the extra 64K on Tru64 on raw devices</p> 
        <pre>  file_piece_spec ::= 
         [ [<i> tablespace_no </i>] <i>relative_file_number</i>]<i>data_file_name</i>
         [ optional extra leader offset ]
         [ startblock <i>block_no</i> ]
         [ endblock <i>block_no</i> ]
</pre> 
        <h4>Examples</h4> 
        <pre>   # AIX version 7 example with one file on raw device
   1 /usr/oracle/dbs/system.dbf
   8 /dev/rdsk/data.dbf 4096
</pre> 
        <pre>   # Oracle8 example with a datafile split in multiple parts, each part smaller than 2GB
   0  1 /fs1/oradata/PMS/system.dbf
   1  2 /tmp/huge_file_part1 startblock 1 endblock 1000000
   1  2 /tmp/huge_file_part2 startblock 1000001 endblock 2000000
   1  2 /mnt3/huge_file_part3 startblock 2000001 endblock 2550000
</pre> 
        <pre># ASM disks for two disk groups
disk /media/maxtor/asm/dgn1
disk /media/maxtor/asm/dgn2
disk /media/maxtor/asm/dgn3
disk /media/maxtor/asm/dgn4
disk /media/maxtor/asm/dgodd

# system datafile in the first asm disk group
+DGN/db102/datafile/system.257.621616979

# users datafile in a different disk group
+DGODD/db102/datafile/users.257.621616683

# a so called big file tablespace, use 1024 for the file#
 8 1024 /home/oracle/v102/dbs/bigfilets

# Or let DUL find out itself from the header
 /home/oracle/v102/dbs/bigfilets

# one tablespace with a different block size
/home/oracle/v102/dbs/ts16k.dbf block_size 16k

# or let DUL find out by header inspection
/home/oracle/v102/dbs/ts16k.dbf
</pre> 
        <p><a name="sample with"></a></p> 
        <h3>Sample unload session: data dictionary usable for DUL</h3> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <ol> 
         <ol> 
          <li>create a suitable “init.dul”</li> 
          <li>create a control.dul</li> 
         </ol> 
        </ol> 
        <pre>    sqlplus /nolog
    connect / as sysdba
    startup mount
    set trimspool on pagesize 0 linesize 256 feedback off
    column name format a200
    spool control.dul
    select ts#, rfile#, name from v$datafile;
    exit
edit the result
</pre> 
        <pre>For Oracle8 a different query must be used:
   select ts#, rfile#, name from v$datafile;
</pre> 
        <ol> 
         <ol> 
          <li>start DUL and bootstrap;</li> 
         </ol> 
        </ol> 
        <pre>$ dul

Data UnLoader 10.2.1.16 - Oracle Internal Only - on Thu Jun 28 11:37:24 2007
with 64-bit io functions

Copyright (c) 1994 2007 Bernard van Duijnen All rights reserved.

 Strictly Oracle Internal use Only
DUL&gt; bootstrap;
Probing file = 1, block = 377
. unloading table                BOOTSTRAP$      57 rows unloaded
DUL: Warning: Dictionary cache DC_BOOTSTRAP is empty
Reading BOOTSTRAP.dat 57 entries loaded
Parsing Bootstrap$ contents
DUL: Warning: Recreating file &quot;dict.ddl&quot;
Generating dict.ddl for version 10
 OBJ$: segobjno 18, file 1
 TAB$: segobjno 2, tabno 1, file 1
 COL$: segobjno 2, tabno 5, file 1
 USER$: segobjno 10, tabno 1, file 1
Running generated file &quot;@dict.ddl&quot; to unload the dictionary tables
. unloading table                      OBJ$   52275 rows unloaded
. unloading table                      TAB$    1943 rows unloaded
. unloading table                      COL$   59310 rows unloaded
. unloading table                     USER$      70 rows unloaded
Reading USER.dat 70 entries loaded
Reading OBJ.dat
 52275 entries loaded and sorted 52275 entries
Reading TAB.dat 1943 entries loaded
Reading COL.dat 59310 entries loaded and sorted 59310 entries
Reading BOOTSTRAP.dat 57 entries loaded
...
Some more messages for all the other TABLES
...
Database character set is WE8ISO8859P1
Database national character set is AL16UTF16
DUL&gt; unload user SCOTT;
About to unload SCOTT's tables ...
. unloading table                       EMP      14 rows unloaded
</pre> 
        <p><a name="sample without"></a></p> 
        <h3>Example unload session: data dictionary UNUSABLE for DUL</h3> 
        <ol> 
         <ol> 
          <li>create a suitable “init.dul” (See config guide)</li> 
          <li>create a control.dul See above</li> 
          <li>scan the database for segment headers and extents:</li> 
         </ol> 
        </ol> 
        <pre>$ dul
UnLoader: Version 2.0.0.0 - Very Restricted on Tue May 16 11:10:16 1995
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
DUL&gt; scan database;
data file 1 20480 blocks scanned
data file 4 7680 blocks scanned
data file 5 512 blocks scanned
DUL&gt;quit
</pre> 
        <ol> 
         <ol> 
          <li>Restart DUL and scan the found tables for column statistics this creates a huge amount of output:</li> 
         </ol> 
        </ol> 
        <pre>echo scan tables \; | dul &gt; scan.out&amp;

[ many lines here]


Object id 1601 table number 0
UNLOAD TABLE T1601_0 ( C1 NUMBER, C2 UNKNOWN, C3 UNKNOWN, C4 NUMBER, C5 DATE
        , C6 NUMBER, C7 NUMBER, C8 NUMBER )
    STORAGE ( TABNO 0 EXTENTS( FILE 1 BLOCK 10530));

Colno  Seen MaxIntSz Null% C75% C100 Num% NiNu% Dat% Rid%
    1    14        3    0%   0%   0% 100% 100%   0%   0%
    2    14        6    0% 100% 100% 100%  14%   0%  21%
    3    14        9    0% 100% 100% 100%  14%   0%   0%
    4    14        3    7%   0%   0% 100% 100%   0%   0%
    5    14        7    0%   0%   0%   0%   0% 100%   0%
    6    14        3    0%   0%   0% 100% 100%   0%   0%
    7    14        2   71%   0%   0% 100% 100%   0%   0%
    8    14        2    0%   0%   0% 100% 100%   0%   0%

&quot;7369&quot; &quot;SMITH&quot; &quot;CLERK&quot; &quot;7902&quot; &quot;17-DEC-1980 AD 00:00:00&quot; &quot;800&quot; &quot;&quot; &quot;20&quot;

&quot;7499&quot; &quot;-0.000025253223&quot; &quot;SALESMAN&quot; &quot;7698&quot; &quot;20-FEB-1981 AD 00:00:00&quot; &quot;1600&quot; &quot;30+

0&quot; &quot;30&quot;

&quot;7521&quot; &quot;WARD&quot; &quot;SALESMAN&quot; &quot;7698&quot; &quot;22-FEB-1981 AD 00:00:00&quot; &quot;1250&quot; &quot;500&quot; &quot;30&quot;

&quot;7566&quot; &quot;JONES&quot; &quot;MANAGER&quot; &quot;7839&quot; &quot;02-APR-1981 AD 00:00:00&quot; &quot;2975&quot; &quot;&quot; &quot;20&quot;

&quot;7654&quot; &quot;MARTIN&quot; &quot;SALESMAN&quot; &quot;7698&quot; &quot;28-SEP-1981 AD 00:00:00&quot; &quot;1250&quot; &quot;1400&quot; &quot;30&quot;

[ many more lines here ]
</pre> 
        <p>This looks familiar, use the above information and your knowledge of the emp table to compose:</p> 
        <pre>UNLOAD TABLE emp ( empno number, ename char, job char, mgr number,
        hiredate date, sal number, comm number deptno number)
 STORAGE ( TABNO 0 EXTENTS( FILE 1 BLOCK 10530));
</pre> 
        <ol> 
         <ol> 
          <li>use this statement to unload emp:</li> 
         </ol> 
        </ol> 
        <pre>$ dul
UnLoader: Version 2.0.0.0 - Very Restricted on Tue May 16 11:46:33 1995
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
Loaded 350 segments
Loaded 204 extents
Extent map sorted
DUL&gt; UNLOAD TABLE emp ( empno number, ename char, job char, mgr number,
DUL 2&gt; hiredate date, sal number, comm number deptno number)
DUL 3&gt; STORAGE ( TABNO 0 EXTENTS( FILE 1 BLOCK 10530));
. unloading table                       EMP      14 rows unloaded
DUL&gt;quit
 <a name="incorrect params"></a></pre> 
        <h3>Example unload session: Incorrect init.dul Parameters</h3> 
        <h4>WRONG osd_dba_file_bits size</h4> 
        <p>This can generate output similar to below. Normally this should not happen since you should create a demo database and check this via the DUL documented (in html page) query.</p> 
        <p>The mismatch in DBA’s is only in the file number (first number in brackets) part. The second number, the block number, is correct.</p> 
        <pre>Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Wed Sep 3 10:40:33 1997
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
Session altered.
Session altered.
Session altered.
Session altered.
Session altered.
DUL: Warning: Block[1][2] DBA in block mismatch [4][2]
DUL: Warning: Bad cache layer header file#=1, block#=2

DUL: Warning: Block[1][3] DBA in block mismatch [4][3]
DUL: Warning: Bad cache layer header file#=1, block#=3

...........and etc..........
</pre> 
        <h4>WRONG osd_file_leader_size</h4> 
        <p>This may create output similar to below, but many other flavours are possible. In this case we are a fixed number of blocks off. The file number is correct. The difference in the block numbers is constant.:</p> 
        <pre>Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Wed Sep 3 10:44:23 1997
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
Session altered.
Session altered.
Session altered.
Session altered.
Session altered.

DUL: Warning: Block[1][2] DBA in block mismatch [1][3]
DUL: Warning: Bad cache layer header file#=1, block#=2

DUL: Warning: Block[1][3] DBA in block mismatch [1][4]
DUL: Warning: Bad cache layer header file#=1, block#=3

...........and etc..........

</pre> 
        <h4>WRONG osd_c_struct_alignment</h4> 
        <p>This may generate output similar to the following:</p> 
        <pre>Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Wed Sep 3 10:46:10 1997
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
Session altered.
Session altered.
Session altered.
Session altered.
Session altered.
. unloading table OBJ$

DUL: Warning: file# 0 is out of range
DUL: Warning: Cannot read data block file#=0, block# = 262145
OS error 2: No such file or directory

DUL: Warning: file# 0 is out of range
DUL: Warning: Cannot read data block file#=0, block# = 262146
OS error 2: No such file or directory

...........and etc..........</pre> 
        <h4>WRONG db_block_size</h4> 
        <p>The following output was generated when the db_block_size was set too small. The correct value was 4096 and it was set to 2048. Normally, the value for this parameter should be taken from the Oracle instances’s init.ora file and will not be correctly set.</p> 
        <pre>Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Thu Sep 4 12:38:25 1997
Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.
Session altered.
Session altered.
Session altered.
Session altered.
Session altered.
DUL: Warning: Block[1][2] DBA in block mismatch [513][1159680]
DUL: Warning: File=1, block 2: illegal block version 2
DUL: Warning: Block[1][2] Illegal block type[0]
DUL: Warning: Bad cache layer header file#=1, block#=2

DUL: Warning: Block[1][4] DBA in block mismatch [1][2]
DUL: Warning: File[1]Block[4]INCSEQ mismatch[90268!=0]
DUL: Warning: Bad cache layer header file#=1, block#=4

DUL: Warning: Block[1][6] DBA in block mismatch [1][3]
DUL: Warning: File[1]Block[6]INCSEQ mismatch[139591710!=86360346]
DUL: Warning: Bad cache layer header file#=1, block#=6

...........and etc..........
</pre> 
        <h4>QUOTE MISSING</h4> 
        <p>If you get the following error it is caused by the data dictionary tables “USER$, OBJ$, TAB$ and COL$” not being correctly generated. To fix this error simply delete all dictv6.ddl or dictv7.ddl created .dat and .ctl files and restart.</p> 
        <pre>Data UnLoader: Release 3.2.0.1 - Internal Use Only - on Wed Sep 3 10:49:30 1997</pre> 
        <pre>Copyright (c) 1994/95 Oracle Corporation, The Netherlands. All rights reserved.</pre> 
        <pre>DUL: Error: Quote missing</pre> 
        <p><a name="unexp"></a></p> 
        <h3>Salvaging data from corrupt EXP dump files C UNEXP Tutorial</h3> 
        <p>If you do not know anything about the structure of a EXP dump file this can be difficult. Here is a quick explanation. Apart from the file header a dump file has MARKERS that identify the various sections. In each table section there will be SQL statements. The most interrsesting part is the create table statement, followed by the insert into table statement. The insert statement is directly followed by the bind information, (number of columns, and for each column its type and bind length and a small bit more). Then it is followed by the actual columns. Each column is preceded by a two byte length, followed by the actual column data. There are several tricks for longer columns possible. The end of the column data is marked by the special length marker OXFFFF. There is no marker for the beginning of a row. Resynching after a corruption is trial and error. Corruption are generally not immediate detectable. The format is slightly different for DIRECT export, so you will have to use the DIRECT option for DIRECT exports. The offset to be specified is the beginning of a row. In general the first one directly behind the bind array, but for optimal flexibility you can start anywhere in the row data.</p> 
        <p>The first step is to scan the dump file to find the offsets and the sql statements. Each output line starts with the offset where the item is found.</p> 
        <pre>DUL&gt;  scan dump file expdat.dmp;
0: CSET: 1 (US7ASCII)                # Character set info from the header
3: SEAL EXPORT:V10.02.01             # the Seal - the exp version tag
20: DBA SYSTEM                       # exp done as SYSTEM
8461: CONNECT SCOTT                  # section for user SCOTT
8475: TABLE &quot;EMP&quot;
                                     # complete create table staement
8487: CREATE TABLE &quot;EMP&quot; (&quot;EMPNO&quot; NUMBER(4, 0), &quot;ENAME&quot; VARCHAR2(10),
&quot;JOB&quot; VARCHAR2(9), &quot;MGR&quot; NUMBER(4, 0), &quot;HIREDATE&quot; DATE, &quot;SAL&quot; NUMBER(7, 2),
&quot;COMM&quot; NUMBER(7, 2), &quot;DEPTNO&quot; NUMBER(2, 0))  PCTFREE 10 PCTUSED 40
INITRANS 1 MAXTRANS 255 STORAGE(INITIAL 65536 FREELISTS 1
FREELIST GROUPS 1 BUFFER_POOL DEFAULT) TABLESPACE &quot;USERS&quot; LOGGING NOCOMPRESS

                                     # Insert statement
8829: INSERT INTO &quot;EMP&quot; (&quot;EMPNO&quot;, &quot;ENAME&quot;, &quot;JOB&quot;, &quot;MGR&quot;, &quot;HIREDATE&quot;,
&quot;SAL&quot;, &quot;COMM&quot;, &quot;DEPTNO&quot;) VALUES (:1, :2, :3, :4, :5, :6, :7, :8)

                                     # BIND information
8957: BIND information for 8 columns
 col[  1] type 2 max length 22
 col[  2] type 1 max length 10 cset 31 (WE8ISO8859P1) form 1
 col[  3] type 1 max length 9 cset 31 (WE8ISO8859P1) form 1
 col[  4] type 2 max length 22
 col[  5] type 12 max length 7
 col[  6] type 2 max length 22
 col[  7] type 2 max length 22
 col[  8] type 2 max length 22
Conventional export                  # Conventional means NOT DIRECT

9003: start of table data            # Here begins the first row
</pre> 
        <p>Now build an unexp statement from the create table statement and the direct/conventional information and the start of the column data.</p> 
        <pre>UNEXP TABLE &quot;EMP&quot; (&quot;EMPNO&quot; NUMBER(4, 0), &quot;ENAME&quot; VARCHAR2(10),
&quot;JOB&quot; VARCHAR2(9), &quot;MGR&quot; NUMBER(4, 0), &quot;HIREDATE&quot; DATE, &quot;SAL&quot; NUMBER(7, 2),
&quot;COMM&quot; NUMBER(7, 2), &quot;DEPTNO&quot; NUMBER(2, 0))
dump file expdat.dmp from 9003;

Unloaded 14 rows, end of table marker at 9670 # so we have our famous 14 rows</pre> 
        <p>This builds the normal SQL*Loader file and a matching control file. In the output file one extra column is added, this is related to the status of the row. A P means the row is Partial, (some columns missing) R means Resynch, it is the first row after a resynchronisation. O means Overlap, the previous row had errors, but the new row partly overlaps the other one.</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>Table Of Contents<br /> ~~~~~~~~~~~~~~~~~<br /> 1. Introduction<br /> 2. Using DUL<br /> 2.1 Create an appropriate init.dul file<br /> 2.2 Create the control.dul file<br /> 2.3 Unload the object information<br /> 2.4 Invoke DUL<br /> 2.5 Rebuild the database<br /> 3. How to rebuild object definitions that are stored in the data dictionary ?<br /> 4. How to unload data when the segment header block is corrupted ?<br /> 5. How to unload data when the file header block is corrupted ?<br /> 6. How to unload data without the system tablespace ?<br /> 7. Appendix A : Where to find the executables ?<br /> 8. References</p> 
        <p>1. Introduction<br /> ~~~~~~~~~~~~~~~</p> 
        <p>This document is to explain how to use DUL rather than to give a full<br /> explanation of Bernard’s Data UnLoader capabilities.</p> 
        <p>This document is for internal use only and should not be given to customers at<br /> any time, Dul should always be used by or under the supervision of a support<br /> analyst.</p> 
        <p>DUL (Data UnLoader) is intended to retrieve data from the Oracle Database that<br /> cannot be retrieved otherwise. This is not an alternative for the export<br /> utility or SQL*Loader. The database may be corrupted but an individual data<br /> block used must be 100% correct. During all unloading checks are made to make<br /> sure that blocks are not corrupted and belong to the correct segment. If a<br /> corrupted block is detected by DUL, an error message is printed in the loader<br /> file and to the standard output, but this will not terminate the unloading of<br /> the next row or block.</p> 
        <p>2. Using DUL<br /> ~~~~~~~~~~~~</p> 
        <p>First you must retrieve the necessary information about the objects that exists<br /> in the database, these statistics will be loaded into the DUL dictionary to<br /> unload the database objects.</p> 
        <p>This information is retrieved from the USER$, OBJ$, TAB$ and COL$ tables that<br /> were created at database creation time, they can be unloaded based on the fact<br /> that object numbers are fixed for these tables due to the rigid nature of sql.<br /> bsq. DUL can find the information in the system tablespace, therefor the system<br /> tablespace datafile(s) must be included in the control file, if this datafile(s)<br /> is not present see chapter 6.<br /> 2.1 Create an appropriate “init.dul” file<br /> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p> 
        <p>REM Platform specific parameters (NT)<br /> REM A List of parameters for the most common platforms can be obtained from<br /> REM<br /> osd_big_endian_flag=false<br /> osd_dba_file_bits=10<br /> osd_c_struct_alignment=32<br /> osd_file_leader_size=1<br /> osd_word_size = 32</p> 
        <p>REM Sizes of dul dictionary caches. If one of these is too low startup will<br /> REM fail.<br /> dc_columns=2000000<br /> dc_tables=10000<br /> dc_objects=1000000<br /> dc_users=400<br /> dc_segments=100000</p> 
        <p>REM Location and filename of the control file, default value is control.dul<br /> REM in the current directory<br /> control_file = D:\Dul\control_orcl.dul</p> 
        <p>REM Database blocksize, can be found in the init&lt;SID&gt;.ora file or can be<br /> REM retrieved by doing “show parameter %db_block_size%” in server manager<br /> REM (svrmgr23/30/l) changes this parameter to whatever the block size is of<br /> REM the crashed database.<br /> db_block_size=4096</p> 
        <p>REM Can/must be specified when data is needed into export/import format.<br /> REM this will create a file suitable to use by the oracle import utility,<br /> REM although the generated file is completely different from a table mode<br /> REM export generated by the EXP utility. It is a single table dump file<br /> REM with only a create table structure statement and the table data.<br /> REM Grants, storage clauses, triggers are not included into this dump file !<br /> export_mode=true</p> 
        <p>REM Compatible parameter must be specified an can be either 6, 7 or 8<br /> compatible=8</p> 
        <p>REM This parameter is optional and can be specified on platforms that do<br /> REM not support long file names (e.g. 8.3 DOS) or when the file format that<br /> REM DUL uses “owner_name.table_name.ext” is not acceptable. The dump files<br /> REM will be something like dump001.ext, dump002.ext, etc in this case.<br /> file = dump</p> 
        <p>A complete list can be obtained at<br /> html section “DUL Parameters” although this init.dul file will work in most<br /> cases and contains all accurate parameters to succesfully complete the<br /> unloading.</p> 
        <p>2.2 Create the “control.dul” file<br /> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p> 
        <p>A good knowledge about the logical tablespace and physical datafile<br /> structure is needed or you can do the following queries when the database<br /> is mounted :</p> 
        <p>Oracle 6, 7<br /> ―――C<br /> &gt; connect internal<br /> &gt; spool control.DUL<br /> &gt; select * from v$dbfile;<br /> &gt; spool off</p> 
        <p>Oracle 8<br /> ――C<br /> &gt; connect internal<br /> &gt; spool control.DUL<br /> &gt; select ts#, rfile#, name from v$datafile;<br /> &gt; spool off</p> 
        <p>Edit the spool file and change, if needed, the datafile location and stripe<br /> out unnecessary information like table headers, feedback line, etc…<br /> A sample control file looks something like this :</p> 
        <p>REM Oracle7 control file<br /> 1 D:\DUL\DATAFILE\SYS1ORCL.DBF<br /> 3 D:\DUL\DATAFILE\DAT1ORCL.DBF<br /> 7 D:\DUL\DATAFILE\USR1ORCL.DBF</p> 
        <p>REM Oracle8 control file<br /> 0 1 D:\DUL\DATAFILE\SYS1ORCL.DBF<br /> 1 2 D:\DUL\DATAFILE\USR1ORCL.DBF<br /> 1 3 D:\DUL\DATAFILE\USR2ORCL.DBF<br /> 2 4 D:\DUL\DATAFILE\DAT1ORCL.DBF</p> 
        <p>Note : Each entry can contain a part of a datafile, this can be useful when<br /> you need to split datafiles that are too big for DUL, so that each<br /> part is smaller than for example 2GB. For example :</p> 
        <p>REM Oracle8 with a datafile split into multiple parts, each part is<br /> REM smaller than 1GB !<br /> 0 1 D:\DUL\DATAFILE\SYS1ORCL.DBF<br /> 1 2 D:\DUL\DATAFILE\USR1ORCL.DBF startblock 1 endblock 1000000<br /> 1 2 D:\DUL\DATAFILE\USR1ORCL.DBF startblock 1000001 endblock 2000000<br /> 1 2 D:\DUL\DATAFILE\USR1ORCL.DBF startblock 2000001 endblock 2550000<br /> 2.3 Unload the object information<br /> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p> 
        <p>Start the DUL utility with the appropriate ddl (Dul Description Language)<br /> script. There are 3 scripts available to unload the USER$, OBJ$, TAB$ and<br /> COL$ tables according to the database version.</p> 
        <p>Oracle6 :&gt; dul8.exe dictv6.ddl<br /> Oracle7 :&gt; dul8.exe dictv7.ddl<br /> Oracle8 :&gt; dul8.exe dictv8.ddl</p> 
        <p>Data UnLoader: Release 8.0.5.3.0 C Internal Use Only C on Tue Jun 22 22:19:<br /> Copyright (c) 1994/1999 Bernard van Duijnen All rights reserved.</p> 
        <p>Parameter altered<br /> Session altered.<br /> Parameter altered<br /> Session altered.<br /> Parameter altered<br /> Session altered.<br /> Parameter altered<br /> Session altered.<br /> . unloading table OBJ$ 2271 rows unloaded<br /> . unloading table TAB$ 245 rows unloaded<br /> . unloading table COL$ 10489 rows unloaded<br /> . unloading table USER$ 22 rows unloaded<br /> . unloading table TABPART$ 0 rows unloaded<br /> . unloading table IND$ 274 rows unloaded<br /> . unloading table ICOL$ 514 rows unloaded<br /> . unloading table LOB$ 13 rows unloaded</p> 
        <p>Life is DUL without it</p> 
        <p>This will unload the data of the USER$, OBJ$, TAB$ and COl$ data dictionary<br /> tables into SQL*Loader files , this can not be manipulated into dump files<br /> of the import format. The parameter export_mode = false is hardcoded into<br /> the ddl scripts and can not be changed to the value “true” since this will<br /> cause DUL to fail with the error:</p> 
        <p>. unloading table OBJ$<br /> DUL: Error: Column “DATAOBJ#” actual size(2) greater than length in column<br /> definition(1)<br /> ………….etc……………<br /> 2.4 Invoke DUL<br /> ~~~~~~~~~~~~~~</p> 
        <p>Start DUL in interactive mode or you can prepare a scripts that contains all<br /> the ddl commands to unload the necessary data from the database. I will<br /> describe in this document the most used commands, this is not a complete list<br /> of possible parameters that can be specified. A complete list can be found at<br /> section “DDL Description”.</p> 
        <p>DUL&gt; unload database;<br /> =&gt; this will unload the entire database tables(includes sys’tables as well)</p> 
        <p>DUL&gt; unload user &lt;username&gt;;<br /> =&gt; this will unload all the tables owned by that particullarly user.</p> 
        <p>DUL&gt; unload table &lt;username.table_name&gt;;<br /> =&gt; this will unload the specified table owned by that username</p> 
        <p>DUL&gt; describe &lt;owner_name.table_name&gt;;<br /> =&gt; will represent the table columns with there relative pointers to the<br /> datafile(s) owned by the specified user.</p> 
        <p>DUL&gt; scan database;<br /> =&gt; Scans all blocks of all data files.<br /> Two files are generated:<br /> 1: seg.dat information of found segment headers (index/cluster/table)<br /> (object id, file number, and block number).<br /> 2: ext.dat information of contiguous table/cluster data blocks.<br /> (object id(V7), file and block number of segment header (V6),<br /> file number and block number of first block,<br /> number of blocks, number of tables)</p> 
        <p>DUL&gt; scan tables;<br /> =&gt; Uses seg.dat and ext.dat as input.<br /> Scans all tables in all data segments (a header block and at least one<br /> matching extent with at least 1 table).<br /> 2.5 Rebuild the database<br /> ~~~~~~~~~~~~~~~~~~~~~~~~</p> 
        <p>Create the new database and use import or SQL*Loader to restore the data<br /> retrieved by DUL. Note that when you only unloaded the data that table<br /> structures, indexation, grants, PL/SQL and triggers will no longer exist in<br /> the new database. To obtain an exactly same copy of the database as before<br /> you will need to rerun your creation scripts for the tables, indexes, PL/SQL,<br /> etc.</p> 
        <p>If you don’t have these scripts then you will need to perform the steps<br /> described in section 3 of this document.<br /> 3. How to rebuild object definitions that are stored in the data dictionary<br /> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p> 
        <p>You want to rebuild PL/SQL(packages, procedures, functions or triggers), grants,<br /> indexes, constraints or storage clauses(old table structure) with DUL. This can<br /> be done but is a little bit tricky. You need to unload the relevant data<br /> dictionary tables using DUL and then load these tables into a healthy database,<br /> be sure to use a different user than sys or (system). Loading the data<br /> dictionary tables of the crashed database into the healthy database dictionary<br /> could corrupt the healthy database as well.</p> 
        <p>Detailed explanation to retrieve for example pl/sql packages / procedures /<br /> functions from a corrupted database :</p> 
        <p>1) Follow the steps explained in the “Using DUL” section and unload the data<br /> dictionary table “source$”</p> 
        <p>2) Create a new user into a healthy database and specify the desired default<br /> and temporary tablespace.</p> 
        <p>3) Grant connect, resource, imp_full_database to the new user.</p> 
        <p>4) Import/load the table “source$” into the new created schema:</p> 
        <p>e.g.: imp80 userid=newuser/passw file=d:\dul\scott_emp.dmp<br /> log=d:\dul\impemp.txt full=y</p> 
        <p>5) You can now query from the table &lt;newuser.source$&gt; to rebuild the pl/sql<br /> procedures/functions from the corrupted database. Scripts can be found on<br /> WebIv to generate such PL/SQL creation scripts.</p> 
        <p>The same steps can be followed to recreate indexes, constraints, and storage<br /> parameters or to regrant privileges to the appropiate users. Please notice that<br /> you always need to use a script of some kind that can recreate the objects and<br /> include all the features of the crashed database version. For example : when<br /> the crashed database is of version 7.3.4 and you have several bitmap indexes,<br /> if you would use a script that supports version 7.3.2 or prior, then you won’t<br /> be able to recreate the bitmap indexes succesful !<br /> 4. How to unload data when the segment header block is corrupted<br /> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p> 
        <p>When DUL can’t retrieve data block information on the normal way, it can scan<br /> the database to create its own segment/extent map. The procedure of scanning<br /> the database is necessary to unload the data from the datafiles.<br /> (to illustrate this example I copied an empty block ontop of the segment header<br /> block)</p> 
        <p>1) Create an appropiate “init.dul” (see 2.1) and “control.dul” (see 2.2) file.</p> 
        <p>2) Unload the table. This will fail and indicate that there is a corruption in<br /> the segment header block:</p> 
        <p>DUL&gt; unload table scott.emp;<br /> . unloading table EMP<br /> DUL: Warning: Block is never used, block type is zero<br /> DUL: Error: While checking tablespace 6 file 10 block 2<br /> DUL: Error: While processing block ts#=6, file#=10, block#=2<br /> DUL: Error: Could not read/parse segment header<br /> 0 rows unloaded</p> 
        <p>3) run the scan database command :</p> 
        <p>DUL&gt; scan database;<br /> tablespace 0, data file 1: 10239 blocks scanned<br /> tablespace 6, data file 10: 2559 blocks scanned</p> 
        <p>4) Indicate to DUL that it should use its own generated extent map rather than<br /> the segment header information.</p> 
        <p>DUL&gt; alter session set use_scanned_extent_map = true;<br /> Parameter altered<br /> Session altered.<br /> DUL&gt; unload table scott.emp;<br /> . unloading table EMP 14 rows unloaded<br /> 5. How to unload data when the datafile header block is corrupted<br /> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p> 
        <p>A corruption in the datafile header block is always listed at the moment you<br /> open the database this is not like a header segment block corruption (see point<br /> 4) where the database can be succesfully openend and the corruption is listed<br /> at the moment you do a query of a table. Dul has no problems with recovering<br /> from such situations although there are other alternatives of recovering from<br /> this situation like patching the datafile header block.</p> 
        <p>The error you will receive looks something like :<br /> ORACLE instance started.<br /> Total System Global Area 11739136 bytes<br /> Fixed Size 49152 bytes<br /> Variable Size 7421952 bytes<br /> Database Buffers 4194304 bytes<br /> Redo Buffers 73728 bytes<br /> Database mounted.<br /> ORA-01122: database file 10 failed verification check<br /> ORA-01110: data file 10: ‘D:\DATA\TRGT\DATAFILES\JUR1TRGT.DBF’<br /> ORA-01251: Unknown File Header Version read for file number 10<br /> 6. How to unload data without the system tablespace<br /> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p> 
        <p>If datafiles are not available for the system tablespace the unload can still<br /> continue but the object information can’t be retrieved from the data dictionary<br /> tables USER$, OBJ$, TAB$ and COL$. So ownername, tablename and columnnames will<br /> not be loaded into the DUL dictionary. Identifying the tables can be an<br /> overwhelming task and a good knowledge of the RDBMS internals are needed here.<br /> First of all you need a good knowledge of your application and it’s tables.<br /> Column types can be guessed by DUL, but table and column names will be lost.</p> 
        <p>Any old system tablespace from the same database (may be weeks old) can be a<br /> great help !</p> 
        <p>1) Create the “init.dul” file and the “control.dul” file as explained in above<br /> steps 1 and 2. In this case the control file will contain all the datafiles<br /> from which you want to restore but it doesn’t require the system tablespace<br /> information.</p> 
        <p>2) Then You invoke dul and type the following command :</p> 
        <p>DUL&gt; scan database;<br /> data file 6 1280 blocks scanned</p> 
        <p>This will build the extent and segment map. Probably the dul command<br /> interpreter will be terminated as well.</p> 
        <p>3) reinvoke the dul command interpreter and do the following :</p> 
        <p>Data UnLoader: Release 8.0.5.3.0 C Internal Use Only C on Tue Aug 03 13:33:</p> 
        <p>Copyright (c) 1994/1999 Oracle Corporation, The Netherlands. All rights res<br /> Loaded 4 segments<br /> Loaded 2 extents<br /> Extent map sorted<br /> DUL&gt; alter session set use_scanned_extent_map = true;<br /> DUL&gt; scan tables; (or scan extents;)</p> 
        <p>Scanning tables with segment header</p> 
        <p>Oid 1078 fno 6 bno 2 table number 0</p> 
        <p>UNLOAD TABLE T_O1078 ( C1 NUMBER, C2 UNKNOWN, C3 UNKNOWN )<br /> STORAGE ( TABNO 0 EXTENTS( FILE 6 BLOCK 2));<br /> Colno Seen MaxIntSz Null% C75% C100 Num% NiNu% Dat% Rid%<br /> 1 4 2 0% 0% 0% 100% 100% 0% 0%<br /> 2 4 10 0% 100% 100% 100% 0% 0% 0%<br /> 3 4 8 0% 100% 100% 100% 0% 0% 50%<br /> “10” “ACCOUNTING” “NEW YORK”<br /> “20” “RESEARCH” “DALLAS”<br /> “30” “SALES” “CHICAGO”<br /> “40” “OPERATIONS” “BOSTON”</p> 
        <p>Oid 1080 fno 6 bno 12 table number 0</p> 
        <p>UNLOAD TABLE T_O1080 ( C1 NUMBER, C2 UNKNOWN, C3 UNKNOWN, C4 NUMBER,<br /> C5 DATE, C6 NUMBER, C7 NUMBER, C8 NUMBER )<br /> STORAGE ( TABNO 0 EXTENTS( FILE 6 BLOCK 12));<br /> Colno Seen MaxIntSz Null% C75% C100 Num% NiNu% Dat% Rid%<br /> 1 14 3 0% 0% 0% 100% 100% 0% 0%<br /> 2 14 6 0% 100% 100% 100% 0% 0% 21%<br /> 3 14 9 0% 100% 100% 100% 0% 0% 0%<br /> 4 14 3 7% 0% 0% 100% 100% 0% 0%<br /> 5 14 7 0% 0% 0% 0% 0% 100% 0%<br /> 6 14 3 0% 0% 0% 100% 100% 0% 0%<br /> 7 14 2 71% 0% 0% 100% 100% 0% 0%<br /> 8 14 2 0% 0% 0% 100% 100% 0% 0%<br /> “7369” “SMITH” “CLERK” “7902” “17-DEC-1980 AD 00:00:00” “800” “” “20”<br /> “7499” “ALLEN” “SALESMAN” “7698” “20-FEB-1981 AD 00:00:00” “1600” “300” “30”<br /> “7521” “WARD” “SALESMAN” “7698” “22-FEB-1981 AD 00:00:00” “1250” “500” “30”<br /> “7566” “JONES” “MANAGER” “7839” “02-APR-1981 AD 00:00:00” “2975” “” “20”<br /> “7654” “MARTIN” “SALESMAN” “7698” “28-SEP-1981 AD 00:00:00” “1250” “1400” “30”</p> 
        <p>Note : it might be best that you redirect the output to a logfile since<br /> commands like the “scan tables” can produce a lot of output.<br /> On Windows NT you can do the following command :<br /> C:\&gt; dul8 &gt; c:\temp\scan_tables.txt<br /> scan tables;<br /> exit;</p> 
        <p>4) Identify the lost tables from the output of step 3; if you look carefully to<br /> the output above then you will notice that the unload syntax is already given<br /> but that the table name will be of the format t_0&lt;objectno&gt; and the column<br /> names will be of the format C&lt;no&gt;; datatypes will not be an exact match of<br /> the datatype as it was before.</p> 
        <p>Look especially for strings like “Oid 1078 fno 6 bno 2 table number 0” where:<br /> oid = object id, will be used to unload the object<br /> fno = (data)file number<br /> bno = block number</p> 
        <p>5) Unload the identified tables with the “unload table” command :</p> 
        <p>DUL&gt; unload table dept (deptno number(2), dname varchar2(14),<br /> loc varchar2(13)) storage (OBJNO 1078)<br /> Unloading extent(s) of table DEPT 4 rows.</p> 
       </div>
       <div class="post-meta">
        <span class="categories">Filed Under: <a href="http://www.askmaclean.com/archives/category/oracle" rel="category tag">Oracle</a>, <a href="http://www.askmaclean.com/archives/category/oracle/backup-recover" rel="category tag">Oracle数据恢复、数据库恢复、灾难恢复</a></span> 
        <span class="tags">Tagged With: <a href="http://www.askmaclean.com/archives/tag/asm" rel="tag">ASM</a>, <a href="http://www.askmaclean.com/archives/tag/data-unloader" rel="tag">data unloader</a>, <a href="http://www.askmaclean.com/archives/tag/dul" rel="tag">dul</a>, <a href="http://www.askmaclean.com/archives/tag/oracle" rel="tag">Oracle</a></span>
       </div>
      </div>
      <div class="post-7023 post type-post status-publish format-standard hentry category-oracle category-oracle-11g category-rac-oracle tag-11-2 tag-crs tag-gi tag-ocfs tag-oracle tag-bug tag-raw tag-redhat tag-rootupgrade-sh tag-upgrade entry">
       <h2 class="entry-title"><a href="http://www.askmaclean.com/archives/upgrade-gi-crs-11-1-0-7-to-11-2-0-2-rootupgrade-sh-hanging.html" rel="bookmark">Upgrade GI/CRS 11.1.0.7 to 11.2.0.2. Rootupgrade.sh Hanging</a></h2> 
       <div class="post-info">
        <span class="date published time" title="2011-09-11T00:12:56+00:00">2011/09/11</span> by 
        <span class="author vcard"><span class="fn"><a href="http://www.askmaclean.com/archives/author/admin" rel="author">Maclean Liu</a></span></span> 
        <span class="post-comments"><a href="http://www.askmaclean.com/archives/upgrade-gi-crs-11-1-0-7-to-11-2-0-2-rootupgrade-sh-hanging.html#respond"><span class="ds-thread-count" data-thread-key="7023" data-replace="1">Leave a Comment</span></a></span> 
       </div>
       <div class="entry-content">
        <p><span style="font-size: medium;"><strong>Upgrade grid 11.1.0.7 to 11.2.0.2. Rootupgrade.sh Hanging</strong></span></p> 
        <p>We installed 11gR2 GI software and applied PSU2 patches upon getting runupgrade.sh prompt.runupgrade.sh hang on the first node.</p> 
        <p>[root@vrh8 client]# uname -a<br /> Linux vrh8 2.6.18-238.5.1.el5 #1 SMP Mon Feb 21 05:52:39 EST 2011 x86_64</p> 
        <p>x86_64 x86_64 GNU/Linux<br /> cluvfy passed with 2 ignorable errors:</p> 
        <p>[root@vrh8 vrh8]# cd /tmp<br /> [root@vrh8 tmp]# df -lh .<br /> Filesystem Size Used Avail Use% Mounted on<br /> /dev/mapper/vg0-tmp 992M 263M 679M 28% /tmp</p> 
        <p>[root@vrh8 grid]# grep fail cluvfy_during_inst.log<br /> /tmp l118464lwap1049 /tmp 713MB 1GB failed<br /> Result: Free disk space check failed for “l118464lwap1049:/tmp”<br /> /tmp vrh8 /tmp 692.131MB 1GB failed<br /> Result: Free disk space check failed for “vrh8:/tmp”<br /> Result: Check for multiple users with UID value 0 failed</p> 
        <p>[root@vrh8 vrh8]# cd /tmp<br /> [root@vrh8 tmp]# df -lh .<br /> Filesystem Size Used Avail Use% Mounted on<br /> /dev/mapper/vg0-tmp 992M 263M 679M 28% /tmp</p> 
        <p>We installed 11gR2 GI software and applied PSU2 patches upon getting runupgrade.sh prompt.</p> 
        <p>runupgrade.sh hang on the first node. We followed “How to Proceed from Failed Upgrade to 11gR2</p> 
        <p>Grid Infrastructure on Linux/Unix [ID 969254.1]” 1A section, it didn’t help.</p> 
        <p>[root@vrh8 bin]# ./crsctl query crs activeversion<br /> Oracle Clusterware active version on the cluster is [11.1.0.7.0]</p> 
        <p>rootupgrade.sh output:</p> 
        <p>[root@vrh8 11.2.0.2]# ./rootupgrade.sh<br /> Running Oracle 11g root script…</p> 
        <p>The following environment variables are set as:<br /> ORACLE_OWNER= oracrs<br /> ORACLE_HOME= /d22/oracrs/11.2.0.2</p> 
        <p>Enter the full pathname of the local bin directory: [/usr/local/bin]:<br /> The contents of “dbhome” have not changed. No need to overwrite.<br /> The contents of “oraenv” have not changed. No need to overwrite.<br /> The contents of “coraenv” have not changed. No need to overwrite.</p> 
        <p>Entries will be added to the /etc/oratab file as needed by<br /> Database Configuration Assistant when a database is created<br /> Finished running generic part of root script.<br /> Now product-specific root actions will be performed.<br /> Using configuration parameter file: /d22/oracrs/11.2.0.2/crs/install/crsconfig_params<br /> LOCAL ADD MODE<br /> Creating OCR keys for user ‘root’, privgrp ‘root’..<br /> Operation successful.<br /> OLR initialization C successful<br /> Adding daemon to inittab<br /> ACFS-9200: Supported<br /> ACFS-9300: ADVM/ACFS distribution files found.<br /> ACFS-9312: Existing ADVM/ACFS installation detected.<br /> ACFS-9314: Removing previous ADVM/ACFS installation.<br /> ACFS-9315: Previous ADVM/ACFS components successfully removed.<br /> ACFS-9307: Installing requested ADVM/ACFS software.<br /> ACFS-9308: Loading installed ADVM/ACFS drivers.<br /> ACFS-9321: Creating udev for ADVM/ACFS.<br /> ACFS-9323: Creating module dependencies C this may take some time.<br /> ACFS-9327: Verifying ADVM/ACFS devices.<br /> ACFS-9309: ADVM/ACFS installation correctness verified.</p> 
        <p>****hanging here for more than 2 hrs, so we cancelled it</p> 
        <p>INT at /d22/oracrs/11.2.0.2/crs/install/crsconfig_lib.pm line 1173.<br /> /d22/oracrs/11.2.0.2/perl/bin/perl -I/d22/oracrs/11.2.0.2/perl/lib C</p> 
        <p>I/d22/oracrs/11.2.0.2/crs/install /d22/oracrs/11.2.0.2/crs/install/rootcrs.pl execution failed<br /> Oracle root script execution aborted!</p> 
        <p>1. The below logs are required to analyze this issue.</p> 
        <p>NEW_GRID_HOME/cfgtoollogs/crsconfig/*.*<br /> NEW_GRID_HOME/log/&lt;nodename&gt;/*.*</p> 
        <p>Please upload the logs under the above directories. Zip and upload the files including the subdirectories.</p> 
        <p>2. When the rootupgrade was handing, did you check the usage of /tmp. Was free space exhausting?</p> 
        <p>=== ODM Research ===</p> 
        <p>There has been multiple root script run for upgrade. I have taken the first incident from the file<br /> rootcrs_vrh8.log:<br /> ―――――――――――――C</p> 
        <p>2011-02-13 13:07:55: Successfully started requested Oracle stack daemons<br /> 2011-02-13 13:07:55: Upgrading the existing voting disks!<br /> 2011-02-13 13:07:55: Executing /d22/oracrs/11.2.0.2/bin/cssvfupgd<br /> 2011-02-13 13:07:55: Executing cmd: /d22/oracrs/11.2.0.2/bin/cssvfupgd &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; The root script seems to hang at this point.<br /> 2011-02-13 15:01:16: ###### Begin DIE Stack Trace ######<br /> 2011-02-13 15:01:16: Package File Line Calling<br /> 2011-02-13 15:01:16: ――――― ――――――C ―- ―――-<br /> 2011-02-13 15:01:16: 1: main rootcrs.pl 325 crsconfig_lib::dietrap<br /> 2011-02-13 15:01:16: 2: crsconfig_lib crsconfig_lib.pm 9301 main::__ANON__<br /> 2011-02-13 15:01:16: 3: crsconfig_lib crsconfig_lib.pm 9301 (eval)<br /> 2011-02-13 15:01:16: 4: crsconfig_lib crsconfig_lib.pm 9260 crsconfig_lib::system_cmd_capture1<br /> 2011-02-13 15:01:16: 5: crsconfig_lib crsconfig_lib.pm 9247 crsconfig_lib::system_cmd_capture<br /> 2011-02-13 15:01:16: 6: crsconfig_lib crsconfig_lib.pm 924 crsconfig_lib::system_cmd<br /> 2011-02-13 15:01:16: 7: oracss oracss.pm 275 crsconfig_lib::run_crs_cmd<br /> 2011-02-13 15:01:16: 8: crsconfig_lib crsconfig_lib.pm 1019 oracss::CSS_upgrade<br /> 2011-02-13 15:01:16: 9: crsconfig_lib crsconfig_lib.pm 1006 crsconfig_lib::start_cluster<br /> 2011-02-13 15:01:16: 10: main rootcrs.pl 697 crsconfig_lib::perform_start_cluster<br /> 2011-02-13 15:01:16: ####### End DIE Stack Trace #######</p> 
        <p>cssvfupgd.log:<br /> ――――――C<br /> Oracle Database 11g Clusterware Release 11.2.0.2.0 C Production Copyright 1996, 2010 Oracle. All rights reserved.<br /> 2011-02-13 13:07:55.356: [ OCRRAW][3605955376]prgval:buffer passed is too small<br /> 2011-02-13 13:07:55.361: [CSSVFUPG][3605955376]cssvfupgd_GetVFList: found voting file /s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat<br /> 2011-02-13 13:07:55.365: [ OCRRAW][3605955376]prgval:buffer passed is too small<br /> 2011-02-13 13:07:55.369: [CSSVFUPG][3605955376]cssvfupgd_GetVFList: found voting file /s01/app/ocrvot/VOTEDISK/UAT2_vdisk2.dat<br /> 2011-02-13 13:07:55.373: [ OCRRAW][3605955376]prgval:buffer passed is too small<br /> 2011-02-13 13:07:55.377: [CSSVFUPG][3605955376]cssvfupgd_GetVFList: found voting file /s01/app/ocrvot/VOTEDISK/UAT2_vdisk3.dat<br /> 2011-02-13 13:07:55.402: [CSSVFUPG][3605955376]cssvfupgd_SetNum: Processing SYSTEM.css.misscount<br /> 2011-02-13 13:07:55.404: [CSSVFUPG][3605955376]cssvfupgd_SetNum: Processing SYSTEM.css.disktimeout<br /> 2011-02-13 13:07:55.406: [CSSVFUPG][3605955376]cssvfupgd_SetNum: Processing SYSTEM.css.reboottime<br /> 2011-02-13 13:07:55.408: [CSSVFUPG][3605955376]cssvfupgd_SetNum: Processing SYSTEM.css.diagwait<br /> 2011-02-13 13:07:55.414: [CSSVFUPG][3605955376]cssvfupgd_SetNum: Processing SYSTEM.css.pollinterval<br /> 2011-02-13 13:07:55.416: [CSSVFUPG][3605955376]cssvfupgd_GetGUID: Fetching GUID for /s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat<br /> 2011-02-13 13:07:55.419: [ SKGFD][3605955376]NOTE: No asm libraries found in the system</p> 
        <p>2011-02-13 13:07:55.419: [ CLSF][3605955376]Allocated CLSF context<br /> 2011-02-13 13:07:55.419: [ SKGFD][3605955376]Discovery with str:/s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat:</p> 
        <p>2011-02-13 13:07:55.419: [ SKGFD][3605955376]UFS discovery with :/s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat:</p> 
        <p>2011-02-13 13:07:55.420: [ SKGFD][3605955376]Fetching UFS disk :/s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat:</p> 
        <p>2011-02-13 13:07:55.420: [ SKGFD][3605955376]OSS discovery with :/s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat:</p> 
        <p>2011-02-13 13:07:55.421: [ SKGFD][3605955376]Handle 0x124de360 from lib :UFS:: for disk :/s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat:</p> 
        <p>2011-02-13 14:19:31.132: [ SKGFD][3605955376]WARNING:io_getevents timed out 2226 sec &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; After about one hour it shows time out error.</p> 
        <p>2011-02-13 14:19:31.132: [ SKGFD][3605955376]WARNING:io_getevents timed out 2226 sec</p> 
        <p>The script has stalled at the voting disk upgrade phase. Please provide me the below details.</p> 
        <p>1. What cluster file system are you using for the voting files? provide its details and the mount options used.</p> 
        <p>for ocfs, get its mount options<br /> mount | grep ocfs</p> 
        <p>3. Voting disks details<br /> ls -l /s01/app/ocrvot/VOTEDISK/UAT2_vdisk*</p> 
        <p>4. Get the diagwait detail.<br /> OLD_CRS_HOME/bin/crsctl get css diagwait</p> 
        <p>1. What cluster file system are you using for the voting files? provide its details and the mount options used<br /> /dev/emcpowera1 on /s01/app/ocrvot type ocfs2 (rw,_netdev,datavolume,nointr,heartbeat=local)</p> 
        <p>2. Voting disks details</p> 
        <p>[root@vrh8 11.2.0.2]# ls -l /s01/app/ocrvot/VOTEDISK/UAT2_vdisk*<br /> -rw-r―C 1 oracrs oinstall 21004288 Jun 11 07:31 /s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat<br /> -rw-r―C 1 oracrs oinstall 21004288 Jun 11 07:31 /s01/app/ocrvot/VOTEDISK/UAT2_vdisk2.dat<br /> -rw-r―C 1 oracrs oinstall 21004288 Jun 11 07:31 /s01/app/ocrvot/VOTEDISK/UAT2_vdisk3.dat</p> 
        <p>&nbsp;</p> 
        <p>3. Get the diagwait detail</p> 
        <p>crsctl get css diagwait<br /> Failure 33 in main Oracle Cluster Registry context initialization: PROC-33: Oracle Cluster Registry is not configured Operating System error [No such file or directory] [2]</p> 
        <p>owc may not be required now as the issue we face is clear.</p> 
        <p>The diagwait should not error out, as explained in the following note,<br /> 11gR2 rootupgrade.sh Fails as cssvfupgd Can not Upgrade Voting Disk (Doc ID 1102283.1)</p> 
        <p>Make sure you are running ‘crsctl get css diagwait’ from the old crs home. You can also check it in multiple node. If it errors out, this has to be fixed as explained in the above note.</p> 
        <p>according to that note ,When I ./oprocd stop ,get error:<br /> [root@l118464lwap1049 bin]# ./oprocd stop<br /> Jun 16 23:24:42.966 | ERR | failed to connect to daemon, errno(111)</p> 
        <p>ACFS-9200: Supported<br /> ACFS-9300: ADVM/ACFS distribution files found.<br /> ACFS-9307: Installing requested ADVM/ACFS software.<br /> ACFS-9308: Loading installed ADVM/ACFS drivers.<br /> ACFS-9321: Creating udev for ADVM/ACFS.<br /> ACFS-9323: Creating module dependencies C this may take some time.<br /> ACFS-9327: Verifying ADVM/ACFS devices.<br /> ACFS-9309: ADVM/ACFS installation correctness verified.</p> 
        <p>cssvfupgd.log<br /> 2011-02-13 23:36:49.311: [ OCRRAW][3394941744]prgval:buffer passed is too small<br /> 2011-02-13 23:36:49.315: [CSSVFUPG][3394941744]cssvfupgd_GetVFList: found voting<br /> file /s01/app/ocrvot/VOTEDISK/UAT2_vdisk2.dat<br /> 2011-02-13 23:36:49.319: [ OCRRAW][3394941744]prgval:buffer passed is too small<br /> 2011-02-13 23:36:49.323: [CSSVFUPG][3394941744]cssvfupgd_GetVFList: found voting<br /> file /s01/app/ocrvot/VOTEDISK/UAT2_vdisk3.dat<br /> 2011-02-13 23:36:49.351: [CSSVFUPG][3394941744]cssvfupgd_SetNum: Processing SYST<br /> EM.css.misscount<br /> 2011-02-13 23:36:49.354: [CSSVFUPG][3394941744]cssvfupgd_SetNum: Processing SYST<br /> EM.css.disktimeout<br /> 2011-02-13 23:36:49.356: [CSSVFUPG][3394941744]cssvfupgd_SetNum: Processing SYST<br /> EM.css.reboottime<br /> 2011-02-13 23:36:49.358: [CSSVFUPG][3394941744]cssvfupgd_SetNum: Processing SYST<br /> EM.css.diagwait<br /> 2011-02-13 23:36:49.367: [CSSVFUPG][3394941744]cssvfupgd_SetNum: Processing SYST<br /> EM.css.pollinterval<br /> 2011-02-13 23:36:49.369: [CSSVFUPG][3394941744]cssvfupgd_GetGUID: Fetching GUID<br /> for /s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat<br /> 2011-02-13 23:36:49.371: [ SKGFD][3394941744]NOTE: No asm libraries found in t<br /> he system</p> 
        <p>2011-02-13 23:36:49.372: [ CLSF][3394941744]Allocated CLSF context<br /> 2011-02-13 23:36:49.372: [ SKGFD][3394941744]Discovery with str:/s01/app/ocrvo<br /> t/VOTEDISK/UAT2_vdisk1.dat:</p> 
        <p>2011-02-13 23:36:49.372: [ SKGFD][3394941744]UFS discovery with :/s01/app/ocrv<br /> ot/VOTEDISK/UAT2_vdisk1.dat:</p> 
        <p>2011-02-13 23:36:49.372: [ SKGFD][3394941744]Fetching UFS disk :/s01/app/ocrvo<br /> t/VOTEDISK/UAT2_vdisk1.dat:</p> 
        <p>2011-02-13 23:36:49.372: [ SKGFD][3394941744]OSS discovery with :/s01/app/ocrv<br /> ot/VOTEDISK/UAT2_vdisk1.dat:</p> 
        <p>2011-02-13 23:36:49.372: [ SKGFD][3394941744]Handle 0x98c4360 from lib :UFS::<br /> for disk :/s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat:</p> 
        <p>Question:<br /> in Your update about cssvfupgd.log You stated it was hanging there.<br /> Is there an entry after about 70 minutes about a timeout in that log file like:</p> 
        <p>2011-02-13 23:36:49.372: [ SKGFD][3394941744]Handle 0x98c4360 from lib :UFS::<br /> for disk :/s01/app/ocrvot/VOTEDISK/UAT2_vdisk1.dat:<br /> 2011-02-17 0:48:19.372: [ SKGFD][3394941744]WARNING:io_getevents timed out 4294 sec &lt;&lt;&lt;&lt; present ???</p> 
        <p>Please provide the following outputs:<br /> rpm -qa|grep ocfs2<br /> uname -a<br /> cat /etc/redhat-release</p> 
        <p>[root@vrh8 ~]# rpm -qa|grep ocfs2<br /> ocfs2console-1.4.4-1.el5<br /> ocfs2-tools-1.4.4-1.el5<br /> ocfs2-2.6.18-238.5.1.el5-1.4.7-1.el5<br /> [root@vrh8 ~]# uname -a<br /> Linux vrh8 2.6.18-238.5.1.el5 #1 SMP Mon Feb 21 05:52:39 EST 2011 x86_64 x86_64 x86_64 GNU/Linux<br /> [root@vrh8 ~]# cat /etc/redhat-release<br /> Red Hat Enterprise Linux Server release 5.6 (Tikanga)<br /> [root@vrh8 ~]#</p> 
        <p>Combinations that install SUCCESSFUL:</p> 
        <p>OEL5.4+ocfs2-1.4.7-1+ocfs2-tools-1.4.4<br /> OEL5.6+ocfs2-1.4.8-1+ocfs2-tools-1.6.3<br /> OEL5.6+ocfs2-1.4.7-1+ocfs2-tools-1.4.4<br /> RHLE5.6+OEL kernel(redhat compatible kernel)+ocfs2-1.4.8-1+ocfs2-tools-1.6.3<br /> RHLE5.6+OEL kernel(redhat compatible kernel)+ocfs2-1.4.7-1+ocfs2-tools-1.4.4<br /> RHEL5.4</p> 
        <p>Combinations that failed:<br /> RHLE5.6(redhat kernel)+ocfs2-1.4.7-1+ocfs2-tools-1.4.4<br /> RHLE5.6(redhat kernel)+ocfs2-1.4.8-1+ocfs2-tools-1.6.3</p> 
        <p>Problem reproduces with redhat kernel ― RHEL 5.6 with 2.6.18-2xx kernels</p> 
        <p>Please review the following Note to change the location of your voting disk<br /> Note 428681.1<br /> Title: How to ADD/REMOVE/REPLACE/MOVE Oracle Cluster Registry (OCR) and Voting Disk</p> 
        <p>Pasting info from ―<br /> Oracle? Clusterware Administration and Deployment Guide<br /> 11g Release 2 (11.2)</p> 
        <p>3 Managing Oracle Cluster Registry and Voting Disks<br /> Oracle Universal Installer for Oracle Clusterware 11g release 2 (11.2), does not support the use of raw or block devices. However, if you upgrade from a previous Oracle Clusterware release, then you can continue to use raw or block devices.</p> 
        <p>[oracrs@vrh8 grid]$ grep fail cluvfy_during_inst_061711.log<br /> /tmp l118464lwap1049 /tmp 706MB 1GB failed<br /> Result: Free disk space check failed for “l118464lwap1049:/tmp”<br /> /tmp vrh8 /tmp 927.1312MB 1GB failed<br /> Result: Free disk space check failed for “vrh8:/tmp”<br /> Result: Check for multiple users with UID value 0 failed<br /> PRVF-5431 : Oracle Cluster Voting Disk configuration check failed</p> 
        <p>[oracrs@vrh8 grid]$ ./runcluvfy.sh stage -pre crsinst -n vrh8,l118464lwap1049 -verbose|tee cluvfy_during_inst.log</p> 
        <p>Please upload the following Cluvfy trace log ―<br /> $ORA_CRS_HOME/cv/log/cvutrace.log.0</p> 
        <p>Please download the latest CVU from OTN:<br /> http://www.oracle.com/technetwork/database/clustering/downloads/cvu-download-homepage-099973.html</p> 
        <p>Please upload<br /> /s02/app/crs/11.2.0.2/log/vrh8/agent/ohasd/oraagent_oracrs/oraagent_oracrs.log</p> 
        <p>In addition pls upload<br /> /s02/app/crs/11.2.0.2/log/vrh8/agent/ohasd/oracssdagent_root/oracssdagent_root.log</p> 
        <p>Please run this command on both the new setup and your existing production setup for a quick comparison ―<br /> rpm -qa|grep ocfs2</p> 
        <p>Server with issue:<br /> [root@vrh8 ohasd]# rpm -qa|grep ocfs2<br /> ocfs2console-1.4.4-1.el5<br /> ocfs2-tools-1.4.4-1.el5<br /> ocfs2-2.6.18-238.5.1.el5-1.4.7-1.el5</p> 
        <p>Prod:</p> 
        <p>[root@vrh9&nbsp; bin]# rpm -qa|grep ocfs2<br /> ocfs2-2.6.18-194.el5-1.4.7-1.el5<br /> ocfs2console-1.4.4-1.el5<br /> ocfs2-tools-1.4.4-1.el5<br /> ocfs2-2.6.18-194.8.1.el5-1.4.7-1.el5</p> 
        <p>[root@vrh8 ~]# uname -a<br /> Linux vrh8 2.6.18-238.5.1.el5 #1 SMP Mon Feb 21 05:52:39 EST 2011 x86_64 x86_64 x86_64 GNU/Linux</p> 
        <p>[root@vrh8 ~]# cat /etc/redhat-release<br /> Red Hat Enterprise Linux Server release 5.6 (Tikanga)</p> 
        <p>rpm -qa|grep ocfs2<br /> ocfs2console-1.4.4-1.el5<br /> ocfs2-tools-1.4.4-1.el5<br /> ocfs2-2.6.18-238.5.1.el5-1.4.7-1.el5</p> 
        <p>@ . from Bug 11876815 (Doc ID 1321757.1)<br /> @ combinations that install SUCCESSFUL:<br /> @ .<br /> @ OEL5.4+ocfs2-1.4.7-1+ocfs2-tools-1.4.4<br /> @ OEL5.6+ocfs2-1.4.8-1+ocfs2-tools-1.6.3<br /> @ OEL5.6+ocfs2-1.4.7-1+ocfs2-tools-1.4.4<br /> @ RHLE5.6+OEL kernel(redhat compatible kernel)+ocfs2-1.4.8-1+ocfs2-tools-1.6.3<br /> @ RHLE5.6+OEL kernel(redhat compatible kernel)+ocfs2-1.4.7-1+ocfs2-tools-1.4.4<br /> @ RHEL5.4<br /> @ .<br /> @ combinations that failed:<br /> @ RHLE5.6(redhat kernel)+ocfs2-1.4.7-1+ocfs2-tools-1.4.4<br /> @ RHLE5.6(redhat kernel)+ocfs2-1.4.8-1+ocfs2-tools-1.6.3<br /> @ .<br /> @ .<br /> @ So that is clear that , it is redhat kernel’s problem.Since RHEL5.6 redhat<br /> @ provided 2.6.18-2xx kernels, we can’t fix redhat kernels, please use Oracle<br /> @ Enterprise kernel (redhat compatible) for installation.</p> 
        <p>As per last action plan (conveyed if any) you need to contact REDHAT support to know the cause of this issue. Workaround is to not use OCFS and go for raw device for upgrade to succeed.<br /> A Oracle bug 11876815 was logged internally for this hang issue and few combinations of OEL, RHEL, OCFS2 were tried and tested and the combination you are using has not worked for us too (per bug internal updates given above)<br /> The solution provided by Oracle bug developer is to use OEL and not RHEL or contact RHEL support for identifying the cause and solution (incase they have already tested this setup).<br /> Let me know if RHEL support is already engaged and provide the case id so that I can open internal SR for Oracle/Red Hat Joint Escalation Team (JET) Engagement for both vendors to work together internally.</p> 
        <p>+ the SR issue of grid upgrade from 11.1 to 11.2.0.2.2 is resolved<br /> C voting disk was moved from ocfs to raw device C as a workaround for Bug 11876815<br /> C set TMP and TEMP env to new dir with availabe space before running the installer and prechecks to succeed<br /> C applied GIPSU#2 before the rootupgrade.sh step<br /> C rootupgrade.sh step was successful on all nodes<br /> C verified post upgrade checks and logs to confirm GI upgrade was success !</p> 
        <p>+ DB upgrade to 11.2.0.2 Plus PSU#2 will be resumed shorlty</p> 
       </div>
       <div class="post-meta">
        <span class="categories">Filed Under: <a href="http://www.askmaclean.com/archives/category/oracle" rel="category tag">Oracle</a>, <a href="http://www.askmaclean.com/archives/category/oracle/oracle-11g" rel="category tag">Oracle 11g新特性</a>, <a href="http://www.askmaclean.com/archives/category/oracle/rac-oracle" rel="category tag">Oracle RAC</a></span> 
        <span class="tags">Tagged With: <a href="http://www.askmaclean.com/archives/tag/11-2" rel="tag">11.2</a>, <a href="http://www.askmaclean.com/archives/tag/crs" rel="tag">CRS</a>, <a href="http://www.askmaclean.com/archives/tag/gi" rel="tag">GI</a>, <a href="http://www.askmaclean.com/archives/tag/ocfs" rel="tag">OCFS</a>, <a href="http://www.askmaclean.com/archives/tag/oracle" rel="tag">Oracle</a>, <a href="http://www.askmaclean.com/archives/tag/bug" rel="tag">Oracle Bug</a>, <a href="http://www.askmaclean.com/archives/tag/raw" rel="tag">raw</a>, <a href="http://www.askmaclean.com/archives/tag/redhat" rel="tag">Redhat</a>, <a href="http://www.askmaclean.com/archives/tag/rootupgrade-sh" rel="tag">rootupgrade.sh</a>, <a href="http://www.askmaclean.com/archives/tag/upgrade" rel="tag">upgrade</a></span>
       </div>
      </div>
      <div class="post-1849 post type-post status-publish format-standard hentry category-oracle tag-database tag-ora tag-oracle tag-oracle-11g tag-physical tag-rac entry">
       <h2 class="entry-title"><a href="http://www.askmaclean.com/archives/oracle-11g%e4%b8%ad%e6%95%b0%e6%8d%ae%e5%ba%93%e8%83%bd%e6%9c%89%e5%a4%9a%e5%a4%a7%ef%bc%9f.html" rel="bookmark">Oracle 11g中数据库能有多大？</a></h2> 
       <div class="post-info">
        <span class="date published time" title="2010-08-29T14:54:20+00:00">2010/08/29</span> by 
        <span class="author vcard"><span class="fn"><a href="http://www.askmaclean.com/archives/author/admin" rel="author">Maclean Liu</a></span></span> 
        <span class="post-comments"><a href="http://www.askmaclean.com/archives/oracle-11g%e4%b8%ad%e6%95%b0%e6%8d%ae%e5%ba%93%e8%83%bd%e6%9c%89%e5%a4%9a%e5%a4%a7%ef%bc%9f.html#respond"><span class="ds-thread-count" data-thread-key="1849" data-replace="1">Leave a Comment</span></a></span> 
       </div>
       <div class="entry-content">
        <p>根据11g release 2文档《Oracle&reg; Database Reference 11g Release 2 (11.2)》，我们可以计算出11g中数据库大小的一个理论极限:</p> 
        <h1 id="insertedID0">Physical Database Limits</h1> 
        <table title="Physical Database Limits" dir="ltr" border="1" cellspacing="0" cellpadding="3" width="100%" frame="hsides" rules="groups" summary="This table is described in the preceding text"> 
         <colgroup>
          <col width="22%" />
         </colgroup> 
         <colgroup>
          <col width="29%" />
         </colgroup> 
         <colgroup>
          <col width="*" />
         </colgroup> 
         <thead> 
          <tr align="left" valign="top"> 
           <th id="r1c1-t5" align="left" valign="bottom">Item</th> 
           <th id="r1c2-t5" align="left" valign="bottom">Type of Limit</th> 
           <th id="r1c3-t5" align="left" valign="bottom">Limit Value</th> 
          </tr> 
         </thead> 
         <tbody> 
          <tr align="left" valign="top"> 
           <td id="r2c1-t5" align="left">Database Block Size</td> 
           <td align="left">Minimum</td> 
           <td align="left"><code>2048</code> bytes; must be a multiple of operating system physical block size</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r3c1-t5" align="left">Database Block Size</td> 
           <td align="left">Maximum</td> 
           <td align="left">Operating system dependent; never more than <code>32</code> KB</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r4c1-t5" align="left">Database Blocks</td> 
           <td align="left">Minimum in initial extent of a segment</td> 
           <td align="left">2 blocks</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r5c1-t5" align="left">Database Blocks</td> 
           <td align="left">Maximum per datafile</td> 
           <td align="left">Platform dependent; typically 2<sup>22</sup> C 1 blocks</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r6c1-t5" align="left">Controlfiles</td> 
           <td align="left">Number of control files</td> 
           <td align="left"><code>1</code> minimum; <code>2</code> or more (on separate devices) strongly recommended</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r7c1-t5" align="left">Controlfiles</td> 
           <td align="left">Size of a control file</td> 
           <td align="left">Dependent on operating system and database creation options; maximum of <code>20,000</code> x (database block size)</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r8c1-t5" align="left">Database files</td> 
           <td align="left">Maximum per tablespace</td> 
           <td align="left">Operating system dependent; usually <code>1022</code></td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r9c1-t5" align="left">Database files</td> 
           <td align="left">Maximum per database</td> 
           <td align="left">65533<p></p> <p>May be less on some operating systems</p> <p>Limited also by size of database blocks and by the <code>DB_FILES</code> initialization parameter for a particular instance</p></td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r10c1-t5" align="left">Database extents</td> 
           <td align="left">Maximum per dictionary managed tablespace</td> 
           <td align="left"><code>4</code> GB * physical block size (with K/M modifier); <code>4</code> GB (without K/M modifier)</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r11c1-t5" align="left">Database extents</td> 
           <td align="left">Maximum per locally managed (uniform) tablespace</td> 
           <td align="left"><code>2</code> GB * physical block size (with K/M modifier); <code>2</code> GB (without K/M modifier)</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r12c1-t5" align="left">Database file size</td> 
           <td align="left">Maximum</td> 
           <td align="left">Operating system dependent. Limited by maximum operating system file size; typically 2<sup>22</sup> or <code>4</code> MB blocks</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r13c1-t5" align="left"><code>MAXEXTENTS</code></td> 
           <td align="left">Default value</td> 
           <td align="left">Derived from tablespace default storage or <code>DB_BLOCK_SIZE</code> initialization parameter</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r14c1-t5" align="left"><code>MAXEXTENTS</code></td> 
           <td align="left">Maximum</td> 
           <td align="left">Unlimited</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r15c1-t5" align="left">Redo Log Files</td> 
           <td align="left">Maximum number of logfiles</td> 
           <td align="left">Limited by value of <code>MAXLOGFILES</code> parameter in the <code>CREATE DATABASE</code> statementControl file can be resized to allow more entries; ultimately an operating system limit</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r16c1-t5" align="left">Redo Log Files</td> 
           <td align="left">Maximum number of logfiles per group</td> 
           <td align="left">Unlimited</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r17c1-t5" align="left">Redo Log File Size</td> 
           <td align="left">Minimum size</td> 
           <td align="left"><code>4 MB</code></td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r18c1-t5" align="left">Redo Log File Size</td> 
           <td align="left">Maximum Size</td> 
           <td align="left">Operating system limit; typically <code>2</code> GB</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r19c1-t5" align="left">Tablespaces</td> 
           <td align="left">Maximum number per database</td> 
           <td align="left"><code>64 K</code><p></p> <p>Number of tablespaces cannot exceed the number of database files because each tablespace must include at least one file</p></td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r20c1-t5" align="left">Bigfile Tablespaces</td> 
           <td align="left">Number of blocks</td> 
           <td align="left">A bigfile tablespace contains only one datafile or tempfile, which can contain up to approximately 4 billion ( 2<sup>32</sup> ) blocks. The maximum size of the single datafile or tempfile is 128 terabytes (TB) for a tablespace with 32 K blocks and 32 TB for a tablespace with 8 K blocks.</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r21c1-t5" align="left">Smallfile (traditional) Tablespaces</td> 
           <td align="left">Number of blocks</td> 
           <td align="left">A smallfile tablespace is a traditional Oracle tablespace, which can contain 1022 datafiles or tempfiles, each of which can contain up to approximately 4 million (2<sup>22</sup>) blocks.</td> 
          </tr> 
          <tr align="left" valign="top"> 
           <td id="r22c1-t5" align="left">External Tables file</td> 
           <td align="left">Maximum size</td> 
           <td align="left">Dependent on the operating system.An external table can be composed of multiple files.</td> 
          </tr> 
         </tbody> 
        </table> 
        <p>11g中当采用32 K块时单个表空间最大可以扩展到128 TB，而一个数据库最多拥有64 K个表空间，则可以得出单个数据库的理论最大值为128TB *64 K= 8192 PB= 8EB，该数据与Oracle 10g 数据库的容量持平，换而言之11g中数据库的容量并未增加。</p> 
        <p>Youtube视频网站一年产生的信息量大约在800TB，世界上1000强的公司所有数据库的总数据量约合1EB(平均一个公司1PB)，而64位可寻址内存的最大容量为16EB，理论上我们可以把所有这些少于8EB的信息存储到您的笔记本上安装的Oracle数据库中，而且可以将它们完全缓存到内存中以供读取。</p> 
        <p>在几年前没有人相信TB级别的数据库会在不久后普及，但是我们今天可以很自信地说随着TB级别的数据库不断涌现，无论从硬件角度或者软件角度支撑该数量级的数据库的solution都已经十分成熟了。</p> 
        <p>在11g未来的日子里，我们将注目于EB级数据库的出现！</p> 
       </div>
       <div class="post-meta">
        <span class="categories">Filed Under: <a href="http://www.askmaclean.com/archives/category/oracle" rel="category tag">Oracle</a></span> 
        <span class="tags">Tagged With: <a href="http://www.askmaclean.com/archives/tag/database" rel="tag">database</a>, <a href="http://www.askmaclean.com/archives/tag/ora" rel="tag">ORA</a>, <a href="http://www.askmaclean.com/archives/tag/oracle" rel="tag">Oracle</a>, <a href="http://www.askmaclean.com/archives/tag/oracle-11g" rel="tag">Oracle 11g新特性</a>, <a href="http://www.askmaclean.com/archives/tag/physical" rel="tag">physical</a>, <a href="http://www.askmaclean.com/archives/tag/rac" rel="tag">RAC</a></span>
       </div>
      </div>
      <div class="post-1808 post type-post status-publish format-standard hentry category-oracle tag-ora tag-oracle tag-rac entry">
       <h2 class="entry-title"><a href="http://www.askmaclean.com/archives/%e5%8f%91%e4%b8%80%e4%b8%aaoracle-dba%e6%8b%9b%e8%81%98%e5%90%af%e4%ba%8b.html" rel="bookmark">发一个Oracle Dba招聘启事</a></h2> 
       <div class="post-info">
        <span class="date published time" title="2010-08-28T22:39:31+00:00">2010/08/28</span> by 
        <span class="author vcard"><span class="fn"><a href="http://www.askmaclean.com/archives/author/admin" rel="author">Maclean Liu</a></span></span> 
        <span class="post-comments"><a href="http://www.askmaclean.com/archives/%e5%8f%91%e4%b8%80%e4%b8%aaoracle-dba%e6%8b%9b%e8%81%98%e5%90%af%e4%ba%8b.html#respond"><span class="ds-thread-count" data-thread-key="1808" data-replace="1">Leave a Comment</span></a></span> 
       </div>
       <div class="entry-content">
        <p>公司招聘初中级Oracle Dba。主要向客户提供oracle数据库技术支持服务。<br /> 工作地点在上海，具体薪资视乎应聘者的技术水平。</p> 
        <p>具体要求：<br /> 1.熟悉Oracle基础理论和知识，对Oracle技术有持久的兴趣<br /> 2.熟悉数据库常见错误和简单性能问题的诊断<br /> 3.不对经验作强制要求，当然有经验更佳<br /> 4.熟悉unix/solaris操作系统/存储等硬件环境者优先<br /> 5.拥有ocp证书者优先</p> 
        <p>如有意向，请将简历发至 liu.maclean@gmail.com<br /> 该职位长期招聘中！</p> 
       </div>
       <div class="post-meta">
        <span class="categories">Filed Under: <a href="http://www.askmaclean.com/archives/category/oracle" rel="category tag">Oracle</a></span> 
        <span class="tags">Tagged With: <a href="http://www.askmaclean.com/archives/tag/ora" rel="tag">ORA</a>, <a href="http://www.askmaclean.com/archives/tag/oracle" rel="tag">Oracle</a>, <a href="http://www.askmaclean.com/archives/tag/rac" rel="tag">RAC</a></span>
       </div>
      </div>
      <div class="post-1774 post type-post status-publish format-standard hentry category-oracle tag-database tag-internal-error tag-ora tag-ora-00600 tag-oracle tag-rac tag-sql tag-standby entry">
       <h2 class="entry-title"><a href="http://www.askmaclean.com/archives/database-force-open-example.html" rel="bookmark">Database Force open example</a></h2> 
       <div class="post-info">
        <span class="date published time" title="2010-08-27T21:53:37+00:00">2010/08/27</span> by 
        <span class="author vcard"><span class="fn"><a href="http://www.askmaclean.com/archives/author/admin" rel="author">Maclean Liu</a></span></span> 
        <span class="post-comments"><a href="http://www.askmaclean.com/archives/database-force-open-example.html#comments"><span class="ds-thread-count" data-thread-key="1774" data-replace="1">3 Comments</span></a></span> 
       </div>
       <div class="entry-content">
        <p>帮网友强制打开了一个没有备份的测试库，这个库没有备份也没有打开归档，因为之前也出现过active日志文件损毁，一直使用隐式参数才能正常打开:</p> 
        <pre class="brush:sql">                 _allow_resetlogs_corruption= TRUE
</pre> 
        <p>&nbsp;</p> 
        <h2><a href="http://www.parnassusdata.com/zh-hans/emergency-services" target="_blank">如果自己搞不定可以找诗檀软件专业ORACLE数据库修复团队成员帮您恢复!</a></h2> 
        <h2>诗檀软件专业数据库修复团队</h2> 
        <h2>服务热线 ： 13764045638&nbsp; &nbsp;QQ号:47079569 &nbsp; &nbsp;邮箱：service@parnassusdata.com</h2> 
        <p>&nbsp;</p> 
        <p>&nbsp;</p> 
        <p>这次一开始这个库报ORA-600[2662]错误:</p> 
        <pre class="brush:sql">Mon Aug 23 09:37:00 2010
Errors in file /oracle/QAS/saptrace/usertrace/qas_ora_852096.trc:
ORA-00600: internal error code, arguments: [2662], [0], [130131504], [0], [130254136], [4264285], [], []
Mon Aug 23 09:37:02 2010
Errors in file /oracle/QAS/saptrace/usertrace/qas_ora_852096.trc:
ORA-00600: internal error code, arguments: [2662], [0], [130131506], [0], [130254136], [4264285], [], []
</pre> 
        <p>ORA-600 [2662] “Block SCN is ahead of Current SCN”错误是当数据块中的SCN领先于current SCN，由于后台进程或服务进程都会比对UGA中的dependent SCN和数据库当前的SCN，如果数据库当前SCN小于dependent SCN，那么该进程就会报ORA-600 [2662]错误，如果遭遇该错误的是服务进程，那么服务进程一般会异常终止；如果遭遇该错误的是后台进程譬如SMON,则会导致实例CRASH。<br /> ORA-600 [2662]错误可以能由以下几种情况引起:<br /> 1.启用隐含参数_ALLOW_RESETLOGS_CORRUPTION后，以resetlogs形式打开数据库；这种情况下发生2662错误，根本原因是没有完全前滚导致控制文件中的SCN滞后于数据块中的SCN。<br /> 2.硬件故障导致数据库没法写控制文件和联机日志文件<br /> 3.错误的部分恢复数据库<br /> 4.恢复了控制文件，但是没有使用recover database using backup controlfile进行恢复<br /> 5.数据库crash后设置了_DISABLE_LOGGING隐含参数<br /> 6.在并行服务器环境中DLM存在问题</p> 
        <p>该错误的5个参数的具体含义如下:<br /> ARGUMENTS:<br /> Arg [a] Current SCN WRAP<br /> Arg [b] Current SCN BASE<br /> Arg [c] dependent SCN WRAP<br /> Arg [d] dependent SCN BASE<br /> Arg [e] Where present this is the DBA where the dependent SCN came from.</p> 
        <p>我们的case当中dependent SCN为130254136，而当前SCN为130131506，其差值为122630；从以上告警日志中可以看到数据库的当前SCN是在不断缓慢增长的，当我们遭遇到2662错误时，很滑稽的一点是只要不断重启数据库保持current SCN的增长，一段时间后2662错误会不药而愈。当然我们也可以不用这种笨办法，10015事件可以帮助我们调整数据库当前SCN:</p> 
        <pre class="brush:sql">/* 当数据库处于mount状态，可以使用10015事件来调整scn */

alter session  set events '10015 trace name adjust_scn level 1';

/* 这里可以设置level 2..10等 (level 1是在每次打开数据库时scn增加1000k)*/

/* 需要注意的是10g某些版本不同于9i，需要设置隐式参数_allow_error_simulation，才能真正增进scn */

SQL&gt; select * from v$version;
BANNER
----------------------------------------------------------------
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bi
PL/SQL Release 10.2.0.4.0 - Production
CORE    10.2.0.4.0      Production
TNS for Linux: Version 10.2.0.4.0 - Production
NLSRTL Version 10.2.0.4.0 - Production

SQL&gt; col current_scn format 999,999,999,999

SQL&gt; select current_scn from v$database;
CURRENT_SCN
-----------
    1141408

SQL&gt; shutdown immediate;
Database closed.
Database dismounted.
ORACLE instance shut down.
SQL&gt; startup mount;
ORACLE instance started.

Total System Global Area 1653518336 bytes
Fixed Size                  2213896 bytes
Variable Size             989857784 bytes
Database Buffers          654311424 bytes
Redo Buffers                7135232 bytes
Database mounted.

SQL&gt; alter session set events '10015 trace name adjust_scn level 1';
Session altered.

SQL&gt; alter database open;
Database altered.

SQL&gt;  select current_scn from v$database;
CURRENT_SCN
-----------
    1142031

/* 可以看到current_scn并未大量增加，10.2.0.4上默认10015 adjust_scn不被触发 */

SQL&gt;  alter system set &quot;_allow_error_simulation&quot;=true scope=spfile;
System altered.

SQL&gt; shutdown immediate;
Database closed.
Database dismounted.
ORACLE instance shut down.

SQL&gt; startup mount;
ORACLE instance started.
Total System Global Area 1653518336 bytes
Fixed Size                  2213896 bytes
Variable Size             989857784 bytes
Database Buffers          654311424 bytes
Redo Buffers                7135232 bytes
Database mounted.

SQL&gt; alter session set events '10015 trace name adjust_scn level 1';
Session altered.

SQL&gt; alter database open;
Database altered.

SQL&gt;select current_scn from v$database;
     CURRENT_SCN
----------------
   1,073,741,980
</pre> 
        <p>在接手之前该网友已经通过反复重启数据库将数据库的当前SCN提高到dependent SCN的127037138；原以为这样就可以打开数据库了，谁知道又出现了一下错误:</p> 
        <pre class="brush:sql">Wed Aug 25 07:43:53 2010
Errors in file /oracle/QAS/saptrace/usertrace/qas_ora_929958.trc:
ORA-00600: internal error code, arguments: [4000], [8], [], [], [], [], [], []
Wed Aug 25 07:43:53 2010
Errors in file /oracle/QAS/saptrace/usertrace/qas_ora_929958.trc:
ORA-00704: bootstrap process failure
ORA-00704: bootstrap process failure
ORA-00600: internal error code, arguments: [4000], [8], [], [], [], [], [], []
Wed Aug 25 07:43:53 2010
Error 704 happened during db open, shutting down database
</pre> 
        <p>bootstrap自举过程中遭遇了ORA-600 [4000]错误，该错误一般当Oracle尝试读取数据字典(主要是undo$基表)中记录的USN对应的回滚段失败引起.，通过设置隐式参数_corrupted_rollback_segments可以一定程度上规避该错误，强制打开数据库,其Argument[a]代表造成读取失败的USN(undo segment number)，但实际上有问题的回滚段可能不止这一个:</p> 
        <pre class="brush:sql">/* 通过strings工具从system表空间上找回各回滚段的名字  */
$strings system.dbf |grep _SYSSMU|less
_SYSSMU1$
_SYSSMU2$
_SYSSMU3$
_SYSSMU4$
_SYSSMU5$
_SYSSMU6$
_SYSSMU7$
_SYSSMU8$
_SYSSMU9$
.........
alter system set &quot;_corrupted_rollback_segments&quot;='(_SYSSMU1$, _SYSSMU2$, _SYSSMU3$, _SYSSMU4$, _SYSSMU5$, _SYSSMU6$, _SYSSMU7$, _SYSSMU8$, _SYSSMU9$, _SYSSMU10$, _SYSSMU11$, _SYSSMU12$)' scope=spfile;
System altered.

/* 即便设置了_corrupted_rollback_segments隐式参数，也还有一定概率遭遇4000错误，尝试加上10513事件，并多次重启数据库 */

SQL&gt; alter system set event='10513 trace name context forever,level 2' scope=spfile;
System altered.

/* 再次出现4000 错误 */
Errors in file /oracle/QAS/saptrace/usertrace/qas_ora_1016014.trc:
ORA-00600: internal error code, arguments: [4000], [8], [], [], [], [], [], []
Thu Aug 26 09:43:39 2010
Errors in file /oracle/QAS/saptrace/usertrace/qas_ora_1016014.trc:
ORA-00704: bootstrap process failure
ORA-00704: bootstrap process failure
ORA-00600: internal error code, arguments: [4000], [8], [], [], [], [], [], []
Thu Aug 26 09:43:39 2010
Error 704 happened during db open, shutting down database

/* 再次重启后发现4000错误不再出现 * /
</pre> 
        <p>再次重启发现不再出现ORA-600[4000]错误，但在字典检查阶段Oracle认为数据文件227不匹配于当前的incarnation:</p> 
        <pre class="brush:sql">Thu Aug 26 11:13:22 2010
Dictionary check beginning
Thu Aug 26 09:46:00 2010
Errors in file /oracle/QAS/saptrace/usertrace/qas_ora_897162.trc:
ORA-01177: data file does not match dictionary - probably old incarnation
ORA-01110: data file 227: '/oracle/QAS/sapdata2/qas_192/qas.data196'
Error 1177 happened during db open, shutting down database
USER: terminating instance due to error 1177
Instance terminated by USER, pid = 897162
</pre> 
        <p>初步判断出现ORA-01177可能为2种可能性:<br /> 1.数据字典出现讹误，227号文件对应的incarnation信息不正确<br /> 2.在之前的某次resetlogs open过程中，227号文件头由于某些原因没有正确更新incarnation信息</p> 
        <p>针对这样的情况如果一定要找回该数据文件上的数据的话只能通过手动修改数据字典或文件头，当然也可以尝试使用一些直接从数据文件上抽取数据的工具。<br /> 因为这是一次友情协助，就没有继续深入下去，通过重建控制文件并跳过该数据文件解决了:</p> 
        <pre class="brush:sql">CREATE CONTROLFILE REUSE DATABASE &quot;QAS&quot; RESETLOGS  NOARCHIVELOG
--  SET STANDBY TO MAXIMIZE PERFORMANCE
    MAXLOGFILES 255
    MAXLOGMEMBERS 3
    MAXDATAFILES 254
    MAXINSTANCES 50
    MAXLOGHISTORY 36302
LOGFILE
  GROUP 1 (
    '/oracle/QAS/redolog/redolog11A.dbf',
    '/oracle/QAS/redolog/redolog11B.dbf'
  ) SIZE 500M,
  GROUP 2 (
    '/oracle/QAS/redolog/redolog12A.dbf',
    '/oracle/QAS/redolog/redolog12B.dbf'
  ) SIZE 500M
-- STANDBY LOGFILE
DATAFILE
  '/oracle/QAS/sapdata1/system_1/system.data1',
........
  '/oracle/QAS/sapdata2/qas_192/qas.data195'
CHARACTER SET WE8DEC
Thu Aug 26 14:04:50 2010
Successful mount of redo thread 1, with mount id 2117500093
Thu Aug 26 14:04:50 2010
Completed: CREATE CONTROLFILE REUSE DATABASE &quot;QAS&quot; RESETLOGS
Thu Aug 26 14:05:05 2010
alter database mount
Thu Aug 26 14:05:05 2010
ORA-1100 signalled during: alter database mount...
Thu Aug 26 14:05:15 2010
alter database open resetlogs
RESETLOGS is being done without consistancy checks. This may result
in a corrupted database. The database should be recreated.
RESETLOGS after incomplete recovery UNTIL CHANGE 1125281471596
Resetting resetlogs activation ID 0 (0x0)
Online log 1 of thread 1 was previously cleared
Thu Aug 26 14:05:36 2010
Assigning activation ID 2117500093 (0x7e367cbd)
Thread 1 opened at log sequence 1
  Current log# 2 seq# 1 mem# 0: /oracle/QAS/redolog/redolog12A.dbf
  Current log# 2 seq# 1 mem# 1: /oracle/QAS/redolog/redolog12B.dbf
Successful open of redo thread 1
Thu Aug 26 14:05:36 2010
SMON: enabling cache recovery
Thu Aug 26 14:05:36 2010
Dictionary check beginning
Tablespace 'PSAPTEMP' #2 found in data dictionary,
but not in the controlfile. Adding to controlfile.
File #227 found in data dictionary but not in controlfile.
Creating OFFLINE file 'MISSING00227' in the controlfile.
This file can no longer be recovered so it must be dropped.
File #228 found in data dictionary but not in controlfile.
Creating OFFLINE file 'MISSING00228' in the controlfile.
This file can no longer be recovered so it must be dropped.
File #229 found in data dictionary but not in controlfile.
Creating OFFLINE file 'MISSING00229' in the controlfile.
This file can no longer be recovered so it must be dropped.
Dictionary check complete
Thu Aug 26 14:05:38 2010
SMON: enabling tx recovery
Thu Aug 26 14:05:38 2010
Database Characterset is WE8DEC
replication_dependency_tracking turned off (no async multimaster replication found)
Completed: alter database open resetlogs
</pre> 
        <h3><span style="color: #ff0000;">这个case告诉我们，测试库并不一定就不重要，测试库也是需要备份的。</span></h3> 
       </div>
       <div class="post-meta">
        <span class="categories">Filed Under: <a href="http://www.askmaclean.com/archives/category/oracle" rel="category tag">Oracle</a></span> 
        <span class="tags">Tagged With: <a href="http://www.askmaclean.com/archives/tag/database" rel="tag">database</a>, <a href="http://www.askmaclean.com/archives/tag/internal-error" rel="tag">internal error</a>, <a href="http://www.askmaclean.com/archives/tag/ora" rel="tag">ORA</a>, <a href="http://www.askmaclean.com/archives/tag/ora-00600" rel="tag">ora-00600</a>, <a href="http://www.askmaclean.com/archives/tag/oracle" rel="tag">Oracle</a>, <a href="http://www.askmaclean.com/archives/tag/rac" rel="tag">RAC</a>, <a href="http://www.askmaclean.com/archives/tag/sql" rel="tag">sql</a>, <a href="http://www.askmaclean.com/archives/tag/standby" rel="tag">standby</a></span>
       </div>
      </div>
      <div class="post-1761 post type-post status-publish format-standard hentry category-oracle tag-database tag-ora tag-oracle tag-rac tag-sql entry">
       <h2 class="entry-title"><a href="http://www.askmaclean.com/archives/sga_max_sizesga_target%e4%bb%a5%e5%8f%8apre_page_sga%e5%8f%82%e6%95%b0.html" rel="bookmark">SGA_MAX_SIZE,SGA_TARGET以及PRE_PAGE_SGA参数</a></h2> 
       <div class="post-info">
        <span class="date published time" title="2010-08-26T19:54:54+00:00">2010/08/26</span> by 
        <span class="author vcard"><span class="fn"><a href="http://www.askmaclean.com/archives/author/admin" rel="author">Maclean Liu</a></span></span> 
        <span class="post-comments"><a href="http://www.askmaclean.com/archives/sga_max_sizesga_target%e4%bb%a5%e5%8f%8apre_page_sga%e5%8f%82%e6%95%b0.html#comments"><span class="ds-thread-count" data-thread-key="1761" data-replace="1">4 Comments</span></a></span> 
       </div>
       <div class="entry-content">
        <p>10g引入ASMM后SGA_TARGET取代shared_pool_size,db_cache_size等参数，成为DBA关注的主要SGA内存管理参数；有不少情况下SGA_TARGET参数会设置为一个小于SGA_MAX_SIZE的值(这样做在多实例情况下更具灵活性)。但不少人会问，这样岂不是要浪费一部分物理内存吗？Oracle会为实例分配SGA_MAX_SIZE大小的内存的，SGA_TARGET要设得和SGA_MAX_SIZE一样大才合理啊！</p> 
        <p>让我们来看看实际的情况:</p> 
        <pre class="brush:sql">SQL&gt; select * from v$version;
BANNER
----------------------------------------------------------------
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bi
PL/SQL Release 10.2.0.4.0 - Production
CORE    10.2.0.4.0      Production
TNS for Linux: Version 10.2.0.4.0 - Production
NLSRTL Version 10.2.0.4.0 - Production

/*  linux上的10.2.0.4  */

SQL&gt; show parameter sga
NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
lock_sga                             boolean     FALSE
pre_page_sga                         boolean     FALSE
sga_max_size                         big integer 3600M
sga_target                           big integer 368M

SQL&gt; col component for a25;
SQL&gt; select component, current_size / 1024 / 1024, last_oper_type
  2    from v$sga_dynamic_components
  3   where current_size != 0;

COMPONENT                 CURRENT_SIZE/1024/1024 LAST_OPER_TYP
------------------------- ---------------------- -------------
shared pool                                   96 STATIC
large pool                                    16 STATIC
java pool                                     16 STATIC
DEFAULT buffer cache                         224 INITIALIZING

/* 此时的SGA_TARGET为368M，而SGA_MAX_SIZE为3600M */

/* 我们来看一下实际的物理内存使用情况  */

/* 以root用户登录，因为我们需要用到清理文件系统缓存的命令 */

[maclean@rh2 ~]$ su - root
Password:

[root@rh2 ~]# sync
[root@rh2 ~]# sync

/* sync 命令用以写出文件系统脏缓存，类似于Oracle的checkpoint手动检查点 */

[root@rh2 ~]# echo 3 &gt; /proc/sys/vm/drop_caches
[root@rh2 ~]# echo 3 &gt; /proc/sys/vm/drop_caches

/*  将proc文件系统下的drop_caches文件置为3，清理文件系统缓存，以免其干扰我们的实验 */

[root@rh2 ~]# free
             total       used       free     shared    buffers     cached
Mem:       4046352     429328    3617024          0        296     176100
-/+ buffers/cache:     252932    3793420
Swap:     10241428          0   10241428

/*  4g内存中仅有419M处于使用状态，其他均为free。可见Oracle没有为实例分配大小等于SGA_MAX_SIZE的内存空间，而接近于SGA_TARGET_SIZE的大小 */
[root@rh2 ~]# ps -ef|grep pmon|grep -v grep
maclean   6361     1  0 18:35 ?        00:00:00 ora_pmon_YOUYUS

[root@rh2 ~]# pmap -x 6361
6361:   ora_pmon_YOUYUS
Address           Kbytes     RSS   Dirty Mode   Mapping
0000000000400000  100412    7300       0 r-x--  oracle
000000000680f000     544     180      64 rwx--  oracle
0000000006897000     148     104     104 rwx--    [ anon ]
000000001e9d0000     672     532     532 rwx--    [ anon ]
0000000060000000 3688448    1044     388 rwxs-    [ shmid=0x390005 ]

/* 利用pmap工具探测Oracle后台进程的内存地址空间，可以看到这里虚拟共享内存段(也就是SGA)的大小为3602M */

[root@rh2 ~]# ipcs -m

------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status
0x74018366 3112960    root      600        4          0
0x00000000 3473409    root      644        80         2
0x74018365 3080194    root      600        4          0
0x00000000 3506179    root      644        16384      2
0x00000000 3538948    root      644        280        2
0x1cdd16e8 3735557    maclean   640        3776970752 15

/* 使用ipcs 命令也可以观察到这个大小为3602M的共享内存段 */

/* 可以猜测Oracle在这里使用malloc函数或类似的方法实现虚拟内存的分配，没有像calloc函数那样对空间中的每一位都初始为0,保证了不浪费物理内存  */

/*  我们动态修改SGA_TARGET参数来看看*  /

SQL&gt; alter system set sga_target=3000M;

System altered.

SQL&gt; select component, current_size / 1024 / 1024, last_oper_type
  2    from v$sga_dynamic_components
  3   where current_size != 0;

COMPONENT                 CURRENT_SIZE/1024/1024 LAST_OPER_TYP
------------------------- ---------------------- -------------
shared pool                                   96 STATIC
large pool                                    16 STATIC
java pool                                     16 STATIC
DEFAULT buffer cache                        2864 INITIALIZING

/*   BUFFER_CACHE 的空间大幅增加 * /

SQL&gt; !free
             total       used       free     shared    buffers     cached
Mem:       4046352    3187784     858568          0        536    2889920
-/+ buffers/cache:     297328    3749024
Swap:     10241428          0   10241428

/* used mem部分上升到3113M，随着SGA_TARGET的动态增长而增长了 */

/* 如果我们改小SGA_TARGET呢？ */

SQL&gt; alter system set sga_target=368M;

System altered.

SQL&gt; select component, current_size / 1024 / 1024, last_oper_type
  2    from v$sga_dynamic_components
  3   where current_size != 0;

COMPONENT                 CURRENT_SIZE/1024/1024 LAST_OPER_TYP
------------------------- ---------------------- -------------
shared pool                                   96 STATIC
large pool                                    16 STATIC
java pool                                     16 STATIC
DEFAULT buffer cache                         224 SHRINK

/* 可以看到BUFFER CACHE最近执行了SHRINK收缩操作，SIZE下降到224M */

QL&gt; !free
             total       used       free     shared    buffers     cached
Mem:       4046352    3204608     841744          0       1596    2912888
-/+ buffers/cache:     290124    3756228
Swap:     10241428          0   10241428

/* 此时OS层仍认为used memory部分为3130M;但可以放心，它们是可被其他进程复用的  * /
</pre> 
        <p>官方对pre_page_sga参数的定义是”PRE_PAGE_SGA determines whether Oracle reads the entire SGA into memory at instance startup. Operating system page table entries are then prebuilt for each page of the SGA. This setting can increase the amount of time necessary for instance startup, but it is likely to decrease the amount of time necessary for Oracle to reach its full performance capacity after startup.” 它决定Oracle是否在启动阶段将整个SGA读入内存，实际上在启动阶段SGA的内容是十分稀疏的，当pre_page_sga为TRUE时Oracle所要做的是向OS所要SGA_MAX_SIZE大小的实际物理页。</p> 
        <p>我们来看一下这个参数的实际效果:</p> 
        <pre class="brush:sql">SQL&gt; alter system set sga_max_size=2500M scope=spfile;
System altered.

SQL&gt; alter system set pre_page_sga=true scope=spfile;
System altered.

SQL&gt; startup force ;
ORACLE instance started.

Total System Global Area 2634022912 bytes
Fixed Size                  2086288 bytes
Variable Size            2382367344 bytes
Database Buffers          234881024 bytes
Redo Buffers               14688256 bytes
Database mounted.
Database opened.

[root@rh2 ~]# echo 3 &gt; /proc/sys/vm/drop_caches

SQL&gt; show parameter sga

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
lock_sga                             boolean     FALSE
pre_page_sga                         boolean     TRUE
sga_max_size                         big integer 2512M
sga_target                           big integer 368M

SQL&gt; !free
             total       used       free     shared    buffers     cached
Mem:       4046352    2895256    1151096          0        648    2623692
-/+ buffers/cache:     270916    3775436
Swap:     10241428     104936   10136492

/*  设置pre_page_sga参数为true后，Oracle实际分配的物理内存不再局限于SGA_TARGET，而是在实例生命周期内几乎恒等于SGA_MAX_SIZE指定的值了 * /

/*  当SGA_TARGET配合pre_page_sga使用时，这的确可能造成一种浪费 ! * /
</pre> 
        <h2><span style="color: #ff0000;">10g中Oracle已经强烈不建议使用pre_page_sga参数了，在ASMM下它带来的问题可不小!</span></h2> 
       </div>
       <div class="post-meta">
        <span class="categories">Filed Under: <a href="http://www.askmaclean.com/archives/category/oracle" rel="category tag">Oracle</a></span> 
        <span class="tags">Tagged With: <a href="http://www.askmaclean.com/archives/tag/database" rel="tag">database</a>, <a href="http://www.askmaclean.com/archives/tag/ora" rel="tag">ORA</a>, <a href="http://www.askmaclean.com/archives/tag/oracle" rel="tag">Oracle</a>, <a href="http://www.askmaclean.com/archives/tag/rac" rel="tag">RAC</a>, <a href="http://www.askmaclean.com/archives/tag/sql" rel="tag">sql</a></span>
       </div>
      </div>
      <div class="post-1740 post type-post status-publish format-standard hentry category-oracle tag-database tag-ora tag-oracle tag-oracle-11g tag-bug tag-rac tag-sql entry">
       <h2 class="entry-title"><a href="http://www.askmaclean.com/archives/undo-backup-optimization-does-not-work-on-11-2-0-1.html" rel="bookmark">undo backup optimization does not work on 11.2.0.1?</a></h2> 
       <div class="post-info">
        <span class="date published time" title="2010-08-25T20:36:16+00:00">2010/08/25</span> by 
        <span class="author vcard"><span class="fn"><a href="http://www.askmaclean.com/archives/author/admin" rel="author">Maclean Liu</a></span></span> 
        <span class="post-comments"><a href="http://www.askmaclean.com/archives/undo-backup-optimization-does-not-work-on-11-2-0-1.html#comments"><span class="ds-thread-count" data-thread-key="1740" data-replace="1">2 Comments</span></a></span> 
       </div>
       <div class="entry-content">
        <p>Backup Undo Optimization是11g的新特性之一，RMAN将避免备份撤销表空间上那些已提交事务的撤销数据。且该特性无法被禁用(You can enable and disable backup optimization, but backup undo optimization is built-in behavior.)。</p> 
        <p>我们在11.2.0.1版本上具体测试一下这个新特性:</p> 
        <pre class="brush:sql">SQL&gt; select * from v$version;
BANNER
--------------------------------------------------------------------------------
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
PL/SQL Release 11.2.0.1.0 - Production
CORE    11.2.0.1.0      Production
TNS for Linux: Version 11.2.0.1.0 - Production
NLSRTL Version 11.2.0.1.0 - Production

/*  为了避免undo自动调优干扰我们的测试，修改_undo_autotune参数禁用该特性 */

SQL&gt; alter system set &quot;_undo_autotune&quot;=false;
System altered.

/* 创建一个新的undo表空间，清理现场 */
SQL&gt; create undo tablespace UNDOTEST datafile size 500M autoextend on next 50M maxsize unlimited;
Tablespace created.

SQL&gt; alter system set undo_tablespace=UNDOTEST;
System altered.

/* 列出相关的undo参数，可以看到这里undo_retention参数设为极短的10s */

SQL&gt; show parameter undo;
NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
_undo_autotune                       boolean     FALSE
undo_management                      string      AUTO
undo_retention                       integer     10
undo_tablespace                      string      UNDOTEST

RMAN&gt; list backup;

specification does not match any backup in the repository

RMAN&gt; backup tablespace UNDOTEST;

RMAN&gt; list backup of tablespace UNDOTEST;

BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
4       Full    1.90M      DISK        00:00:00     25-AUG-10

/* undo表空间初始的备份大小为1.9M  */

SQL&gt; conn maclean/maclean
Connected.

SQL&gt; select count(*) from YOUYUS;
  COUNT(*)
----------
    579808

/* YOUYUS表有大约60万条数据，我们批量删除这些数据，将产生大量的undo*/

SQL&gt; delete YOUYUS;
579808 rows deleted.

/*  此时再次执行备份undo表空间操作 */

RMAN&gt; backup tablespace UNDOTEST;

RMAN&gt;  list backup of tablespace UNDOTEST;

BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
5       Full    134.43M    DISK        00:00:03     25-AUG-10

/*  在存在大量active undo数据的情况下，备份文件增大到134M */

SQL&gt; commit;
Commit complete.

SQL&gt; exec dbms_lock.sleep(20);
PL/SQL procedure successfully completed.

SQL&gt; select status,sum(blocks) from dba_undo_extents group by status;
STATUS    SUM(BLOCKS)
--------- -----------
UNEXPIRED        2696
EXPIRED         32936

/* commit后等待20s,确定没有active的撤销段 */

RMAN&gt; backup tablespace UNDOTEST;

RMAN&gt; list backup of tablespace UNDOTEST;
BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
6       Full    134.49M    DISK        00:00:02     25-AUG-10

/* 备份文件还要大于commit前，undo backup optimization居然没有起作用？ */

/* 这个会是BUG吗？ */
</pre> 
        <p>根据以上情况我提交了SR，ORACLE GCS给出的回复:</p> 
        <blockquote>
         <p>Bug 6399468: UNDO OPTIMIZATION<br /> ====&gt; Undo optimization was changed from ‘all undo not needed’ to ‘undo not in use older than 1 hour’<br /> In unpublished bug 6399468 DEV has confirmed the Undo optimization was changed from ‘all undo not needed’ to ‘undo not in use older than 1 hour’. For your last test case please wait for 1 hour and try backup again.</p>
        </blockquote> 
        <p>居然又是一个unpublished的BUG，Oracle DEV部门确认了backup undo optimization所避免备份的是1个小时以上未被尝试使用的undo，而非所有不再需要的undo。这是典型的开发部门和文档撰写部门间没有充分交流造成的问题！</p> 
        <pre class="brush:sql">/* 尝试等待3600s */

SQL&gt; exec dbms_lock.sleep(3600);
PL/SQL procedure successfully completed.

/* 3600s还真漫长....... */

RMAN&gt; backup tablespace UNDOTEST;

RMAN&gt; list backup of tablespace UNDOTEST;
BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
10      Full    15.01M     DISK        00:00:00     25-AUG-10

/* 备份集缩小到15m,undo backup optimization起到了作用！*/

That's great!
</pre> 
       </div>
       <div class="post-meta">
        <span class="categories">Filed Under: <a href="http://www.askmaclean.com/archives/category/oracle" rel="category tag">Oracle</a></span> 
        <span class="tags">Tagged With: <a href="http://www.askmaclean.com/archives/tag/database" rel="tag">database</a>, <a href="http://www.askmaclean.com/archives/tag/ora" rel="tag">ORA</a>, <a href="http://www.askmaclean.com/archives/tag/oracle" rel="tag">Oracle</a>, <a href="http://www.askmaclean.com/archives/tag/oracle-11g" rel="tag">Oracle 11g新特性</a>, <a href="http://www.askmaclean.com/archives/tag/bug" rel="tag">Oracle Bug</a>, <a href="http://www.askmaclean.com/archives/tag/rac" rel="tag">RAC</a>, <a href="http://www.askmaclean.com/archives/tag/sql" rel="tag">sql</a></span>
       </div>
      </div>
      <div class="post-1704 post type-post status-publish format-standard hentry category-oracle tag-database tag-ora tag-oracle tag-bug tag-rac tag-sql entry">
       <h2 class="entry-title"><a href="http://www.askmaclean.com/archives/%e5%85%b3%e4%ba%8edatapump%e7%9a%84external_table%e6%a8%a1%e5%bc%8f.html" rel="bookmark">关于DataPump的external_table模式</a></h2> 
       <div class="post-info">
        <span class="date published time" title="2010-08-24T21:42:43+00:00">2010/08/24</span> by 
        <span class="author vcard"><span class="fn"><a href="http://www.askmaclean.com/archives/author/admin" rel="author">Maclean Liu</a></span></span> 
        <span class="post-comments"><a href="http://www.askmaclean.com/archives/%e5%85%b3%e4%ba%8edatapump%e7%9a%84external_table%e6%a8%a1%e5%bc%8f.html#comments"><span class="ds-thread-count" data-thread-key="1704" data-replace="1">4 Comments</span></a></span> 
       </div>
       <div class="entry-content">
        <p>在pre10g的很长时间内，Oracle仅提供exp/imp导入导出工具，虽然这2个实用程序十分有效(现在也是如此)，但因为它们受限于client/server模式工具自身的限制，以普通用户程序的身份来运转数以TB计的数据，其才不堪大用！DataPump是10g以后主推的数据抽取/导入工具，不同于exp/imp工具，DataPump是一个服务器端的实用程序，因为运行在服务器上故而DataPump进程可以直接访问数据文件与SGA(无需借shadow进程之手)，与exp/imp工具相比使用DataPump可以获得显著的性能改善。DataPump可以通过直接路径或外部表路径这两种方法导出数据；其中直接路径避开了数据库高速缓存。当使用直接路径模式抽取数据时，DataPump从磁盘直接读取数据文件，抽取和格式化文件内容，最后将内容写出到转储文件。该种模式和SGA交互等待少，其导入导出速度直接取决于数据库所在磁盘速度和cpu;因此，直接路径极为快速。</p> 
        <p>外部表路径模式将使用到数据库的高速缓存buffer cache，通过外部表路径方法导出数据时，DataPump使用普通的SELECT操作将数据块从数据文件中读入buffer cache，为了写出转储文件，数据会在缓存中被格式化。通过外部表路径导入数据时，DataPump根据转储文件的内容构造标准的插入语句，并且通过将数据块从数据文件读至缓存来执行这些语句，插入操作按照标准的样式在缓存中完成；如同任何普通DML操作一样，外部表路径也会同时产生撤销和重做。</p> 
        <p>DataPump自身会根据对象的复杂性作出使用直接路径还是外部表路径的选择；对于较复杂的对象(后文将列出)而言，为了分解复杂性而必须同SGA进行交互，此情况下Data Pump只能采用外部表模式。我们还可以通过使用access_method参数来控制其行为，当然这仅在我们确认Data Pump作出了错误选择时才有必要。</p> 
        <table style="height: 999px;" border="1" width="868" bgcolor="#008000"> 
         <tbody> 
          <tr> 
           <td bgcolor="#99cc00">若满足右列条件EXPDP将采用direct_path即直接路径模式</td> 
           <td width="568" bgcolor="#99cc00"><strong>表结构允许使用直接路径模式,举例而言：</strong><p></p> <p>表上没有启用针对SELECT操作的fine-grained access control</p> <p>非队列表(queue table)</p> <p>表上没有BFILE和opaque类型的列，或包含有opaque列的对象类型</p> <p>表上没有加密列</p> <p>表上没有被废弃的旧类型列</p> <p>若表上存在LONG或LONG RAW类型列，则此列只能是最后一列<br /> <strong>使用Expdp执行导出任务时没有为相关表指定QUERY, SAMPLE, or REMAP_DATA等参数</strong></p> <p><strong>需要导出的表或分区相对较少(多达250M)，亦或者表或分区其实很大，但导出任务无法工作在并行模式(未指定parallel参数，或parallel参数设置为1)</strong></p></td> 
          </tr> 
          <tr> 
           <td bgcolor="#99cc00">若满足右列条件EXPDP将采用external_table即外部表模式</td> 
           <td bgcolor="#99cc00"><strong>数据结构不满足在直接路径模式下抽取的条件，举例而言:</strong><p></p> <p>表上启用了针对SELECT操作的精细粒度控制</p> <p>队列表</p> <p>表上包含了BFILE或opaque类型列，或者包含有opaque列的对象类型</p> <p>表上存在加密列</p> <p>表上存在被废弃的旧类型列</p> <p>表上存在LONG或LONG RAW类型列，且不是最后列</p> <p><strong>数据结构满足使用直接路径模式的条件，但执行导出任务时相关表上指定了QUERY, SAMPLE, or REMAP_DATA等参数</strong></p> <p><strong>数据结构满足使用直接路径模式的条件，但相关的表或分区相对较大(大于250M)，此时并行SQL可以用来加速数据抽取</strong></p></td> 
          </tr> 
          <tr> 
           <td bgcolor="#99cc00">若满足右列条件IMPDP将采用direct_path即直接路径模式</td> 
           <td bgcolor="#99cc00"><strong>数据结构满足使用直接路径模式的条件，举例而言:</strong><p></p> <p>当导入某单一表分区时该分区表上没有建立全局索引，这一点也包括分区的对象表</p> <p>没有基于LOB列建立的域索引(domain index)</p> <p>非cluster表</p> <p>表上没有BFILE列或opaque类型列</p> <p>表上没有嵌入了opaque类型的VARRAY列</p> <p>表上没有加密列</p> <p>没有启用补全日志(Supplemental logging)且表上没有LOB类型列</p> <p>若导入表已预先建立了表建构，则需满足以下条件:</p> <p>表上没有激活的触发器 并且 若是分区表则应有索引 并且 表上上没有启用针对INSERT操作的精细粒度控制 并且 表上除去check类型约束不存在其他类型约束 并且 表上没有unique的索引</p> <p><strong>执行导入任务时没有为相关表指定QUERY, REMAP_DATA等参数</strong></p> <p><strong> </strong></p> <p><strong>需要导入的表或分区相对较小(少于250M)，或者表或分区其实很大，但无法以并行模式导入(未指定parallel参数或指定其为1)</strong></p></td> 
          </tr> 
          <tr> 
           <td bgcolor="#99cc00">若满足右列条件IMPDP将采用external_table即外部表路径</td> 
           <td bgcolor="#99cc00"><strong>当数据结构不满足在直接路径模式下导入的条件，举例而言:</strong><p></p> <p>当导入某单一表分区时该分区表上建有全局索引，这一点也包括分区的对象表</p> <p>表上有基于LOB列建立的域索引(domain index)</p> <p>cluster表</p> <p>表上有BFILE列或opaque类型列</p> <p>表上有嵌入了opaque类型的VARRAY列</p> <p>表上有加密列</p> <p>启用了补全日志且表上有至少一个LOB列</p> <p>若导入表已预先建立了表建构，且满足以下条件:</p> <p>表上有激活的触发器 或者</p> <p>是分区表且没有任何索引 或者</p> <p>表上启用了针对INSERT操作的精细粒度控制 或者</p> <p>表上除去check类型约束还还有其他类型约束 或者</p> <p>表上有unique的索引</p> <p><strong>执行导入任务时有为相关表指定QUERY, REMAP_DATA等参数</strong></p> <p><strong> </strong></p> <p><strong>数据结构满足使用直接路径模式的条件，但相关的表或分区相对较大(大于250M)，此时并行SQL可以用来加速数据导入</strong></p></td> 
          </tr> 
         </tbody> 
        </table> 
        <p>我们有必要深入了解一下外部表路径究竟是如何工作的:</p> 
        <pre class="brush:sql">SQL&gt; select * from v$version;
BANNER
----------------------------------------------------------------
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bi
PL/SQL Release 10.2.0.4.0 - Production
CORE    10.2.0.4.0      Production
TNS for Linux: Version 10.2.0.4.0 - Production
NLSRTL Version 10.2.0.4.0 - Production

SQL&gt; exec dbms_workload_repository.create_snapshot;
PL/SQL procedure successfully completed.

/*  执行expdp导出任务，TCACHE表大小为465M，这里显示指定了外部表路径 */

[maclean@rh2 ~]$ expdp maclean/maclean directory=dumps tables=TCACHE dumpfile=tcache1.dmp access_method=external_table
Export: Release 10.2.0.4.0 - 64bit Production on Tuesday, 24 August, 2010 20:31:48
Copyright (c) 2003, 2007, Oracle.  All rights reserved.
Connected to: Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
Starting &quot;MACLEAN&quot;.&quot;SYS_EXPORT_TABLE_07&quot;:  maclean/******** directory=dumps tables=TCACHE dumpfile=tcache1.dmp access_method=external_table
Estimate in progress using BLOCKS method...
Processing object type TABLE_EXPORT/TABLE/TABLE_DATA
Total estimation using BLOCKS method: 544 MB
Processing object type TABLE_EXPORT/TABLE/TABLE
Processing object type TABLE_EXPORT/TABLE/STATISTICS/TABLE_STATISTICS
. . exported &quot;MACLEAN&quot;.&quot;TCACHE&quot;                          465.6 MB 4999999 rows
Master table &quot;MACLEAN&quot;.&quot;SYS_EXPORT_TABLE_07&quot; successfully loaded/unloaded
******************************************************************************
Dump file set for MACLEAN.SYS_EXPORT_TABLE_07 is:
  /s01/dump/tcache1.dmp
Job &quot;MACLEAN&quot;.&quot;SYS_EXPORT_TABLE_07&quot; successfully completed at 20:32:18

/*  这次我们指定了并行度为4  */

[maclean@rh2 ~]$ expdp maclean/maclean directory=dumps tables=TCACHE dumpfile=tcache2.dmp,tcache3.dmp,tcache4.dmp,tcache5.dmp access_method=external_table parallel=4
Export: Release 10.2.0.4.0 - 64bit Production on Tuesday, 24 August, 2010 20:32:49
Copyright (c) 2003, 2007, Oracle.  All rights reserved.
Connected to: Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
Starting &quot;MACLEAN&quot;.&quot;SYS_EXPORT_TABLE_07&quot;:  maclean/******** directory=dumps tables=TCACHE dumpfile=tcache2.dmp,tcache3.dmp,tcache4.dmp,tcache5.dmp access_method=external_table parallel=4
Estimate in progress using BLOCKS method...
Processing object type TABLE_EXPORT/TABLE/TABLE_DATA
Total estimation using BLOCKS method: 544 MB
Processing object type TABLE_EXPORT/TABLE/TABLE
Processing object type TABLE_EXPORT/TABLE/STATISTICS/TABLE_STATISTICS
. . exported &quot;MACLEAN&quot;.&quot;TCACHE&quot;                          465.6 MB 4999999 rows
Master table &quot;MACLEAN&quot;.&quot;SYS_EXPORT_TABLE_07&quot; successfully loaded/unloaded
******************************************************************************
Dump file set for MACLEAN.SYS_EXPORT_TABLE_07 is:
  /s01/dump/tcache2.dmp
  /s01/dump/tcache3.dmp
  /s01/dump/tcache4.dmp
Job &quot;MACLEAN&quot;.&quot;SYS_EXPORT_TABLE_07&quot; successfully completed at 20:33:04

SQL&gt; exec dbms_workload_repository.create_snapshot;
PL/SQL procedure successfully completed.

SQL&gt; @?/rdbms/admin/awrrpt

接着我们分析该时段内的awr报告!

从AWR报告中，我们不难找到以下语句:
SQL ID 3qwsywpvtdyjp:
CREATE TABLE &quot;ET$088200010001&quot; ( &quot;OWNER&quot;, &quot;OBJECT_NAME&quot;, &quot;SUBOBJECT_NAME&quot;, &quot;OBJECT_ID&quot;, &quot;DATA_OBJECT_ID&quot;, &quot;OBJECT_TYPE&quot;, &quot;CREATED&quot;, &quot;LAST_DDL_TIME&quot;, &quot;TIMESTAMP&quot;, &quot;STATUS&quot;, &quot;TEMPORARY&quot;, &quot;GENERATED&quot;, &quot;SECONDARY&quot; ) ORGANIZATION EXTERNAL ( TYPE ORACLE_DATAPUMP DEFAULT DIRECTORY DUMPS ACCESS PARAMETERS (DEBUG =0 DATAPUMP INTERNAL TABLE &quot;MACLEAN&quot;.&quot;TCACHE&quot; JOB ( &quot;MACLEAN&quot;, &quot;SYS_EXPORT_TABLE_07&quot;, 1) WORKERID 1 PARALLEL 1 VERSION COMPATIBLE ENCRYPTPASSWORDISNULL ) LOCATION ('bogus.dat') ) PARALLEL 1 REJECT LIMIT UNLIMITED AS SELECT /*+ PARALLEL(KU$, 1) */ &quot;OWNER&quot;, &quot;OBJECT_NAME&quot;, &quot;SUBOBJECT_NAME&quot;, &quot;OBJECT_ID&quot;, &quot;DATA_OBJECT_ID&quot;, &quot;OBJECT_TYPE&quot;, &quot;CREATED&quot;, &quot;LAST_DDL_TIME&quot;, &quot;TIMESTAMP&quot;, &quot;STATUS&quot;, &quot;TEMPORARY&quot;, &quot;GENERATED&quot;, &quot;SECONDARY&quot; FROM RELATIONAL(&quot;MACLEAN&quot;.&quot;TCACHE&quot; ) KU$

SQL ID 1rxax27p7anr3:
CREATE TABLE &quot;ET$088000020001&quot; ( &quot;OWNER&quot;, &quot;OBJECT_NAME&quot;, &quot;SUBOBJECT_NAME&quot;, &quot;OBJECT_ID&quot;, &quot;DATA_OBJECT_ID&quot;, &quot;OBJECT_TYPE&quot;, &quot;CREATED&quot;, &quot;LAST_DDL_TIME&quot;, &quot;TIMESTAMP&quot;, &quot;STATUS&quot;, &quot;TEMPORARY&quot;, &quot;GENERATED&quot;, &quot;SECONDARY&quot; ) ORGANIZATION EXTERNAL ( TYPE ORACLE_DATAPUMP DEFAULT DIRECTORY DUMPS ACCESS PARAMETERS (DEBUG =0 DATAPUMP INTERNAL TABLE &quot;MACLEAN&quot;.&quot;TCACHE&quot; JOB ( &quot;MACLEAN&quot;, &quot;SYS_EXPORT_TABLE_07&quot;, 1) WORKERID 2 PARALLEL 2 VERSION COMPATIBLE ENCRYPTPASSWORDISNULL ) LOCATION ('bogus.dat') ) PARALLEL 2 REJECT LIMIT UNLIMITED AS SELECT /*+ PARALLEL(KU$, 2) */ &quot;OWNER&quot;, &quot;OBJECT_NAME&quot;, &quot;SUBOBJECT_NAME&quot;, &quot;OBJECT_ID&quot;, &quot;DATA_OBJECT_ID&quot;, &quot;OBJECT_TYPE&quot;, &quot;CREATED&quot;, &quot;LAST_DDL_TIME&quot;, &quot;TIMESTAMP&quot;, &quot;STATUS&quot;, &quot;TEMPORARY&quot;, &quot;GENERATED&quot;, &quot;SECONDARY&quot; FROM RELATIONAL(&quot;MACLEAN&quot;.&quot;TCACHE&quot; ) KU$

以上就是Expdp在导出数据时使用的创建组织类型为ORACLE_DATAPUMP的外部表的SQL语句；后者语句中指定的并行度为2，而非我所指定的4，因该是Oracle考虑到所需导出表的具体大小，设置过高的并行度反而会适得其反，所以对设定值做了修正。
</pre> 
        <p><a href="http://www.askmaclean.com/wp-content/uploads/2010/08/sql_elapsed.jpg"><img class="alignnone size-full wp-image-1711" title="sql_elapsed" src="http://www.askmaclean.com/wp-content/uploads/2010/08/sql_elapsed.jpg" alt="" width="889" height="163" /></a></p> 
        <p><a href="http://www.askmaclean.com/wp-content/uploads/2010/08/sql_physical_read.jpg"><img class="alignnone size-full wp-image-1712" title="sql_physical_read" src="http://www.askmaclean.com/wp-content/uploads/2010/08/sql_physical_read.jpg" alt="" width="929" height="166" /></a></p> 
        <p>启用了并行的SQL 1rxax27p7anr3执行时间为22.63s，反而要比不使用并行慢；可见在TCACHE表这个数量级，完全没有必要使用并行导出。</p> 
        <p>接着我们来探究一下外部表路径的导入:</p> 
        <pre class="brush:sql">SQL&gt; truncate table tcache;
Table truncated.
SQL&gt; set pagesize 1400;
SQL&gt; set linesize 140;

/* 执行外部表路径的数据导入，并行度1  */

[maclean@rh2 admin]$ impdp maclean/maclean directory=dumps tables=TCACHE content=data_only  dumpfile=tcache1.dmp access_method=external_table

/* 在以上SQL执行期间查询V$SQL动态视图的相关语句*/

select sql_text,
       sql_id,
       cpu_time,
       elapsed_time,
       disk_reads,
       buffer_gets,
       rows_processed
  from v$sql
 where sql_text like '%TCACHE%'
   and sql_text not like '%like%';

SQL_TEXT
--------------------------------------------------------------------------------------------------------------------------------------------
SQL_ID          CPU_TIME ELAPSED_TIME DISK_READS BUFFER_GETS ROWS_PROCESSED
------------- ---------- ------------ ---------- ----------- --------------
INSERT /*+ SYS_DL_CURSOR */ INTO RELATIONAL(&quot;MACLEAN&quot;.&quot;TCACHE&quot;) (&quot;OWNER&quot;,&quot;OBJECT_NAME&quot;,&quot;SUBOBJECT_NAME&quot;,&quot;OBJECT_ID&quot;,&quot;DATA_OBJECT_ID&quot;,&quot;OBJECT
_TYPE&quot;,&quot;CREATED&quot;,&quot;LAST_DDL_TIME&quot;,&quot;TIMESTAMP&quot;,&quot;STATUS&quot;,&quot;TEMPORARY&quot;,&quot;GENERATED&quot;,&quot;SECONDARY&quot;) VALUES (NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,N
ULL,NULL,NULL,NULL,NULL)
6tn47a220d34q        408          408          0           0              0

INSERT /*+APPEND+*/  /*+PARALLEL(&quot;TCACHE&quot;,1)+*/ INTO RELATIONAL(&quot;MACLEAN&quot;.&quot;TCACHE&quot; ) (&quot;OWNER&quot;, &quot;OBJECT_NAME&quot;, &quot;SUBOBJECT_NAME&quot;, &quot;OBJECT_ID&quot;,
 &quot;DATA_OBJECT_ID&quot;, &quot;OBJECT_TYPE&quot;, &quot;CREATED&quot;, &quot;LAST_DDL_TIME&quot;, &quot;TIMESTAMP&quot;, &quot;STATUS&quot;, &quot;TEMPORARY&quot;, &quot;GENERATED&quot;, &quot;SECONDARY&quot;)     SELECT &quot;OWNE
R&quot;, &quot;OBJECT_NAME&quot;, &quot;SUBOBJECT_NAME&quot;, &quot;OBJECT_ID&quot;, &quot;DATA_OBJECT_ID&quot;, &quot;OBJECT_TYPE&quot;, &quot;CREATED&quot;, &quot;LAST_DDL_TIME&quot;, &quot;TIMESTAMP&quot;, &quot;STATUS&quot;, &quot;TEMPO
RARY&quot;, &quot;GENERATED&quot;, &quot;SECONDARY&quot;     FROM &quot;ET$087B00060001&quot; KU$
66q4w8c4ak0wf      31576        31576          0         608              0

/* 当导入job完成后再次查询 */
select sql_text,
       sql_id,
       cpu_time,
       elapsed_time,
       disk_reads,
       buffer_gets,
       rows_processed
  from v$sql
 where sql_text like '%TCACHE%'
   and sql_text not like '%like%';

SQL_TEXT
--------------------------------------------------------------------------------------------------------------------------------------------
SQL_ID          CPU_TIME ELAPSED_TIME DISK_READS BUFFER_GETS ROWS_PROCESSED
------------- ---------- ------------ ---------- ----------- --------------
INSERT /*+ SYS_DL_CURSOR */ INTO RELATIONAL(&quot;MACLEAN&quot;.&quot;TCACHE&quot;) (&quot;OWNER&quot;,&quot;OBJECT_NAME&quot;,&quot;SUBOBJECT_NAME&quot;,&quot;OBJECT_ID&quot;,&quot;DATA_OBJECT_ID&quot;,&quot;OBJECT
_TYPE&quot;,&quot;CREATED&quot;,&quot;LAST_DDL_TIME&quot;,&quot;TIMESTAMP&quot;,&quot;STATUS&quot;,&quot;TEMPORARY&quot;,&quot;GENERATED&quot;,&quot;SECONDARY&quot;) VALUES (NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,N
ULL,NULL,NULL,NULL,NULL)
6tn47a220d34q        408          408          0           0              0

/* 执行完成后一句SQL立马消失了！？ Oracle好像很不情愿我们看到外部表路径使用的INSERT语句 :) */

INSERT /*+APPEND+*/ /*+PARALLEL(&quot;TCACHE&quot;,1)+*/
INTO RELATIONAL
  (&quot;MACLEAN&quot;.&quot;TCACHE&quot;)
  (&quot;OWNER&quot;,
   &quot;OBJECT_NAME&quot;,
   &quot;SUBOBJECT_NAME&quot;,
   &quot;OBJECT_ID&quot;,
   &quot;DATA_OBJECT_ID&quot;,
   &quot;OBJECT_TYPE&quot;,
   &quot;CREATED&quot;,
   &quot;LAST_DDL_TIME&quot;,
   &quot;TIMESTAMP&quot;,
   &quot;STATUS&quot;,
   &quot;TEMPORARY&quot;,
   &quot;GENERATED&quot;,
   &quot;SECONDARY&quot;)
  SELECT &quot;OWNER&quot;,
         &quot;OBJECT_NAME&quot;,
         &quot;SUBOBJECT_NAME&quot;,
         &quot;OBJECT_ID&quot;,
         &quot;DATA_OBJECT_ID&quot;,
         &quot;OBJECT_TYPE&quot;,
         &quot;CREATED&quot;,
         &quot;LAST_DDL_TIME&quot;,
         &quot;TIMESTAMP&quot;,
         &quot;STATUS&quot;,
         &quot;TEMPORARY&quot;,
         &quot;GENERATED&quot;,
         &quot;SECONDARY&quot;
    FROM &quot;ET$087F00230001&quot; KU$

/* 这里的KU$代表的就是以ORACLE_DATAPUMP转储文件形式存放在数据库外的外部表 */

/* 可以看到这里尝试使用了APPEND插入模式，以减少undo和redo的产生*/

SQL&gt; truncate table tcache;
Table truncated.

/* 若启用并行导入呢？ */

[maclean@rh2 admin]$ impdp maclean/maclean directory=dumps tables=TCACHE content=data_only  dumpfile=tcache2.dmp,tcache3.dmp,tcache4.dmp access_method=external_table parallel=3
........

select sql_text,
       sql_id,
       cpu_time,
       elapsed_time,
       disk_reads,
       buffer_gets,
       rows_processed
  from v$sql
 where sql_text like '%TCACHE%'
   and sql_text not like '%like%';
SQL_TEXT
--------------------------------------------------------------------------------------------------------------------------------------------
SQL_ID          CPU_TIME ELAPSED_TIME DISK_READS BUFFER_GETS ROWS_PROCESSED
------------- ---------- ------------ ---------- ----------- --------------
INSERT /*+APPEND+*/  /*+PARALLEL(&quot;TCACHE&quot;,1)+*/ INTO RELATIONAL(&quot;MACLEAN&quot;.&quot;TCACHE&quot; ) (&quot;OWNER&quot;, &quot;OBJECT_NAME&quot;, &quot;SUBOBJECT_NAME&quot;, &quot;OBJECT_ID&quot;,
 &quot;DATA_OBJECT_ID&quot;, &quot;OBJECT_TYPE&quot;, &quot;CREATED&quot;, &quot;LAST_DDL_TIME&quot;, &quot;TIMESTAMP&quot;, &quot;STATUS&quot;, &quot;TEMPORARY&quot;, &quot;GENERATED&quot;, &quot;SECONDARY&quot;)     SELECT &quot;OWNE
R&quot;, &quot;OBJECT_NAME&quot;, &quot;SUBOBJECT_NAME&quot;, &quot;OBJECT_ID&quot;, &quot;DATA_OBJECT_ID&quot;, &quot;OBJECT_TYPE&quot;, &quot;CREATED&quot;, &quot;LAST_DDL_TIME&quot;, &quot;TIMESTAMP&quot;, &quot;STATUS&quot;, &quot;TEMPO
RARY&quot;, &quot;GENERATED&quot;, &quot;SECONDARY&quot;     FROM &quot;ET$087A00040001&quot; KU$
2mvs15623ssvy    5910289      5910289          0       73578              0

INSERT /*+ SYS_DL_CURSOR */ INTO RELATIONAL(&quot;MACLEAN&quot;.&quot;TCACHE&quot;) (&quot;OWNER&quot;,&quot;OBJECT_NAME&quot;,&quot;SUBOBJECT_NAME&quot;,&quot;OBJECT_ID&quot;,&quot;DATA_OBJECT_ID&quot;,&quot;OBJECT
_TYPE&quot;,&quot;CREATED&quot;,&quot;LAST_DDL_TIME&quot;,&quot;TIMESTAMP&quot;,&quot;STATUS&quot;,&quot;TEMPORARY&quot;,&quot;GENERATED&quot;,&quot;SECONDARY&quot;) VALUES (NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,N
ULL,NULL,NULL,NULL,NULL)
6tn47a220d34q       1167         1167          0           0              0

/* 似乎因为沿用了APPEND插入模式，插入语句的并行度并未上升 */

/* 因为Oracle不想同我们分享它的小秘密，所以awr和ash报告中都不记录外部表路径插入SQL的相关信息 */

/* 好吧，它有权保持沉默！  */

That's great!
</pre> 
       </div>
       <div class="post-meta">
        <span class="categories">Filed Under: <a href="http://www.askmaclean.com/archives/category/oracle" rel="category tag">Oracle</a></span> 
        <span class="tags">Tagged With: <a href="http://www.askmaclean.com/archives/tag/database" rel="tag">database</a>, <a href="http://www.askmaclean.com/archives/tag/ora" rel="tag">ORA</a>, <a href="http://www.askmaclean.com/archives/tag/oracle" rel="tag">Oracle</a>, <a href="http://www.askmaclean.com/archives/tag/bug" rel="tag">Oracle Bug</a>, <a href="http://www.askmaclean.com/archives/tag/rac" rel="tag">RAC</a>, <a href="http://www.askmaclean.com/archives/tag/sql" rel="tag">sql</a></span>
       </div>
      </div>
      <div class="navigation">
       <div class="pagination-next alignright">
        <a href="http://www.askmaclean.com/archives/tag/oracle/page/2">Next Page &raquo;</a>
       </div>
      </div>
     </div>
     <div id="sidebar" class="sidebar widget-area">
      <div id="search-2" class="widget widget_search">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">好用的站内搜索</h4> 
        <form method="get" class="searchform search-form" action="http://www.askmaclean.com/" role="search">
         <input type="text" value="Search this website …" name="s" class="s search-input" onfocus="if ('Search this website …' === this.value) {this.value = '';}" onblur="if ('' === this.value) {this.value = 'Search this website …';}" />
         <input type="submit" class="searchsubmit search-submit" value="Search" />
        </form>
       </div>
      </div> 
      <div id="text-9" class="widget widget_text">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">Oracle OCP/OCM/实战就业班培训招生中</h4> 
        <div class="textwidget">
         <p><a href="http://www.parnassusdata.com/oracle-edu/" target="_blank"><img class="aligncenter" src="http://zcdn.parnassusdata.com/wdp-shitan-300.jpg" width="200" height="150" /></a></p>
        </div> 
       </div>
      </div> 
      <div id="text-8" class="widget widget_text">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">About Me</h4> 
        <div class="textwidget">
         <center>
          <a href="http://www.askmaclean.com" target="blank"><img src="http://7xi9ig.com2.z0.glb.qiniucdn.com/askmaclean_weixin.jpg" alt="author's avatar The Maclean Liu" width="160" height="137" /></a>
         </center> 
         <center> 
          <a href="http://parnassusdata.com/" target="blank"><img src="http://7xi9ig.com2.z0.glb.qiniucdn.com/logo_cn1.png" alt="ParnassusData" width="150" height="57" /></a> 
          <a href="http://7xl1jo.com2.z0.glb.qiniucdn.com/DUL3206.zip" target="blank"> <img src="http://7xi9ig.com2.z0.glb.qiniucdn.com/professional-290.jpg" alt="PRM下载" height="150" width="180" /></a> 
         </center> 
         <br /> 
         <a href="http://t.askmaclean.com/forum.php" target="_blank"><img src="http://7xi9ig.com2.z0.glb.qiniucdn.com/ask_maclean.png" alt="AskMaclean Logo" width="180" /></a> 
         <a href="http://t.askmaclean.com/forum.php" 02target="_blank"> </a>
         <p><a href="http://t.askmaclean.com/forum.php" 02target="_blank"> </a><a href="http://www.shoug.info/" target="blank"><img src="http://7xi9ig.com2.z0.glb.qiniucdn.com/SHOUG-Logo-468%C3%9760.png" alt="SHOUG" width="195" height="43" /></a> </p>
         <p> <a href="https://apex.oracle.com/pls/apex/f?p=19297:4:9567174845042::NO:4:P4_ID:8320" target="blank"><img src="http://7xi9ig.com2.z0.glb.qiniucdn.com/O_ACED.png" alt="MAC-ORACLE-ACE-Director" width="195" height="73" /></a> <a href="http://jq.qq.com/?_wv=1027&amp;k=PPtrVP" target="blank"> <img src="http://7xi9ig.com2.z0.glb.qiniucdn.com/ORA-ALLSTARS-Exadata-XD%E4%B8%80%E4%BD%93%E6%9C%BA%E7%94%A8%E6%88%B7%E7%BB%84.png" alt="AskMaclean Logo" height="88" width="180" 02="" /></a></p>
        </div> 
       </div>
      </div> 
      <div id="recent-posts-2" class="widget widget_recent_entries">
       <div class="widget-wrap"> 
        <h4 class="widget-title widgettitle">最新动态</h4> 
        <ul> 
         <li> <a href="http://www.askmaclean.com/archives/solix%e4%bc%98%e5%8c%96oracle-e-business-suite%e6%80%a7%e8%83%bd.html">Solix优化Oracle E-Business Suite性能</a> </li> 
         <li> <a href="http://www.askmaclean.com/archives/12c-vs-11g-xmessages.html">12c vs 11g x$messages</a> </li> 
         <li> <a href="http://www.askmaclean.com/archives/oracle%e5%a6%82%e4%bd%95%e5%88%a4%e5%ae%9a%e7%bb%9f%e8%ae%a1%e4%bf%a1%e6%81%af%e9%99%88%e6%97%a7.html">oracle如何判定统计信息陈旧</a> </li> 
         <li> <a href="http://www.askmaclean.com/archives/dop-degree-of-parallelism%e7%9a%84%e8%ae%be%e8%ae%a1%e7%ae%97%e6%b3%95-%e2%80%8b%e2%80%8b%e2%80%8b%e2%80%8b.html">DOP degree of parallelism的设计算法 67676767</a> </li> 
         <li> <a href="http://www.askmaclean.com/archives/12cr2-vs-11gr2-%e6%96%b0%e5%a2%9eoptimizer-%e5%8f%82%e6%95%b0%e5%88%97%e8%a1%a8.html">12CR2 vs 11gR2 新增optimizer 参数列表</a> </li> 
         <li> <a href="http://www.askmaclean.com/archives/%e9%87%91%e8%9d%b6eas-hr%e7%b3%bb%e7%bb%9f%e5%90%8e%e5%8f%b0oracle%e5%a4%87%e4%bb%bd%e6%81%a2%e5%a4%8d%e7%bb%b4%e6%8a%a4%e6%96%b9%e6%a1%88.html">金蝶EAS HR系统后台Oracle备份恢复维护方案</a> </li> 
         <li> <a href="http://www.askmaclean.com/archives/%e8%af%97%e6%aa%80%e5%ad%a6%e9%99%a2-11g-ocp-051-052-053-%e5%85%a8%e5%a5%97%e9%a2%98%e5%ba%93%e4%b8%ad%e8%8b%b1%e6%96%87%e5%af%b9%e7%85%a7%e8%af%a6%e8%a7%a3%e4%b8%8b%e8%bd%bd.html">诗檀学院 11g ocp 051 052 053 全套题库中英文对照详解下载</a> </li> 
         <li> <a href="http://www.askmaclean.com/archives/prm-dul-data-unloader-tool-manual-user-guide-0-4.html">prm-dul data unloader tool manual user guide 0.4</a> </li> 
         <li> <a href="http://www.askmaclean.com/archives/%e3%80%90%e8%af%97%e6%aa%80%e5%ad%a6%e9%99%a2%e3%80%9111g-ocp-%e8%80%83%e8%af%95%e9%a2%98%e5%ba%93%e5%88%86%e6%9e%90.html">【诗檀学院】11g OCP 考试题库分析</a> </li> 
         <li> <a href="http://www.askmaclean.com/archives/%e8%af%97%e6%aa%80it%e5%ad%a6%e9%99%a2-%e5%85%a8%e5%a5%97oracle-11g-ocm%e5%ad%a6%e4%b9%a0%e6%9d%90%e6%96%99%e6%96%b0%e5%b9%b4%e5%a4%a7%e7%a4%bc%e5%8c%85.html">诗檀IT学院 全套oracle 11g ocm学习材料新年大礼包</a> </li> 
        </ul> 
       </div>
      </div> 
      <div id="listcategorypostswidget-4" class="widget widget_listcategorypostswidget">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">数据恢复</h4> 
        <ul>
         <li><a href="http://www.askmaclean.com/archives/oracle-prm-dul-undelete-oracle-recordrows.html" title="Oracle PRM-DUL Undelete Oracle record/rows">Oracle PRM-DUL Undelete Oracle record/rows</a> </li>
         <li><a href="http://www.askmaclean.com/archives/prm-undelete.html" title="PRM-DUL Undelete恢复被Delete操作删除的Oracle记录/行 record/rows">PRM-DUL Undelete恢复被Delete操作删除的Oracle记录/行 record/rows</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-ssc%e7%b4%a7%e6%80%a5%e6%95%85%e9%9a%9c%e6%95%91%e6%8f%b4%e6%b5%81%e7%a8%8b.html" title="Oracle  SSC紧急故障救援流程">Oracle SSC紧急故障救援流程</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-%e9%98%b2%e8%8c%83%e4%ba%ba%e4%b8%ba%e6%93%8d%e4%bd%9c%e5%a4%b1%e8%af%af%e7%9a%84%e6%9c%80%e5%a5%bd%e6%8a%80%e6%9c%af%ef%bc%9aflashback.html" title="Oracle 防范人为操作失误的最好技术：FLASHBACK">Oracle 防范人为操作失误的最好技术：FLASHBACK</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-%e6%95%b0%e6%8d%ae%e5%ba%93%e5%9d%8f%e5%9d%97%e5%a4%84%e7%90%86%e6%8a%80%e6%9c%af.html" title="Oracle 数据库坏块处理技术">Oracle 数据库坏块处理技术</a> </li>
         <li><a href="http://www.askmaclean.com/archives/extract-datafile-from-oracle-asm-corrupted-diskgroup-using-prm-dul.html" title="Extract Datafile From Oracle ASM corrupted diskgroup  using PRM-DUL">Extract Datafile From Oracle ASM corrupted diskgroup using PRM-DUL</a> </li>
         <li><a href="http://www.askmaclean.com/archives/case-study-on-prmdul-recovery-for-oracle-database.html" title="Case Study on PRM/DUL Recovery For Oracle Database">Case Study on PRM/DUL Recovery For Oracle Database</a> </li>
         <li><a href="http://www.askmaclean.com/archives/prm-is-designed-for-enterprise-database-recovery-which-includes-all-oracle-dul-data-recovery-functionalities-and-also-easy-to-use-gui.html" title="PRM is designed for Enterprise Database Recovery, which includes all Oracle DUL data recovery functionalities, and also easy-to-use GUI.">PRM is designed for Enterprise Database Recovery, which includes all Oracle DUL data recovery functionalities, and also easy-to-use GUI.</a> </li>
         <li><a href="http://www.askmaclean.com/archives/att-oracle-backup-policy.html" title="来看看美国最大电信公司AT&amp;T的Oracle数据库备份策略">来看看美国最大电信公司AT&amp;T的Oracle数据库备份策略</a> </li>
         <li><a href="http://www.askmaclean.com/archives/exadata-rescue.html" title="【转】Exadata存储服务器的紧急修复(rescue)经验分享">【转】Exadata存储服务器的紧急修复(rescue)经验分享</a> </li>
        </ul>
        <a href="http://www.askmaclean.com/archives/category/oracle/backup-recover"> </a>
       </div>
      </div> 
      <div id="listcategorypostswidget-5" class="widget widget_listcategorypostswidget">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">内部原理研究</h4> 
        <ul>
         <li><a href="http://www.askmaclean.com/archives/cursor-pin-s-on-x-xmutex_sleep-location.html" title="【内部原理】模拟Cursor: Pin S on X并解释X$mutex_sleep.location">【内部原理】模拟Cursor: Pin S on X并解释X$mutex_sleep.location</a> </li>
         <li><a href="http://www.askmaclean.com/archives/low-or-high-hwm.html" title="Oracle中的Low HWM与 High HWM 高水位">Oracle中的Low HWM与 High HWM 高水位</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-latch.html" title="全面解析9i以后Oracle Latch闩锁原理">全面解析9i以后Oracle Latch闩锁原理</a> </li>
         <li><a href="http://www.askmaclean.com/archives/script-oracle-diag-parse-wait-high-version-count.html" title="Script:诊断解析等待和高version count">Script:诊断解析等待和高version count</a> </li>
         <li><a href="http://www.askmaclean.com/archives/drop-user-object-checkpoint.html" title="用三种方法证明DROP USER(有Table)会触发Object级Checkpoint">用三种方法证明DROP USER(有Table)会触发Object级Checkpoint</a> </li>
         <li><a href="http://www.askmaclean.com/archives/maclean-liu-share-mutex.html" title="【Maclean Liu技术分 享】深入理解Oracle中 Mutex的内部原理">【Maclean Liu技术分 享】深入理解Oracle中 Mutex的内部原理</a> </li>
         <li><a href="http://www.askmaclean.com/archives/understanding-oracle-mutex.html" title="深入理解Oracle中的Mutex">深入理解Oracle中的Mutex</a> </li>
         <li><a href="http://www.askmaclean.com/archives/kksfbc-clear-parse.html" title="kksfbc Clear parse">kksfbc Clear parse</a> </li>
         <li><a href="http://www.askmaclean.com/archives/smon-shrink-undo-rollback-segment.html" title="了解你所不知道的SMON功能(十二):Shrink UNDO(rollback) SEGMENT">了解你所不知道的SMON功能(十二):Shrink UNDO(rollback) SEGMENT</a> </li>
         <li><a href="http://www.askmaclean.com/archives/database-replay-capture-internal.html" title="了解Database Replay Capture内部原理">了解Database Replay Capture内部原理</a> </li>
        </ul>
        <a href="http://www.askmaclean.com/archives/category/oracle/oracle-internal-research"> </a>
       </div>
      </div> 
      <div id="listcategorypostswidget-6" class="widget widget_listcategorypostswidget">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">RAC集群</h4> 
        <ul>
         <li><a href="http://www.askmaclean.com/archives/clssnmvdiskcheck-aborting-0-of-1-configured-voting-disks-available-need-1.html" title="clssnmvDiskCheck: Aborting, 0 of 1 configured voting disks available, need 1">clssnmvDiskCheck: Aborting, 0 of 1 configured voting disks available, need 1</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-rac-clusterware-heartbeat.html" title="Oracle RAC/Clusterware 多种心跳heartbeat机制介绍 RAC超时机制分析">Oracle RAC/Clusterware 多种心跳heartbeat机制介绍 RAC超时机制分析</a> </li>
         <li><a href="http://www.askmaclean.com/archives/about-clusterware.html" title="Oracle Acs资深顾问罗敏 老罗技术核心感悟：Clusterware是成熟产品吗?">Oracle Acs资深顾问罗敏 老罗技术核心感悟：Clusterware是成熟产品吗?</a> </li>
         <li><a href="http://www.askmaclean.com/archives/biot-share-vbox-linux-rac-best.html" title="诗檀软件Biot 分享《使用VirtualBox在Oracle Linux 5.7上安装Oracle Database 11g Release 2 RAC的最佳实践》">诗檀软件Biot 分享《使用VirtualBox在Oracle Linux 5.7上安装Oracle Database 11g Release 2 RAC的最佳实践》</a> </li>
         <li><a href="http://www.askmaclean.com/archives/gc-freelist.html" title="GC FREELIST等待事件">GC FREELIST等待事件</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-rac-node-eviction.html" title="ORACLE RAC节点意外重启Node Eviction诊断流程图">ORACLE RAC节点意外重启Node Eviction诊断流程图</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-rac-clusterwaregi-%e5%90%af%e5%8a%a8%e8%af%8a%e6%96%ad%e6%b5%81%e7%a8%8b%e5%9b%be.html" title="ORACLE RAC clusterware/GI 启动诊断流程图">ORACLE RAC clusterware/GI 启动诊断流程图</a> </li>
         <li><a href="http://www.askmaclean.com/archives/troubleshooting-rac-installation.html" title="ORACLE RAC安装故障的诊断流程图">ORACLE RAC安装故障的诊断流程图</a> </li>
         <li><a href="http://www.askmaclean.com/archives/scan-vip-listener-problems.html" title="【转】导致 Scan VIP 和 Scan Listener（监听程序）出现故障的最常见的 5 个问题 (Doc ID 1602038.1)">【转】导致 Scan VIP 和 Scan Listener（监听程序）出现故障的最常见的 5 个问题 (Doc ID 1602038.1)</a> </li>
         <li><a href="http://www.askmaclean.com/archives/10g11gr1-vip-does-not-relocate-back-to-the-home-node-even-after-the-public-network-problem-is-resolved.html" title="10.2.0.4以后vip不会自动relocate back回原节点">10.2.0.4以后vip不会自动relocate back回原节点</a> </li>
        </ul>
        <a href="http://www.askmaclean.com/archives/category/oracle/rac-oracle"> </a>
       </div>
      </div> 
      <div id="listcategorypostswidget-2" class="widget widget_listcategorypostswidget">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">11g新特性</h4> 
        <ul>
         <li><a href="http://www.askmaclean.com/archives/oracle11g%e5%8d%87%e7%ba%a7%e9%a1%b9%e7%9b%ae%e5%ae%9e%e6%96%bd%e6%b5%81%e7%a8%8b.html" title="Oracle11g升级项目实施流程">Oracle11g升级项目实施流程</a> </li>
         <li><a href="http://www.askmaclean.com/archives/%e3%80%8aoracle11g%e6%96%b0%e7%89%b9%e6%80%a7%e4%bb%8b%e7%bb%8d%e3%80%8b.html" title="《Oracle11g新特性介绍》">《Oracle11g新特性介绍》</a> </li>
         <li><a href="http://www.askmaclean.com/archives/11g-deferred_segment_creation%e7%89%b9%e6%80%a7.html" title="11g deferred_segment_creation特性">11g deferred_segment_creation特性</a> </li>
         <li><a href="http://www.askmaclean.com/archives/tts-transporting-tablespaces-statistics.html" title="TTS ORACLE Transporting Tablespaces传输表空间统计信息">TTS ORACLE Transporting Tablespaces传输表空间统计信息</a> </li>
         <li><a href="http://www.askmaclean.com/archives/11g-space-preallocation-smco-w00n.html" title="11g以后的space preallocation特性和SMCO/W00N">11g以后的space preallocation特性和SMCO/W00N</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-rat-real-application-testing-checklist.html" title="ORACLE RAT Real Application Testing Checklist">ORACLE RAT Real Application Testing Checklist</a> </li>
         <li><a href="http://www.askmaclean.com/archives/aix-11-2-grid-infrastructure-rdbms-owned-by-grid.html" title="AIX平台上11.2 Grid Infrastructure RDBMS进程的user是grid用户?">AIX平台上11.2 Grid Infrastructure RDBMS进程的user是grid用户?</a> </li>
         <li><a href="http://www.askmaclean.com/archives/%e8%a1%a5%e4%b8%81%e9%9b%86patch-set-11-2-0-4-%e6%9d%a5%e4%ba%86%ef%bc%81.html" title="补丁集Patch Set 11.2.0.4 来了！">补丁集Patch Set 11.2.0.4 来了！</a> </li>
         <li><a href="http://www.askmaclean.com/archives/sec_max_failed_login_attempts.html" title="【11g新特性】sec_max_failed_login_attempts">【11g新特性】sec_max_failed_login_attempts</a> </li>
         <li><a href="http://www.askmaclean.com/archives/11g-new-feature-cardinality-feedback.html" title="【11g新特性】Cardinality Feedback基数反馈">【11g新特性】Cardinality Feedback基数反馈</a> </li>
        </ul>
        <a href="http://www.askmaclean.com/archives/category/oracle/oracle-11g"> </a>
       </div>
      </div> 
      <div id="listcategorypostswidget-12" class="widget widget_listcategorypostswidget">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">GoldenGate OGG</h4> 
        <ul>
         <li><a href="http://www.askmaclean.com/archives/ogg-1403%e9%94%99%e8%af%af%e8%a7%a3%e5%86%b3%e6%96%b9%e6%b3%95.html" title="GoldenGate OGG 1403错误解决方法">GoldenGate OGG 1403错误解决方法</a> </li>
         <li><a href="http://www.askmaclean.com/archives/goldengate-ddl.html" title="Oracle GoldenGate  DDL 详细说明 使用手册">Oracle GoldenGate DDL 详细说明 使用手册</a> </li>
         <li><a href="http://www.askmaclean.com/archives/goldengate-ogg-manual.html" title="【转】Oracle GoldenGate OGG管理员手册">【转】Oracle GoldenGate OGG管理员手册</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-goldengate-ogg-database-version-compatible-matrix.html" title="oracle goldengate ogg 11.2以后的兼容性列表">oracle goldengate ogg 11.2以后的兼容性列表</a> </li>
         <li><a href="http://www.askmaclean.com/archives/archivedlogonly.html" title="ARCHIVEDLOGONLY TRANLOGOPTIONS">ARCHIVEDLOGONLY TRANLOGOPTIONS</a> </li>
         <li><a href="http://www.askmaclean.com/archives/goldengate-ogg-altarchivelogdest%e5%8f%82%e6%95%b0%e4%bb%8b%e7%bb%8d.html" title="GoldenGate OGG altarchivelogdest参数介绍">GoldenGate OGG altarchivelogdest参数介绍</a> </li>
         <li><a href="http://www.askmaclean.com/archives/%e9%87%87%e7%94%a8ogg-goldengate%e5%ae%9e%e7%8e%b0oracle%e4%b8%8emysql%e4%b9%8b%e9%97%b4%e7%9a%84%e5%a4%8d%e5%88%b6.html" title="采用OGG Goldengate实现Oracle与MySQL之间的复制">采用OGG Goldengate实现Oracle与MySQL之间的复制</a> </li>
         <li><a href="http://www.askmaclean.com/archives/ogg-goldengate-%e6%95%85%e9%9a%9c%e8%af%8a%e6%96%ad%e6%89%8b%e5%86%8ctroubleshooting-handbook.html" title="OGG GoldenGate 故障诊断手册Troubleshooting handbook">OGG GoldenGate 故障诊断手册Troubleshooting handbook</a> </li>
         <li><a href="http://www.askmaclean.com/archives/monitor-ogg-goldengate-lag.html" title="了解OGG GoldenGate Lag监控">了解OGG GoldenGate Lag监控</a> </li>
         <li><a href="http://www.askmaclean.com/archives/goldengate-director-%e5%ae%89%e8%a3%85%e5%8f%8a%e9%85%8d%e7%bd%ae%e6%96%87%e6%a1%a3.html" title="GoldenGate OGG　Director 安装及配置文档">GoldenGate OGG　Director 安装及配置文档</a> </li>
        </ul>
        <a href="http://www.askmaclean.com/archives/category/oracle/goldengate"> </a>
       </div>
      </div> 
      <div id="listcategorypostswidget-7" class="widget widget_listcategorypostswidget">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">Exadata数据库一体机</h4> 
        <ul>
         <li><a href="http://www.askmaclean.com/archives/exadata-50-tips.html" title="Exadata一体机使用的50个小技巧">Exadata一体机使用的50个小技巧</a> </li>
         <li><a href="http://www.askmaclean.com/archives/exadata%e7%9a%843d%e5%b1%95%e7%a4%ba.html" title="Exadata的3D展示">Exadata的3D展示</a> </li>
         <li><a href="http://www.askmaclean.com/archives/%e9%ab%98%e7%ba%a7%e5%ae%a2%e6%88%b7%e6%9c%8d%e5%8a%a1-oracle-exadata-%e6%9c%8d%e5%8a%a1-faq.html" title="高级客户服务  Oracle Exadata 服务 FAQ">高级客户服务 Oracle Exadata 服务 FAQ</a> </li>
         <li><a href="http://www.askmaclean.com/archives/exadata-reimaging-%e6%8c%87%e5%8d%97guide.html" title="Exadata Reimaging 指南Guide">Exadata Reimaging 指南Guide</a> </li>
         <li><a href="http://www.askmaclean.com/archives/%e3%80%90%e8%bd%ac%e3%80%91exadata-x2-2x3-2%e7%9a%84reimage%e8%bf%87%e7%a8%8b.html" title="【转】Exadata X2-2/X3-2的Reimage过程">【转】Exadata X2-2/X3-2的Reimage过程</a> </li>
         <li><a href="http://www.askmaclean.com/archives/exadata%e6%95%b0%e6%8d%ae%e5%ba%93%e4%b8%80%e4%bd%93%e6%9c%ba%e7%bb%b4%e6%8a%a4%e4%bb%bb%e5%8a%a1.html" title="Exadata数据库一体机维护任务">Exadata数据库一体机维护任务</a> </li>
         <li><a href="http://www.askmaclean.com/archives/exadata.html" title="Exadata Database Machine数据库一体机专题">Exadata Database Machine数据库一体机专题</a> </li>
         <li><a href="http://www.askmaclean.com/archives/exadata%e9%80%9a%e8%bf%87ilom%e8%bf%9c%e7%a8%8bmount-iso%e5%ae%9e%e7%8e%b0%e5%88%b7%e6%9c%bareimage.html" title="Exadata通过ILOM远程MOUNT ISO实现刷机Reimage ">Exadata通过ILOM远程MOUNT ISO实现刷机Reimage</a> </li>
         <li><a href="http://www.askmaclean.com/archives/%e3%80%90exadata%e4%b8%80%e4%bd%93%e6%9c%ba%e3%80%91exadata-cell%e7%9b%91%e6%8e%a7%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5.html" title="【Exadata一体机】Exadata Cell监控最佳实践">【Exadata一体机】Exadata Cell监控最佳实践</a> </li>
         <li><a href="http://www.askmaclean.com/archives/exadata-health-check.html" title="Exadata一体机健康检查报告">Exadata一体机健康检查报告</a> </li>
        </ul>
        <a href="http://www.askmaclean.com/archives/category/oracle/exadata"> </a>
       </div>
      </div> 
      <div id="listcategorypostswidget-8" class="widget widget_listcategorypostswidget">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">性能调优</h4> 
        <ul>
         <li><a href="http://www.askmaclean.com/archives/donot-put-redo-on-ssd.html" title="不建议把Oracle redo存放在SSD上">不建议把Oracle redo存放在SSD上</a> </li>
         <li><a href="http://www.askmaclean.com/archives/visual-oracle-tuning-2015.html" title="可视化Oracle调优与智能优化-2015oracle数据库大会版">可视化Oracle调优与智能优化-2015oracle数据库大会版</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-export-statistics.html" title="oracle中导出统计信息到其他表的过程">oracle中导出统计信息到其他表的过程</a> </li>
         <li><a href="http://www.askmaclean.com/archives/row-cr.html" title="关于ROW CR特性_ROW_CR">关于ROW CR特性_ROW_CR</a> </li>
         <li><a href="http://www.askmaclean.com/archives/db3600-oracle%e6%80%a7%e8%83%bd%e8%af%8a%e6%96%ad%e5%b7%a5%e5%85%b7.html" title="db3600 Oracle性能诊断工具">db3600 Oracle性能诊断工具</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-sql%e4%bc%98%e5%8c%96-trace-%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e8%b7%9f%e8%b8%aa.html" title="Oracle SQL优化 trace 应用程序跟踪">Oracle SQL优化 trace 应用程序跟踪</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-sql-%e4%bd%bf%e7%94%a8%e7%bb%91%e5%ae%9a%e5%8f%98%e9%87%8fbind-variable.html" title="Oracle SQL 使用绑定变量bind variable">Oracle SQL 使用绑定变量bind variable</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-sql-cbo-%e4%bc%98%e5%8c%96%e5%99%a8%e4%bc%98%e5%8c%96%e7%a8%8b%e5%ba%8f-%e7%bb%9f%e8%ae%a1%e4%bf%a1%e6%81%af.html" title="Oracle SQL CBO 优化器/优化程序 统计信息">Oracle SQL CBO 优化器/优化程序 统计信息</a> </li>
         <li><a href="http://www.askmaclean.com/archives/sql-scan.html" title="Oracle Acs资深顾问罗敏 老罗技术核心感悟：自动扫描SQL语句工具？">Oracle Acs资深顾问罗敏 老罗技术核心感悟：自动扫描SQL语句工具？</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-acs%e8%b5%84%e6%b7%b1%e9%a1%be%e9%97%ae%e7%bd%97%e6%95%8f-%e8%80%81%e7%bd%97%e6%8a%80%e6%9c%af%e6%a0%b8%e5%bf%83%e6%84%9f%e6%82%9f%ef%bc%9a%e7%89%9b-11g%e7%9a%84%e8%87%aa%e5%8a%a8%e8%b0%83.html" title="Oracle Acs资深顾问罗敏 老罗技术核心感悟：牛! 11g的自动调优和SQL Profile">Oracle Acs资深顾问罗敏 老罗技术核心感悟：牛! 11g的自动调优和SQL Profile</a> </li>
        </ul>
        <a href="http://www.askmaclean.com/archives/category/oracle/sql-tuning-oracle"> </a>
       </div>
      </div> 
      <div id="listcategorypostswidget-11" class="widget widget_listcategorypostswidget">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">案例诊断</h4> 
        <ul>
         <li><a href="http://www.askmaclean.com/archives/ora-00600-6749.html" title="【Oracle数据恢复】ORA-00600 [6749]一例">【Oracle数据恢复】ORA-00600 [6749]一例</a> </li>
         <li><a href="http://www.askmaclean.com/archives/latch-free-sql-memory-manager-latch.html" title="latch free:SQL memory manager latch">latch free:SQL memory manager latch</a> </li>
         <li><a href="http://www.askmaclean.com/archives/%e4%b8%80%e6%ac%a1exadata%e4%b8%8a%e7%9a%84ora-600-kjbmprlst-shadow%e6%95%85%e9%9a%9c%e5%88%86%e6%9e%90.html" title="一次Exadata上的ORA-600[kjbmprlst:shadow]故障分析">一次Exadata上的ORA-600[kjbmprlst:shadow]故障分析</a> </li>
         <li><a href="http://www.askmaclean.com/archives/lio_listio-aix.html" title="Warning: lio_listio returned EAGAIN Performance degradation may be seen">Warning: lio_listio returned EAGAIN Performance degradation may be seen</a> </li>
         <li><a href="http://www.askmaclean.com/archives/mmon-slave%e6%97%a5%e5%bf%97kdl_trim-newlen-messages.html" title="MMON Slave日志[KDL_TRIM]: NEWLEN: MESSAGES">MMON Slave日志[KDL_TRIM]: NEWLEN: MESSAGES</a> </li>
         <li><a href="http://www.askmaclean.com/archives/libclntsh-so-wrong-elf-class-elfclass32%e9%94%99%e8%af%af%e4%b8%80%e4%be%8b.html" title="LIBCLNTSH.SO: WRONG ELF CLASS: ELFCLASS32错误一例">LIBCLNTSH.SO: WRONG ELF CLASS: ELFCLASS32错误一例</a> </li>
         <li><a href="http://www.askmaclean.com/archives/dbms_logmnr-unsupported-sqlredo.html" title="dbms_logmnr Unsupported SQLREDO">dbms_logmnr Unsupported SQLREDO</a> </li>
         <li><a href="http://www.askmaclean.com/archives/%e4%ba%86%e8%a7%a3sysdate%e5%87%bd%e6%95%b0.html" title="了解SYSDATE函数">了解SYSDATE函数</a> </li>
         <li><a href="http://www.askmaclean.com/archives/kjc-wait-for-msg-sends-to-complete.html" title="Oracle等待事件KJC:Wait for msg sends to complete">Oracle等待事件KJC:Wait for msg sends to complete</a> </li>
         <li><a href="http://www.askmaclean.com/archives/smon-maintain-col-usage.html" title="了解你所不知道的SMON功能(四):维护col_usage$字典基表">了解你所不知道的SMON功能(四):维护col_usage$字典基表</a> </li>
        </ul>
        <a href="http://www.askmaclean.com/archives/category/oracle/troubleshooting"> </a>
       </div>
      </div> 
      <div id="listcategorypostswidget-9" class="widget widget_listcategorypostswidget">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">12c新特性</h4> 
        <ul>
         <li><a href="http://www.askmaclean.com/archives/oracle-12c-pluggable-database.html" title="Oracle 12c可插拔数据库通用架构图">Oracle 12c可插拔数据库通用架构图</a> </li>
         <li><a href="http://www.askmaclean.com/archives/12cr1-scalable-lgwr-_use_single_log_writer.html" title="【12c新特性】多LGWR进程SCALABLE LGWR “_use_single_log_writer”">【12c新特性】多LGWR进程SCALABLE LGWR “_use_single_log_writer”</a> </li>
         <li><a href="http://www.askmaclean.com/archives/%e5%9f%ba%e4%ba%8e12c-in-memory%e6%96%b0%e7%89%b9%e6%80%a7%e7%9a%84sql%e4%bc%98%e5%8c%96%e6%af%94%e6%8b%bc.html" title="基于12c in-memory新特性的SQL优化比拼">基于12c in-memory新特性的SQL优化比拼</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-12-1-0-2%e6%96%b0%e7%89%b9%e6%80%a7-approximate-count-distinct.html" title="Oracle 12.1.0.2新特性 Approximate Count Distinct">Oracle 12.1.0.2新特性 Approximate Count Distinct</a> </li>
         <li><a href="http://www.askmaclean.com/archives/restorerecover-from-service.html" title="12c RMAN新特性restore/recover from service远程恢复">12c RMAN新特性restore/recover from service远程恢复</a> </li>
         <li><a href="http://www.askmaclean.com/archives/12c-in-memory.html" title="【Oracle 12c】In-Memory Database Cache内存数据库选项">【Oracle 12c】In-Memory Database Cache内存数据库选项</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-12c-new-feature.html" title="Oracle 12c新特性学习列表">Oracle 12c新特性学习列表</a> </li>
         <li><a href="http://www.askmaclean.com/archives/oracle-12c-in-memory.html" title="#ORACLE 12c in-memory# ">#ORACLE 12c in-memory#</a> </li>
         <li><a href="http://www.askmaclean.com/archives/%e6%8f%ad%e7%a7%98oracle-12c-in-memory-option.html" title="#揭秘Oracle 12c in-memory option# ">#揭秘Oracle 12c in-memory option#</a> </li>
         <li><a href="http://www.askmaclean.com/archives/using-12c-cloud-control-to-manage-a-high-available-environment.html" title="Using 12c Cloud Control To Manage A High Available Environment">Using 12c Cloud Control To Manage A High Available Environment</a> </li>
        </ul>
        <a href="http://www.askmaclean.com/archives/category/oracle/oracle-12c"> </a>
       </div>
      </div> 
      <div id="listcategorypostswidget-10" class="widget widget_listcategorypostswidget">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">实用脚本大全</h4> 
        <ul>
         <li><a href="http://www.askmaclean.com/archives/dbms_space-object_growth_trend.html" title="DBMS_SPACE.OBJECT_GROWTH_TREND">DBMS_SPACE.OBJECT_GROWTH_TREND</a> </li>
         <li><a href="http://www.askmaclean.com/archives/script-cpu-mhz.html" title="【脚本】检测CPU计算能力">【脚本】检测CPU计算能力</a> </li>
         <li><a href="http://www.askmaclean.com/archives/spa-script.html" title="SQL Performance Analyzer SPA常用脚本汇总">SQL Performance Analyzer SPA常用脚本汇总</a> </li>
         <li><a href="http://www.askmaclean.com/archives/script-mine-awr-scn-trend.html" title="Script:挖掘AWR实现查询SCN历史增长走势">Script:挖掘AWR实现查询SCN历史增长走势</a> </li>
         <li><a href="http://www.askmaclean.com/archives/recommend-sql-dashboard-for-rac.html" title="从此SQLPLUS有了Top命令">从此SQLPLUS有了Top命令</a> </li>
         <li><a href="http://www.askmaclean.com/archives/maclean-script-tool-box.html" title="Maclean Liu的脚本工具盒">Maclean Liu的脚本工具盒</a> </li>
         <li><a href="http://www.askmaclean.com/archives/script-diag-sysaux-space-usage.html" title="Script:诊断SYSAUX表空间使用情况">Script:诊断SYSAUX表空间使用情况</a> </li>
         <li><a href="http://www.askmaclean.com/archives/script-awr-get-segment-grow-history.html" title="Script:查找表或索引增长的历史信息">Script:查找表或索引增长的历史信息</a> </li>
         <li><a href="http://www.askmaclean.com/archives/asm-fix-listhead-kfed.html" title="Script:ASM修复脚本，寻找LISTHEAD和Kfed源数据">Script:ASM修复脚本，寻找LISTHEAD和Kfed源数据</a> </li>
         <li><a href="http://www.askmaclean.com/archives/script%e6%89%be%e5%87%baasm%e4%b8%ad%e7%9a%84spfile%e5%8f%82%e6%95%b0%e6%96%87%e4%bb%b6.html" title="Script:找出ASM中的Spfile参数文件">Script:找出ASM中的Spfile参数文件</a> </li>
        </ul>
        <a href="http://www.askmaclean.com/archives/category/oracle/script"> </a>
       </div>
      </div> 
      <div id="categories-2" class="widget widget_categories">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">文章分类</h4> 
        <label class="screen-reader-text" for="cat">文章分类</label>
        <select name="cat" id="cat" class="postform"> <option value="-1">选择分类目录</option> <option class="level-0" value="30">AIX</option> <option class="level-0" value="2270">Docker</option> <option class="level-0" value="37">EnterpriseDB|PostgrePlus</option> <option class="level-0" value="2269">hadoop</option> <option class="level-0" value="883">hardware</option> <option class="level-1" value="2166">&nbsp;&nbsp;&nbsp;Dell</option> <option class="level-1" value="2165">&nbsp;&nbsp;&nbsp;oracle-sun</option> <option class="level-0" value="5">IT业界风云</option> <option class="level-0" value="7">Linux</option> <option class="level-0" value="362">Microsoft</option> <option class="level-0" value="1306">Mobile</option> <option class="level-0" value="2265">MongoDB</option> <option class="level-0" value="8">My Life</option> <option class="level-1" value="25">&nbsp;&nbsp;&nbsp;旅行</option> <option class="level-1" value="26">&nbsp;&nbsp;&nbsp;杂谈</option> <option class="level-0" value="2259">MYSQL</option> <option class="level-0" value="2043">NOSQL</option> <option class="level-0" value="9">Oracle</option> <option class="level-1" value="1065">&nbsp;&nbsp;&nbsp;EM</option> <option class="level-1" value="881">&nbsp;&nbsp;&nbsp;Exadata</option> <option class="level-1" value="875">&nbsp;&nbsp;&nbsp;GoldenGate</option> <option class="level-1" value="1390">&nbsp;&nbsp;&nbsp;IO</option> <option class="level-1" value="296">&nbsp;&nbsp;&nbsp;Java</option> <option class="level-1" value="1162">&nbsp;&nbsp;&nbsp;Mysql</option> <option class="level-1" value="2274">&nbsp;&nbsp;&nbsp;OCM</option> <option class="level-1" value="1750">&nbsp;&nbsp;&nbsp;OCP</option> <option class="level-1" value="29">&nbsp;&nbsp;&nbsp;Oracle 11g新特性</option> <option class="level-1" value="1034">&nbsp;&nbsp;&nbsp;Oracle 12c新特性</option> <option class="level-1" value="2217">&nbsp;&nbsp;&nbsp;oracle 13c新特性</option> <option class="level-1" value="939">&nbsp;&nbsp;&nbsp;Oracle ASM</option> <option class="level-1" value="32">&nbsp;&nbsp;&nbsp;Oracle Bug</option> <option class="level-1" value="1166">&nbsp;&nbsp;&nbsp;Oracle Competitor竞争对手</option> <option class="level-1" value="34">&nbsp;&nbsp;&nbsp;Oracle Corruption</option> <option class="level-1" value="36">&nbsp;&nbsp;&nbsp;Oracle Data Guard Standby</option> <option class="level-1" value="1148">&nbsp;&nbsp;&nbsp;Oracle Enterprise Manager</option> <option class="level-1" value="886">&nbsp;&nbsp;&nbsp;Oracle Flashback闪回技术</option> <option class="level-1" value="286">&nbsp;&nbsp;&nbsp;Oracle Internal Research内部原理研究</option> <option class="level-1" value="700">&nbsp;&nbsp;&nbsp;Oracle LOB大对象</option> <option class="level-1" value="710">&nbsp;&nbsp;&nbsp;Oracle Lock锁机制</option> <option class="level-1" value="41">&nbsp;&nbsp;&nbsp;Oracle Memory SGA&amp;PGA内存问题</option> <option class="level-1" value="448">&nbsp;&nbsp;&nbsp;Oracle PL/SQL</option> <option class="level-1" value="13">&nbsp;&nbsp;&nbsp;Oracle RAC</option> <option class="level-1" value="17">&nbsp;&nbsp;&nbsp;Oracle SQL Package</option> <option class="level-1" value="18">&nbsp;&nbsp;&nbsp;Oracle SQL性能调优</option> <option class="level-1" value="23">&nbsp;&nbsp;&nbsp;Oracle分区技术partition</option> <option class="level-1" value="718">&nbsp;&nbsp;&nbsp;Oracle分布式事务Distributed Transaction</option> <option class="level-1" value="10">&nbsp;&nbsp;&nbsp;Oracle初始参数Parameter</option> <option class="level-1" value="1229">&nbsp;&nbsp;&nbsp;Oracle升级Upgade</option> <option class="level-1" value="1642">&nbsp;&nbsp;&nbsp;Oracle基础概念Concept</option> <option class="level-1" value="565">&nbsp;&nbsp;&nbsp;Oracle存储Storage</option> <option class="level-1" value="33">&nbsp;&nbsp;&nbsp;Oracle安装配置Installation&amp;Configuration</option> <option class="level-1" value="1446">&nbsp;&nbsp;&nbsp;Oracle工具Tools</option> <option class="level-1" value="38">&nbsp;&nbsp;&nbsp;Oracle常见错误Errors</option> <option class="level-1" value="62">&nbsp;&nbsp;&nbsp;Oracle应用程序Application</option> <option class="level-2" value="1247">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EBS</option> <option class="level-1" value="708">&nbsp;&nbsp;&nbsp;Oracle开发编程Development&amp;Programing</option> <option class="level-1" value="19">&nbsp;&nbsp;&nbsp;Oracle故障分析Troubleshooting</option> <option class="level-1" value="846">&nbsp;&nbsp;&nbsp;Oracle教学课程Course</option> <option class="level-1" value="1039">&nbsp;&nbsp;&nbsp;Oracle数据仓库Data Warehouse</option> <option class="level-1" value="16">&nbsp;&nbsp;&nbsp;Oracle数据库安全Security</option> <option class="level-1" value="31">&nbsp;&nbsp;&nbsp;Oracle数据恢复、数据库恢复、灾难恢复</option> <option class="level-1" value="35">&nbsp;&nbsp;&nbsp;Oracle数据结构</option> <option class="level-1" value="918">&nbsp;&nbsp;&nbsp;Oracle数据迁移Migration</option> <option class="level-1" value="207">&nbsp;&nbsp;&nbsp;Oracle文档下载Document</option> <option class="level-1" value="732">&nbsp;&nbsp;&nbsp;Oracle流复制Streams</option> <option class="level-1" value="27">&nbsp;&nbsp;&nbsp;Oracle物化视图materialized view</option> <option class="level-1" value="2114">&nbsp;&nbsp;&nbsp;Oracle等待事件wait event</option> <option class="level-1" value="40">&nbsp;&nbsp;&nbsp;Oracle索引index</option> <option class="level-1" value="1241">&nbsp;&nbsp;&nbsp;Oracle网格技术Grid</option> <option class="level-1" value="368">&nbsp;&nbsp;&nbsp;Oracle网络SQL*NET</option> <option class="level-1" value="15">&nbsp;&nbsp;&nbsp;Oracle脚本script</option> <option class="level-1" value="11">&nbsp;&nbsp;&nbsp;Oracle补丁patch</option> <option class="level-1" value="2237">&nbsp;&nbsp;&nbsp;PRM</option> <option class="level-1" value="2323">&nbsp;&nbsp;&nbsp;PRM-DUL</option> <option class="level-1" value="2238">&nbsp;&nbsp;&nbsp;shoug</option> <option class="level-1" value="1211">&nbsp;&nbsp;&nbsp;Solaris</option> <option class="level-1" value="22">&nbsp;&nbsp;&nbsp;Whitepaper</option> <option class="level-1" value="1055">&nbsp;&nbsp;&nbsp;云技术Cloud</option> <option class="level-0" value="1766">software</option> <option class="level-1" value="2168">&nbsp;&nbsp;&nbsp;Hadoop</option> <option class="level-1" value="2170">&nbsp;&nbsp;&nbsp;oracle database</option> <option class="level-0" value="2325">Solix</option> <option class="level-0" value="21">Web 2.0</option> <option class="level-1" value="39">&nbsp;&nbsp;&nbsp;Google技术</option> <option class="level-0" value="4">经典书籍</option> <option class="level-0" value="1056">虚拟化Virtualization</option> </select> 
        <script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dropdown = document.getElementById( "cat" );
	function onCatChange() {
		if ( dropdown.options[ dropdown.selectedIndex ].value > 0 ) {
			location.href = "http://www.askmaclean.com/?cat=" + dropdown.options[ dropdown.selectedIndex ].value;
		}
	}
	dropdown.onchange = onCatChange;
})();
/* ]]> */
</script> 
       </div>
      </div> 
      <div id="archives-2" class="widget widget_archive">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">文章归档</h4> 
        <label class="screen-reader-text" for="archives-dropdown-2">文章归档</label> 
        <select id="archives-dropdown-2" name="archive-dropdown" onchange="document.location.href=this.options[this.selectedIndex].value;"> <option value="">选择月份</option> <option value="http://www.askmaclean.com/archives/2017/03"> 2017年三月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2017/02"> 2017年二月 &nbsp;(4)</option> <option value="http://www.askmaclean.com/archives/2017/01"> 2017年一月 &nbsp;(5)</option> <option value="http://www.askmaclean.com/archives/2016/11"> 2016年十一月 &nbsp;(2)</option> <option value="http://www.askmaclean.com/archives/2016/10"> 2016年十月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2016/09"> 2016年九月 &nbsp;(4)</option> <option value="http://www.askmaclean.com/archives/2016/08"> 2016年八月 &nbsp;(16)</option> <option value="http://www.askmaclean.com/archives/2016/06"> 2016年六月 &nbsp;(3)</option> <option value="http://www.askmaclean.com/archives/2016/04"> 2016年四月 &nbsp;(4)</option> <option value="http://www.askmaclean.com/archives/2016/03"> 2016年三月 &nbsp;(6)</option> <option value="http://www.askmaclean.com/archives/2016/02"> 2016年二月 &nbsp;(16)</option> <option value="http://www.askmaclean.com/archives/2016/01"> 2016年一月 &nbsp;(25)</option> <option value="http://www.askmaclean.com/archives/2015/12"> 2015年十二月 &nbsp;(3)</option> <option value="http://www.askmaclean.com/archives/2015/11"> 2015年十一月 &nbsp;(4)</option> <option value="http://www.askmaclean.com/archives/2015/10"> 2015年十月 &nbsp;(6)</option> <option value="http://www.askmaclean.com/archives/2015/09"> 2015年九月 &nbsp;(5)</option> <option value="http://www.askmaclean.com/archives/2015/08"> 2015年八月 &nbsp;(27)</option> <option value="http://www.askmaclean.com/archives/2015/07"> 2015年七月 &nbsp;(32)</option> <option value="http://www.askmaclean.com/archives/2015/06"> 2015年六月 &nbsp;(13)</option> <option value="http://www.askmaclean.com/archives/2015/05"> 2015年五月 &nbsp;(44)</option> <option value="http://www.askmaclean.com/archives/2015/04"> 2015年四月 &nbsp;(10)</option> <option value="http://www.askmaclean.com/archives/2015/03"> 2015年三月 &nbsp;(29)</option> <option value="http://www.askmaclean.com/archives/2015/02"> 2015年二月 &nbsp;(15)</option> <option value="http://www.askmaclean.com/archives/2015/01"> 2015年一月 &nbsp;(27)</option> <option value="http://www.askmaclean.com/archives/2014/12"> 2014年十二月 &nbsp;(134)</option> <option value="http://www.askmaclean.com/archives/2014/11"> 2014年十一月 &nbsp;(25)</option> <option value="http://www.askmaclean.com/archives/2014/10"> 2014年十月 &nbsp;(17)</option> <option value="http://www.askmaclean.com/archives/2014/09"> 2014年九月 &nbsp;(41)</option> <option value="http://www.askmaclean.com/archives/2014/08"> 2014年八月 &nbsp;(14)</option> <option value="http://www.askmaclean.com/archives/2014/07"> 2014年七月 &nbsp;(12)</option> <option value="http://www.askmaclean.com/archives/2014/06"> 2014年六月 &nbsp;(19)</option> <option value="http://www.askmaclean.com/archives/2014/05"> 2014年五月 &nbsp;(19)</option> <option value="http://www.askmaclean.com/archives/2014/04"> 2014年四月 &nbsp;(14)</option> <option value="http://www.askmaclean.com/archives/2014/03"> 2014年三月 &nbsp;(18)</option> <option value="http://www.askmaclean.com/archives/2014/02"> 2014年二月 &nbsp;(35)</option> <option value="http://www.askmaclean.com/archives/2014/01"> 2014年一月 &nbsp;(167)</option> <option value="http://www.askmaclean.com/archives/2013/12"> 2013年十二月 &nbsp;(15)</option> <option value="http://www.askmaclean.com/archives/2013/11"> 2013年十一月 &nbsp;(16)</option> <option value="http://www.askmaclean.com/archives/2013/10"> 2013年十月 &nbsp;(13)</option> <option value="http://www.askmaclean.com/archives/2013/09"> 2013年九月 &nbsp;(17)</option> <option value="http://www.askmaclean.com/archives/2013/08"> 2013年八月 &nbsp;(21)</option> <option value="http://www.askmaclean.com/archives/2013/07"> 2013年七月 &nbsp;(115)</option> <option value="http://www.askmaclean.com/archives/2013/06"> 2013年六月 &nbsp;(102)</option> <option value="http://www.askmaclean.com/archives/2013/05"> 2013年五月 &nbsp;(45)</option> <option value="http://www.askmaclean.com/archives/2013/04"> 2013年四月 &nbsp;(209)</option> <option value="http://www.askmaclean.com/archives/2013/03"> 2013年三月 &nbsp;(196)</option> <option value="http://www.askmaclean.com/archives/2013/02"> 2013年二月 &nbsp;(35)</option> <option value="http://www.askmaclean.com/archives/2013/01"> 2013年一月 &nbsp;(27)</option> <option value="http://www.askmaclean.com/archives/2012/12"> 2012年十二月 &nbsp;(12)</option> <option value="http://www.askmaclean.com/archives/2012/11"> 2012年十一月 &nbsp;(28)</option> <option value="http://www.askmaclean.com/archives/2012/10"> 2012年十月 &nbsp;(9)</option> <option value="http://www.askmaclean.com/archives/2012/09"> 2012年九月 &nbsp;(16)</option> <option value="http://www.askmaclean.com/archives/2012/08"> 2012年八月 &nbsp;(20)</option> <option value="http://www.askmaclean.com/archives/2012/07"> 2012年七月 &nbsp;(10)</option> <option value="http://www.askmaclean.com/archives/2012/06"> 2012年六月 &nbsp;(18)</option> <option value="http://www.askmaclean.com/archives/2012/05"> 2012年五月 &nbsp;(20)</option> <option value="http://www.askmaclean.com/archives/2012/04"> 2012年四月 &nbsp;(13)</option> <option value="http://www.askmaclean.com/archives/2012/03"> 2012年三月 &nbsp;(14)</option> <option value="http://www.askmaclean.com/archives/2012/02"> 2012年二月 &nbsp;(37)</option> <option value="http://www.askmaclean.com/archives/2012/01"> 2012年一月 &nbsp;(78)</option> <option value="http://www.askmaclean.com/archives/2011/12"> 2011年十二月 &nbsp;(54)</option> <option value="http://www.askmaclean.com/archives/2011/11"> 2011年十一月 &nbsp;(37)</option> <option value="http://www.askmaclean.com/archives/2011/10"> 2011年十月 &nbsp;(62)</option> <option value="http://www.askmaclean.com/archives/2011/09"> 2011年九月 &nbsp;(83)</option> <option value="http://www.askmaclean.com/archives/2011/08"> 2011年八月 &nbsp;(110)</option> <option value="http://www.askmaclean.com/archives/2011/07"> 2011年七月 &nbsp;(19)</option> <option value="http://www.askmaclean.com/archives/2011/06"> 2011年六月 &nbsp;(30)</option> <option value="http://www.askmaclean.com/archives/2011/05"> 2011年五月 &nbsp;(43)</option> <option value="http://www.askmaclean.com/archives/2011/04"> 2011年四月 &nbsp;(28)</option> <option value="http://www.askmaclean.com/archives/2011/03"> 2011年三月 &nbsp;(27)</option> <option value="http://www.askmaclean.com/archives/2011/02"> 2011年二月 &nbsp;(18)</option> <option value="http://www.askmaclean.com/archives/2011/01"> 2011年一月 &nbsp;(28)</option> <option value="http://www.askmaclean.com/archives/2010/12"> 2010年十二月 &nbsp;(49)</option> <option value="http://www.askmaclean.com/archives/2010/11"> 2010年十一月 &nbsp;(28)</option> <option value="http://www.askmaclean.com/archives/2010/10"> 2010年十月 &nbsp;(17)</option> <option value="http://www.askmaclean.com/archives/2010/09"> 2010年九月 &nbsp;(32)</option> <option value="http://www.askmaclean.com/archives/2010/08"> 2010年八月 &nbsp;(39)</option> <option value="http://www.askmaclean.com/archives/2010/07"> 2010年七月 &nbsp;(32)</option> <option value="http://www.askmaclean.com/archives/2010/06"> 2010年六月 &nbsp;(31)</option> <option value="http://www.askmaclean.com/archives/2010/05"> 2010年五月 &nbsp;(13)</option> <option value="http://www.askmaclean.com/archives/2010/04"> 2010年四月 &nbsp;(4)</option> <option value="http://www.askmaclean.com/archives/2010/03"> 2010年三月 &nbsp;(10)</option> <option value="http://www.askmaclean.com/archives/2010/01"> 2010年一月 &nbsp;(8)</option> <option value="http://www.askmaclean.com/archives/2009/12"> 2009年十二月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2009/11"> 2009年十一月 &nbsp;(7)</option> <option value="http://www.askmaclean.com/archives/2009/10"> 2009年十月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2009/09"> 2009年九月 &nbsp;(39)</option> <option value="http://www.askmaclean.com/archives/2009/08"> 2009年八月 &nbsp;(32)</option> <option value="http://www.askmaclean.com/archives/2009/07"> 2009年七月 &nbsp;(9)</option> <option value="http://www.askmaclean.com/archives/2009/06"> 2009年六月 &nbsp;(21)</option> <option value="http://www.askmaclean.com/archives/2009/05"> 2009年五月 &nbsp;(4)</option> <option value="http://www.askmaclean.com/archives/2009/04"> 2009年四月 &nbsp;(4)</option> <option value="http://www.askmaclean.com/archives/2009/03"> 2009年三月 &nbsp;(4)</option> <option value="http://www.askmaclean.com/archives/2009/01"> 2009年一月 &nbsp;(2)</option> <option value="http://www.askmaclean.com/archives/2008/11"> 2008年十一月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2008/10"> 2008年十月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2008/07"> 2008年七月 &nbsp;(3)</option> <option value="http://www.askmaclean.com/archives/2008/06"> 2008年六月 &nbsp;(5)</option> <option value="http://www.askmaclean.com/archives/2008/04"> 2008年四月 &nbsp;(3)</option> <option value="http://www.askmaclean.com/archives/2008/03"> 2008年三月 &nbsp;(3)</option> <option value="http://www.askmaclean.com/archives/2008/02"> 2008年二月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2007/06"> 2007年六月 &nbsp;(6)</option> <option value="http://www.askmaclean.com/archives/2007/04"> 2007年四月 &nbsp;(4)</option> <option value="http://www.askmaclean.com/archives/2007/01"> 2007年一月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2006/08"> 2006年八月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2006/07"> 2006年七月 &nbsp;(9)</option> <option value="http://www.askmaclean.com/archives/2006/06"> 2006年六月 &nbsp;(2)</option> <option value="http://www.askmaclean.com/archives/2006/04"> 2006年四月 &nbsp;(3)</option> <option value="http://www.askmaclean.com/archives/2006/02"> 2006年二月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2005/08"> 2005年八月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2005/07"> 2005年七月 &nbsp;(6)</option> <option value="http://www.askmaclean.com/archives/2005/01"> 2005年一月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2002/11"> 2002年十一月 &nbsp;(1)</option> <option value="http://www.askmaclean.com/archives/2002/01"> 2002年一月 &nbsp;(1)</option> </select> 
       </div>
      </div> 
      <div id="recent-comments-2" class="widget widget_recent_comments">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">最新回复</h4> 
        <ul id="recentcomments">
         <li class="recentcomments"><span class="comment-author-link"><a href="http://www.askmaclean.com/archives/oracle%e5%a6%82%e4%bd%95%e5%88%a4%e5%ae%9a%e7%bb%9f%e8%ae%a1%e4%bf%a1%e6%81%af%e9%99%88%e6%97%a7.html" rel="external nofollow" class="url">oracle如何判定统计信息陈旧</a></span>发表在《<a href="http://www.askmaclean.com/archives/does-gather_stats_job-gather-all-object-stats-every-time.html#comment-211521">Does GATHER_STATS_JOB gather all objects’ stats every time?</a>》</li>
         <li class="recentcomments"><span class="comment-author-link"><a href="http://ashtraydb.com/2016/11/28/ora-20011-kup-11024-in-dbms_stats-gather_stats_job/" rel="external nofollow" class="url">ora-20011 kup-11024 in dbms_stats.gather_stats_job C 我的烟灰缸</a></span>发表在《<a href="http://www.askmaclean.com/archives/%e5%85%b3%e4%ba%8edatapump%e7%9a%84external_table%e6%a8%a1%e5%bc%8f.html#comment-210993">关于DataPump的external_table模式</a>》</li>
         <li class="recentcomments"><span class="comment-author-link"><a href="http://www.askmaclean.com/archives/advisor-from-macleanliu.html" rel="external nofollow" class="url">给Oracle年轻的初学者的几点建议</a></span>发表在《<a href="http://www.askmaclean.com/archives/maclean-work-in-oracle.html#comment-210987">看图说话：Maclean在Oracle的这一年多所留下的足迹</a>》</li>
         <li class="recentcomments"><span class="comment-author-link"><a href="http://www.qingtopdba.com/aws-rds-%e4%b8%8aoracle-%e5%9b%a0%e4%b8%bawmsys-wm_concat-%e5%87%bd%e6%95%b0%e5%a4%b1%e6%95%88%e8%80%8c%e5%af%bc%e8%87%b4%e5%8c%85%e7%bc%96%e8%af%91%e9%94%99%e8%af%af/" rel="external nofollow" class="url">aws rds 上oracle 因为wmsys.wm_concat 函数失效而导致包编译错误 C 红旗迎东风</a></span>发表在《<a href="http://www.askmaclean.com/archives/wmsys-wm_concat.html#comment-210970">【Oracle开发】关于11.2上WMSYS.WM_CONCAT的workaround ORA-00904: “WM_CONCAT”: invalid identifier</a>》</li>
         <li class="recentcomments"><span class="comment-author-link"><a href="http://t.qq.com/qianhaohu" rel="external nofollow" class="url">qzuser</a></span>发表在《<a href="http://www.askmaclean.com/archives/maclean-work-in-oracle.html#comment-210957">看图说话：Maclean在Oracle的这一年多所留下的足迹</a>》</li>
         <li class="recentcomments"><span class="comment-author-link"><a href="http://www.askmaclean.com" rel="external nofollow" class="url">Maclean Liu</a></span>发表在《<a href="http://www.askmaclean.com/archives/utilize-udev-resolve-11gr2-rac-asm-device-name.html#comment-210915">利用UDEV服务解决RAC ASM存储设备名</a>》</li>
         <li class="recentcomments"><span class="comment-author-link"><a href="http://www.uedsc.com/298207.html" rel="external nofollow" class="url">如何分析解读systemstat dump产生的trc文件 - 文章教程 - 编程设计 - 问说网</a></span>发表在《<a href="http://www.askmaclean.com/archives/%e8%bd%ac%e5%a6%82%e4%bd%95%e9%98%85%e8%af%bbsystemstate-dump.html#comment-210883">[转]如何阅读systemstate dump</a>》</li>
         <li class="recentcomments"><span class="comment-author-link">kevin</span>发表在《<a href="http://www.askmaclean.com/archives/utilize-udev-resolve-11gr2-rac-asm-device-name.html#comment-210496">利用UDEV服务解决RAC ASM存储设备名</a>》</li>
         <li class="recentcomments"><span class="comment-author-link"><a href="http://www.searu.org/26698.html" rel="external nofollow" class="url">Oracle补充日志及日志记录规则 | SEARU.ORG</a></span>发表在《<a href="http://www.askmaclean.com/archives/oracle-supplemental-%e8%a1%a5%e5%85%a8%e6%97%a5%e5%bf%97%e4%bb%8b%e7%bb%8d.html#comment-209682">Oracle Supplemental 补全日志介绍</a>》</li>
         <li class="recentcomments"><span class="comment-author-link">gp</span>发表在《<a href="http://www.askmaclean.com/archives/oracle-bbed%e7%9a%84%e4%bb%a3%e7%a0%81%e9%a3%8e%e6%a0%bc.html#comment-209681">Oracle bbed的代码风格</a>》</li>
        </ul>
       </div>
      </div> 
      <div id="linkcat-2" class="widget widget_links">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">国内Oracle圈</h4> 
        <ul class="xoxo blogroll"> 
         <li><a href="http://www.askoracle.org" target="_blank">Ask Oracle社区</a></li> 
         <li><a href="http://www.banping.com/">banping</a></li> 
         <li><a href="http://www.dbform.com/">CHANEL [K]</a></li> 
         <li><a href="http://www.dbdao.com/" target="_blank">dbdao</a></li> 
         <li><a href="http://blog.dbdao.com/" target="_blank">dbdao博客</a></li> 
         <li><a href="http://www.dbafan.com/">eagle's home</a></li> 
         <li><a href="http://www.ludatou.com/">Luda's life</a></li> 
         <li><a href="http://www.lunar2013.com/" target="_blank">lunar</a></li> 
         <li><a href="http://blog.csdn.net/liu_maclean">mycsdn</a></li> 
         <li><a href="http://oracleseeker.com/" target="_blank">Oracle探索者</a></li> 
         <li><a href="http://www.orczhou.com/">orczhou</a></li> 
         <li><a href="https://forums.oracle.com/forums/forum.jspa?forumID=314">OTN中文论坛</a></li> 
         <li><a href="http://www.parnassusdata.com/" target="_blank">parnassusdata</a></li> 
         <li><a href="http://www.rickyzhu.com/">ricky.zhu</a></li> 
         <li><a href="http://www.killdb.com/" title="love wife &amp; love life ――Roger">Roger</a></li> 
         <li><a href="http://tomszrp.itpub.net/">Thomas Zhang的杂货铺</a></li> 
         <li><a href="http://blogs.oracle.com/toddbao/" target="_blank">Todd Bao's Blog (包光磊)</a></li> 
         <li><a href="http://www.vmcd.org/">vmcd's library Home</a></li> 
         <li><a href="http://www.oracleblog.org/">小荷's Blog</a></li> 
         <li><a href="http://www.cnblogs.com/macleanoracle/" target="_blank">我在博客园的镜像</a></li> 
         <li><a href="http://www.laoxiong.net">老熊</a></li> 
        </ul> 
       </div>
      </div> 
      <div id="linkcat-2242" class="widget widget_links">
       <div class="widget-wrap">
        <h4 class="widget-title widgettitle">国外Oracle圈</h4> 
        <ul class="xoxo blogroll"> 
         <li><a href="http://rwijk.blogspot.jp/" target="_blank">ABOUT ORACLE</a></li> 
         <li><a href="http://www.adellera.it/blog/index.php" target="_blank">Alberto Dell'Era</a></li> 
         <li><a href="http://afatkulin.blogspot.jp/" target="_blank">Alex Fatkulin's Blog</a></li> 
         <li><a href="http://allthingsoracle.com/" target="_blank">allthingsoracle</a></li> 
         <li><a href="http://ardentperf.com/" target="_blank">Ardent Performance Computing</a></li> 
         <li><a href="http://blog.aristadba.com/" target="_blank">AristaDBA's Oracle Blog</a></li> 
         <li><a href="http://asmsupportguy.blogspot.jp/" target="_blank">ASM Support Guy</a></li> 
         <li><a href="http://aychin.wordpress.com/" target="_blank">Aychin's Oracle RDBMS Blog</a></li> 
         <li><a href="http://www.orchestrapit.co.uk/" target="_blank">Boneist's Oracle Blog</a></li> 
         <li><a href="http://carymillsap.blogspot.jp/" target="_blank">Cary Millsap</a></li> 
         <li><a href="http://hoopercharles.wordpress.com/" target="_blank">Charles Hooper's Oracle Notes</a></li> 
         <li><a href="http://christianbilien.wordpress.com/" target="_blank">Christian Bilien’s Oracle performance and tuning blog</a></li> 
         <li><a href="http://drsalbertspijkers.blogspot.jp/" target="_blank">DBA consultant</a></li> 
         <li><a href="http://dbasrus.blogspot.jp/" target="_blank">DBAS-R-US</a></li> 
         <li><a href="http://dbmsmusings.blogspot.jp/" target="_blank">DBMS MUSINGS</a></li> 
         <li><a href="http://dioncho.wordpress.com/" target="_blank">Dion Cho C Oracle Performance Storyteller</a></li> 
         <li><a href="http://el-caro.blogspot.jp/" target="_blank">el-caro</a></li> 
         <li><a href="http://externaltable.blogspot.jp/" target="_blank">External Table</a></li> 
         <li><a href="http://ferhatsengonul.wordpress.com/" target="_blank">Ferhat's Blog</a></li> 
         <li><a href="http://flashdba.com/" target="_blank">flashdba</a></li> 
         <li><a href="http://blog.gerwinhendriksen.com/" target="_blank">gerwinhendriksen's blog</a></li> 
         <li><a href="http://glennfawcett.wordpress.com/" target="_blank">Glenn Fawcett's Oracle blog</a></li> 
         <li><a href="http://gjilevski.com/" target="_blank">Guenadi N Jilevski's Oracle BLOG</a></li> 
         <li><a href="http://hadoop.askmaclean.com/" target="_blank">hadoop feed</a></li> 
         <li><a href="http://hemantoracledba.blogspot.jp/" target="_blank">Hemant's Oracle DBA Blog</a></li> 
         <li><a href="http://intermediatesql.com/" target="_blank">intermediate sql</a></li> 
         <li><a href="http://jagjeet.wordpress.com/" target="_blank">Jagjeet's Oracle Blog</a></li> 
         <li><a href="http://jkstill.blogspot.jp/" target="_blank">Jared Still's Ramblings</a></li> 
         <li><a href="http://jarneil.wordpress.com/" target="_blank">jarneil's oracle blog</a></li> 
         <li><a href="http://www.oraclerealworld.com/" target="_blank">Kyle Hailey</a></li> 
         <li><a href="http://www.mahir-quluzade.com/" target="_blank">mahir-quluzade</a></li> 
         <li><a href="http://mongodb.askmaclean.com/" target="_blank">mongodb feed</a></li> 
         <li><a href="https://blogs.oracle.com/ou_trainers/" target="_blank">Oracle University Classroom</a></li> 
         <li><a href="http://oracledoug.com/" target="_blank">oracledoug</a></li> 
         <li><a href="http://prodlife.wordpress.com/" target="_blank">simple Hadoop DBA</a></li> 
         <li><a href="http://anotherdavewebster.wordpress.com/" target="_blank">Tinkering with Oracle</a></li> 
        </ul> 
       </div>
      </div> 
     </div>
    </div>
   </div>
   <div id="footer" class="footer">
    <div class="wrap">
     <div class="gototop">
      <p><a href="#wrap" rel="nofollow">Return to top of page</a></p>
     </div>
     <div class="creds">
      <p>Copyright &copy;&nbsp;2017 &middot; <a href="http://www.studiopress.com/themes/minimum">Minimum Theme</a> on <a href="http://www.studiopress.com/">Genesis Framework</a> &middot; <a href="http://wordpress.org/">WordPress</a> &middot; <a href="http://www.askmaclean.com/wp-login.php">Log in</a></p>
     </div>
    </div>
   </div>
  </div>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-16568286-7', 'askmaclean.com');
  ga('send', 'pageview');

</script>
  <script type="text/javascript" src="http://www.askmaclean.com/wp-includes/js/hoverIntent.min.js?ver=1.8.1"></script> 
  <script type="text/javascript" src="http://www.askmaclean.com/wp-content/themes/genesis/lib/js/menu/superfish.min.js?ver=1.7.5"></script> 
  <script type="text/javascript" src="http://www.askmaclean.com/wp-content/themes/genesis/lib/js/menu/superfish.args.min.js?ver=2.4.2"></script> 
  <script type="text/javascript" src="http://www.askmaclean.com/wp-content/themes/genesis/lib/js/menu/superfish.compat.min.js?ver=2.4.2"></script> 
  <script type="text/javascript" src="http://www.askmaclean.com/wp-includes/js/wp-embed.min.js?ver=4.7.3"></script> 
  <script type="text/javascript">
var duoshuoQuery = {"short_name":"askmaclean","sso":{"login":"http:\/\/www.askmaclean.com\/wp-login.php?action=duoshuo_login","logout":"http:\/\/www.askmaclean.com\/wp-login.php?action=logout&_wpnonce=8b7f1ac330"},"theme":"default","stylePatch":"wordpress\/"};
duoshuoQuery.sso.login += '&redirect_to=' + encodeURIComponent(window.location.href);
duoshuoQuery.sso.logout += '&redirect_to=' + encodeURIComponent(window.location.href);
</script> 
  <script type="text/javascript" src="http://static.duoshuo.com/embed.js" charset="UTF-8" async="async"></script> 
  <script>var pltNewTabURLs = ["http:\/\/www.shoug.info","http:\/\/www.askmaclean.com\/sitemap.html","http:\/\/www.askmaclean.com\/archives\/exadata.html","https:\/\/blogs.oracle.com\/askmaclean\/","http:\/\/feed.askmaclean.com\/","http:\/\/www.askmaclean.com\/archives\/oracle-database-recover.html"];(function(){(function(e){var t;t=e.jQueryWP||e.jQuery;return t(function(e){return typeof e.fn.on=="function"?e("body").on("click","a",function(t){var n;n=e(this);if(e.inArray(n.attr("href"),pltNewTabURLs)>-1)return n.attr("target","_blank")}):typeof console!="undefined"&&console!==null?console.log("Page Links To: Some other code has overridden the WordPress copy of jQuery. This is bad. Because of this, Page Links To cannot open links in a new window."):void 0})})(window)}).call(this);</script> 
  <div style="width:300px;margin:0 auto; padding:20px 0;"> 
   <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31010802001379" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="http://zcdn.parnassusdata.com/%E5%A4%87%E6%A1%88%E5%9B%BE%E6%A0%87.png" style="float:left;" /><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">沪公网安备 31010802001379号</p></a> 
  </div> 
  <style>
		.connection-pop{
			position: fixed;
			width: 130px;
			top: 50%;
			right: 0;
			margin-top: -200px;
			background: #fff;
			border: 2px solid #FF532A;
    	border-right: 0;
			box-sizing: content-box;
			-webkit-box-sizing: content-box;
			-moz-box-sizing: content-box
		}
		.connection-item{
			display: block;
			width: 130px;
			height: 130px;
			overflow: hidden;
			font-family: "Microsoft Yahei"
		}
		.connection-pop .connection-item + .connection-item{
			border-top: 1px solid #FF532A;
		}
		.connection-item a{
			display: block;
			width: 80px;
			margin: auto;
			text-decoration: none;
			color: #555;
			transition: .3s ease-out;
		}
		.connection-item a:hover{
			background: #fafafa;
		}
		.connection-item i{
			display: block;
			width: 50px;
			height: 50px;
			margin: 10px auto 5px;
			background-image: url("http://7xl1jo.com2.z0.glb.qiniucdn.com/connection1.png");
		}
		.connection-item span{
			display: block;
			text-align: center;
			font-weight: bold;
			font-size: 14px;
		}
		.connection-item strong{
			display: block;
			padding: 10px 5px 0;
			text-align: center;
			line-height: 12px;
			font-size: 13px;
			font-weight: normal;
			word-break: break-word;
		}
		.connection-item.qq i{
			background-position: -50px 0;
		}
		.connection-item.tel i{
			background-position: -100px 0;
		}
		.connection-item.email i{
			background-position: 0 0;
		}
		.connection-item.email strong{
			padding-top: 5px;
		}
	</style> 
  <div class="connection-pop"> 
   <div class="connection-item tel"> 
    <i></i>
    <span>TEL/</span>
    <strong>+86 13764045638</strong> 
   </div> 
   <div class="connection-item email"> 
    <a href="mailto:service@parnassusdata.com" target="_blank"> <i></i><span>Email</span> </a> 
    <strong>service@parnassusdata.com</strong> 
   </div> 
   <div class="connection-item qq"> 
    <a href="http://wpa.qq.com/msgrd?v=3&amp;uin=47079569&amp;site=qq&amp;menu=yes" target="_blank"> <i></i><span>QQ</span> </a> 
    <strong>47079569</strong> 
   </div> 
  </div>   
  <!-- Dynamic page generated in 1.456 seconds. --> 
  <!-- Cached page generated by WP-Super-Cache on 2017-03-28 04:29:21 --> 
  <!-- Compression = gzip -->
 </body>
</html>