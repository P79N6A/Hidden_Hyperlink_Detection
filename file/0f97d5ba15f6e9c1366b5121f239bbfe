<!DOCTYPE html>
<html lang="zh-CN" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
 <head> 
  <meta charset="UTF-8" /> 
  <meta name="viewport" content="width=device-width" /> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
  <link rel="profile" href="http://gmpg.org/xfn/11" /> 
  <link rel="pingback" href="http://www.luoxufeiyan.com/xmlrpc.php" /> 
  <!--[if lt IE 9]>
	<script src="http://www.luoxufeiyan.com/wp-content/themes/Slackview/js/html5.js"></script>
	<![endif]--> 
  <title>Archives for 一月 17th, 2015 | 落絮飞雁的个人网站</title> 
  <!-- SEO Ultimate (http://www.seodesignsolutions.com/wordpress-seo/) --> 
  <!-- /SEO Ultimate --> 
  <link rel="dns-prefetch" href="//s.w.org" /> 
  <link rel="alternate" type="application/rss+xml" title="落絮飞雁的个人网站 &raquo; Feed" href="http://www.luoxufeiyan.com/feed/" /> 
  <link rel="alternate" type="application/rss+xml" title="落絮飞雁的个人网站 &raquo; 评论Feed" href="http://www.luoxufeiyan.com/comments/feed/" /> 
  <script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.luoxufeiyan.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.3"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script> 
  <style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style> 
  <link rel="stylesheet" id="crayon-css" href="http://www.luoxufeiyan.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta" type="text/css" media="all" /> 
  <link rel="stylesheet" id="toc-screen-css" href="http://www.luoxufeiyan.com/wp-content/plugins/table-of-contents-plus/screen.min.css?ver=1509" type="text/css" media="all" /> 
  <script type="text/javascript" src="http://www.luoxufeiyan.com/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script> 
  <script type="text/javascript" src="http://www.luoxufeiyan.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/www.luoxufeiyan.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"\u4f7f\u7528 %s \u590d\u5236\uff0c\u4f7f\u7528 %s \u7c98\u8d34\u3002","minimize":"\u70b9\u51fb\u5c55\u5f00\u4ee3\u7801"};
/* ]]> */
</script> 
  <script type="text/javascript" src="http://www.luoxufeiyan.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta"></script> 
  <link rel="https://api.w.org/" href="http://www.luoxufeiyan.com/wp-json/" /> 
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.luoxufeiyan.com/xmlrpc.php?rsd" /> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.luoxufeiyan.com/wp-includes/wlwmanifest.xml" /> 
  <meta name="generator" content="WordPress 4.7.3" /> 
  <link rel="icon" href="http://www.luoxufeiyan.com/wp-content/uploads/2016/04/cropped-watermelon-32x32.jpg" sizes="32x32" /> 
  <link rel="icon" href="http://www.luoxufeiyan.com/wp-content/uploads/2016/04/cropped-watermelon-192x192.jpg" sizes="192x192" /> 
  <link rel="apple-touch-icon-precomposed" href="http://www.luoxufeiyan.com/wp-content/uploads/2016/04/cropped-watermelon-180x180.jpg" /> 
  <meta name="msapplication-TileImage" content="http://www.luoxufeiyan.com/wp-content/uploads/2016/04/cropped-watermelon-270x270.jpg" /> 
  <link rel="stylesheet" href="http://www.luoxufeiyan.com/wp-content/themes/Slackview/style.css" /> 
 </head> 
 <body class="archive date unknown"> 
  <header class="header"> 
   <nav class="header_nav"> 
    <div class="nav_logo_big"> 
     <h1 class="nav_title_big"> <a href="http://www.luoxufeiyan.com/" rel="home"> 落絮飞雁的个人网站 </a> </h1> 
    </div> 
    <div class="nav_logo_left"> 
     <h1 class="nav_title_left"> <a href="http://www.luoxufeiyan.com/" rel="home"> 落絮飞雁的个人网站 </a> </h1> 
    </div> 
    <div class="nav_main"> 
     <div class="menu-%e4%b8%bb%e9%a1%b5%e8%8f%9c%e5%8d%95-container">
      <ul id="menu-%e4%b8%bb%e9%a1%b5%e8%8f%9c%e5%8d%95" class="menu">
       <li id="menu-item-2434" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-2434"><a href="http://www.luoxufeiyan.com/category/code/">ACM</a> 
        <ul class="sub-menu"> 
         <li id="menu-item-2435" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2435"><a href="http://www.luoxufeiyan.com/category/code/hdoj/">HDOJ</a></li> 
         <li id="menu-item-2436" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2436"><a href="http://www.luoxufeiyan.com/category/code/poj/">POJ</a></li> 
         <li id="menu-item-2437" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2437"><a href="http://www.luoxufeiyan.com/category/code/algorithm/">算法</a></li> 
        </ul> </li> 
       <li id="menu-item-2438" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-2438"><a href="http://www.luoxufeiyan.com/category/tech/">技术</a> 
        <ul class="sub-menu"> 
         <li id="menu-item-2441" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2441"><a href="http://www.luoxufeiyan.com/category/tech/network/">网络</a></li> 
         <li id="menu-item-2440" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2440"><a href="http://www.luoxufeiyan.com/category/tech/hardware/">硬件</a></li> 
         <li id="menu-item-2439" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2439"><a href="http://www.luoxufeiyan.com/category/tech/%e6%9d%82%e8%b0%88/">杂谈</a></li> 
        </ul> </li> 
       <li id="menu-item-3023" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3023"><a href="http://www.luoxufeiyan.com/category/thoughts/">随写</a> 
        <ul class="sub-menu"> 
         <li id="menu-item-3108" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3108"><a href="http://www.luoxufeiyan.com/category/thoughts/%e4%bc%91%e9%97%b2/">休闲</a></li> 
         <li id="menu-item-3109" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3109"><a href="http://www.luoxufeiyan.com/category/thoughts/%e7%a2%8e%e7%a2%8e%e5%bf%b5/">碎碎念</a></li> 
         <li id="menu-item-3107" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3107"><a href="http://www.luoxufeiyan.com/category/thoughts/travel/">他山记历</a></li> 
        </ul> </li> 
       <li id="menu-item-2954" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2954"><a href="http://www.luoxufeiyan.com/about/">关于</a></li> 
      </ul>
     </div> 
    </div> 
    <div class="nav_search"> 
     <form id="nav_search_form" method="get" action="http://www.luoxufeiyan.com/"> 
      <input class="nav_search_input" type="text" name="s" id="s" placeholder="Search" size="10" /> 
     </form> 
    </div> 
   </nav> 
   <hgroup class="header_hgroup"> 
    <h1 class="header_title"> <a href="http://www.luoxufeiyan.com/" rel="home"> 落絮飞雁的个人网站 </a> </h1> 
    <h2 id="site-description">顺流而下，把梦做完</h2> 
   </hgroup> 
  </header> 
  <div class="content"> 
   <article class="post-1925 post type-post status-publish format-standard hentry category-vps tag-centos tag-dns"> 
    <header class="post_header"> 
     <div class="post_meta">
      <div class="sticker"> 
       <section class="post_meta_time"> 
        <h4>Date Time</h4> 15/01/17 21:42 
       </section> 
       <section class="post_meta_author"> 
        <h4>Author</h4> 
        <a href="http://www.luoxufeiyan.com/author/luoxufeiyan/" rel="author">落絮飞雁</a> 
       </section> 
       <section class="post_meta_cat"> 
        <h4>Category</h4> 
        <a href="http://www.luoxufeiyan.com/category/tech/network/vps/" rel="category tag">VPS</a> 
       </section> 
       <section class="post_meta_tags"> 
        <h4>Tags</h4> 
        <a href="http://www.luoxufeiyan.com/tag/centos/" rel="tag">CentOS</a>, 
        <a href="http://www.luoxufeiyan.com/tag/dns/" rel="tag">DNS</a> 
       </section> 
       <section class="post_meta_reply"> 
        <a href="http://www.luoxufeiyan.com/2015/01/17/install-dnsmasq-centos/#respond">Leave a Reply</a> 
       </section> 
       <section class="post_meta_edit"> 
       </section> 
      </div>
     </div> 
     <h2 class="post_title"><a href="http://www.luoxufeiyan.com/2015/01/17/install-dnsmasq-centos/" rel="bookmark">CentOS安装dnsmasq简明教程</a></h2> 
    </header> 
    <div class="post_content"> 
     <p>自搭了一个DNS服务，写写步骤备忘。</p> 
     <ul> 
      <li>安装</li> 
     </ul> 
     <p>yum install dnsmasq</p> 
     <ul> 
      <li>配置</li> 
     </ul> 
     <p>编辑 /etc/dnsmasq.conf</p> 
     <p>添加</p> 
     <p>port=5151//使用默认53端口会被GFW拦截<br /> no-hosts//不使用本机host<br /> log-queries//生成日志文件<br /> log-facility=/var/log/dnsmasq.log</p> 
     <ul> 
      <li>DNS服务</li> 
     </ul> 
     <p>vi /etc/dnsmasq.d/resolv.dnsmasq.conf</p> 
     <p>添加</p> 
     <p>nameserver 8.8.8.8</p> 
     <ul> 
      <li>开机启动||运行</li> 
     </ul> 
     <p>chkconfig dnsmasq on</p> 
     <p>/etc/init.d/dnsmasq restart</p> 
     <ul> 
      <li>开防火墙</li> 
     </ul> 
     <p>vi /etc/sysconfig/iptables</p> 
     <p>添加</p> 
     <p>-A INPUT -p udp -m state Cstate NEW Cdport 53 -j ACCEPT<br /> -A INPUT -p tcp -m state Cstate NEW Cdport 53 -j ACCEPT</p> 
     <p>&nbsp;</p> 
     <p>完毕，服务启动~</p> 
     <p>[root@master ~]# netstat -tunlp|grep 5151</p> 
    </div> 
    <nav class="navigation post-navigation" role="navigation"> 
     <h2 class="screen-reader-text">文章导航</h2> 
     <div class="nav-links">
      <div class="nav-previous">
       <a href="http://www.luoxufeiyan.com/2015/01/11/share-wp-plugins-2/" rel="prev"><span class="post_nav_title">分享那些好用的WP插件Vol.2</span></a>
      </div>
      <div class="nav-next">
       <a href="http://www.luoxufeiyan.com/2015/01/19/poj1146/" rel="next"><span class="post_nav_title">POJ1146：ID Codes――全排列问题</span></a>
      </div>
     </div> 
    </nav> 
   </article> 
   <nav class="page_nav"> 
   </nav> 
   <div class="sidebar"> 
    <aside class="widget"> 
     <div class="textwidget">
      <div id="quote">
       <div id="lxfy_quotes">
        雪崩时, 没有一片雪花觉得自己有责任。――伏尔泰 
       </div>
      </div>
     </div> 
    </aside> 
    <aside class="widget"> 
     <h3>近期文章</h3> 
     <ul> 
      <li> <a href="http://www.luoxufeiyan.com/2017/03/23/globalcash-and-virtual-credit-card/">全球付和虚拟信用卡</a> </li> 
      <li> <a href="http://www.luoxufeiyan.com/2017/03/09/resume-thoughts/">观简历有感</a> </li> 
      <li> <a href="http://www.luoxufeiyan.com/2017/02/07/thoughts-of-chinese-abacus/">算盘的上二珠</a> </li> 
      <li> <a href="http://www.luoxufeiyan.com/2017/01/12/operating-system-for-chromebook/">写写Chromebook上用过的系统</a> </li> 
      <li> <a href="http://www.luoxufeiyan.com/2016/12/16/pay-app-thoughts/">捏着鼻子付款</a> </li> 
      <li> <a href="http://www.luoxufeiyan.com/2016/11/22/hide-book-in-subway/">我在地铁里，藏了一本书</a> </li> 
      <li> <a href="http://www.luoxufeiyan.com/2016/11/18/quick-draw-with-google/">跟Ai玩你画我猜</a> </li> 
      <li> <a href="http://www.luoxufeiyan.com/2016/11/05/hdoj1015/">HDOJ1015：Safecracker</a> </li> 
      <li> <a href="http://www.luoxufeiyan.com/2016/11/04/hdoj1014/">HDOJ1014：Uniform Generator</a> </li> 
      <li> <a href="http://www.luoxufeiyan.com/2016/11/02/switch-to-wubi-input-method/">换用五笔输入法</a> </li> 
     </ul> 
    </aside> 
    <footer class="footer" role="contentinfo"> 
     <p><a href="http://www.luoxufeiyan.com/refer/" target="_black">阿里云</a>提供计算服务</p> 
     <p><a href="http://www.miitbeian.gov.cn/" rel="nofollow" title="工业和信息化部ICP/IP地址/域名信息备案管理系统" target="_black">浙ICP备15034340号</a></p> 
     <p><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011802000441" target="_black">浙公网安备 33011802000441号</a></p> 
     <p>本站由<a href="http://wordpress.org" target="_black">WordPress</a>驱动|并使用<a href="http://blog.dimpurr.com/slackview" target="_black">Slackview</a>主题</p> 
     <script src="http://lib.sinaapp.com/js/jquery/2.0/jquery.min.js">
</script> 
     <script src="http://www.luoxufeiyan.com/wp-content/themes/Slackview/js/jquery.sticky.js"></script> 
     <script src="http://www.luoxufeiyan.com/wp-content/themes/Slackview/js/script.js"></script> 
    </footer> 
   </div> 
   <div id="su-footer-links" style="text-align: center;"></div>
   <script type="text/javascript">
/* <![CDATA[ */
var tocplus = {"visibility_show":"\u5c55\u5f00","visibility_hide":"\u6536\u8d77","width":"Auto"};
/* ]]> */
</script> 
   <script type="text/javascript" src="http://www.luoxufeiyan.com/wp-content/plugins/table-of-contents-plus/front.min.js?ver=1509"></script> 
   <script type="text/javascript" src="http://www.luoxufeiyan.com/wp-includes/js/wp-embed.min.js?ver=4.7.3"></script> 
  </div> 
  <!-- 统计代码 --> 
  <!--Baidu--> 
  <script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?7b72915605d685ed1cc4e0545030fa83";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
		</script> 
  <!-- 统计代码结束 -->   
 </body>
</html>