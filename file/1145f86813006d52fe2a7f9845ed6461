<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
 <head id="Head">
  <title>
	 2012年4月17日 随笔档案 - ivaneeo's blog - BlogJava
</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta id="metaKeywords" name="keywords" content="java,j2ee,博客,blog,java blog,blogjava" />
  <link type="text/css" rel="stylesheet" href="/css/common.css" />
  <link id="MainCss" type="text/css" rel="stylesheet" href="http://www.blogjava.net/Skins/BlackSun/style.css" />
  <link id="RSSLink" title="RSS" type="application/rss+xml" rel="alternate" href="http://www.blogjava.net/ivanwan/rss.aspx" />
 </head> 
 <body> 
  <form name="Form1" method="post" action="17.html" id="Form1"> 
   <input type="hidden" name="__VIEWSTATE" id="
__VIEWSTATE" value="" /> 
   <div id="top"> 
    <div> 
     <table class="HeaderTitles"> 
      <tbody>
       <tr> 
        <td> <h1 class="HeaderTitle"><a id="Header1_HeaderTitle" class="HeaderMainTitle" href="http://www.blogjava.net/ivanwan/">ivaneeo's blog</a></h1> <p id="tagline">自由的力量，自由的生活。</p> </td> 
       </tr> 
      </tbody>
     </table> 
    </div> 
    <div> 
     <table id="HeaderBar" class="HeaderBar"> 
      <tbody>
       <tr> 
        <td class="HeaderBarTab" nowrap=""> &nbsp; <a id="Header1_MyLinks1_HomeLink" href="http://www.blogjava.net/">BlogJava</a>&nbsp;:: <a id="Header1_MyLinks1_MyHomeLink" href="http://www.blogjava.net/ivanwan/">首页</a>&nbsp;:: <a id="Header1_MyLinks1_ContactLink" accesskey="9" href="http://www.blogjava.net/ivanwan/contact.aspx?id=1">联系</a>&nbsp;:: <a id="Header1_MyLinks1_Syndication" href="http://www.blogjava.net/ivanwan/rss">聚合</a> <a id="Header1_MyLinks1_XMLLink" class="XMLLink" href="http://www.blogjava.net/ivanwan/rss"><img src="http://www.blogjava.net/images/xml.gif" border="0" /></a>&nbsp;:: <a id="Header1_MyLinks1_Admin" href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx">管理</a> </td> 
        <td class="HeaderBarTabBack" nowrap="" width="100%"> 
         <table class="BlogStatsBar"> 
          <tbody>
           <tr> 
            <td width="100%"> </td> 
            <td class="BlogStatsBar" nowrap=""> &nbsp; 669 Posts&nbsp;:: 0 Stories :: 64 Comments :: 0 Trackbacks </td> 
           </tr> 
          </tbody>
         </table> </td> 
       </tr> 
      </tbody>
     </table> 
    </div> 
   </div> 
   <table id="maintable"> 
    <tbody>
     <tr>
      <td id="leftmenu" style="display:none"> <h3>常用链接</h3> 
       <ul> 
        <li><a id="SingleColumn1_ctl00_repeaterLinks_ctl01_lnkLinkItem" href="http://www.blogjava.net/ivanwan/MyPosts.html">我的随笔</a></li> 
        <li><a id="SingleColumn1_ctl00_repeaterLinks_ctl02_lnkLinkItem" href="http://www.blogjava.net/ivanwan/MyComments.html">我的评论</a></li> 
        <li><a id="SingleColumn1_ctl00_repeaterLinks_ctl03_lnkLinkItem" href="http://www.blogjava.net/ivanwan/OtherPosts.html">我的参与</a></li> 
        <li><a id="SingleColumn1_ctl00_repeaterLinks_ctl04_lnkLinkItem" href="http://www.blogjava.net/ivanwan/RecentComments.html">最新评论</a></li> 
       </ul> <h3>留言簿<span style="font-size:11px;font-weight:normal;">(14)</span></h3> 
       <ul> 
        <li> <a id="SingleColumn1_ctl01_lnkMessages" href="http://www.blogjava.net/ivanwan/Contact.aspx?id=1">给我留言</a> </li>
        <li> <a id="SingleColumn1_ctl01_lnkPublicMsgView" href="http://www.blogjava.net/ivanwan/default.aspx?opt=msg">查看公开留言</a> </li>
        <li> <a id="SingleColumn1_ctl01_lnkPrivateMsgView" href="http://www.blogjava.net/ivanwan/admin/MyMessages.aspx">查看私人留言</a> </li> 
       </ul> <h3>我参与的团队</h3> 
       <div class="RecentComment"> 
       </div> 
       <div class="mainMenuBackground"> 
        <h3>随笔分类</h3> 
        <ul> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl01_Link" href="http://www.blogjava.net/ivanwan/category/46640.html">Android--机器人的威力(1)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl01_RssLink" title="Subscribe to Android--机器人的威力(1)" href="http://www.blogjava.net/ivanwan/category/46640.html/rss"><img title="Subscribe to Android--机器人的威力(1)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl02_Link" href="http://www.blogjava.net/ivanwan/category/21710.html">bi(商务智能）(5)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl02_RssLink" title="Subscribe to bi(商务智能）(5)" href="http://www.blogjava.net/ivanwan/category/21710.html/rss"><img title="Subscribe to bi(商务智能）(5)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl03_Link" href="http://www.blogjava.net/ivanwan/category/15891.html">C-自由的灵魂(10)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl03_RssLink" title="Subscribe to C-自由的灵魂(10)" href="http://www.blogjava.net/ivanwan/category/15891.html/rss"><img title="Subscribe to C-自由的灵魂(10)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl04_Link" href="http://www.blogjava.net/ivanwan/category/2553.html">debian－企鹅中最像牛(29)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl04_RssLink" title="Subscribe to debian－企鹅中最像牛(29)" href="http://www.blogjava.net/ivanwan/category/2553.html/rss"><img title="Subscribe to debian－企鹅中最像牛(29)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl05_Link" href="http://www.blogjava.net/ivanwan/category/2525.html">emacs－牛露锋芒(39)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl05_RssLink" title="Subscribe to emacs－牛露锋芒(39)" href="http://www.blogjava.net/ivanwan/category/2525.html/rss"><img title="Subscribe to emacs－牛露锋芒(39)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl06_Link" href="http://www.blogjava.net/ivanwan/category/2521.html">english－英文(25)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl06_RssLink" title="Subscribe to english－英文(25)" href="http://www.blogjava.net/ivanwan/category/2521.html/rss"><img title="Subscribe to english－英文(25)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl07_Link" href="http://www.blogjava.net/ivanwan/category/36393.html">erlang-分布式语言(6)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl07_RssLink" title="Subscribe to erlang-分布式语言(6)" href="http://www.blogjava.net/ivanwan/category/36393.html/rss"><img title="Subscribe to erlang-分布式语言(6)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl08_Link" href="http://www.blogjava.net/ivanwan/category/36392.html">flex-我酷所以我在(5)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl08_RssLink" title="Subscribe to flex-我酷所以我在(5)" href="http://www.blogjava.net/ivanwan/category/36392.html/rss"><img title="Subscribe to flex-我酷所以我在(5)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl09_Link" href="http://www.blogjava.net/ivanwan/category/4217.html">freebsd魔力(9)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl09_RssLink" title="Subscribe to freebsd魔力(9)" href="http://www.blogjava.net/ivanwan/category/4217.html/rss"><img title="Subscribe to freebsd魔力(9)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl10_Link" href="http://www.blogjava.net/ivanwan/category/2558.html">gcc小试牛力(13)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl10_RssLink" title="Subscribe to gcc小试牛力(13)" href="http://www.blogjava.net/ivanwan/category/2558.html/rss"><img title="Subscribe to gcc小试牛力(13)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl11_Link" href="http://www.blogjava.net/ivanwan/category/2555.html">GNU牛力(138)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl11_RssLink" title="Subscribe to GNU牛力(138)" href="http://www.blogjava.net/ivanwan/category/2555.html/rss"><img title="Subscribe to GNU牛力(138)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl12_Link" href="http://www.blogjava.net/ivanwan/category/2517.html">java魔力(76)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl12_RssLink" title="Subscribe to java魔力(76)" href="http://www.blogjava.net/ivanwan/category/2517.html/rss"><img title="Subscribe to java魔力(76)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl13_Link" href="http://www.blogjava.net/ivanwan/category/50762.html">lua-撸语言(3)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl13_RssLink" title="Subscribe to lua-撸语言(3)" href="http://www.blogjava.net/ivanwan/category/50762.html/rss"><img title="Subscribe to lua-撸语言(3)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl14_Link" href="http://www.blogjava.net/ivanwan/category/36394.html">oralce-为什么这么强大(8)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl14_RssLink" title="Subscribe to oralce-为什么这么强大(8)" href="http://www.blogjava.net/ivanwan/category/36394.html/rss"><img title="Subscribe to oralce-为什么这么强大(8)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl15_Link" href="http://www.blogjava.net/ivanwan/category/9492.html">perl－杀鸡就要用牛刀(14)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl15_RssLink" title="Subscribe to perl－杀鸡就要用牛刀(14)" href="http://www.blogjava.net/ivanwan/category/9492.html/rss"><img title="Subscribe to perl－杀鸡就要用牛刀(14)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl16_Link" href="http://www.blogjava.net/ivanwan/category/26718.html">qt-革命(1)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl16_RssLink" title="Subscribe to qt-革命(1)" href="http://www.blogjava.net/ivanwan/category/26718.html/rss"><img title="Subscribe to qt-革命(1)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl17_Link" href="http://www.blogjava.net/ivanwan/category/2732.html">refactoring－从地狱中重生(149)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl17_RssLink" title="Subscribe to refactoring－从地狱中重生(149)" href="http://www.blogjava.net/ivanwan/category/2732.html/rss"><img title="Subscribe to refactoring－从地狱中重生(149)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl18_Link" href="http://www.blogjava.net/ivanwan/category/2973.html">ruby－宝石也锋芒(22)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl18_RssLink" title="Subscribe to ruby－宝石也锋芒(22)" href="http://www.blogjava.net/ivanwan/category/2973.html/rss"><img title="Subscribe to ruby－宝石也锋芒(22)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl19_Link" href="http://www.blogjava.net/ivanwan/category/47448.html">scala-fun！(4)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl19_RssLink" title="Subscribe to scala-fun！(4)" href="http://www.blogjava.net/ivanwan/category/47448.html/rss"><img title="Subscribe to scala-fun！(4)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl20_Link" href="http://www.blogjava.net/ivanwan/category/7554.html">scheme－语言之母(8)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl20_RssLink" title="Subscribe to scheme－语言之母(8)" href="http://www.blogjava.net/ivanwan/category/7554.html/rss"><img title="Subscribe to scheme－语言之母(8)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl21_Link" href="http://www.blogjava.net/ivanwan/category/3278.html">tip(33)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl21_RssLink" title="Subscribe to tip(33)" href="http://www.blogjava.net/ivanwan/category/3278.html/rss"><img title="Subscribe to tip(33)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl22_Link" href="http://www.blogjava.net/ivanwan/category/50836.html">web2.0(3)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl22_RssLink" title="Subscribe to web2.0(3)" href="http://www.blogjava.net/ivanwan/category/50836.html/rss"><img title="Subscribe to web2.0(3)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl23_Link" href="http://www.blogjava.net/ivanwan/category/47650.html">云(47)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl23_RssLink" title="Subscribe to 云(47)" href="http://www.blogjava.net/ivanwan/category/47650.html/rss"><img title="Subscribe to 云(47)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl24_Link" href="http://www.blogjava.net/ivanwan/category/48073.html">互联网(15)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl24_RssLink" title="Subscribe to 互联网(15)" href="http://www.blogjava.net/ivanwan/category/48073.html/rss"><img title="Subscribe to 互联网(15)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl25_Link" href="http://www.blogjava.net/ivanwan/category/20111.html">可爱的python(2)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl25_RssLink" title="Subscribe to 可爱的python(2)" href="http://www.blogjava.net/ivanwan/category/20111.html/rss"><img title="Subscribe to 可爱的python(2)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl26_Link" href="http://www.blogjava.net/ivanwan/category/47704.html">物联网(4)</a> <span style="width:10px"> <a id="SingleColumn1_Categories_CatList_ctl00_LinkList_ctl26_RssLink" title="Subscribe to 物联网(4)" href="http://www.blogjava.net/ivanwan/category/47704.html/rss"><img title="Subscribe to 物联网(4)" src="/Skins/BlackSun/Images/xmlsmall.gif" alt="rss" border="0" /></a> </span> </li> 
        </ul> 
        <h3>随笔档案</h3> 
        <ul> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl01_Link" href="http://www.blogjava.net/ivanwan/archive/2015/07.html">2015年7月 (2)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl02_Link" href="http://www.blogjava.net/ivanwan/archive/2015/06.html">2015年6月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl03_Link" href="http://www.blogjava.net/ivanwan/archive/2015/05.html">2015年5月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl04_Link" href="http://www.blogjava.net/ivanwan/archive/2015/04.html">2015年4月 (10)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl05_Link" href="http://www.blogjava.net/ivanwan/archive/2015/03.html">2015年3月 (10)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl06_Link" href="http://www.blogjava.net/ivanwan/archive/2015/02.html">2015年2月 (5)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl07_Link" href="http://www.blogjava.net/ivanwan/archive/2015/01.html">2015年1月 (4)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl08_Link" href="http://www.blogjava.net/ivanwan/archive/2014/12.html">2014年12月 (20)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl09_Link" href="http://www.blogjava.net/ivanwan/archive/2014/11.html">2014年11月 (10)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl10_Link" href="http://www.blogjava.net/ivanwan/archive/2014/10.html">2014年10月 (3)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl11_Link" href="http://www.blogjava.net/ivanwan/archive/2014/09.html">2014年9月 (3)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl12_Link" href="http://www.blogjava.net/ivanwan/archive/2014/08.html">2014年8月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl13_Link" href="http://www.blogjava.net/ivanwan/archive/2014/07.html">2014年7月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl14_Link" href="http://www.blogjava.net/ivanwan/archive/2014/06.html">2014年6月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl15_Link" href="http://www.blogjava.net/ivanwan/archive/2014/05.html">2014年5月 (2)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl16_Link" href="http://www.blogjava.net/ivanwan/archive/2014/04.html">2014年4月 (4)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl17_Link" href="http://www.blogjava.net/ivanwan/archive/2014/03.html">2014年3月 (8)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl18_Link" href="http://www.blogjava.net/ivanwan/archive/2014/02.html">2014年2月 (2)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl19_Link" href="http://www.blogjava.net/ivanwan/archive/2013/12.html">2013年12月 (5)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl20_Link" href="http://www.blogjava.net/ivanwan/archive/2013/11.html">2013年11月 (3)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl21_Link" href="http://www.blogjava.net/ivanwan/archive/2013/10.html">2013年10月 (4)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl22_Link" href="http://www.blogjava.net/ivanwan/archive/2013/09.html">2013年9月 (2)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl23_Link" href="http://www.blogjava.net/ivanwan/archive/2013/08.html">2013年8月 (2)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl24_Link" href="http://www.blogjava.net/ivanwan/archive/2013/06.html">2013年6月 (2)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl25_Link" href="http://www.blogjava.net/ivanwan/archive/2013/05.html">2013年5月 (3)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl26_Link" href="http://www.blogjava.net/ivanwan/archive/2013/04.html">2013年4月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl27_Link" href="http://www.blogjava.net/ivanwan/archive/2012/12.html">2012年12月 (3)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl28_Link" href="http://www.blogjava.net/ivanwan/archive/2012/11.html">2012年11月 (2)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl29_Link" href="http://www.blogjava.net/ivanwan/archive/2012/10.html">2012年10月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl30_Link" href="http://www.blogjava.net/ivanwan/archive/2012/06.html">2012年6月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl31_Link" href="http://www.blogjava.net/ivanwan/archive/2012/04.html">2012年4月 (3)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl32_Link" href="http://www.blogjava.net/ivanwan/archive/2012/03.html">2012年3月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl33_Link" href="http://www.blogjava.net/ivanwan/archive/2012/02.html">2012年2月 (8)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl34_Link" href="http://www.blogjava.net/ivanwan/archive/2011/12.html">2011年12月 (6)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl35_Link" href="http://www.blogjava.net/ivanwan/archive/2011/11.html">2011年11月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl36_Link" href="http://www.blogjava.net/ivanwan/archive/2011/10.html">2011年10月 (6)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl37_Link" href="http://www.blogjava.net/ivanwan/archive/2011/09.html">2011年9月 (4)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl38_Link" href="http://www.blogjava.net/ivanwan/archive/2011/08.html">2011年8月 (3)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl39_Link" href="http://www.blogjava.net/ivanwan/archive/2011/07.html">2011年7月 (3)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl40_Link" href="http://www.blogjava.net/ivanwan/archive/2011/06.html">2011年6月 (14)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl41_Link" href="http://www.blogjava.net/ivanwan/archive/2011/05.html">2011年5月 (6)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl42_Link" href="http://www.blogjava.net/ivanwan/archive/2011/04.html">2011年4月 (3)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl43_Link" href="http://www.blogjava.net/ivanwan/archive/2011/03.html">2011年3月 (2)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl44_Link" href="http://www.blogjava.net/ivanwan/archive/2011/02.html">2011年2月 (4)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl45_Link" href="http://www.blogjava.net/ivanwan/archive/2011/01.html">2011年1月 (20)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl46_Link" href="http://www.blogjava.net/ivanwan/archive/2010/12.html">2010年12月 (9)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl47_Link" href="http://www.blogjava.net/ivanwan/archive/2010/10.html">2010年10月 (4)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl48_Link" href="http://www.blogjava.net/ivanwan/archive/2009/10.html">2009年10月 (4)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl49_Link" href="http://www.blogjava.net/ivanwan/archive/2009/04.html">2009年4月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl50_Link" href="http://www.blogjava.net/ivanwan/archive/2008/12.html">2008年12月 (2)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl51_Link" href="http://www.blogjava.net/ivanwan/archive/2007/10.html">2007年10月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl52_Link" href="http://www.blogjava.net/ivanwan/archive/2007/04.html">2007年4月 (3)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl53_Link" href="http://www.blogjava.net/ivanwan/archive/2007/02.html">2007年2月 (5)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl54_Link" href="http://www.blogjava.net/ivanwan/archive/2006/11.html">2006年11月 (10)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl55_Link" href="http://www.blogjava.net/ivanwan/archive/2006/10.html">2006年10月 (4)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl56_Link" href="http://www.blogjava.net/ivanwan/archive/2006/09.html">2006年9月 (21)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl57_Link" href="http://www.blogjava.net/ivanwan/archive/2006/07.html">2006年7月 (7)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl58_Link" href="http://www.blogjava.net/ivanwan/archive/2006/05.html">2006年5月 (1)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl59_Link" href="http://www.blogjava.net/ivanwan/archive/2006/04.html">2006年4月 (18)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl60_Link" href="http://www.blogjava.net/ivanwan/archive/2006/03.html">2006年3月 (5)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl61_Link" href="http://www.blogjava.net/ivanwan/archive/2006/02.html">2006年2月 (10)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl62_Link" href="http://www.blogjava.net/ivanwan/archive/2006/01.html">2006年1月 (8)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl63_Link" href="http://www.blogjava.net/ivanwan/archive/2005/12.html">2005年12月 (14)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl64_Link" href="http://www.blogjava.net/ivanwan/archive/2005/11.html">2005年11月 (46)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl65_Link" href="http://www.blogjava.net/ivanwan/archive/2005/10.html">2005年10月 (16)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl66_Link" href="http://www.blogjava.net/ivanwan/archive/2005/09.html">2005年9月 (59)</a> <span style="width:10px"> </span> </li> 
         <li class="menuItemList"> <a id="SingleColumn1_Categories_CatList_ctl01_LinkList_ctl67_Link" href="http://www.blogjava.net/ivanwan/archive/2005/08.html">2005年8月 (220)</a> <span style="width:10px"> </span> </li> 
        </ul> 
       </div> <script language="JavaScript">
function SearchGoogle(key,evt,site)
		{
			if(evt.keyCode==13 || evt.keyCode==0 || evt.type =='click')
			{
				key.focus();
				var keystr = encodeURIComponent(key.value);
				url = "http://www.google.com/search?q=";
				url = url+keystr;
				url += "&ie=UTF-8&oe=GB2312&hl=zh-CN&domains="+site+"&sitesearch="+site;
				window.location=url;
				return false;
			}
		}
</script> <h3>搜索</h3> 
       <ul> 
        <li> </li>
        <li><input style="WIDTH: 130px" type="text" name="q" id="q" onkeydown="return SearchGoogle(document.getElementById('q'),event,'www.blogjava.net/ivanwan')" />&nbsp;<input onclick="SearchGoogle(document.getElementById('q'),event,'www.blogjava.net/ivanwan')" type="button" value="搜索" name="sa" /> </li> 
       </ul> <h3>最新评论 <a id="SingleColumn1__2e115bc_RSSHyperlink1" href="http://www.blogjava.net/ivanwan/CommentsRSS.aspx"><img src="/images/xml.gif" border="0" /></a></h3> 
       <div class="RecentComment"> 
        <ul> 
         <li style="word-break:break-all"> <a id="SingleColumn1__2e115bc_CommentList_ctl01_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2016/04/11/376670.html#430034">1.&nbsp;re: 在windows下使用Xming+Putty显示Linux下软件图形界面</a> </li> 
         <li style="word-break:break-all"> 好好好，这样做确实成功了。包括那个错误处理！ </li> 
         <li style="text-align:right;margin-right:4px"> --WFC</li> 
         <li style="word-break:break-all"> <a id="SingleColumn1__2e115bc_CommentList_ctl02_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2015/04/13/342685.html#424377">2.&nbsp;re: Hive与HBase的整合[未登录]</a> </li> 
         <li style="word-break:break-all"> hive集成hbase数据同步过程中如果出现异常，会是什么结果？ 例如往hive的表中插入100w记录，往hbase同步的到一半的时候出现一个异常，会回滚掉所有hive的更新以及hbase的更新吗 </li> 
         <li style="text-align:right;margin-right:4px"> --bill</li> 
         <li style="word-break:break-all"> <a id="SingleColumn1__2e115bc_CommentList_ctl03_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2014/08/14/371555.html#416957">3.&nbsp;re: Flex组件IFrame中嵌入HTML页面的方法</a> </li> 
         <li style="word-break:break-all"> 12123 </li> 
         <li style="text-align:right;margin-right:4px"> --12</li> 
         <li style="word-break:break-all"> <a id="SingleColumn1__2e115bc_CommentList_ctl04_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2013/07/14/401074.html#401558">4.&nbsp;re: Cloudera Impala TarBall 编译、安装与配置</a> </li> 
         <li style="word-break:break-all"> 评论内容较长,点击标题查看 </li> 
         <li style="text-align:right;margin-right:4px"> --laoyang</li> 
         <li style="word-break:break-all"> <a id="SingleColumn1__2e115bc_CommentList_ctl05_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2012/10/31/376670.html#390530">5.&nbsp;re: 在windows下使用Xming+Putty显示Linux下软件图形界面</a> </li> 
         <li style="word-break:break-all"> 很好的分享，对我很有帮助。 </li> 
         <li style="text-align:right;margin-right:4px"> --LVST</li> 
        </ul> 
       </div> <h3>阅读排行榜</h3> 
       <div class="RecentComment"> 
        <ul style="word-break:break-all"> 
         <li> <a id="SingleColumn1__3c122dd_TopList_ctl01_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2013/10/04/404680.html">1.&nbsp;elasticsearch安装配置及中文分词(15598)</a> </li> 
         <li> <a id="SingleColumn1__3c122dd_TopList_ctl02_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2006/02/20/31657.html">2.&nbsp;vim中显示16进制的值(14449)</a> </li> 
         <li> <a id="SingleColumn1__3c122dd_TopList_ctl03_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2005/12/13/23707.html">3.&nbsp;windows xp cdkey(14037)</a> </li> 
         <li> <a id="SingleColumn1__3c122dd_TopList_ctl04_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2005/09/28/14275.html">4.&nbsp;GNOME VS KDE(11061)</a> </li> 
         <li> <a id="SingleColumn1__3c122dd_TopList_ctl05_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2012/12/11/392754.html">5.&nbsp;Nginx配置SSL证书部署HTTPS网站(10699)</a> </li> 
        </ul> 
       </div> <h3>评论排行榜</h3> 
       <div class="RecentComment"> 
        <ul style="word-break:break-all"> 
         <li> <a id="SingleColumn1__3a8a5b1_TopList_ctl01_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2005/09/28/14275.html">1.&nbsp;GNOME VS KDE(14)</a> </li> 
         <li> <a id="SingleColumn1__3a8a5b1_TopList_ctl02_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2005/12/13/23707.html">2.&nbsp;windows xp cdkey(7)</a> </li> 
         <li> <a id="SingleColumn1__3a8a5b1_TopList_ctl03_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2005/10/31/17549.html">3.&nbsp;FVWM Beginners Guide(4)</a> </li> 
         <li> <a id="SingleColumn1__3a8a5b1_TopList_ctl04_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2006/02/20/31657.html">4.&nbsp;vim中显示16进制的值(3)</a> </li> 
         <li> <a id="SingleColumn1__3a8a5b1_TopList_ctl05_Hyperlink1" href="http://www.blogjava.net/ivanwan/archive/2010/12/04/339776.html">5.&nbsp;powerdesigner 导入Excel文档 做成 实体表(3)</a> </li> 
        </ul> 
       </div> </td>
      <td id="main"> <p class="date"> 2012年4月17日 <a id="ArchiveDay1_SingleDay_ImageLink" title="Day Archive" href="http://www.blogjava.net/ivanwan/archive/2012/04/17.html" style="display:inline-block;">#</a> </p> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl00_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/07/03/426029.html">centos rabbitmq</a> 
        </div> 
        <div class="postText"> 
         <p>curl -s https://packagecloud.io/install/repositories/rabbitmq/rabbitmq-server/script.rpm.sh | sudo bash<br /><br /> </p>
         <p class="p1"><span class="s1">rabbitmq.config&nbsp;</span></p>
         <p class="p1"><span class="s1">[{rabbit, [{cluster_partition_handling, autoheal},{loopback_users, []}]}].</span></p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/07/03/426029.html" title="permalink">2015-07-03 20:25</a> ivaneeo 阅读(705) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/07/03/426029.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=426029">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=426029">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl01_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/07/03/426026.html">centos startup script</a> 
        </div> 
        <div class="postText"> 
         <p>#!/bin/sh</p> 
         <p>#</p> 
         <p># Startup script for ovirt-agent</p> 
         <p>#</p> 
         <p># chkconfig: 2345 85 20</p> 
         <p># description: ovirt-agent</p> 
         <p># processname: ovirt-agent</p> 
         <p># pidfile: /var/run/tomcat.pid # config:# Source function library.</p> 
         <p>. /etc/rc.d/init.d/functions</p> 
         <p># Source networking configuration.</p> 
         <p>. /etc/sysconfig/network</p> 
         <p># Check that networking is up.</p> 
         <p>export OVIRT_AGENT_HOME=/opt/ovirt-agent</p> 
         <p>[ -f $OVIRT_AGENT_HOME/bin/startServer.sh ] ||?exit 0 [ -f $OVIRT_AGENT_HOME/bin/stopServer.sh ] ||?exit 0</p> 
         <p># See how we were called.</p> 
         <p>case &quot;$1&quot; in</p> 
         <p>start)</p> 
         <p># Start daemon.</p> 
         <p>&nbsp; &nbsp; &nbsp; &nbsp; echo ?&quot;Starting OVirt-agent: &quot;</p> 
         <p>&nbsp; &nbsp; &nbsp; &nbsp; $OVIRT_AGENT_HOME/bin/startServer.sh $OVIRT_AGENT_HOME/conf/ovirt-agent.xml</p> 
         <p>&nbsp; &nbsp; &nbsp; &nbsp; touch /var/lock/subsys/ovirt-agent</p> 
         <p>;;</p> 
         <p>stop)</p> 
         <p># Stop daemons.</p> 
         <p>&nbsp; &nbsp; &nbsp; &nbsp; echo ?&quot;Shutting down OVirt-agent: &quot;</p> 
         <p>&nbsp; &nbsp; &nbsp; &nbsp; $OVIRT_AGENT_HOME/bin/stopServer.sh</p> 
         <p>&nbsp; &nbsp; &nbsp; &nbsp; rm -f /var/lock/subsys/ovirt-agent</p> 
         <p>;;</p> 
         <p>restart)</p> 
         <p>&nbsp; &nbsp; &nbsp; &nbsp; $0 stop</p> 
         <p>&nbsp; &nbsp; &nbsp; &nbsp; $0 start</p> 
         <p>;;</p> 
         <p>status)</p> 
         <p>status ovirt-agent</p> 
         <p>;;</p> 
         <p>*)</p> 
         <p>echo &quot;Usage: $0 {start|stop|restart|status}&quot;</p> 
         <p>exit 1</p> 
         <p>esac</p> 
         <p>exit 0</p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/07/03/426026.html" title="permalink">2015-07-03 20:06</a> ivaneeo 阅读(896) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/07/03/426026.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=426026">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=426026">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl02_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/06/13/425667.html">ningbo install</a> 
        </div> 
        <div class="postText"> 
         <p style="margin:0in;font-family:Calibri;font-size:11.0pt"><span lang="en-US">docker run -d --name=&quot;srdesktop1&quot; -p 80:80 -p 8888:8888 -p 8000:8000 -p 8009:8009 -p 8081:8081 -p 3306:3306 -p 19:22 -v /opt/html:/var/www -v /opt/ssdb-master:/opt/ssdb-master -v /opt/apache-tomcat-7.0.53:/opt/apache-tomcat-7.0.53 -v /opt/mule-standalone-3.5.0:/opt/mule-standalone-3.5.0 -v /opt/mysql/data:/var/lib/mysql --privileged=true srdesktop/ubuntu /bin/bash&nbsp; -exec 'echo -e &quot;192.168.1.93 ovirt-manage\n192.168.1.243 </span><a href="http://www.engin.org/n127.0.0.1"><span lang="zh-CN">www.engin.org</span><span lang="en-US">\n127.0.0.1</span></a><span lang="en-US"> localhost&quot; &gt;&gt; /etc/hosts &amp;&amp; service mysql start&nbsp; &amp;&amp; /etc/init.d/guaca start &amp;&amp; rm /opt/ssdb-master/var/ssdb.pid &amp;&amp; /opt/ssdb-master/ssdb-server&nbsp; -d /opt/ssdb-master/ssdb.conf &amp;&amp; export JAVA_HOME=/opt/jdk1.7.0_51 &amp;&amp; export PATH=$JAVA_HOME/bin:$PATH &amp;&amp; /opt/apache-tomcat-7.0.53/bin/startup.sh &amp;&amp; service apache2 start &amp;&amp; /opt/mule-standalone-3.5.0/bin/mule'</span></p>
         <p style="margin:0in;font-family:Calibri;font-size:11.0pt"><br /></p>
         <p style="margin:0in;font-family:Calibri;font-size:10.5pt" lang="zh-CN">
          <!--StartFragment-->pptpsetup --create myvpn --server <a href="www.yanlingyi.com">www.yanlingyi.com</a> --username vpn --password mincloud --encrypt --start
          <!--EndFragment--></p>
         <p style="margin:0in;font-family:Calibri;font-size:11.0pt"><br /></p> 
         <p style="margin:0in;font-family:Calibri;font-size:11.0pt" lang="en-US">docker run -d --name=&quot;rabbitmq_master&quot; -p 200:22 -p 25672:25672 -p 15672:15672 -p 5672:5672 -p 4369:4369 -p 10051:10050 rabbitmq/ubuntu /bin/bash -exec 'echo -e &quot;172.20.20.10 rabbitmq-master\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; /etc/init.d/rabbitmq-server start &amp;&amp; /usr/sbin/sshd -D'<br /><br /><br /></p>
         <div>
          <font face="Calibri"><span style="font-size: 14.6666669845581px;"># Generated by ovirt-engine installer</span></font>
          <div>
           #filtering rules
          </div>
          <div>
           *filter
          </div>
          <div>
           :INPUT ACCEPT [0:0]
          </div>
          <div>
           :FORWARD ACCEPT [0:0]
          </div>
          <div>
           :OUTPUT ACCEPT [0:0]
          </div>
          <div>
           -A INPUT -i lo -j ACCEPT
          </div>
          <div>
           -A INPUT -p icmp -m icmp --icmp-type any -j ACCEPT
          </div>
          <div>
           -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
          </div>
          <div></div>
          <div>
           #drop all rule
          </div>
          <div>
           COMMIT
          </div>
         </div>
         <p style="margin: 0in;" lang="en-US"></p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/06/13/425667.html" title="permalink">2015-06-13 15:09</a> ivaneeo 阅读(425) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/06/13/425667.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=425667">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=425667">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl03_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/05/02/424812.html">从Java转iOS第一个项目总结</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.cocoachina.com/ios/20150417/11595.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/05/02/424812.html" title="permalink">2015-05-02 01:29</a> ivaneeo 阅读(613) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/05/02/424812.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424812">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424812">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl04_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/04/29/424768.html">greenvpn</a> 
        </div> 
        <div class="postText"> 
         <div>
          https://www.igreenjsq.info/user-xianlu.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/29/424768.html" title="permalink">2015-04-29 19:12</a> ivaneeo 阅读(818) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/29/424768.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424768">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424768">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl05_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/04/25/424664.html">hadoop生态圈</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.csdn.net/article/2014-01-02/2817984-13-tools-let-hadoop-fly
          <br />好用的数据工具
          <br />
          <div>
           http://blog.itpub.net/7816530/viewspace-1119924/
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/25/424664.html" title="permalink">2015-04-25 14:08</a> ivaneeo 阅读(619) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/25/424664.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424664">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424664">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl06_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/04/25/424663.html">windows mtu设置</a> 
        </div> 
        <div class="postText">
          netsh interface ipv4 show subinterfaces
         <br />
         <br />
         <div>
          netsh interface ipv4 set subinterface &quot;本地连接&quot; mtu=1480 store=persistent
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/25/424663.html" title="permalink">2015-04-25 13:01</a> ivaneeo 阅读(527) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/25/424663.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424663">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424663">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl07_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/04/21/424574.html">ovirt jdk cert</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.ovirt.org/Java-sdk
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/21/424574.html" title="permalink">2015-04-21 17:23</a> ivaneeo 阅读(582) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/21/424574.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424574">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424574">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl08_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/04/15/424426.html">mesos调度框架</a> 
        </div> 
        <div class="postText"> 
         <div style="text-align: center;">
          <div style="text-align: left; ">
           http://m.blog.csdn.net/blog/ebay/43529401
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/15/424426.html" title="permalink">2015-04-15 04:49</a> ivaneeo 阅读(572) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/15/424426.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424426">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424426">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl09_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/04/06/424153.html">cpu time to cpu_util</a> 
        </div> 
        <div class="postText"> 
         <pre style="margin-top: 0px; padding: 5px; border: 0px; font-size: 13px; overflow: auto; width: auto; max-height: 600px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, sans-serif; word-wrap: normal; color: #222222; background-color: #eeeeee;"><code style="margin: 0px; padding: 0px; border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, sans-serif; white-space: inherit;"><p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 15px; clear: both; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 19.5px; white-space: normal; background-color: #ffffff;">So now you have:</p>
           <ul style="margin: 0px 0px 1em 30px; padding: 0px; border: 0px; font-size: 15px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 19.5px; white-space: normal; background-color: #ffffff;">
            <li style="margin: 0px 0px 0.5em; padding: 0px; border: 0px; word-wrap: break-word;">The elapsed wall clock time (this period's time, minus last period's time) Call this&nbsp;<strong style="margin: 0px; padding: 0px; border: 0px;">X</strong></li>
            <li style="margin: 0px 0px 0.5em; padding: 0px; border: 0px; word-wrap: break-word;">The elapsed process cpu time (this period's time, minus last period's time) Call this&nbsp;<strong style="margin: 0px; padding: 0px; border: 0px;">Y</strong></li>
            <li style="margin: 0px 0px 0.5em; padding: 0px; border: 0px; word-wrap: break-word;">The number of CPUs. Call this&nbsp;<strong style="margin: 0px; padding: 0px; border: 0px;">C</strong></li>
           </ul><p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 15px; clear: both; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 19.5px; white-space: normal; background-color: #ffffff;">The percent utilization will be&nbsp;<strong style="margin: 0px; padding: 0px; border: 0px;">Y / (X x C) * 100</strong></p>import java.lang.management.*; <br />import java.util.concurrent.*;  <br /><br />osx = ManagementFactory.getOperatingSystemMXBean(); <br />cores = osx.getAvailableProcessors();  // Factorial to keep the process busy so we can see some actual activity <br />factorial = { n -&gt;     int fact = 1;     int i = 1;     while(i &lt;= n) {         i++;         fact *= i;     }     return fact; }   <br />long elapsedTime = -1, startTime = -1; long elapsedCpu = -1, startCpu = -1;;  <br />for(i in 0..20) {     startTime = System.nanoTime();     startCpu = osx.getProcessCpuTime();     CountDownLatch latch = new CountDownLatch(cores);     for(x in 1..cores) {         Thread.startDaemon() {             factorial(1000000);             latch.countDown();         }     }     latch.await();     elapsedTime = System.nanoTime()-startTime;     elapsedCpu = osx.getProcessCpuTime()-startCpu;     percUsage = (elapsedCpu / (elapsedTime* cores)) *100;     println &quot;Percent Usage:$percUsage %&quot;; }</code></pre> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/06/424153.html" title="permalink">2015-04-06 15:44</a> ivaneeo 阅读(602) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/06/424153.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424153">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424153">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl10_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/04/03/424082.html">ubuntu 14.04 lastest nginx</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.linuxidc.com/Linux/2014-08/105422.htm
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/03/424082.html" title="permalink">2015-04-03 04:47</a> ivaneeo 阅读(395) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/03/424082.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424082">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424082">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl11_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/04/03/424081.html">haproxy websocket</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.tuicool.com/articles/amQNvuq
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/03/424081.html" title="permalink">2015-04-03 04:34</a> ivaneeo 阅读(465) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/03/424081.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424081">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424081">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl12_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/04/03/424080.html">java quartz</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.ibm.com/developerworks/cn/java/j-quartz/index.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/03/424080.html" title="permalink">2015-04-03 04:28</a> ivaneeo 阅读(319) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/03/424080.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424080">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424080">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl13_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/04/02/424049.html">centos6.5 docker install</a> 
        </div> 
        <div class="postText"> 
         <div>
          <p style="padding: 0px; margin: 8px 0px; line-height: 25.2000007629395px; letter-spacing: 0.5px; color: #333333; font-family: 'Bitstream Vera Sans', 'Lucida Grande', Verdana, Lucida, sans-serif; background-color: #ffffff;">运行yum makecache生成缓存</p>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;">eple源：</p>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;">rpm -Uvh&nbsp;http://ftp.sjtu.edu.cn/fedora/epel/6/i386/epel-release-6-8.noarch.rpm</p>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;">docker 安装：</p>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;"><span style="padding: 0px; margin: 0px; font-family: Cabin, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px;">You will need&nbsp;</span><a href="https://access.redhat.com/site/articles/3078#RHEL6" rel="nofollow" style="padding: 0px; margin: 0px; color: #ff8373; outline: 0px; font-size: 12px;">RHEL 6.5</a><span style="padding: 0px; margin: 0px; font-family: Cabin, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px;">&nbsp;or higher, with a RHEL 6 kernel version 2.6.32-431 or higher as this has specific kernel fixes to allow Docker to work.</span></p>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;">CentOS 6.5已经是<span style="padding: 0px; margin: 0px; font-family: Cabin, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px;">2.6.32-431内核了，所以最好安装这个版本。</span></p>
          <pre style="padding: 5px; margin-top: 10px; margin-bottom: 10px; margin-left: 20px; line-height: 18px; font-size: 9pt; font-family: 'Courier New', Arial; border-width: 1px 1px 1px 5px; border-style: solid; border-color: #dddddd #dddddd #dddddd #6ce26c; color: #333333; background: #f6f6f6;">yum -y install docker-io</pre>
          <span style="color: #333333; font-family: Verdana, sans-serif, 宋体; font-size: 12.5px; line-height: 22.5px; background-color: #ffffff;">升级：</span>
          <pre style="padding: 5px; margin-top: 10px; margin-bottom: 10px; margin-left: 20px; line-height: 18px; font-size: 9pt; font-family: 'Courier New', Arial; border-width: 1px 1px 1px 5px; border-style: solid; border-color: #dddddd #dddddd #dddddd #6ce26c; color: #333333; background: #f6f6f6;">yum -y update docker-io</pre>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;">手动升级：</p>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;"></p>
          <pre style="padding: 5px; margin-top: 10px; margin-bottom: 10px; margin-left: 20px; line-height: 18px; font-size: 9pt; font-family: 'Courier New', Arial; border-width: 1px 1px 1px 5px; border-style: solid; border-color: #dddddd #dddddd #dddddd #6ce26c; color: #333333; background: #f6f6f6;">wget https://get.docker.io/builds/Linux/x86_64/docker-latest -O docker mv -f docker /usr/bin/docker </pre>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;">升级完成</p>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;"></p>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;">启动：</p>
          <pre style="padding: 5px; margin-top: 10px; margin-bottom: 10px; margin-left: 20px; line-height: 18px; font-size: 9pt; font-family: 'Courier New', Arial; border-width: 1px 1px 1px 5px; border-style: solid; border-color: #dddddd #dddddd #dddddd #6ce26c; color: #333333; background: #f6f6f6;">service docker start</pre>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;"><span style="padding: 0px; margin: 0px; line-height: 1.5;">开机启动：</span></p>
          <p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; color: #333333; font-family: Verdana, sans-serif, 宋体; background-color: #ffffff;"></p>
          <pre style="padding: 5px; margin-top: 10px; margin-bottom: 10px; margin-left: 20px; line-height: 18px; font-size: 9pt; font-family: 'Courier New', Arial; border-width: 1px 1px 1px 5px; border-style: solid; border-color: #dddddd #dddddd #dddddd #6ce26c; color: #333333; background: #f6f6f6;">chkconfig docker on</pre>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/02/424049.html" title="permalink">2015-04-02 12:41</a> ivaneeo 阅读(312) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/04/02/424049.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=424049">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=424049">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl14_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/03/28/423912.html">ubuntu pptp vpn</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://blog.fens.me/vpn-pptp-client-ubuntu/
          <br />
          <br />
          <div>
           &nbsp;ip route add 192.168.20.0/24 via 192.168.20.1 dev ppp0
          </div>
          <br />
          <div>
           http://blog.163.com/monk...popo/blog/static/208680220111014101233949/
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/28/423912.html" title="permalink">2015-03-28 17:48</a> ivaneeo 阅读(386) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/28/423912.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423912">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423912">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl15_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/03/28/423906.html">docker run restart</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://docs.docker.com/articles/host_integration/
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/28/423906.html" title="permalink">2015-03-28 10:31</a> ivaneeo 阅读(349) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/28/423906.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423906">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423906">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl16_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/03/27/423895.html">mincloud install log</a> 
        </div> 
        <div class="postText"> 
         <div>
          172.20.20.8 mysql-mm1
         </div>
         <div>
          172.20.20.11 mysql-mm2
         </div>
         <div>
          172.20.20.10 mysql-data1
         </div>
         <div>
          172.20.20.9 mysql-data2
         </div>
         <div>
          172.20.20.10 mysql-sql1
         </div>
         <div>
          172.20.20.9 mysql-sql2
          <br />
          <br />
          <br />
          <div>
           <div>
            mysql-mm1:
           </div>
           <div>
            &nbsp; docker run -d --name=&quot;mysql_mm1&quot; --net=host -v /opt/mysql:/usr/local/mysql mysql_mm/ubuntu /bin/bash -exec 'echo -e &quot;172.20.20.7 mysql-mm1\n172.20.20.10 mysql-mm2\n172.20.20.8 mysql-data1\n172.20.20.9 mysql-data2\n172.20.20.8 mysql-sql1\n172.20.20.9 mysql-sql2\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; ndb_mgmd -f /usr/local/mysql/data/mysql-cluster/config.ini &amp;&amp; /usr/sbin/sshd -D'
           </div>
           <div>
            mysql-mm2:
           </div>
           <div>
            &nbsp; docker run -d --name=&quot;mysql_mm2&quot; --net=host -v /opt/mysql:/usr/local/mysql mysql_mm/ubuntu /bin/bash -exec 'echo -e &quot;172.20.20.7 mysql-mm1\n172.20.20.10 mysql-mm2\n172.20.20.8 mysql-data1\n172.20.20.9 mysql-data2\n172.20.20.8 mysql-sql1\n172.20.20.9 mysql-sql2\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; ndb_mgmd -f /usr/local/mysql/data/mysql-cluster/config.ini &amp;&amp; zabbix_agentd &amp;&amp; /usr/sbin/sshd -D'
           </div>
           <div>
            mysql-data1:
           </div>
           <div>
            &nbsp; docker run -d --name=&quot;mysql_data1&quot; --net=host -v /opt/mysql:/usr/local/mysql mysql_data/ubuntu /bin/bash -exec 'echo -e &quot;172.20.20.7 mysql-mm1\n172.20.20.10 mysql-mm2\n172.20.20.8 mysql-data1\n172.20.20.9 mysql-data2\n172.20.20.8 mysql-sql1\n172.20.20.9 mysql-sql2\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; /usr/local/mysql/bin/ndbd &amp;&amp; zabbix_agentd &amp;&amp; /usr/sbin/sshd -D'
           </div>
           <div>
            mysql-data2:
           </div>
           <div>
            &nbsp; docker run -d --name=&quot;mysql_data2&quot; --net=host -v /opt/mysql:/usr/local/mysql mysql_data/ubuntu /bin/bash -exec 'echo -e &quot;172.20.20.7 mysql-mm1\n172.20.20.10 mysql-mm2\n172.20.20.8 mysql-data1\n172.20.20.9 mysql-data2\n172.20.20.8 mysql-sql1\n172.20.20.9 mysql-sql2\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; /usr/local/mysql/bin/ndbd &amp;&amp; zabbix_agentd &amp;&amp; /usr/sbin/sshd -D'
           </div>
           <div>
            mysql-sql1:
           </div>
           <div>
            &nbsp; docker run -d --name=&quot;mysql_sql1&quot; --net=host -v /opt/mysql:/usr/local/mysql mysql_sql/ubuntu /bin/bash -exec 'echo -e &quot;172.20.20.7 mysql-mm1\n172.20.20.10 mysql-mm2\n172.20.20.8 mysql-data1\n172.20.20.9 mysql-data2\n172.20.20.8 mysql-sql1\n172.20.20.9 mysql-sql2\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; /usr/local/mysql/bin/mysqld_safe --user=mysql'
           </div>
           <div>
            mysql-sql2:
           </div>
           <div>
            &nbsp; docker run -d --name=&quot;mysql_sql2&quot; --net=host -v /opt/mysql:/usr/local/mysql mysql_sql/ubuntu /bin/bash -exec 'echo -e &quot;172.20.20.7 mysql-mm1\n172.20.20.10 mysql-mm2\n172.20.20.8 mysql-data1\n172.20.20.9 mysql-data2\n172.20.20.8 mysql-sql1\n172.20.20.9 mysql-sql2\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; /usr/local/mysql/bin/mysqld_safe --user=mysql'
           </div>
           <div></div>
          </div>
          <div></div>
          <div>
           haproxy &amp;&amp; nginx:&nbsp;
          </div>
          <div>
           &nbsp; docker run -d --name=&quot;loadbalancer_master&quot;&nbsp;-p 8888:8888&nbsp;-p 6080:6080 -p 8089:8089 -p 8774:8774 -p 9696:9696 -p 9292:9292 -p 8776:8776 -p 5000:5000 -p 8777:8777 -p 11211:11211 -p 11222:11222 -p 5672:5672 -p 35357:35357 -p 8181:2181 -p 10389:10389 -p 2222:22 -p 80:80 -p 1936:1936 -p 3306:3306 -p 10052:10052 -p 10051:10051 -p 8080:8080 -v /opt/etc/nginx/conf:/usr/local/nginx-1.0.6/conf -v /opt/etc/haproxy:/etc/haproxy loadbalancer/ubuntu /bin/bash -exec 'echo -e &quot;127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; service haproxy start &amp;&amp; /usr/local/nginx-1.0.6/sbin/nginx &amp;&amp; zabbix_agentd &amp;&amp; /usr/sbin/sshd -D'
          </div>
          <div></div>
          <div>
           redis_master: &nbsp;
          </div>
          <div>
           &nbsp; docker run -d --name=&quot;redis_master&quot; -p 18:22 -p 6379:6379 -p 6380:6380 redis_master/ubuntu /bin/bash -exec '/usr/local/webserver/redis/start.sh &amp;&amp; /usr/sbin/sshd -D'
          </div>
          <div></div>
          <div>
           redis_slave:&nbsp;
          </div>
          <div>
           &nbsp; docker run -d --name=&quot;redis_slave1&quot; -p 18:22 -p 6379:6379 -p 6380:6380 redis_slave/ubuntu /bin/bash -exec 'echo -e &quot;172.20.20.10 redis-master\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; /usr/local/webserver/redis/start.sh &amp;&amp; /usr/sbin/sshd -D'&nbsp;
           <br />
           <br />
           <div>
            rabbitmq: &nbsp; &nbsp; &nbsp; &nbsp;
           </div>
           <div>
            &nbsp; docker run -d --name=&quot;rabbitmq_master&quot; -p 2222:22 -p 25672:25672 -p 15672:15672 -p 5672:5672 -p 4369:4369 -p 10051:10050 rabbitmq/ubuntu /bin/bash -exec 'echo -e &quot;172.20.20.10 rabbitmq-master\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; /etc/init.d/rabbitmq-server start &amp;&amp; /usr/sbin/sshd -D'
            <br />&nbsp;
            <br />mule:
            <br />&nbsp; docker run -d --name=&quot;mule1&quot; -p 5005:5005 -p 2222:22 -p 9999:9999 -p 9003:9003 -p 9000:9000 -p 9001:9001 -p 9004:9004 -v /opt/mule:/opt/mule-standalone-3.5.0_cloud mule/ubuntu /bin/bash -exec 'echo -e &quot;192.168.1.180 lb-master\n192.168.1.180 controller-node\n127.0.0.1 localhost&quot; &gt;&gt; /etc/hosts &amp;&amp; /usr/sbin/sshd &amp;&amp; export JAVA_HOME=/opt/jdk1.7.0_51 &amp;&amp; export PATH=$JAVA_HOME/bin:$PATH &amp;&amp; /opt/mule-standalone-3.5.0_cloud/bin/mule'
            <br />
            <br />
            <br />zentao:
            <br />
            <p>&nbsp; docker run -d --name=&quot;zentao&quot; -p 22222:22 -p 10008:80 -v /opt/www/html/zentaopms:/opt/zentao --privileged=true zentao/ubuntu /bin/bash -exec 'service apache2 start &amp;&amp; /usr/sbin/sshd -D'</p>websocket-tomcat:
           </div>
           <div>
            &nbsp; docker run -d --name=&quot;websocket_tomcat1&quot; -p 8888:8080 -p 2222:22 -v /opt/apache-tomcat-8.0.15:/opt/apache-tomcat websocket-tomcat/ubuntu /bin/bash -exec 'echo -e &quot;192.168.1.180 lb-master\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; export JAVA_HOME=/opt/jdk1.7.0_51 &amp;&amp; /opt/apache-tomcat/bin/startup.sh &amp;&amp; /usr/sbin/sshd -D'
            <br />
            <br />&nbsp;docker run -d --name=&quot;guacamole1&quot; -p 8088:8088 -p 38:22 -v /opt/apache-tomcat-7.0.53:/opt/apache-tomcat guacamole/ubuntu /bin/bash -exec 'echo -e &quot;192.168.1.150 lb-master\n127.0.0.1 localhost&quot; &gt; /etc/hosts &amp;&amp; /etc/init.d/guacd start &amp;&amp; /opt/apache-tomcat/bin/start-tomcat.sh &amp;&amp; /usr/sbin/sshd -D'
           </div>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/27/423895.html" title="permalink">2015-03-27 18:48</a> ivaneeo 阅读(720) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/27/423895.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423895">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423895">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl17_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/03/27/423893.html">mysql cluster install faq</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.docin.com/p-558099649.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/27/423893.html" title="permalink">2015-03-27 16:43</a> ivaneeo 阅读(263) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/27/423893.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423893">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423893">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl18_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/03/26/423873.html">centos7 testing yum</a> 
        </div> 
        <div class="postText"> 
         <pre style="box-sizing: border-box; overflow: auto; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13px; padding: 8px 15px; margin-top: 0px; margin-bottom: 0px; line-height: 18px; word-break: break-all; word-wrap: break-word; color: #333333; border: 0px; border-radius: 3px; white-space: pre-wrap; background-color: #f7f7f7;">
          <section markdowncontent-headingenabled="" js-task-list-container="" clearfix="" position-relative"="" id="item-e9ef350a274817390445" itemprop="articleBody" style="box-sizing: border-box; font-size: 16px; word-wrap: break-word; color: #4a4a4a; font-family: 'Helvetica Neue', Helvetica, 'ヒラギノ角ゴ ProN W3', 'Hiragino Kaku Gothic ProN', メイリオ, Meiryo, sans-serif; white-space: normal; background-color: #ffffff;">
           <h1>ステップ１ /etc/yum.repos.d/virt7-testing.repo というファイルを作ります。</h1>
           <div data-lang="txt" style="box-sizing: border-box; border-radius: 3px; margin: 1em 0px; line-height: 0; background-color: #f7f7f7;">
            <div style="box-sizing: border-box; color: #555555; display: inline-block; padding: 3px 6px; margin: 0px; line-height: 1; font-size: 12px; background-color: rgba(0, 0, 0, 0.0666667);">
             <span style="box-sizing: border-box;">/etc/yum.repos.d/virt7-testing.repo</span>
            </div>
            <div style="box-sizing: border-box; background: #ffffff;">
             <pre style="box-sizing: border-box; overflow: auto; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13px; padding: 8px 15px; margin-top: 0px; margin-bottom: 0px; line-height: 18px; word-break: break-all; word-wrap: break-word; color: #333333; border: 0px; border-radius: 3px; white-space: pre-wrap; background-color: #f7f7f7;">[virt7-testing] name=virt7-testing baseurl=http://cbs.centos.org/repos/virt7-testing/x86_64/os/ enabled=0  gpgcheck=0 </pre>
            </div>
           </div>
           <h1><a href="http://qiita.com/DQNEO/items/e9ef350a274817390445#%E3%82%B9%E3%83%86%E3%83%83%E3%83%972-%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%BE%E3%81%99" style="box-sizing: border-box; color: #337ab7; text-decoration: none; word-wrap: break-word; word-break: break-all; background-color: transparent;"></a>ステップ2 インスト`ルします。</h1>
           <div data-lang="text" style="box-sizing: border-box; border-radius: 3px; margin: 1em 0px; line-height: 0; background-color: #f7f7f7;">
            <div style="box-sizing: border-box; background: #ffffff;">
             <pre style="box-sizing: border-box; overflow: auto; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13px; padding: 8px 15px; margin-top: 0px; margin-bottom: 0px; line-height: 18px; word-break: break-all; word-wrap: break-word; color: #333333; border: 0px; border-radius: 3px; white-space: pre-wrap; background-color: #f7f7f7;">sudo yum --enablerepo=virt7-testing install docker </pre>
            </div>
           </div>
           <p style="box-sizing: border-box; margin: 1.6em 0px 0px; word-wrap: break-word; font-size: 1em; line-height: 1.875;">_Jします。</p>
           <div data-lang="text" style="box-sizing: border-box; border-radius: 3px; margin: 1em 0px; line-height: 0; background-color: #f7f7f7;">
            <div style="box-sizing: border-box; background: #ffffff;">
             <pre style="box-sizing: border-box; overflow: auto; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13px; padding: 8px 15px; margin-top: 0px; margin-bottom: 0px; line-height: 18px; word-break: break-all; word-wrap: break-word; color: #333333; border: 0px; border-radius: 3px; white-space: pre-wrap; background-color: #f7f7f7;">$ docker --version Docker version 1.5.0, build a8a31ef/1.5.0 </pre>
            </div>
           </div>
           <p style="box-sizing: border-box; margin: 1.6em 0px 0px; word-wrap: break-word; font-size: 1em; line-height: 1.875;">やった``！！</p>
           <p style="box-sizing: border-box; margin: 1.6em 0px 0px; word-wrap: break-word; font-size: 1em; line-height: 1.875;">※ご利用は自己任でおいします。</p>
           <p style="box-sizing: border-box; margin: 1.6em 0px 0px; word-wrap: break-word; font-size: 1em; line-height: 1.875;"><a href="http://billpaxtonwasright.com/installing-docker-1-5-0-on-centos-7/" style="box-sizing: border-box; color: #337ab7; text-decoration: none; word-wrap: break-word; word-break: break-all; background-color: transparent;">http://billpaxtonwasright.com/installing-docker-1-5-0-on-centos-7/</a></p>
           <div></div>
          </section></pre> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/26/423873.html" title="permalink">2015-03-26 23:32</a> ivaneeo 阅读(236) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/26/423873.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423873">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423873">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl19_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/03/23/423760.html">解决KVM中鼠标不同步问题</a> 
        </div> 
        <div class="postText"> 
         <p style="word-wrap: break-word; margin-right: 0px; margin-left: 0px; padding: 0px; color: #666666; font-family: 宋体, Arial; font-size: 16px; line-height: 26px; background-color: #ffffff;"><span style="word-wrap: break-word; line-height: 20px; font-family: 微软雅黑, Verdana, Geneva, sans-serif; color: #333333; font-size: 14px;">在虚拟机的配置文件中增加：</span></p>
         <p style="word-wrap: break-word; margin: 0px 0px 1.62em; padding: 0px; line-height: 20px; font-family: 微软雅黑, Verdana, Geneva, sans-serif; color: #333333; background-color: #ffffff;">&lt;input type=’tablet’ bus=’usb’/&gt;<br style="word-wrap: break-word; padding: 0px; margin: 0px;" />（该句位于&lt;devices&gt;配置中）<br /><br /><br /></p>
         <h2 style="border: 0px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; margin: 0px 0px 0.8125em; outline: 0px; padding: 0px; vertical-align: baseline; clear: both; line-height: 24.375px; background-color: #ffffff;">Linux:</h2>
         <p style="word-wrap: break-word; margin: 0px 0px 1.62em; padding: 0px; line-height: 20px; font-family: 微软雅黑, Verdana, Geneva, sans-serif; color: #333333; background-color: #ffffff;"><br /></p>
         <p style="border: 0px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; margin: 0px 0px 1.625em; outline: 0px; padding: 0px; vertical-align: baseline; color: #373737; line-height: 24.375px; background-color: #ffffff;">在终端中输入：</p>
         <pre style="border: 0px; font-family: 'Courier 10 Pitch', Courier, monospace; font-size: 13px; margin-top: 0px; margin-bottom: 1.625em; outline: 0px; padding: 0.75em 1.625em; vertical-align: baseline; font-stretch: normal; line-height: 1.5; overflow: auto; color: #373737; background: #f4f4f4;">xset -m 0</pre>
         <p style="border: 0px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; margin: 0px 0px 1.625em; outline: 0px; padding: 0px; vertical-align: baseline; color: #373737; line-height: 24.375px; background-color: #ffffff;">&nbsp;</p>
         <h2>Windows:</h2>
         <p style="border: 0px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; margin: 0px 0px 1.625em; outline: 0px; padding: 0px; vertical-align: baseline; color: #373737; line-height: 24.375px; background-color: #ffffff;">进入控制面板 -&gt; 鼠标 -&gt; 指针选项，去掉“提高指针精确度”前面的勾。</p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/23/423760.html" title="permalink">2015-03-23 20:49</a> ivaneeo 阅读(253) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/23/423760.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423760">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423760">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl20_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/03/22/423729.html">openstack virt vnc port</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://docs.openstack.org/image-guide/content/virt-install.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/22/423729.html" title="permalink">2015-03-22 23:16</a> ivaneeo 阅读(279) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/22/423729.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423729">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423729">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl21_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/03/17/423541.html">ceilometer alarm例子</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://blog.csdn.net/hackerain/article/details/38172941
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/17/423541.html" title="permalink">2015-03-17 18:13</a> ivaneeo 阅读(282) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/17/423541.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423541">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423541">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl22_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/03/13/423445.html">curl openstack</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://blog.csdn.net/anhuidelinger/article/details/9818693
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/13/423445.html" title="permalink">2015-03-13 19:32</a> ivaneeo 阅读(300) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/13/423445.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423445">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423445">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl23_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/03/02/423137.html">ubuntu docker1.5 install</a> 
        </div> 
        <div class="postText"> 
         <div>
          https://docs.docker.com/installation/ubuntulinux/#ubuntu-trusty-1404-lts-64-bit
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/02/423137.html" title="permalink">2015-03-02 16:21</a> ivaneeo 阅读(477) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/03/02/423137.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423137">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423137">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl24_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/02/27/423080.html">http://www.mimaku5.com/</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.mimaku5.com/
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/02/27/423080.html" title="permalink">2015-02-27 16:33</a> ivaneeo 阅读(2377) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/02/27/423080.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=423080">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=423080">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl25_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/02/14/422927.html">docker api demo</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://my.oschina.net/guol/blog/271416
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/02/14/422927.html" title="permalink">2015-02-14 14:29</a> ivaneeo 阅读(502) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/02/14/422927.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=422927">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=422927">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl26_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/02/07/422802.html">redis主从配置</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.tuicool.com/articles/RrmAru
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/02/07/422802.html" title="permalink">2015-02-07 03:37</a> ivaneeo 阅读(519) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/02/07/422802.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=422802">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=422802">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl27_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/02/06/422794.html">nginx制作证书</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.elesos.com/index.php?title=Nginx%E6%90%AD%E5%BB%BAHTTPS%E6%9C%8D%E5%8A%A1%E5%99%A8
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/02/06/422794.html" title="permalink">2015-02-06 14:54</a> ivaneeo 阅读(496) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/02/06/422794.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=422794">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=422794">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl28_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/02/03/422674.html">mule rabbitmq queue example</a> 
        </div> 
        <div class="postText"> 
         <div>
          <div>
           &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
          </div>
          <div></div>
          <div>
           &lt;mule xmlns:amqp=&quot;http://www.mulesoft.org/schema/mule/amqp&quot; xmlns=&quot;http://www.mulesoft.org/schema/mule/core&quot; xmlns:doc=&quot;http://www.mulesoft.org/schema/mule/documentation&quot;
          </div>
          <div>
           <span style="white-space:pre"> </span>xmlns:spring=&quot;http://www.springframework.org/schema/beans&quot; version=&quot;EE-3.5.2&quot;
          </div>
          <div>
           <span style="white-space:pre"> </span>xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
          </div>
          <div>
           <span style="white-space:pre"> </span>xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
          </div>
          <div>
           http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
          </div>
          <div>
           http://www.mulesoft.org/schema/mule/amqp http://www.mulesoft.org/schema/mule/amqp/current/mule-amqp.xsd&quot;&gt;
          </div>
          <div>
           &nbsp; &nbsp; &lt;amqp:connector name=&quot;AMQP_Connector&quot; validateConnections=&quot;true&quot; host=&quot;192.168.199.21&quot; doc:name=&quot;AMQP Connector&quot;/&gt;
          </div>
          <div>
           &nbsp; &nbsp; &lt;amqp:endpoint exchangeName=&quot;test&quot; queueName=&quot;test_queue&quot; exchangeType=&quot;direct&quot; name=&quot;AMQP&quot; responseTimeout=&quot;10000&quot; doc:name=&quot;AMQP&quot; queueDurable=&quot;true&quot;/&gt;
          </div>
          <div>
           &nbsp; &nbsp; &lt;flow name=&quot;testFlow1&quot; doc:name=&quot;testFlow1&quot;&gt;
          </div>
          <div>
           &nbsp; &nbsp; &nbsp; &nbsp; &lt;amqp:inbound-endpoint responseTimeout=&quot;10000&quot; exchange-pattern=&quot;request-response&quot; connector-ref=&quot;AMQP_Connector&quot; ref=&quot;AMQP&quot; doc:name=&quot;AMQP&quot;/&gt;
          </div>
          <div>
           &nbsp; &nbsp; &nbsp; &nbsp;&lt;byte-array-to-string-transformer doc:name=&quot;Transform bytearray message to String&quot;/&gt;
          </div>
          <div>
           &nbsp; &nbsp; &nbsp; &nbsp; &lt;logger message=&quot;I recived a direct message from AMQP: #[payload]&quot; level=&quot;INFO&quot; doc:name=&quot;Logger&quot;/&gt;
          </div>
          <div>
           &nbsp; &nbsp; &lt;/flow&gt;
          </div>
          <div>
           &lt;/mule&gt;
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/02/03/422674.html" title="permalink">2015-02-03 02:20</a> ivaneeo 阅读(585) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/02/03/422674.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=422674">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=422674">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl29_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/01/16/422262.html">rabbitmq config</a> 
        </div> 
        <div class="postText"> 
         <p>[{rabbit, [{cluster_partition_handling, autoheal},{loopback_users, []}]}].</p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/01/16/422262.html" title="permalink">2015-01-16 18:24</a> ivaneeo 阅读(4899) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/01/16/422262.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=422262">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=422262">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl30_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/01/06/422094.html">nginx host</a> 
        </div> 
        <div class="postText"> 
         <pre id="answer-content-1341121341" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-family: 'Microsoft YaHei'; white-space: pre-wrap; word-wrap: break-word; font-stretch: normal; line-height: 26px; color: #333333; background-color: #ffffff;">
          <div>
           http://rhomobi.com/topics/49
          </div><br />nginx为了实现反向代理的需求而增加了一个ngx_http_proxy_module模块。其中proxy_set_header指令就是该模块需要读取的配置文件。在这里，所有设置的值的含义和http请求同中的含义完全相同，除了Host外还有X-Forward-For。<br />        Host的含义是表明请求的主机名，因为nginx作为反向代理使用，而如果后端真是的服务器设置有类似防盗链或者根据http请求头中的host字段来进行路由或判断功能的话，如果反向代理层的nginx不重写请求头中的host字段，将会导致请求失败【默认反向代理服务器会向后端真实服务器发送请求，并且请求头中的host字段应为proxy_pass指令设置的服务器】。<br />        同理，X_Forward_For字段表示该条http请求是有谁发起的？如果反向代理服务器不重写该请求头的话，那么后端真实服务器在处理时会认为所有的请求都来在反向代理服务器，如果后端有防攻击策略的话，那么机器就被封掉了。因此，在配置用作反向代理的nginx中一般会增加两条配置，修改http的请求头：<br />proxy_set_header Host $http_host;<br />proxy_set_header X-Forward-For $remote_addr;<br /><br />这里的$http_host和$remote_addr都是nginx的导出变量，可以再配置文件中直接使用。如果Host请求头部没有出现在请求头中，则$http_host值为空，但是$host值为主域名。因此，一般而言，会用$host代替$http_host变量，从而避免http请求中丢失Host头部的情况下Host不被重写的失误。</pre> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/01/06/422094.html" title="permalink">2015-01-06 22:24</a> ivaneeo 阅读(522) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/01/06/422094.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=422094">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=422094">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl31_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/01/05/422043.html">cas oauth</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://jasig.github.io/cas/4.0.x/protocol/OAuth-Protocol.html
          <br />
          <br />
          <div>
           http://www.tuicool.com/articles/VrERzy
           <br />
           <br />
           <div>
            http://www.tuicool.com/articles/Ar2EBz
           </div>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/01/05/422043.html" title="permalink">2015-01-05 02:06</a> ivaneeo 阅读(536) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/01/05/422043.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=422043">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=422043">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl32_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2015/01/04/422039.html">mule oauth2.0</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.mulesoft.org/documentation/display/current/Creating+an+OAuth+2.0a+Web+Service+Provider
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/01/04/422039.html" title="permalink">2015-01-04 22:29</a> ivaneeo 阅读(434) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2015/01/04/422039.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=422039">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=422039">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl33_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/31/422000.html">bookkeeper</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://zh.wikipedia.org/wiki/%E9%A2%84%E5%86%99%E5%BC%8F%E6%97%A5%E5%BF%97
          <br />
          <div>
           http://zookeeper.apache.org/doc/r3.3.6/bookkeeperStarted.html
           <br />
           <div>
            http://zookeeper.apache.org/bookkeeper/docs/r4.0.0/bookkeeperProgrammer.html
            <br />
            <div>
             http://zookeeper.apache.org/bookkeeper/docs/r4.0.0/apidocs/index.html?org/apache/bookkeeper/client/BookKeeper.html
            </div>
           </div>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/31/422000.html" title="permalink">2014-12-31 23:38</a> ivaneeo 阅读(486) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/31/422000.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=422000">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=422000">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl34_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/31/421999.html">zookeeper自动清理日志</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://nileader.blog.51cto.com/1381108/932156
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/31/421999.html" title="permalink">2014-12-31 22:27</a> ivaneeo 阅读(469) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/31/421999.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421999">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421999">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl35_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/30/421971.html">ssdb monitor</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://ssdb.io/docs/ssdb-cli.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/30/421971.html" title="permalink">2014-12-30 22:49</a> ivaneeo 阅读(5332) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/30/421971.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421971">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421971">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl36_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/28/421890.html">vpn相关内容</a> 
        </div> 
        <div class="postText"> 
         <div>
          <h2>对于防火墙的选择:<br />&nbsp;&nbsp;<span style="font-size: 14px;">http://blog.sina.com.cn/s/blog_92dc41ea0101j5l1.html<br /></span>
           <div>
            &nbsp; http://www.lupaworld.com/article-218506-1.html
           </div></h2>&nbsp;openvpn:
          <br />&nbsp; http://grantcurell.com/2014/07/22/setting-up-a-vpn-server-on-ubuntu-14-04/
          <br />
          <br />pfsense防火墙:
          <br />&nbsp; http://www.docin.com/p-88103814.html
          <br />
          <br />ssl vpn:openvpn
          <br />
          <br />ipsec:sprongswan
          <br />
          <br />代理服务器:squid
          <br />
          <br />stunnel:tcp加密
          <br />
          <br />
          <br />
          <strong style="font-family: Simsun; font-size: medium; line-height: normal;">Panabit流控引擎</strong>
          <span style="font-family: Simsun; font-size: medium; line-height: normal;">：<br /></span>
          <div>
           http://www.panabit.com/html/product/std/2014/0924/86.html
           <br />
           <span style="font-family: Simsun; font-size: medium; line-height: normal;">Panabit标准版是目前国内开放度最高、免费、专业的应用层流量管理系统，特别针对P2P应用的识别与控制，截止2009年03月25日，已经支持实际主流应用240种以上，并以两周更新一次特征库的速度持续更新(包括已支持协议和新增协议两方面的更新，Panabit支持协议列表请关注</span>
           <a href="http://www.panabit.com/" target="_blank" style="font-family: Simsun; font-size: medium; line-height: normal;">Panabit网站首页</a>
           <span style="font-family: Simsun; font-size: medium; line-height: normal;">&quot;支持协议&quot;)。Panabit在精确识别协议即对应用分类的基础上，根据用户自定义策略，提供灵活方便的流量管理机制：带宽限速、带宽保证、带宽预留，并可基于协议/协议组、IP/IP组进行参数化的策略设置。Panabit采用创新的&quot;节点跟踪&quot;技术与&quot;加密协议深度识别&quot;技术提高识别效率和准确度，如对使用加密协议的eMule、Skype等精确识别。Panabit区别于一些同类设备，在不能精确识别协议的情况下，限制客户端并发连接数非科学的做法，易造成误判或影响正常用户。Panabit是一款真正的应用层流控系统，能做限速控制；如果是疑似识别、不能准确定位具体应用的系统，是不敢做限速控制，起不到实际应用层流控效果。</span>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/28/421890.html" title="permalink">2014-12-28 00:30</a> ivaneeo 阅读(4533) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/28/421890.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421890">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421890">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl37_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/26/421868.html">ndb manage show</a> 
        </div> 
        <div class="postText"> 
         <p>root@proxzone-project-4:/usr/local/mysql/bin# ndb_mgm -e show</p> 
         <p>Connected to Management Server at: localhost:1186</p> 
         <p>Cluster Configuration</p> 
         <p>---------------------</p> 
         <p>[ndbd(NDB)] 2 node(s)</p> 
         <p>id=3 @172.21.21.108&nbsp; (mysql-5.6.21 ndb-7.3.7, Nodegroup: 0)</p> 
         <p>id=4 @172.21.21.109&nbsp; (mysql-5.6.21 ndb-7.3.7, Nodegroup: 0, *)</p> 
         <p><br /></p> 
         <p>[ndb_mgmd(MGM)] 2 node(s)</p> 
         <p>id=1 @172.21.21.107&nbsp; (mysql-5.6.21 ndb-7.3.7)</p> 
         <p>id=2 @172.21.21.110&nbsp; (mysql-5.6.21 ndb-7.3.7)</p> 
         <p><br /></p> 
         <p>[mysqld(API)] 2 node(s)</p> 
         <p>id=5 @172.21.21.108&nbsp; (mysql-5.6.21 ndb-7.3.7)</p> 
         <p>id=6 @172.21.21.109&nbsp; (mysql-5.6.21 ndb-7.3.7)</p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/26/421868.html" title="permalink">2014-12-26 18:41</a> ivaneeo 阅读(4020) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/26/421868.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421868">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421868">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl38_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/25/421833.html">zabbix rabbitmq</a> 
        </div> 
        <div class="postText"> 
         <div>
          https://github.com/alfss/zabbix-rabbitmq
          <br />
          <div>
           https://github.com/jasonmcintosh/rabbitmq-zabbix
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/25/421833.html" title="permalink">2014-12-25 22:49</a> ivaneeo 阅读(3380) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/25/421833.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421833">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421833">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl39_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/25/421832.html">zabbix io discovery</a> 
        </div> 
        <div class="postText"> 
         <div>
          #!/bin/bash
         </div>
         <div>
          #written by lenwood
         </div>
         <div>
          #mail:ccyhaoran@live.cn
         </div>
         <div>
          diskarray=(`cat /proc/diskstats |grep -E &quot;\bsd[abcdefg]\b|\bxvd[abcdefg]\b&quot;|grep -i &quot;\b$1\b&quot;|awk '{print $3}'|sort|uniq &nbsp; 2&gt;/dev/null`)
         </div>
         <div>
          length=${#diskarray[@]}
         </div>
         <div>
          printf &quot;{\n&quot;
         </div>
         <div>
          printf &nbsp;'\t'&quot;\&quot;data\&quot;:[&quot;
         </div>
         <div>
          for ((i=0;i&lt;$length;i++))
         </div>
         <div>
          &nbsp;do
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;printf '\n\t\t{'
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;printf &quot;\&quot;{#DISK_NAME}\&quot;:\&quot;${diskarray[$i]}\&quot;}&quot;
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if [ $i -lt $[$length-1] ];then
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;printf ','
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fi
         </div>
         <div>
          &nbsp;done
         </div>
         <div>
          printf &nbsp;&quot;\n\t]\n&quot;
         </div>
         <div>
          printf &quot;}\n&quot;
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/25/421832.html" title="permalink">2014-12-25 22:17</a> ivaneeo 阅读(2871) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/25/421832.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421832">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421832">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl40_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421694.html">mysql cluster tablespace</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://dev.mysql.com/doc/refman/5.1/en/create-tablespace.html
          <br />
          <div>
           http://dev.mysql.com/doc/refman/5.1/en/mysql-cluster-disk-data-objects.html
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421694.html" title="permalink">2014-12-23 21:04</a> ivaneeo 阅读(232) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421694.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421694">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421694">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl41_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421692.html">create a table with tablespace set.</a> 
        </div> 
        <div class="postText"> 
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">5.1.37-ndb-7.0.8a-cluster-gpl MySQL Cluster Server (GPL)&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">create a table with tablespace set.&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">* tablespace creation *&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">CREATE TABLESPACE ts_1 ADD DATAFILE '/home/db/mysql-cluster/data/data_1.dat' USE LOGFILE GROUP lg_1 INITIAL_SIZE = 26843545600 ENGINE NDB;&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">ALTER TABLESPACE ts_1 ADD DATAFILE '/home/db/mysql-cluster/data/data_2.dat' INITIAL_SIZE 26843545600 ENGINE NDB;&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">ALTER TABLESPACE ts_1 ADD DATAFILE '/home/db/mysql-cluster/data/data_3.dat' INITIAL_SIZE 26843545600 ENGINE NDB;&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">ALTER TABLESPACE ts_1 ADD DATAFILE '/home/db/mysql-cluster/data/data_4.dat' INITIAL_SIZE 26843545600 ENGINE NDB;&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">* table creation *&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">CREATE TABLE `TABLE` (&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">`A` date NOT NULL,&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">`B` varchar(30) NOT NULL,&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">`C` varchar(50) NOT NULL,&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">`D` varchar(50) NOT NULL,&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">`E` varchar(50) NOT NULL,&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">`F` varchar(255) DEFAULT NULL&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">) TABLESPACE ts_1 STORAGE DISK ENGINE=ndbcluster DEFAULT CHARSET=utf8&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">PK, index generated without the table and insert the data(40G),&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">I'm Using logs as the following index numbers are still high. (mgm log)&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">The actual number of memory ndb also giving you an upward trend ... Why?&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">2009-11-17 16:54:58 [MgmtSrvr] INFO -- Node 8: Index usage is 4%(30707 8K pages of total 655392)&nbsp;</span>
         <br style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;" />
         <span style="font-family: verdana, arial, helvetica, sans-serif; font-size: 12px; line-height: 23.3999996185303px; background-color: #ffffff;">2009-11-17 16:55:25 [MgmtSrvr] INFO -- Node 8: Data usage is 8%(20603 32K pages of total 229376)</span> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421692.html" title="permalink">2014-12-23 20:57</a> ivaneeo 阅读(223) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421692.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421692">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421692">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl42_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421689.html">NDB语法</a> 
        </div> 
        <div class="postText"> 
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">1，不支持创建临时表(temporary tables);</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">2,创建索引和键的限制：</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">(1),在列上创建索引长度超过3072bytes会成功，但是只能使用索引的前3072bytes。并且会显示警告信息&quot;specified key was too long,max key lenght is 3072 keys&quot;</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">&nbsp;</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;"><strong style="margin: 0px; padding: 0px;">不支持的特征</strong></p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">1，在NDB创建create table时，一定要指定tablespace.</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">For NDB tables, beginning with MySQL Cluster NDB 6.2.5 and MySQL Cluster NDB 6.3.2, it is also possible to specify whether the column is stored on disk or in memory by using a STORAGE clause. STORAGE DISK causes the column to be stored on disk, and STORAGE MEMORY causes in-memory storage to be used. The CREATE TABLE statement used must still include a TABLESPACE clause:<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />mysql&gt; CREATE TABLE t1 (<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; c1 INT STORAGE DISK,<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; c2 INT STORAGE MEMORY<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp; -&gt; ) ENGINE NDB;<br style="margin: 0px; padding: 0px;" />ERROR 1005 (HY000): Can't create table 'c.t1' (errno: 140)<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />mysql&gt; CREATE TABLE t1 (<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; c1 INT STORAGE DISK,<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; c2 INT STORAGE MEMORY<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp; -&gt; ) TABLESPACE ts_1 ENGINE NDB;<br style="margin: 0px; padding: 0px;" />Query OK, 0 rows affected (1.06 sec)</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">&nbsp;</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;"><strong style="margin: 0px; padding: 0px;">//NDB参数解释</strong>&nbsp; ---from 《mysql性能调优和架构设计》</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">1) [NDBD DEFAULT]中的配置项：<br style="margin: 0px; padding: 0px;" />NoOfReplicas：定义在Cluster 环境中相同数据的分数，通俗一点来说就是每一份数据存放NoOfReplicas 份。如果希望能够冗余，那么至少设置为2（一般情况来说此参数值设置为2 就够了），最大只能设置为4。另外，NoOfReplicas 值得大小，实际上也就是nodegroup 大小的定义。NoOfReplicas 参数没有系统默认值，所以必须设定，而且只能设置在[NDBD DEFAULT]中，因为此数值在整个Cluster 集群中一个node group 中所有的NDBD 节点都需要一样。另外NoOfReplicas 的数目对整个Cluster 环境中NDB 节点数量有较大的影响，因为NDB 节点总数量是NoOfReplicas * 2 * node_group_num；DataDir：指定本地的pid 文件，trace 文件，日志文件以及错误日志子等存放的路径，无系统默认地址，所以必须设定；</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">DataMemory：设定用于存放数据和主键索引的内存段的大小。这个大小限制了能存放的数据的大小，因为ndb 存储引擎需属于内存数据库引擎，需要将所有的数据（包括索引）都load 到内存中。这个参数并不是一定需要设定的，但是默认值非常小（80M），只也就是说如果使用默认值，将只能存放很小的数据。参数设置需要带上单位，如512M，2G 等。另外，DataMemory 里面还会存放UNDO 相关的信息,所以，事务的大小和事务并发量也决定了DataMemory 的使用量，建议尽量使用小事务；</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;"><br style="margin: 0px; padding: 0px;" />IndexMemory：设定用于存放索引（非主键）数据的内存段大小。和DataMemory类似，这个参数值的大小同样也会限制该节点能存放的数据的大小，因为索引的大小是随着数据量增长而增长的。参数设置也如DataMemory 一样需要单位。IndexMemory 默认大小为18M；实际上，一个NDB 节点能存放的数据量是会受到DataMemory 和IndexMemory 两个参数设置的约束，两者任何一个达到限制数量后，都无法再增加能存储的数据量。如果继续存入数据系统会报错“table is full”。</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">FileSystemPath：指定redo 日志，undo 日志，数据文件以及meta 数据等的存放位置，默认位置为DataDir 的设置，并且在ndbd 初始化的时候，参数所设定的文件夹必须存在。在第一次启动的时候，ndbd 进程会在所设定的文件夹下建立一个子文件夹叫ndb_id_fs，这里的id 为节点的ID 值，如节点id 为3 则文件夹名称为ndb_3_fs。当然，这个参数也不一定非得设置在[NDBD DEFAULT]参数组里面让所有节点的设置都一样（不过建议这样设置），还可以设置在[NDBD]参数组下为每一个节点单独设置自己的FileSystemPath值；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />BackupDataDir：设置备份目录路径，默认为FileSystemPath/BACKUP。接下来的几个参数也是非常重要的，主要都是与并行事务数和其他一些并行限制有关的参数设置。<br style="margin: 0px; padding: 0px;" />MaxNoOfConcurrentTransactions：设置在一个节点上面的最大并行事务数目，默认为4096，一般情况下来说是足够了的。这个参数值所有节点必须设置一样，所以一般都是设置在[NDBD DEFAULT]参数组下面；</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;"><br style="margin: 0px; padding: 0px;" />MaxNoOfConcurrentOperations：设置同时能够被更新（或者锁定）的记录数量。一般来说可以设置为在整个集群中相同时间内可能被更新（或者锁定）的总记录数，除以NDB节点数，所得到的值。</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;">MaxNoOfLocalOperations：此参数默认是MaxNoOfConcurrentOperations * 1.1的大小，也就是说，每个节点一般可以处理超过平均值的10%的操作记录数量。但是一般来说，MySQL 建议单独设置此参数而不要使用默认值，并且将此参数设置得更较大一些；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />以下的三个参数主要是在一个事务中执行一条query 的时候临时用到存储（或者内存）的情况下所使用到的，所使用的存储信息会在事务结束（commit 或者rollback）的时候释放资源；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />MaxNoOfConcurrentIndexOperations：这个参数和MaxNoOfConcurrentOperations参数比较类似，只不过所针对的是Index 的record 而已。其默认值为8192，对伊一般的系统来说都已经足够了，只有在事务并发非常非常大的系统上才有需要增加这个参数的设置。当然，此参数越大，系统运行时候为此而消耗的内存也会越大；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />MaxNoOfFiredTriggers：触发唯一索引（hash index）操作的最大的操作数，这个操作数是影响索引的操作条目数，而不是操作的次数。系统默认值为4000，一般系统来说够用了。当然，如果系统并发事务非常高，而且涉及到索引的操作也非常多，自然也就需要提高这个参数值的设置了；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />TransactionBufferMemory：这个buffer 值得设置主要是指定用于跟踪索引操作而使用的。主要是用来存储索引操作中涉及到的索引key 值和column 的实际信息。这这个参数的值一般来说也很少需要调整，因为实际系统中需要的这部分buffer 量非常小，虽然默认值只是1M，但是对于一般应用也已经足够了；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />下面要介绍到的参数主要是在系统处理中做table scan 或者range scan 的时候使用的一些buffer 的相关设置，设置的恰当可以既节省内存又达到足够的性能要求。<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />MaxNoOfConcurrentScans：这个参数主要控制在Cluster 环境中并发的table scan和range scan 的总数量平均分配到每一个节点后的平均值。一般来说，每一个scan 都是通过并行的扫描所有的partition 来完成的，每一个partition 的扫描都会在该partition所在的节点上面使用一个scan record。所以，这个参数值得大小应该是“scan record”数目* 节点数目。参数默认大小为256，最大只能设置为500；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />MaxNoOfLocalScans：和上面的这个参数相对应，只不过设置的是在本节点上面的并发table scan 和range scan 数量。如果在系统中有大量的并发而且一般都不使用并行的话，需要注意此参数的设置。默认为MaxNoOfConcurrentScans * node 数目；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />BatchSizePerLocalScan：该参用于计算在Localscan（并发）过程中被锁住的记录数，文档上说明默认为64；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />LongMessageBuffer：这个参数定义的是消息传递时候的buffer 大小，而这里的消息传递主要是内部信息传递以及节点与节点之间的信息传递。这个参数一般很少需要调整，默认大小为1MB 大小；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />下面介绍一下与LOG 相关的参数配置说明，包括LOG level。这里的LOG level 有多种，从0 到15，也就是共16 种。如果设定为0，则表示不记录任何LOG。如果设置为最高level，也就是15，则表示所有的信息都会通过标准输出来记录LOG.由于这里的所有信息实际上都会传递到管理节点的cluster LOG 中，所以，一般来说，除了启动时候的LOG级别需要设置为1 之外，其他所有的LOG level 都只需要设置为0 就可以了。<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />NoOfFragmentLogFiles：这个参数实际上和Oracle 的redo LOG 的group 一样的。其实就是ndb 的redo LOG group 数目，这些redo LOG 用于存放ndb 引擎所做的所有需要变更数据的事情，以及各种checkpoint 信息等。默认值为8；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />MaxNoOfSavedMessages：这个参数设定了可以保留的trace 文件（在节点crash的时候参数）的最大个数，文档上面说此参数默认值为25。<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />LogLevelStartup：设定启动ndb 节点时候需要记录的信息的级别（不同级别所记录的信息的详细程度不一样），默认级别为1；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />LogLevelShutdown：设定关闭ndb 节点时候记录日志的信息的级别，默认为0；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />LogLevelStatistic：这个参数是针对于统计相关的日志的，就像更新数量，插入数量，buffer 使用情况，主键数量等等统计信息。默认日志级别为0；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />LogLevelCheckpoint：checkpoint 日志记录级别（包括local 和global 的），默认为0；</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;"><br style="margin: 0px; padding: 0px;" />LogLevelNodeRestart：ndb 节点重启过程日志级别，默认为0；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />LogLevelConnection：各节点之间连接相关日志记录的级别，默认0；</p>
         <p style="margin-top: 10px; margin-bottom: 10px; padding: 0px; line-height: 19.5px; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fefef2;"><br style="margin: 0px; padding: 0px;" />LogLevelError：在整个Cluster 中错误或者警告信息的日志记录级别，默认0；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />LogLevelInfo：普通信息的日志记录级别，默认为0。这里再介绍几个用来作为LOG 记录时候需要用到的Buffer 相关参数，这些参数对于性能都有一定的影响。当然，如果节点运行在无盘模式下的话，则影响不大。<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />UndoIndexBuffer：undo index buffer 主要是用于存储主键hash 索引在变更之后产生的undo 信息的缓冲区。默认值为2M 大小，最小可以设置为1M，对于大多数应用来说，2M 的默认值是够的.当然，在更新非常频繁的应用里面，适当的调大此参数值对性能还是有一定帮助的。如果此参数太小，会报出677 错误：Index UNDO buffers overloaded；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />UndoDataBuffer：和undo index buffer 类似，undo data buffer 主要是在数据发生变更的时候所需要的undo 信息的缓冲区。默认大小为16M，最小同样为1M。当这个参数值太小的时候，系统会报出如下的错误：Data UNDO buffers overloaded，错误号为891；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />RedoBuffer：Redo buffer 是用redo LOG 信息的缓冲区，默认大小为8M，最小为1M。如果此buffer 太小，会报1221 错误：REDO LOG buffers overloaded.<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />此外，NDB 节点还有一些和metadata 以及内部控制相关的参数，但大部分参数都基本上不需要任何调整，所以就不做进一步介绍。如果有兴趣希望详细了解，可以根据MySQL官方的相关参考手册，手册上面都有较为详细的介绍。<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />3、SQL 节点相关配置说明<br style="margin: 0px; padding: 0px;" />1) 和其他节点一样，先介绍一些适用于所有节点的[MySQLD DEFAULT]参数ArbitrationRank：这个参数在介绍管理节点的参数时候已经介绍过了，用于设定节点级别（主要是在多个节点在处理相关操作时候出现分歧时候设定裁定者）的。一般来说，所有的SQL 节点都应该设定为2；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />ArbitrationDelay：默认为0，裁定者在开始裁定之前需要被delay 多久，单位为毫秒。一般不需要更改默认值。<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />BatchByteSize：在做全表扫描或者索引范围扫描的时候，每一次fatch 的数据量，默认为32KB；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />BatchSize：类似BatchByteSize 参数，只不过BatchSize 所设定的是每一次fetch的record 数量，而不是物理总量，默认为64，最大为992（暂时还不知道这个值是基于什么理论而设定的）。在实际运行query 的过程中，fetch 的量受到BatchByteSize 和BatchSize两个参数的共同制约，二者取最小值；<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />MaxScanBatchSize：在Cluster 环境中，进行并行处理的情况下，所有节点的BatchSize 总和的最大值。默认值为256KB，最大值为16MB。<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />2) 每个节点独有的[MySQLD]参数组，仅有id 和hostname 参数需要配置，在之前各类节点均有介绍了，这里就不再累述。<br /><br /><br />转自<span style="font-family: verdana, 'courier new'; font-size: 14px; line-height: 21px;">http://www.cnblogs.com/alang85/archive/2011/11/18/2253900.html</span></p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421689.html" title="permalink">2014-12-23 20:09</a> ivaneeo 阅读(340) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421689.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421689">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421689">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl43_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421688.html">mysql cluster集群时插入大量数据出现 table is full的解决方法</a> 
        </div> 
        <div class="postText"> 
         <div>
          <ul style="margin: 10px 0px 0px; width: 740px; height: auto; color: #454543; font-family: Simsun; font-size: 12px; line-height: normal; text-align: center; background-color: #ffffff;">
           <li style="margin: 0px 12px 12px 0px; list-style: none; line-height: 22px;"><span style="font-size: 13px;"><p>一、循环插入数据时出现<br />&nbsp; table is full</p><p>二、在mgm&gt;all report memoryusage 查看</p><p>Node 2: Data usage is 22%(2305 32K pages of total 10240)</p><p>使用率到最后98%以上这时出现啦table is full</p><p>基于以上两种情况，其实是一种情况的我的解决方法是:</p><p>根据硬件配置必须根据硬件配置修改my.cnf文件和config.ini文件</p><p>1.config.ini<br />[ndbd default]<br />NoOfReplicas=2&nbsp;<br />MaxNoOfConcurrentOperations=10000<br />DataMemory=320M<br />IndexMemory=96M<br />TimeBetweenWatchDogCheck=30000<br />MaxNoOfOrderedIndexes=512</p><p>2.my.cnf<br />[mysqld]<br />ndbcluster<br />ndb-connectstring=124.95.137.12<br />optimizer_switch=engine_condition_pushdown=off</p><p>问题得以解决<br /><span style="font-size: 12px;">来源：http://www.greensoftcode.net/</span><br /></p></span></li>
          </ul>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421688.html" title="permalink">2014-12-23 20:07</a> ivaneeo 阅读(387) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/23/421688.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421688">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421688">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl44_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/19/421553.html">docker!</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.blogjava.net/yongboy/archive/2013/12/12/407498.html
          <br />
          <h2>docker-registry:</h2>
          <div>
           http://www.cnblogs.com/xguo/p/3829329.html
           <br />
           <br />
           <br />ubuntu 14.04
           <br />
           <div>
            http://www.tuicool.com/articles/b63uei
            <br />
            <br />centos 6.5
            <br />
            <div>
             <div>
              http://blog.yourtion.com/ubuntu-install-docker.html
             </div>
            </div>
           </div>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/19/421553.html" title="permalink">2014-12-19 00:57</a> ivaneeo 阅读(2507) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/19/421553.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421553">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421553">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl45_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/17/421501.html">cloudstack xenserver agent</a> 
        </div> 
        <div class="postText"> 
         <pre data-find="_1" style="white-space: normal; color: #222222; line-height: 19px; text-align: justify; background-color: #8a8a8a;">/etc/sysctl.conf</pre>
         <pre data-find="_1" style="white-space: normal; color: #222222; line-height: 19px; text-align: justify; background-color: #8a8a8a;"><br /></pre>
         <pre data-find="_1" style="white-space: normal; color: #222222; line-height: 19px; text-align: justify; background-color: #8a8a8a;"></pre>
         <pre data-find="_1" style="white-space: normal; color: #323e32; background-color: #8a8a8a;">&gt; &gt; net.bridge.bridge-nf-call-iptables = 1 &gt;&nbsp;<wbr /></pre>
         <pre data-find="_1" style="white-space: normal; color: #323e32; background-color: #8a8a8a;">&gt; net.bridge.bridge-nf-call-ip6tables = 0 &gt;&nbsp;<wbr /></pre>
         <pre data-find="_1" style="white-space: normal; color: #323e32; background-color: #8a8a8a;">&gt; net.bridge.bridge-nf-call-arptables = 1</pre>
         <pre data-find="_1" style="white-space: normal; color: #323e32; background-color: #8a8a8a;"><br /></pre>
         <pre data-find="_1" style="white-space: normal; color: #323e32; background-color: #8a8a8a;">xe-switch-network-backend bridge</pre>
         <pre data-find="_1" style="white-space: normal; color: #323e32; background-color: #8a8a8a;"><br /></pre>
         <pre data-find="_1" style="white-space: normal; color: #323e32; background-color: #8a8a8a;">REBOOT</pre> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/17/421501.html" title="permalink">2014-12-17 14:54</a> ivaneeo 阅读(2077) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/17/421501.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421501">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421501">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl46_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/16/421430.html">cloudstack ovs</a> 
        </div> 
        <div class="postText">
          http://www.chenshake.com/install-on-ubuntu-12-04-open-vswitch/
         <br />
         <br />
         <div>
          http://docs.cloudstack.apache.org/projects/cloudstack-installation/en/latest/hypervisor/kvm.html#install-and-configure-the-agent
          <br />
          <br />tip:
          <br />
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">添加网桥</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">使用openvswitch建立网桥，kvm使用，命令如下：</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">建立网桥br</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">#ovs-vsctl add-br br0</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">把eth0(物理机上网的网卡)添加到br0</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">#ovs-vsctl add-port br0 eth0</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">如果不出意外的话现在机器就不能上网了，可以按照以下方法解决</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">删除eth0的配置</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">#ifconfig eth0 0</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">为br0分配ip</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">#dhclient br0</p>
          <p style="margin: 8px 0px 7px; padding: 0px; border: 0px; font-family: Arial, 宋体, sans-serif; vertical-align: baseline; line-height: 22.3999996185303px; background-color: #ffffff;">因为我使用的是dhcp获取ip的，所以执行了此命令，如果你的ip是自己手动配置的，请把eth0的配置写到br0上。</p>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/16/421430.html" title="permalink">2014-12-16 00:01</a> ivaneeo 阅读(181) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/16/421430.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421430">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421430">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl47_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/15/421414.html">cloudstack ubuntu14.04</a> 
        </div> 
        <div class="postText"> 
         <div>
          https://joshuarogers.net/installing-cloudstack-43-ubuntu-1404
          <br />
          <br />iso:
          <br />
          <div>
           http://www.tuicool.com/articles/FnYFF32
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/15/421414.html" title="permalink">2014-12-15 19:00</a> ivaneeo 阅读(245) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/15/421414.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421414">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421414">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl48_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/08/421160.html">bc md5</a> 
        </div> 
        <div class="postText"> 
         <p>&nbsp; MD5Digest dig = new&nbsp;</p> 
         <p> MD5Digest();&nbsp;</p> 
         <p> byte[] bytes = &quot;111111&quot;.getBytes();&nbsp;</p> 
         <p> dig.update(bytes, 0, bytes.length);&nbsp;</p> 
         <p> byte[] md5 = new byte[dig.getDigestSize()];&nbsp;</p> 
         <p> dig.doFinal(md5, 0);</p> 
         <p> </p> 
         <p> System.out.println(new String(Base64.encode(md5)));</p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/08/421160.html" title="permalink">2014-12-08 11:08</a> ivaneeo 阅读(122) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/08/421160.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421160">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421160">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl49_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/06/421111.html">java监控</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.jolokia.org/download.html
          <br />
          <br />
          <div>
           tomcat jmx http://blog.csdn.net/diy8187/article/details/4369137
           <br />
           <br />
           <div>
            统计 &nbsp;http://blog.csdn.net/blog4j/article/details/17122061
            <br />
            <div>
             http://www.myexception.cn/software-architecture-design/410583.html
            </div>
           </div>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/06/421111.html" title="permalink">2014-12-06 00:53</a> ivaneeo 阅读(1938) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/06/421111.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421111">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421111">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl50_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/04/421059.html">zabbix haproxy</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://ma.ttias.be/advanced-monitoring-haproxy-with-zabbix-agent/
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/04/421059.html" title="permalink">2014-12-04 23:17</a> ivaneeo 阅读(1788) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/04/421059.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421059">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421059">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl51_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/04/421056.html">zabbix tomcat jmx</a> 
        </div> 
        <div class="postText"> 
         <div>
          https://www.zabbix.org/wiki/File:Template_JMX_Tomcat-2.2.0.xml
          <br />
          <div>
           http://blog.chinaunix.net/uid-29179844-id-4093754.html
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/04/421056.html" title="permalink">2014-12-04 21:32</a> ivaneeo 阅读(192) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/04/421056.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421056">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421056">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl52_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/12/03/421010.html">zabbix2.0监控到的cpu load值不准确 </a> 
        </div> 
        <div class="postText"> 
         <div>
          http://blog.sina.com.cn/s/blog_62079f6201019itr.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/03/421010.html" title="permalink">2014-12-03 23:25</a> ivaneeo 阅读(1746) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/12/03/421010.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=421010">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=421010">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl53_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/11/24/420534.html">nginx配置支持websocket 2</a> 
        </div> 
        <div class="postText"> 
         <h2><pre literal-block"="" style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; white-space: pre-wrap; padding: 9.5px; margin: 0px 2em 10px; line-height: 1.428571429; color: #333333; word-break: break-all; word-wrap: break-word; border: 1px solid #cccccc; border-radius: 4px; font-weight: normal; background-color: #eeeeee;">location / {     proxy_pass http://127.0.0.1:9999;     proxy_connect_timeout 60;     proxy_set_header Host $host;     proxy_set_header X-Real-IP $remote_addr;     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;     proxy_set_header X-NginX-Proxy true;      # 下面是关键     proxy_http_version 1.1;     proxy_set_header Upgrade $http_upgrade;     proxy_set_header Connection &quot;upgrade&quot;;     # 这是配置webpysessoin丢失的问题     fastcgi_param  SCRIPT_NAME        &quot;&quot;; }</pre>
          <div>
           http://nginx.org/en/docs/http/websocket.html
          </div></h2> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/24/420534.html" title="permalink">2014-11-24 21:19</a> ivaneeo 阅读(1127) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/24/420534.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=420534">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=420534">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl54_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/11/22/420455.html">test lic</a> 
        </div> 
        <div class="postText"> 
         <p>------------------------------------lic-------------------------------------</p> 
         <p>*u3-7QAAAAIAAAABAAAAAgAKcHVibGljY2VydAAAAUjuvYiDAAVYLjUwOQAAAzQwggMwMIIC7qAD</p> 
         <p>AgECAgQnLAd6MAsGByqGSM44BAMFADBqMQswCQYDVQQGEwJDTjEQMA4GA1UECBMHYmVpamluZzEQ</p> 
         <p>MA4GA1UEBxMHYmVpamluZzERMA8GA1UEChMIcHJveHpvbmUxETAPBgNVBAsTCHByb3h6b25lMREw</p> 
         <p>DwYDVQQDEwhwcm94em9uZTAeFw0xNDEwMDgwNzUxMTFaFw0yNDEwMDUwNzUxMTFaMGoxCzAJBgNV</p> 
         <p>BAYTAkNOMRAwDgYDVQQIEwdiZWlqaW5nMRAwDgYDVQQHEwdiZWlqaW5nMREwDwYDVQQKEwhwcm94</p> 
         <p>em9uZTERMA8GA1UECxMIcHJveHpvbmUxETAPBgNVBAMTCHByb3h6b25lMIIBtzCCASwGByqGSM44</p> 
         <p>BAEwggEfAoGBAP1*U4EddRIpUt9KnC7s5Of2EbdSPO9EAMMeP4C2USZpRV1AIlH7WT2NWPq*xfW6</p> 
         <p>MPbLm1Vs14E7gB00b*JmYLdrmVClpJ-f6AR7ECLCT7up1*63xhv4O1fnxqimFQ8E-4P208UewwI1</p> 
         <p>VBNaFpEy9nXzrith1yrv8iIDGZ3RSAHHAhUAl2BQjxUjC8yykrmCouuEC*BYHPUCgYEA9-Gghdab</p> 
         <p>Pd7LvKtcNrhXuXmUr7v6OuqC-VdMCz0HgmdRWVeOutRZT-ZxBxCBgLRJFnEj6EwoFhO3zwkyjMim</p> 
         <p>4TwWeotUfI0o4KOuHiuzpnWRbqN*C*ohNWLx-2J6ASQ7zKTxvqhRkImog9*hWuWfBpKLZl6Ae1Ul</p> 
         <p>ZAFMO*7PSSoDgYQAAoGAR-WVUpxcibqSXpi4VHPXIEoiBCu9Ik8AHItVuevHmPqsOLB5ZXbC2qbN</p> 
         <p>oIVaJyhLntmeCS6M3ZOPWzHdNqcYdA1Rt9nNYQNpHgaMdHJo-w-ueUCDoo7-L2ho6c59P604f7IA</p> 
         <p>qmjfSnSWdB5OZlQebi23d96awCLTS0bQkN1k0w2jITAfMB0GA1UdDgQWBBS4wsh7wxLuDzvl1gxL</p> 
         <p>2oA9AevomTALBgcqhkjOOAQDBQADLwAwLAIUSGuB1IXVBwg0VcHn2iBzAjdMUxQCFCUNoYiFqGE7</p> 
         <p>Qbx9r-jA9BpDOyuDq5iw6uBl83BChP5kQrBpVLJxZbs=</p> 
         <p>----------------------------------------------------------------------------</p> 
         <p>GgYqeio1TiUuLqb1kOvqbpAyOV-CXGt7KCibUH*icgfcehQjhsIHNgisDDDt7AZAeZptrTYf56ky</p> 
         <p>xrzMEkPdoMMoFQGV*9kEXoab6awrAXP-GDcUAwOK7KS*q8-3O-UY7yjOaSMjR2QHszAgkLrFUuxt</p> 
         <p>onkCQa6EAriSiWdYu*7FGbTlQNAmiUTXilsnnWSCXyw7Hl6xP08kNbovUY4e31D-boaCdW-hQPQw</p> 
         <p>0XbDZJdT5ndCo4Mh-R4vu6gSmt*t3QJhp7pyeQeOR6VxpIJRFMUCwz2Ddrn0D160nQJ2fx2vchE-</p> 
         <p>Cz*vDkgQbCkFb7m9aBxKWztEZnATDwyYjyQmOXlcwO1ef4rdpxrBqpib9H5K1ddcQy6xkQdQXdvP</p> 
         <p>b-Jvq1Dmh*IKrayoqWQY09fdgEKAjmadF7xYKnEVL5nDwI9ZhtIlOrYktQ6q8NqCLd4wKolMTx8q</p> 
         <p>uOGWe-259-SGrSUNOp*-kgJXkWnqnRVs3do02XSWAsysixFJVSHNItePltdmBGimexVa1G8rV2dz</p> 
         <p>rSmPyCDlzF12SZKKYePDQOmaYM4EYiUL9Et271D9tv5SsvEzMZhwFiolb33peKztzz2tZ4lOZbXf</p> 
         <p>c-9sEPqhiOLYkDGqzxfnNyTjtTI4vz9WYqNjOe4SwOxsnHPkltb2evP4hyXru1CZNsm3w9dt1cHu</p> 
         <p>i6QMYgYz1ivHKoyZ0iAh8N*NtN7o0OAxptyaDv9v-SsqXljN4af0BdJOzwMzSS65B8f47poUH3X-</p> 
         <p>sKJIp797A5PTviXrCIwP126YWqPgUUHQ5LrsrsxKoQf6nTn7d*QAEQY5FIEoBtbmpq90KBVFVuZg</p> 
         <p>OKSawSAuJh7Vv2EK3QWS0lk31eRSXymI85ERboNNGbNmMwek*k02KCtlLP4kO2CNs5WF74Dwo732</p> 
         <p>wVAcdz3VXKt1bmk-</p> 
         <p>----------------------------------------------------------------------------</p> 
         <p>Z29kMzU3MXByb3h6b25lIQ==</p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/22/420455.html" title="permalink">2014-11-22 23:21</a> ivaneeo 阅读(972) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/22/420455.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=420455">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=420455">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl55_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/11/22/420453.html">mule anypoint commons url</a> 
        </div> 
        <div class="postText"> 
         <div>
          Anypoint Connectors Update Site - http://repository.mulesoft.org/connectors/releases/3.5.0
          <br />
          <div>
           Anypoint Addons Update Site - http://studio.mulesoft.org/r3/addons/beta
           <br />
           <div>
            Anypoint Studio Update Site - http://studio.mulesoft.org/r3/updates
            <br />APIkit Update Site - http://studio.mulesoft.org/r3/apikit
            <br />
            <div>
             mule - http://studio.mulesoft.org/3.5/plugin
             <br />
             <div>
              Mule ESB Runtimes for Anypoint Studio - http://studio.mulesoft.org/r3/studio-runtimes/
              <br />
              <div>
               mulesoft - http://www.mulesoft.org/documentation/display/current/Studio+Update+Sites
              </div>
             </div>
            </div>
           </div>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/22/420453.html" title="permalink">2014-11-22 20:47</a> ivaneeo 阅读(818) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/22/420453.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=420453">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=420453">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl56_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/11/22/420438.html">ApacheDS配置用户以及用户组实现SSO-(转)</a> 
        </div> 
        <div class="postText"> 
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">首先把我看到的有用的资料留下：</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">1、官方文档-基本用户手册：http://directory.apache.org/apacheds/basic-user-guide.html 主要介绍了安装以及基本操作、登录等。</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">2、官方文档-高级用户手册：http://directory.apache.org/apacheds/advanced-user-guide.html 介绍了代码编译、系统结构、服务配置以及服务权限管理，这里吐槽一下，真的很难懂，并且各种TODO；</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">3、看起来像官方的文档：http://joacim.breiler.com/apacheds/book.html 介绍得很详尽，例子也很丰富。</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">4、访问控制实例&nbsp;<a target="_blank" href="http://apachecon.com/2006/US/presentations/FR20/FR20_ApacheDS_Access_Control_Administration_The_X.500_Way.pdf" style="color: #6a3906; text-decoration: none;">FR20_ApacheDS_Access_Control_Administration_The_X.500_Way.pdf&nbsp;&nbsp;</a></p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">=============================================================================================================</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">常用的名词解析：</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">DIT &nbsp;Directory Information Tree<br />AA administrative areas<br />AP administrative points<br /><br />AAA autonomous administrative area 有自治权的管理区域，所有的实体均统一管理<br />SAA specific administrative area 特定管理区域<br />IAA &nbsp;inner administrative area &nbsp;内部管理区域<br /><br />SAP specific administrative point<br />ACI Access Control Information<br /><br />Usually an entry is selected as the administrative point and marked with an operational attribute. The attributeType of the operational attribute is 'administrativeRole'.&nbsp;<br />通过添加一个可选属性来使一个实体成为管理点<br /><br />ACSA access control specific area<br /></p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">=================================================================================================================</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">实战演练</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">需求：</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">1、LDAP超级管理员，管理LDAP上的所有数据；</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">2、匿名用户可以查看用户信息；</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">3、用户分为开发、测试和运维三组；</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">4、通过用户组授权</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">操作指南：</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">1、安装ApacheDS服务端；</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">&nbsp; 下载地址：<a target="_blank" href="http://mirror.bit.edu.cn/apache//directory/apacheds/dist/2.0.0-M15/apacheds-2.0.0-M15-64bit.bin" style="color: #6a3906; text-decoration: none;">apacheds-2.0.0-M15-64bit.bin</a>&nbsp;下载到目录/home/apacheds/</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <div bg_plain"="" style="width: 693px; color: #362e2b; line-height: 26px;">
          <div>
           <div>
            <strong>[plain]</strong>&nbsp;
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="view plain" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-position: 0% 0%; background-repeat: no-repeat;">view plain</a>
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="copy" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-position: 0% 0%; background-repeat: no-repeat;">copy</a>
            <a href="https://code.csdn.net/snippets/206427" target="_blank" title="在CODE上查看代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border: none; max-width: 100%; position: relative; top: 1px; left: 2px;" /></a>
            <a href="https://code.csdn.net/snippets/206427/fork" target="_blank" title="派生到我的代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border: none; max-width: 100%; position: relative; top: 2px; left: 2px;" /></a>
            <div style="position: absolute; left: 445px; top: 1707px; width: 18px; height: 18px; z-index: 99;"></div>
           </div>
          </div>
          <ol start="1">
           <li style="line-height: 18px;">chmod&nbsp;+x&nbsp;*.bin&nbsp;&nbsp;</li>
          </ol>
         </div>
         <div bg_plain"="" style="width: 693px; color: #362e2b; line-height: 26px;">
          <div>
           <div>
            <strong>[plain]</strong>&nbsp;
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="view plain" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-position: 0% 0%; background-repeat: no-repeat;">view plain</a>
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="copy" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-position: 0% 0%; background-repeat: no-repeat;">copy</a>
            <a href="https://code.csdn.net/snippets/206427" target="_blank" title="在CODE上查看代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border: none; max-width: 100%; position: relative; top: 1px; left: 2px;" /></a>
            <a href="https://code.csdn.net/snippets/206427/fork" target="_blank" title="派生到我的代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border: none; max-width: 100%; position: relative; top: 2px; left: 2px;" /></a>
            <div style="position: absolute; left: 445px; top: 1776px; width: 18px; height: 18px; z-index: 99;"></div>
           </div>
          </div>
          <ol start="1">
           <li style="line-height: 18px;">/etc/init.d/apacheds-2.0.0-M15-default&nbsp;start&nbsp;&nbsp;</li>
          </ol>
         </div>
         <span style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">这样就完成了ApacheDS的安装与启动</span>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">2、安装Apache Directory Studio</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">本次使用Eclipse插件，详见 http://directory.apache.org/studio/installation-in-eclipse.html，也支持Eclipse market安装。</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">3、连接与配置</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">切换到Eclipse的LDAP视图，新建连接</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">hostname:199.155.122.90 port：10389 encryption method: nocryption （不同加密算法端口注意）</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">authentication method: simple user:uid=admin,ou=system passwd:secret （默认的最高权限用户）</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">OpenConfiguration启用Access Control，禁用匿名登录</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">重启apacheds服务生效</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">4、分区设置</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">系统默认example分区，我们删除之，并新建，本次创建dc=xxx.com</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"><img src="http://blog.csdn.net/lansine2005/article/details/19978411" alt="" style="border: none; max-width: 100%;" /><br /></p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">5、新建ou=users，新建ou=groups。</p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <div bg_plain"="" style="width: 693px; color: #362e2b; line-height: 26px;">
          <div>
           <div>
            <strong>[plain]</strong>&nbsp;
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="view plain" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-position: 0% 0%; background-repeat: no-repeat;">view plain</a>
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="copy" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-position: 0% 0%; background-repeat: no-repeat;">copy</a>
            <a href="https://code.csdn.net/snippets/206427" target="_blank" title="在CODE上查看代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border: none; max-width: 100%; position: relative; top: 1px; left: 2px;" /></a>
            <a href="https://code.csdn.net/snippets/206427/fork" target="_blank" title="派生到我的代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border: none; max-width: 100%; position: relative; top: 2px; left: 2px;" /></a>
            <div style="position: absolute; left: 445px; top: 2369px; width: 18px; height: 18px; z-index: 99;"></div>
           </div>
          </div>
          <ol start="1">
           <li style="line-height: 18px;">dn:&nbsp;ou=groups,dc=taotaosou.com&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;organizationalUnit&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;top&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">ou:&nbsp;groups&nbsp;&nbsp;</li>
          </ol>
         </div>
         <br style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;" />
         <div bg_plain"="" style="width: 693px; color: #362e2b; line-height: 26px;">
          <div>
           <div>
            <strong>[plain]</strong>&nbsp;
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="view plain" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-position: 0% 0%; background-repeat: no-repeat;">view plain</a>
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="copy" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-position: 0% 0%; background-repeat: no-repeat;">copy</a>
            <a href="https://code.csdn.net/snippets/206427" target="_blank" title="在CODE上查看代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border: none; max-width: 100%; position: relative; top: 1px; left: 2px;" /></a>
            <a href="https://code.csdn.net/snippets/206427/fork" target="_blank" title="派生到我的代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border: none; max-width: 100%; position: relative; top: 2px; left: 2px;" /></a>
            <div style="position: absolute; left: 445px; top: 2536px; width: 18px; height: 18px; z-index: 99;"></div>
           </div>
          </div>
          <ol start="1">
           <li style="line-height: 18px;">dn:&nbsp;ou=users,dc=taotaosou.com&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;organizationalUnit&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;top&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">ou:&nbsp;users&nbsp;&nbsp;</li>
          </ol>
         </div>
         <br style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;" />
         <span style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">6、根目录启用权限控制，添加administrativeRole属性是关键</span>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <div bg_plain"="" style="width: 693px; color: #362e2b; line-height: 26px;">
          <div>
           <div>
            <strong>[plain]</strong>&nbsp;
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="view plain" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-position: 0% 0%; background-repeat: no-repeat;">view plain</a>
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="copy" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-position: 0% 0%; background-repeat: no-repeat;">copy</a>
            <a href="https://code.csdn.net/snippets/206427" target="_blank" title="在CODE上查看代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border: none; max-width: 100%; position: relative; top: 1px; left: 2px;" /></a>
            <a href="https://code.csdn.net/snippets/206427/fork" target="_blank" title="派生到我的代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border: none; max-width: 100%; position: relative; top: 2px; left: 2px;" /></a>
            <div style="position: absolute; left: 445px; top: 2729px; width: 18px; height: 18px; z-index: 99;"></div>
           </div>
          </div>
          <ol start="1">
           <li style="line-height: 18px;">dn:&nbsp;dc=taotaosou.com&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectclass:&nbsp;domain&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectclass:&nbsp;top&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">dc:&nbsp;taotaosou.com&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">administrativeRole:&nbsp;accessControlSpecificArea&nbsp;&nbsp;</li>
          </ol>
         </div>
         <br style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;" />
         <span style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">7、添加匿名读权限</span>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <div bg_plain"="" style="width: 693px; color: #362e2b; line-height: 26px;">
          <div>
           <div>
            <strong>[plain]</strong>&nbsp;
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="view plain" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-position: 0% 0%; background-repeat: no-repeat;">view plain</a>
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="copy" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-position: 0% 0%; background-repeat: no-repeat;">copy</a>
            <a href="https://code.csdn.net/snippets/206427" target="_blank" title="在CODE上查看代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border: none; max-width: 100%; position: relative; top: 1px; left: 2px;" /></a>
            <a href="https://code.csdn.net/snippets/206427/fork" target="_blank" title="派生到我的代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border: none; max-width: 100%; position: relative; top: 2px; left: 2px;" /></a>
            <div style="position: absolute; left: 445px; top: 2940px; width: 18px; height: 18px; z-index: 99;"></div>
           </div>
          </div>
          <ol start="1">
           <li style="line-height: 18px;">dn:&nbsp;cn=enableAllUsersRead,dc=taotaosou.com&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;subentry&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;accessControlSubentry&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;top&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">cn:&nbsp;enableAllUsersRead&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">prescriptiveACI:&nbsp;{&nbsp;identificationTag&nbsp;&quot;enableAllUsersRead&quot;,&nbsp;precedence&nbsp;0,&nbsp;aut&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;henticationLevel&nbsp;none,&nbsp;itemOrUserFirst&nbsp;userFirst:&nbsp;{&nbsp;userClasses&nbsp;{&nbsp;allUsers&nbsp;&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;},&nbsp;userPermissions&nbsp;{&nbsp;{&nbsp;protectedItems&nbsp;{&nbsp;entry,&nbsp;allUserAttributeTypesAndValu&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;es&nbsp;},&nbsp;grantsAndDenials&nbsp;{&nbsp;grantCompare,&nbsp;grantFilterMatch,&nbsp;grantRead,&nbsp;grantRe&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;turnDN,&nbsp;grantBrowse&nbsp;}&nbsp;}&nbsp;}&nbsp;}&nbsp;}&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">subtreeSpecification:&nbsp;{&nbsp;}&nbsp;&nbsp;</li>
          </ol>
         </div>
         <br style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;" />
         <span style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">8、添加用户自己修改资料权限</span>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <div bg_plain"="" style="width: 693px; color: #362e2b; line-height: 26px;">
          <div>
           <div>
            <strong>[plain]</strong>&nbsp;
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="view plain" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-position: 0% 0%; background-repeat: no-repeat;">view plain</a>
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="copy" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-position: 0% 0%; background-repeat: no-repeat;">copy</a>
            <a href="https://code.csdn.net/snippets/206427" target="_blank" title="在CODE上查看代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border: none; max-width: 100%; position: relative; top: 1px; left: 2px;" /></a>
            <a href="https://code.csdn.net/snippets/206427/fork" target="_blank" title="派生到我的代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border: none; max-width: 100%; position: relative; top: 2px; left: 2px;" /></a>
            <div style="position: absolute; left: 445px; top: 3259px; width: 18px; height: 18px; z-index: 99;"></div>
           </div>
          </div>
          <ol start="1">
           <li style="line-height: 18px;">dn:&nbsp;cn=allowSelfAccessAndModification,dc=taotaosou.com&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;subentry&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;accessControlSubentry&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;top&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">cn:&nbsp;allowSelfAccessAndModification&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">prescriptiveACI:&nbsp;{&nbsp;identificationTag&nbsp;&quot;allowSelfAccessAndModification&quot;,&nbsp;prece&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;dence&nbsp;10,&nbsp;authenticationLevel&nbsp;simple,&nbsp;itemOrUserFirst&nbsp;userFirst:&nbsp;{&nbsp;userClas&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;ses&nbsp;{&nbsp;thisEntry&nbsp;},&nbsp;userPermissions&nbsp;{&nbsp;{&nbsp;protectedItems&nbsp;{&nbsp;entry,&nbsp;allUserAttri&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;buteTypesAndValues&nbsp;},&nbsp;grantsAndDenials&nbsp;{&nbsp;grantRemove,&nbsp;grantExport,&nbsp;grantCom&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;pare,&nbsp;grantImport,&nbsp;grantRead,&nbsp;grantFilterMatch,&nbsp;grantModify,&nbsp;grantInvoke,&nbsp;g&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;rantDiscloseOnError,&nbsp;grantRename,&nbsp;grantReturnDN,&nbsp;grantBrowse,&nbsp;grantAdd&nbsp;}&nbsp;}&nbsp;&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;}&nbsp;}&nbsp;}&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">subtreeSpecification:&nbsp;{&nbsp;}&nbsp;&nbsp;</li>
          </ol>
         </div>
         <br style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;" />
         <span style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;">9、添加管理员权限</span>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <p style="color: #362e2b; font-family: Arial; line-height: 26px; background-color: #ffffff;"></p>
         <div bg_plain"="" style="width: 693px; color: #362e2b; line-height: 26px;">
          <div>
           <div>
            <strong>[plain]</strong>&nbsp;
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="view plain" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-position: 0% 0%; background-repeat: no-repeat;">view plain</a>
            <a href="http://blog.csdn.net/lansine2005/article/details/19978411#" title="copy" style="padding: 1px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-position: 0% 0%; background-repeat: no-repeat;">copy</a>
            <a href="https://code.csdn.net/snippets/206427" target="_blank" title="在CODE上查看代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/CODE_ico.png" width="12" height="12" alt="在CODE上查看代码片" style="border: none; max-width: 100%; position: relative; top: 1px; left: 2px;" /></a>
            <a href="https://code.csdn.net/snippets/206427/fork" target="_blank" title="派生到我的代码片" style="padding: 1px; display: inline-block; width: 16px; height: 16px; background-position: 0% 0%; background-repeat: no-repeat;"><img src="https://code.csdn.net/assets/ico_fork.svg" width="12" height="12" alt="派生到我的代码片" style="border: none; max-width: 100%; position: relative; top: 2px; left: 2px;" /></a>
            <div style="position: absolute; left: 445px; top: 3614px; width: 18px; height: 18px; z-index: 99;"></div>
           </div>
          </div>
          <ol start="1">
           <li style="line-height: 18px;">dn:&nbsp;cn=enableAdminSuper,dc=taotaosou.com&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;subentry&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;accessControlSubentry&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">objectClass:&nbsp;top&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">cn:&nbsp;enableAdminSuper&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">prescriptiveACI:&nbsp;{&nbsp;identificationTag&nbsp;&quot;enableAdminSuper&quot;,&nbsp;precedence&nbsp;0,&nbsp;authe&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;nticationLevel&nbsp;strong,&nbsp;itemOrUserFirst&nbsp;userFirst:&nbsp;{&nbsp;userClasses&nbsp;{&nbsp;userGroup&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;&nbsp;{&nbsp;&quot;cn=administrator,ou=gourp,dc=taotaosou.com&quot;&nbsp;}&nbsp;},&nbsp;userPermissions&nbsp;{&nbsp;{&nbsp;pr&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;otectedItems&nbsp;{&nbsp;entry,&nbsp;allUserAttributeTypesAndValues&nbsp;},&nbsp;grantsAndDenials&nbsp;{&nbsp;&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;grantRemove,&nbsp;grantExport,&nbsp;grantCompare,&nbsp;grantImport,&nbsp;grantRead,&nbsp;grantFilter&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;Match,&nbsp;grantModify,&nbsp;grantInvoke,&nbsp;grantDiscloseOnError,&nbsp;grantRename,&nbsp;grantRe&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">&nbsp;turnDN,&nbsp;grantBrowse,&nbsp;grantAdd&nbsp;}&nbsp;}&nbsp;}&nbsp;}&nbsp;}&nbsp;&nbsp;</li>
           <li style="line-height: 18px;">subtreeSpecification:&nbsp;{&nbsp;} &nbsp;<br /><br /><br />
            <div>
             http://blog.csdn.net/lansine2005/article/details/19978411
            </div></li>
          </ol>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/22/420438.html" title="permalink">2014-11-22 00:00</a> ivaneeo 阅读(479) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/22/420438.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=420438">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=420438">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl57_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/11/19/420317.html">基于LDAP的企业访问控制系统设计与实现 C 计算机与信息技术</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.ahcit.com/?p=1703
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/19/420317.html" title="permalink">2014-11-19 20:47</a> ivaneeo 阅读(568) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/19/420317.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=420317">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=420317">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl58_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/11/18/420257.html">redmine敏捷开发插件</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://redminecrm.com/pages/vmware_image
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/18/420257.html" title="permalink">2014-11-18 18:23</a> ivaneeo 阅读(878) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/18/420257.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=420257">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=420257">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl59_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/11/17/420162.html">commons学习概览</a> 
        </div> 
        <div class="postText"> 
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">可重用性是Jakarta Commons项目的灵魂所在。这些包在设计阶段就已经考虑了可重用性问题。其中一些包，例如Commons里面用来记录日志的Logging包，最初是为其他项目设计的，例如Jakarta Struts项目，当人们发现这些包对于其他项目也非常有用，能够极大地帮助其他项目的开发，他们决定为这些包构造一个&quot;公共&quot;的存放位置，这就是Jakarta Commons项目。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">　　为了真正提高可重用性，每一个包都必须不依赖于其他大型的框架或项目。因此，Commons项目的包基本上都是独立的，不仅是相对于其他项目的独立，而且相对于Commons内部的大部分其他包独立。虽然存在一些例外的情况，例如Betwixt包要用到XML API，但绝大部分只使用最基本的API，其主要目的就是要能够通过简单的接口方便地调用。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">　　不过由于崇尚简洁，许多包的文档变得过于简陋，缺乏维护和支持，甚至有一部分还有错误的链接，文档也少得可怜。大部分的包需要我们自己去找出其用法，甚至有时还需要我们自己去分析其适用场合。本文将逐一介绍这些包，希望能够帮助你迅速掌握这一积累了许多人心血的免费代码库。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">　　说明：Jakarta Commons和Apache Commons是不同的，后者是Apache Software Foundation的一个顶层项目，前者则是Jakarta项目的一个子项目，同是也是本文要讨论的主角。本文后面凡是提到Commons的地方都是指Jakarta的Commons。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">　　为了便于说明，本文把Commons项目十八个成品级的组件（排除了EL、Latka和Jexl）分成5类，如下表所示&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <img style="border: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" alt="" />&nbsp;
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">commons分为3部分Commons Proper、Commons Sandbox和Commons Dormant&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Commons Proper：提供了设计良好可重用的java组件，并都经过了广泛、严格的测试。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Commons Sandbox：处于实验、测试阶段的组件。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Commons Dormant：处于停滞状态，从Sandbox退出的，不活跃的组件，谨慎使用。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Commons Proper组件：&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Codec――包含一些通用的编码解码算法。包括一些语音编码器， Hex, Base64, 以及URL encoder。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">BeanUtils――提供对 Java 反射和自省API的包装，处理javabean的工具。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Betwixt――将JavaBeans与XML相互转换。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Digester――基于规则的XML文档解析,主要用于XML到Java对象的映射.&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Email――处理e-mail&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">FileUpload――web应用中的文件上传组件&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">IO――帮助进行IO功能开发&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">JXPath――使用XPath语法操作javabean的工具。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Lang――提供对java.lang包的扩展&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Chain――对Chain of Responsibility（责任链）设计模式的实现。使多个对象都有机会处理请求， 从而避免请求的发送者和接收者之间的耦合关系。将这些对象连成一条链，并沿着这条链传递请求，直到有一个对象处理它为止。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">CLI――处理命令行的命令的解析。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Attributes―― 支持源代码级的元数据。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Collections――扩展和增加标准的 Java Collection框架。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Configuration――操作各种格式的配置文件。Properties文件 /XML文件 /JNDI /JDBC 数据源 /System properties /Applet parameters / Servlet parameters&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Daemon――创建类似unix守护线程的java代码，可以安全地执行一些后台操作，线程不被某个应用程序控制，而是由操作系统控制 类似windows的service，可以设置一个服务依赖于另一个服务，一个服务关闭前必须先执行另一个服务。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">DBCP――一个数据库连接池&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">DbUtils――一个JDBC的工具类，比如可以将ResultSets生成javabean。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Discovery――提供工具来定位资源 (包括类) ，通过使用各种模式来映射服务/引用名称和资源名称。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">EL――JSP 2.0引入的表达式&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">HttpClient――使用HTTP协议的客户端开发框架&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Jelly――Jelly能够把XML转换成可执行代码,所以Jelly是一个基于XML与Java的脚本和处理引擎。 Jelly借鉴了JSP定指标签，Velocity, Cocoon和Xdoclet中的脚本引擎的许多优点。Jelly可以用在命令行，Ant或者Servlet之中。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Jexl――Jexl是一个表达式语言，通过借鉴来自于Velocity的经验扩展了JSTL定义的表达式语言。&nbsp;&nbsp;&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Launcher――跨平台的java程序的启动&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Logging――提供的是一个日志(Log)接口(interface)，同时兼顾轻量级和不依赖于具体的日志实现工具。 它提供给中间件/日志工具开发者一个简单的日志操作抽象，允许程序开发人员使用不同的具体日志实现工具。用户被假定已熟悉某种日志实现工具的更高级别的细节。JCL提供的接口，对其它一些日志工具，包括Log4J, Avalon LogKit, and JDK 1.4等，进行了简单的包装，此接口更接近于Log4J和LogKit的实现.&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Math――Math 是一个轻量的，自包含的数学和统计组件，解决了许多非常通用但没有及时出现在Java标准语言中的实践问题.&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Modeler―― 支持兼容JMX规范的MBeans开发。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Net――集合了网络工具和协议工具的实现&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Pool――Commons-Pool 提供了通用对象池接口，一个用于创建模块化对象池的工具包，以及通常的对象池实现。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Primitives――对java原始类型的支持。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">SCXML――处理SCXML&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Transaction――事务处理，实现了多层次锁、事务集合、事务文件的访问。&nbsp;&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Validator――提供了一个简单的，可扩展的框架来在一个XML文件中定义校验器 (校验方法)和校验规则。支持校验规则的和错误消息的国际化。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">VFS――访问各种文件系统，可以是本地文件、HTTP服务器上的文件、zip中的文件。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Commons Sandbox组件：&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Compress――处理压缩文件如tar, zip 和 bzip2 格式。&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">CSV――处理CSV文件&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Exec――安全地处理外部进程&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Finder――实现类似UNIX find命令的功能&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">I18n――处理软件的I18n功能&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Id――生成id号功能&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Javaflow――捕捉程序运行状态&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">JCI――java编译接口&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">OpenPGP――处理加密方法OpenPGP.&nbsp;&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Pipeline――处理类似工作队列的管道工具&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">Proxy――生成动态代理&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－org.apache.commons.beanutils.PropertyUtils;&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">copyProperties(a,b);//把相同类型b的属性赋值给a&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">在org.apache.commons包中提供了的一系列能简化一些编程过程中常见问题的共通函数和类，使程序员能把主要精力集中在&nbsp;</span>
         <br style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;" />
         <span style="font-family: Helvetica, Tahoma, Arial, sans-serif; line-height: 25.2000007629395px; background-color: #ffffff;">构架，业务实现和优化而不是具体实现及验证上，一言以蔽之，它能使我们避免重复的发明车轮。&nbsp;</span> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/17/420162.html" title="permalink">2014-11-17 00:22</a> ivaneeo 阅读(140) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/17/420162.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=420162">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=420162">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl60_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/11/15/420110.html">ubuntu 离线安装包</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.2cto.com/os/201309/243840.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/15/420110.html" title="permalink">2014-11-15 01:07</a> ivaneeo 阅读(506) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/15/420110.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=420110">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=420110">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl61_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/11/14/420106.html">Commons Chain实现简单的workflow</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.cnblogs.com/xiaoerlang/p/3345236.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/14/420106.html" title="permalink">2014-11-14 21:09</a> ivaneeo 阅读(98) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/14/420106.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=420106">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=420106">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl62_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/11/13/420035.html">cas tomcat</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://steven-wiki.readthedocs.org/en/latest/security/cas-tomcat/
          <br />
          <div>
           http://wenku.baidu.com/view/13a57761783e0912a2162a94.html
          </div>restful:
          <br />
          <div>
           http://jasig.github.io/cas/4.0.0/protocol/REST-Protocol.html
           <br />
           <div>
            http://jasig.275507.n4.nabble.com/Setting-up-the-RESTlet-servlet-on-CAS-3-3-5-td2068602.html
            <br />
            <br />
           </div>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/13/420035.html" title="permalink">2014-11-13 17:45</a> ivaneeo 阅读(156) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/11/13/420035.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=420035">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=420035">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl63_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/10/29/419159.html">SalesForce mule</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://blog.e-works.net.cn/626381/articles/526568.html
          <br />
          <br />
          <div>
           http://www.oecp.cn/hi/wlo_o/blog/2160
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/10/29/419159.html" title="permalink">2014-10-29 13:07</a> ivaneeo 阅读(97) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/10/29/419159.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=419159">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=419159">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl64_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/10/17/418818.html">分离pcap包</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://packetlife.net/blog/2011/apr/11/extracting-packets-large-captures/
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/10/17/418818.html" title="permalink">2014-10-17 12:24</a> ivaneeo 阅读(326) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/10/17/418818.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=418818">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=418818">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl65_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/10/16/418762.html">muleclient ampq</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://stackoverflow.com/questions/18833931/how-to-use-the-muleclient-request-for-async-amqp-rabbitmq-implementation-from-ja?rq=1
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/10/16/418762.html" title="permalink">2014-10-16 00:42</a> ivaneeo 阅读(381) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/10/16/418762.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=418762">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=418762">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl66_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/09/30/418403.html">Using Spring Beans as Flow Components(mule esb)</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.mulesoft.org/documentation/display/current/Using+Spring+Beans+as+Flow+Components
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/09/30/418403.html" title="permalink">2014-09-30 02:52</a> ivaneeo 阅读(121) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/09/30/418403.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=418403">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=418403">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl67_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/09/26/418311.html">java打印class根源的jar包</a> 
        </div> 
        <div class="postText"> 
         <p>System.out.println(&quot;debug:&quot;+Base64.class.getProtectionDomain().getCodeSource().getLocation());</p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/09/26/418311.html" title="permalink">2014-09-26 16:38</a> ivaneeo 阅读(120) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/09/26/418311.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=418311">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=418311">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl68_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/09/24/418239.html">Linux下jvm时区设置-JAVA时区问题</a> 
        </div> 
        <div class="postText"> 
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 3669px; height: 193px; line-height: 193px; top: 8754px; left: 1448px; z-index: 50; background-color: #ffffff;">设置默认时区。当然你可以这样检查一下：</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: simsun; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 96px; height: 193px; line-height: 193px; top: 8754px; left: 5118px; z-index: 51; background-color: #ffffff;">&nbsp;</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940010001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 579px; height: 193px; line-height: 193px; top: 9005px; left: 1448px; z-index: 52; background-color: #ffffff;">//---&nbsp;</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940010001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 4344px; height: 193px; line-height: 193px; top: 9256px; left: 1448px; z-index: 53; background-color: #ffffff;">System.out.println(TimeZone.getDefault());&nbsp;//</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 1544px; height: 193px; line-height: 193px; top: 9256px; left: 5794px; z-index: 54; background-color: #ffffff;">输出当前默认时区</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: simsun; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 96px; height: 193px; line-height: 193px; top: 9256px; left: 7339px; z-index: 55; background-color: #ffffff;">&nbsp;</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940010001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 5310px; height: 193px; line-height: 193px; top: 9507px; left: 1448px; z-index: 56; background-color: #ffffff;">final&nbsp;TimeZone&nbsp;zone&nbsp;=&nbsp;TimeZone.getTimeZone(&quot;GMT+8&quot;);&nbsp;//</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 1158px; height: 193px; line-height: 193px; top: 9507px; left: 6760px; z-index: 57; background-color: #ffffff;">获取中国时区</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: simsun; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 96px; height: 193px; line-height: 193px; top: 9507px; left: 7919px; z-index: 58; background-color: #ffffff;">&nbsp;</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940010001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 2800px; height: 193px; line-height: 193px; top: 9758px; left: 1448px; z-index: 59; background-color: #ffffff;">TimeZone.setDefault(zone);&nbsp;//</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 772px; height: 193px; line-height: 193px; top: 9758px; left: 4249px; z-index: 60; background-color: #ffffff;">设置时区</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: simsun; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 96px; height: 193px; line-height: 193px; top: 9758px; left: 5021px; z-index: 61; background-color: #ffffff;">&nbsp;</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940010001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 4344px; height: 193px; line-height: 193px; top: 10010px; left: 1448px; z-index: 62; background-color: #ffffff;">System.out.println(TimeZone.getDefault());&nbsp;//</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 772px; height: 193px; line-height: 193px; top: 10010px; left: 5794px; z-index: 63; background-color: #ffffff;">输出验证</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: simsun; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 96px; height: 193px; line-height: 193px; top: 10010px; left: 6567px; z-index: 64; background-color: #ffffff;">&nbsp;</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940010001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 579px; height: 193px; line-height: 193px; top: 10261px; left: 1448px; z-index: 65; background-color: #ffffff;">//---&nbsp;</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: simsun; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 96px; height: 193px; line-height: 193px; top: 10512px; left: 1448px; z-index: 66; background-color: #ffffff;">&nbsp;</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 2896px; height: 193px; line-height: 193px; top: 10763px; left: 1448px; z-index: 67; background-color: #ffffff;">除了上面的解决方法外，还可以：</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: simsun; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 96px; height: 193px; line-height: 193px; top: 10763px; left: 4345px; z-index: 68; background-color: #ffffff;">&nbsp;</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 193px; height: 193px; line-height: 193px; top: 11014px; left: 1448px; z-index: 69; background-color: #ffffff;">在</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940010001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 579px; height: 193px; line-height: 193px; top: 11014px; left: 1689px; z-index: 70; background-color: #ffffff;">TOMCAT</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 193px; height: 193px; line-height: 193px; top: 11014px; left: 2317px; z-index: 71; background-color: #ffffff;">的</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940010001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 386px; height: 193px; line-height: 193px; top: 11014px; left: 2558px; z-index: 72; background-color: #ffffff;">JAVA</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 1158px; height: 193px; line-height: 193px; top: 11014px; left: 2993px; z-index: 73; background-color: #ffffff;">运行参数添加</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940010001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 2993px; height: 193px; line-height: 193px; top: 11014px; left: 4152px; z-index: 74; background-color: #ffffff;">&nbsp;-Duser.timezone=Asia/Shanghai&nbsp;</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 5213px; height: 193px; line-height: 193px; top: 11265px; left: 1448px; z-index: 75; background-color: #ffffff;">或者，如果有启动的定时器或首次执行的代码，可以使用语句</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: simsun; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 96px; height: 193px; line-height: 193px; top: 11265px; left: 6663px; z-index: 76; background-color: #ffffff;">&nbsp;</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940010001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 5118px; height: 193px; line-height: 193px; top: 11516px; left: 1448px; z-index: 77; background-color: #ffffff;">System.setProperty(&quot;user.timezone&quot;,&quot;Asia/Shanghai&quot;);&nbsp;</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 579px; height: 193px; line-height: 193px; top: 11767px; left: 1448px; z-index: 78; background-color: #ffffff;">来设置</p>
         <p reader-word-s1-1"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: simsun; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 96px; height: 193px; line-height: 193px; top: 11767px; left: 2027px; z-index: 79; background-color: #ffffff;">&nbsp;</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 1931px; height: 193px; line-height: 193px; top: 12018px; left: 1448px; z-index: 80; background-color: #ffffff;">但是为解决时区问题，</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 1737px; height: 193px; line-height: 193px; top: 12018px; left: 3292px; z-index: 81; background-color: #ffffff;">这样编码实在太烦，</p>
         <p reader-word-s1-2"="" style="margin: 0px; padding: 0px; font-size: 193px; font-family: 宋体, '705c14fbf705cc17552709940020001', 宋体; position: absolute; white-space: nowrap; -webkit-font-smoothing: antialiased; text-shadow: rgba(0, 0, 0, 0.00392157) 1px 1px 1px; width: 3282px; height: 193px; line-height: 193px; top: 12018px; left: 4943px; z-index: 82; background-color: #ffffff;">所以你要知道如何从根本上解决问题：</p>
         <div>
          <p>tomcat的catalina.sh:<br />JAVA_OPTS=&quot;$JAVA_OPTS -Duser.timezone=Asia/Shanghai&quot;</p>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/09/24/418239.html" title="permalink">2014-09-24 17:16</a> ivaneeo 阅读(736) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/09/24/418239.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=418239">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=418239">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl69_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/08/17/417035.html">Configure HAProxy to Load Balance Sites With SSL</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://virtuallyhyper.com/2013/05/configure-haproxy-to-load-balance-sites-with-ssl/
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/08/17/417035.html" title="permalink">2014-08-17 01:52</a> ivaneeo 阅读(128) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/08/17/417035.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=417035">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=417035">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl70_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/07/15/415858.html">调整VMware网络设置解决虚拟机数据包丢失问题</a> 
        </div> 
        <div class="postText"> 
         <div>
          正常的网络连接中很少会出现多个包丢失的现象，每成功接收或转发100,000个数据包最多只会有几个包丢失(如图1)。在Linux虚拟机中，通过ifconfig命令可以很轻松地监控到这种状态。 
          <p><img src="http://www.thebigdata.cn/upload/2013-05/13052909373432.jpg" alt="" align="middle" /></p> 
          <p>　　图1. 通常以太网卡是不会丢包的</p> 
          <p>　　当虚拟机的网络在突发大量访问的情况下，可能会发生多个包丢失，这样就需要调整虚拟机的网络设置。首先，确认虚拟机使用了VMXNET3虚拟网 卡驱动。这样，在Linux宿主机的特定情况下，当大数据文件在高带宽的网络上传输时会发生多数据包丢失。关闭接收和转发校验总和可以解决这种情况。因为 校验总和的作用是停止错误包的发送，这样做会增加风险。考虑到以太网卡的错误率通常低于百万分之一，风险的级别并不高。</p> 
          <p>　　使用Linux ethtool工具来关闭VMware网络设置中的接收和转发校验总和，在命令行窗口中以root账户登录ethtool。例如关闭网卡eth0的校验总 和命令如下：readethtool --offload eth0 rx off tx off;</p> 
          <p>　　命令生效后，打开相应网卡的配置文件：</p> 
          <p>　　/etc/sysconfig/network/ifcfg-eth0 ( SUSE) 或 /etc/sysconfig/network-scripts/ifcfg-eth0 (Red Hat )</p> 
          <p>　　同时把ETHTOOL_OPTIONS参数变为ETHTOOL_OPTIONS='--offload eth0 rx off tx off'</p> 
          <p>　　如果依然存在丢包问题，尝试用ethtool工具增加接收队列的缓冲区大小。默认情况下，缓存设为256，可以设置的最大值为4096。重新设置缓存大小为512，使用命令ethtool -G eth0 512。如果结果不理想，尝试更大的值。</p> 
          <p>　　遇到Windows虚拟机的高丢包率就需要调整VMXNET3驱动的网络设置。在Device Manager中右键单击VMXNET3驱动并选择Properties。在Advanced页中有两个参数：Small RX Buffers和RX Ring #1 Size。适当增加这些参数的值然后测试能否有改善。逐步加大该值直到问题解决。</p> 
          <p>　　多数情况下，这些设置可以降低虚拟机的丢包率。如果调整网络参数失败，或许就需要解决虚拟机其它的一些性能相关问题，而不是虚拟机和ESXi平 台之间的VMware网络设置。咨询宿主机OS 的相关专家，应该有很多可以调整性能的相关参数。当心更改了错误的参数可能会对虚拟机带来明显的负面影响。</p>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/07/15/415858.html" title="permalink">2014-07-15 22:53</a> ivaneeo 阅读(161) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/07/15/415858.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=415858">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=415858">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl71_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/06/04/414398.html">cocos2d项目例子</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://code4app.net/category/cocos2d
          <br />
          <div>
           http://www.cocos2d-x.org/hub/all?category=5
           <br />
           <div>
            http://blog.makeapp.co/
           </div>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/06/04/414398.html" title="permalink">2014-06-04 17:09</a> ivaneeo 阅读(128) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/06/04/414398.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=414398">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=414398">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl72_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/05/28/414218.html">RAML + Mule Module Requester Usecase</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://ricston.com/blog/mule-image-hosting-raml-mulerequester/
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/05/28/414218.html" title="permalink">2014-05-28 23:32</a> ivaneeo 阅读(200) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/05/28/414218.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=414218">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=414218">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl73_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/05/28/414186.html">一些开源的监控工具</a> 
        </div> 
        <div class="postText"> 
         <div>
          <p>什么东西可以监控OpenStack呢？OpenStack对监控的需求起码有以下这些：</p> 
          <p>&nbsp;</p> 
          <ul>
           <li>不仅要能监控物理机，也能监控虚机</li>
           <li>监控信息也必须是tenant隔离的</li>
           <li>监控项的收集应该是自动地</li>
           <li>监控工具应该一般化以监控任何设备</li>
           <li>监控工具必须提供API</li>
          </ul> 
          <p>下面是监控工具的一般架构：</p> 
          <p>&nbsp;</p> 
          <p><a href="http://www.openstack.cn/wp-content/uploads/2013/08/zhjk.jpg"><img size-full="" wp-image-246"="" alt="zhjk" src="http://www.openstack.cn/wp-content/uploads/2013/08/zhjk.jpg" height="520" width="621" /></a></p> 
          <p>&nbsp;</p> 
          <p>网上搜索了一下，<strong>现在主流的监控工具有：Nagios, cacti, Zabbix, Muni, Zenoss</strong>。我不是做运维的对这些工具都不熟，以前不熟，现在也不熟。下面是一些理解，不一定准。</p> 
          <p>Nagios，最老牌了，比较通用的监控工具。特大的特点是报警。图形化功能一般般。一般要安装Agent，配置起来看网上的说法是比较复杂的，没用过，没实际发言权。</p> 
          <p>cacti，图形化功能不错，所以Nagios一般结合它来使用。</p> 
          <p>Zabbix，监控和图形化功能都还可以了，尤其有一本电子书 zabbix 1.8 network monitoring</p> 
          <p>Zenoss, 监控新贵，它使用无Agent的通用技术如SNMP和SSL来监控，部署起来会比较方便。尤其是Zenoss公司有人现在也加入OpenStack社区了，专门开发了一个OpenStack特有的扩展（</p> 
          <p><a href="https://github.com/zenoss/ZenPacks.zenoss.OpenStack">https://github.com/zenoss/ZenPacks.zenoss.OpenStack</a>）不幸的是，目前只支持Nova API 1.1，且它只能收集单个tenant的数据，不利于rating和billing。</p> 
          <p>OpenStack Ceilometer工程主要监控的是tenant下虚机的数据，用来做billing的，物理机的监控支持不大好。</p> 
          <p>比较来比较去，如果是我，可能会做如下选型决定，不一定正确 ：</p> 
          <p>Nagios 或者 Zenoss (视情况）</p> 
          <p>&nbsp;</p> 
          <p>下面内容来自：<a href="http://docs.openstack.org/developer/ceilometer/">http://docs.openstack.org/developer/ceilometer/</a>， 我们看一下Ceilometer工程的现状, 架构如下：</p> 
          <p>&nbsp;</p> 
          <p><a href="http://www.openstack.cn/wp-content/uploads/2013/08/zhjk2.jpg"><img size-full="" wp-image-247"="" alt="zhjk2" src="http://www.openstack.cn/wp-content/uploads/2013/08/zhjk2.jpg" height="594" width="732" /></a></p> 
          <p>&nbsp;</p> 
          <p>运行OpenStack各组件的节点上一般有Agent来收集信息，收集后发给MQ，Ceilometer的Collector进程监控到数据之后存储到DB之中。从<a href="http://docs.openstack.org/developer/ceilometer/measurements.html">http://docs.openstack.org/developer/ceilometer/measurements.html</a>&nbsp;这页显示的监控项来看，<strong>目前Ceilometer监控来的数据主要来只是用来做billing的</strong>。</p> 
          <p>&nbsp;</p> 
          <p><strong>文章来源：</strong><a href="http://blog.csdn.net/quqi99/article/details/9400747">http://blog.csdn.net/quqi99/article/details/9400747</a><br /> <strong>文章作者：</strong>张华&nbsp;http://blog.csdn.net/quqi99</p>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/05/28/414186.html" title="permalink">2014-05-28 01:01</a> ivaneeo 阅读(216) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/05/28/414186.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=414186">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=414186">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl74_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/04/30/413072.html">使用truelicense实现用于JAVA工程license机制</a> 
        </div> 
        <div class="postText"> 
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">使用truelicense实现用于JAVA工程license机制（包括license生成和验，有需要的朋友可以参考下。</p>
         <br style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;" />
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">开发的软件产品在交付使用的时候，往往会授权一段时间的试用期，这个时候license就派上用场了。不同于在代码中直接加上时间约束，需要重新授权的时候使用license可以避免修改源码，改动部署，授权方直接生成一个新的license发送给使用方替换掉原来的license文件即可。下面将讲述使用truelicense来实现license的生成和使用。Truelicense是一个开源的证书管理引擎，详细介绍见<a rel="nofollow" target="_blank" href="https://truelicense.java.net/" style="margin: 0px; padding: 0px; color: #3377aa; text-decoration: none;">https://truelicense.java.net/</a></p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">一、首先介绍下license授权机制的原理：</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">1、 生成密钥对，方法有很多。</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">2、 授权者保留私钥，使用私钥对包含授权信息（如使用截止日期，MAC地址等）的license进行数字签名。</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">3、 公钥给使用者（放在验证的代码中使用），用于验证license是否符合使用条件。</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;"></p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">接下来是本例制作license的具体步骤：</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">二、第一步：使用keytool生成密钥对</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">以下命令在dos命令行执行，注意当前执行目录，最后生成的密钥对即在该目录下：</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">1、首先要用KeyTool工具来生成私匙库：（-alias别名 Cvalidity 3650表示10年有效）</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">keytool -genkey -alias privatekey -keystoreprivateKeys.store -validity 3650</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">2、然后把私匙库内的公匙导出到一个文件当中：</p>
         <pre style="margin-top: 0px; margin-bottom: 0px; padding: 8px; background-color: #f3fbf3; border-left-width: 4px; border-left-style: solid; border-left-color: #628db7; color: #333333; clear: both; font-size: 12px; font-family: Consolas, Verdana, Arial; line-height: 22px; white-space: pre-wrap; word-wrap: break-word;">keytool -export -alias privatekey -file certfile.cer -keystore privateKeys.store</pre>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">3、然后再把这个证书文件导入到公匙库：</p>
         <pre style="margin-top: 0px; margin-bottom: 0px; padding: 8px; background-color: #f3fbf3; border-left-width: 4px; border-left-style: solid; border-left-color: #628db7; color: #333333; clear: both; font-size: 12px; font-family: Consolas, Verdana, Arial; line-height: 22px; white-space: pre-wrap; word-wrap: break-word;">keytool -import -alias publiccert -file certfile.cer -keystore publicCerts.store</pre>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">最后生成文件privateKeys.store、publicCerts.store拷贝出来备用。</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">三、第二步：生成证书（该部分代码由授权者独立保管执行）</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">1、 首先LicenseManagerHolder.java类：</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;"></p>
         <pre style="margin-top: 0px; margin-bottom: 0px; padding: 8px; background-color: #f3fbf3; border-left-width: 4px; border-left-style: solid; border-left-color: #628db7; color: #333333; clear: both; font-size: 12px; font-family: Consolas, Verdana, Arial; line-height: 22px; white-space: pre-wrap; word-wrap: break-word;">package cn.melina.license; import de.schlichtherle.license.LicenseManager; import de.schlichtherle.license.LicenseParam;  /**  * LicenseManager??????  * @author melina  */ public class LicenseManagerHolder { 	 	private static LicenseManager licenseManager;   	public static synchronized LicenseManager getLicenseManager(LicenseParam licenseParams) {     	if (licenseManager == null) {     		licenseManager = new LicenseManager(licenseParams);     	}     	return licenseManager;     } } </pre>
         <br style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;" />
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;"></p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">2、 然后是主要生成license的代码CreateLicense.java：</p>
         <pre style="margin-top: 0px; margin-bottom: 0px; padding: 8px; background-color: #f3fbf3; border-left-width: 4px; border-left-style: solid; border-left-color: #628db7; color: #333333; clear: both; font-size: 12px; font-family: Consolas, Verdana, Arial; line-height: 22px; white-space: pre-wrap; word-wrap: break-word;">package cn.melina.license;  import java.io.File; import java.io.IOException; import java.io.InputStream; import java.text.DateFormat; import java.text.ParseException; import java.text.SimpleDateFormat; import java.util.Properties; import java.util.prefs.Preferences; import javax.security.auth.x500.X500Principal; import de.schlichtherle.license.CipherParam; import de.schlichtherle.license.DefaultCipherParam; import de.schlichtherle.license.DefaultKeyStoreParam; import de.schlichtherle.license.DefaultLicenseParam; import de.schlichtherle.license.KeyStoreParam; import de.schlichtherle.license.LicenseContent; import de.schlichtherle.license.LicenseParam; import de.schlichtherle.license.LicenseManager;  /**  * CreateLicense  * @author melina  */ public class CreateLicense { 	//common param 	private static String PRIVATEALIAS = &quot;&quot;; 	private static String KEYPWD = &quot;&quot;; 	private static String STOREPWD = &quot;&quot;; 	private static String SUBJECT = &quot;&quot;; 	private static String licPath = &quot;&quot;; 	private static String priPath = &quot;&quot;; 	//license content 	private static String issuedTime = &quot;&quot;; 	private static String notBefore = &quot;&quot;; 	private static String notAfter = &quot;&quot;; 	private static String consumerType = &quot;&quot;; 	private static int consumerAmount = 0; 	private static String info = &quot;&quot;; 	// 为了方便直接用的API里的例子 	// X500Princal是一个证书文件的固有格式，详见API 	private final static X500Principal DEFAULTHOLDERANDISSUER = new X500Principal( 			&quot;CN=Duke、OU=JavaSoft、O=Sun Microsystems、C=US&quot;); 	 	public void setParam(String propertiesPath) { 		// 获取参数 		Properties prop = new Properties(); 		InputStream in = getClass().getResourceAsStream(propertiesPath); 		try { 			prop.load(in); 		} catch (IOException e) { 			// TODO Auto-generated catch block 			e.printStackTrace(); 		} 		PRIVATEALIAS = prop.getProperty(&quot;PRIVATEALIAS&quot;); 		KEYPWD = prop.getProperty(&quot;KEYPWD&quot;); 		STOREPWD = prop.getProperty(&quot;STOREPWD&quot;); 		SUBJECT = prop.getProperty(&quot;SUBJECT&quot;); 		KEYPWD = prop.getProperty(&quot;KEYPWD&quot;); 		licPath = prop.getProperty(&quot;licPath&quot;); 		priPath = prop.getProperty(&quot;priPath&quot;); 		//license content 		issuedTime = prop.getProperty(&quot;issuedTime&quot;); 		notBefore = prop.getProperty(&quot;notBefore&quot;); 		notAfter = prop.getProperty(&quot;notAfter&quot;); 		consumerType = prop.getProperty(&quot;consumerType&quot;); 		consumerAmount = Integer.valueOf(prop.getProperty(&quot;consumerAmount&quot;)); 		info = prop.getProperty(&quot;info&quot;); 		 	}  	public boolean create() {		 		try { 			/************** 证书发布者端执行 ******************/ 			LicenseManager licenseManager = LicenseManagerHolder 					.getLicenseManager(initLicenseParams0()); 			licenseManager.store((createLicenseContent()), new File(licPath));	 		} catch (Exception e) { 			e.printStackTrace(); 			System.out.println(&quot;客户端证书生成失败!&quot;); 			return false; 		} 		System.out.println(&quot;服务器端生成证书成功!&quot;); 		return true; 	}  	// 返回生成证书时需要的参数 	private static LicenseParam initLicenseParams0() { 		Preferences preference = Preferences 				.userNodeForPackage(CreateLicense.class); 		// 设置对证书内容加密的对称密码 		CipherParam cipherParam = new DefaultCipherParam(STOREPWD); 		// 参数1,2从哪个Class.getResource()获得密钥库;参数3密钥库的别名;参数4密钥库存储密码;参数5密钥库密码 		KeyStoreParam privateStoreParam = new DefaultKeyStoreParam( 				CreateLicense.class, priPath, PRIVATEALIAS, STOREPWD, KEYPWD); 		LicenseParam licenseParams = new DefaultLicenseParam(SUBJECT, 				preference, privateStoreParam, cipherParam); 		return licenseParams; 	}  	// 从外部表单拿到证书的内容 		public final static LicenseContent createLicenseContent() { 			DateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); 			LicenseContent content = null; 			content = new LicenseContent(); 			content.setSubject(SUBJECT); 			content.setHolder(DEFAULTHOLDERANDISSUER); 			content.setIssuer(DEFAULTHOLDERANDISSUER); 			try { 				content.setIssued(format.parse(issuedTime)); 				content.setNotBefore(format.parse(notBefore)); 				content.setNotAfter(format.parse(notAfter)); 			} catch (ParseException e) { 				// TODO Auto-generated catch block 				e.printStackTrace(); 			} 			content.setConsumerType(consumerType); 			content.setConsumerAmount(consumerAmount); 			content.setInfo(info); 			// 扩展 			content.setExtra(new Object()); 			return content; 		} } </pre>
         <br style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;" />
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">3、 测试程序licenseCreateTest.java：</p>
         <pre style="margin-top: 0px; margin-bottom: 0px; padding: 8px; background-color: #f3fbf3; border-left-width: 4px; border-left-style: solid; border-left-color: #628db7; color: #333333; clear: both; font-size: 12px; font-family: Consolas, Verdana, Arial; line-height: 22px; white-space: pre-wrap; word-wrap: break-word;">package cn.melina.license; import cn.melina.license.CreateLicense; public class licenseCreateTest { 	public static void main(String[] args){ 		CreateLicense cLicense = new CreateLicense(); 		//获取参数 		cLicense.setParam(&quot;./param.properties&quot;); 		//生成证书 		cLicense.create(); 	} } </pre>
         <br style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;" />
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">4、 生成时使用到的param.properties文件如下：</p>
         <pre style="margin-top: 0px; margin-bottom: 0px; padding: 8px; background-color: #f3fbf3; border-left-width: 4px; border-left-style: solid; border-left-color: #628db7; color: #333333; clear: both; font-size: 12px; font-family: Consolas, Verdana, Arial; line-height: 22px; white-space: pre-wrap; word-wrap: break-word;">##########common parameters########### #alias PRIVATEALIAS=privatekey #key(该密码生成密钥对的密码，需要妥善保管，不能让使用者知道) KEYPWD=bigdata123456 #STOREPWD(该密码是在使用keytool生成密钥对时设置的密钥库的访问密码) STOREPWD=abc123456 #SUBJECT SUBJECT=bigdata #licPath licPath=bigdata.lic #priPath priPath=privateKeys.store ##########license content########### #issuedTime issuedTime=2014-04-01 #notBeforeTime notBefore=2014-04-01 #notAfterTime notAfter=2014-05-01 #consumerType consumerType=user #ConsumerAmount consumerAmount=1 #info info=this is a license </pre>
         <br style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;" />
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;"><span style="margin: 0px; padding: 0px;">根据</span><span style="margin: 0px; padding: 0px;">properties</span><span style="margin: 0px; padding: 0px;">文件可以看出，这里只简单设置了使用时间的限制，当然可以自定义添加更多限制。该文件中表示授权者拥有私钥，并且知道生成密钥对的密码。并且设置</span><span style="margin: 0px; padding: 0px;">license</span><span style="margin: 0px; padding: 0px;">的内容。</span></p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">四、第三步：验证证书（使用证书）（该部分代码结合需要授权的程序使用）</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;"></p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">1、 首先LicenseManagerHolder.java类，同上。</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">2、 然后是主要验证license的代码VerifyLicense.java：</p>
         <pre style="margin-top: 0px; margin-bottom: 0px; padding: 8px; background-color: #f3fbf3; border-left-width: 4px; border-left-style: solid; border-left-color: #628db7; color: #333333; clear: both; font-size: 12px; font-family: Consolas, Verdana, Arial; line-height: 22px; white-space: pre-wrap; word-wrap: break-word;">package cn.melina.license;  import java.io.File; import java.io.IOException; import java.io.InputStream; import java.util.Properties; import java.util.prefs.Preferences;  import de.schlichtherle.license.CipherParam; import de.schlichtherle.license.DefaultCipherParam; import de.schlichtherle.license.DefaultKeyStoreParam; import de.schlichtherle.license.DefaultLicenseParam; import de.schlichtherle.license.KeyStoreParam; import de.schlichtherle.license.LicenseParam; import de.schlichtherle.license.LicenseManager;  /**  * VerifyLicense  * @author melina  */ public class VerifyLicense { 	//common param 	private static String PUBLICALIAS = &quot;&quot;; 	private static String STOREPWD = &quot;&quot;; 	private static String SUBJECT = &quot;&quot;; 	private static String licPath = &quot;&quot;; 	private static String pubPath = &quot;&quot;; 	 	public void setParam(String propertiesPath) { 		// 获取参数 		Properties prop = new Properties(); 		InputStream in = getClass().getResourceAsStream(propertiesPath); 		try { 			prop.load(in); 		} catch (IOException e) { 			// TODO Auto-generated catch block 			e.printStackTrace(); 		} 		PUBLICALIAS = prop.getProperty(&quot;PUBLICALIAS&quot;); 		STOREPWD = prop.getProperty(&quot;STOREPWD&quot;); 		SUBJECT = prop.getProperty(&quot;SUBJECT&quot;); 		licPath = prop.getProperty(&quot;licPath&quot;); 		pubPath = prop.getProperty(&quot;pubPath&quot;); 	}  	public boolean verify() {		 		/************** 证书使用者端执行 ******************/  		LicenseManager licenseManager = LicenseManagerHolder 				.getLicenseManager(initLicenseParams()); 		// 安装证书 		try { 			licenseManager.install(new File(licPath)); 			System.out.println(&quot;客户端安装证书成功!&quot;); 		} catch (Exception e) { 			e.printStackTrace(); 			System.out.println(&quot;客户端证书安装失败!&quot;); 			return false; 		} 		// 验证证书 		try { 			licenseManager.verify(); 			System.out.println(&quot;客户端验证证书成功!&quot;); 		} catch (Exception e) { 			e.printStackTrace(); 			System.out.println(&quot;客户端证书验证失效!&quot;); 			return false; 		} 		return true; 	}  	// 返回验证证书需要的参数 	private static LicenseParam initLicenseParams() { 		Preferences preference = Preferences 				.userNodeForPackage(VerifyLicense.class); 		CipherParam cipherParam = new DefaultCipherParam(STOREPWD);  		KeyStoreParam privateStoreParam = new DefaultKeyStoreParam( 				VerifyLicense.class, pubPath, PUBLICALIAS, STOREPWD, null); 		LicenseParam licenseParams = new DefaultLicenseParam(SUBJECT, 				preference, privateStoreParam, cipherParam); 		return licenseParams; 	} } </pre>
         <br style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;" />
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">3、 测试程序licenseVerifyTest.java：</p>
         <pre style="margin-top: 0px; margin-bottom: 0px; padding: 8px; background-color: #f3fbf3; border-left-width: 4px; border-left-style: solid; border-left-color: #628db7; color: #333333; clear: both; font-size: 12px; font-family: Consolas, Verdana, Arial; line-height: 22px; white-space: pre-wrap; word-wrap: break-word;">package cn.melina.license;  public class licenseVerifyTest { 	public static void main(String[] args){ 		VerifyLicense vLicense = new VerifyLicense(); 		//获取参数 		vLicense.setParam(&quot;./param.properties&quot;); 		//验证证书 		vLicense.verify(); 	} } </pre>
         <br style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;" />
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">4、 验证时使用到的Properties文件如下：</p>
         <pre style="margin-top: 0px; margin-bottom: 0px; padding: 8px; background-color: #f3fbf3; border-left-width: 4px; border-left-style: solid; border-left-color: #628db7; color: #333333; clear: both; font-size: 12px; font-family: Consolas, Verdana, Arial; line-height: 22px; white-space: pre-wrap; word-wrap: break-word;">##########common parameters########### #alias PUBLICALIAS=publiccert #STOREPWD(该密码是在使用keytool生成密钥对时设置的密钥库的访问密码) STOREPWD=abc123456 #SUBJECT SUBJECT=bigdata #licPath licPath=bigdata.lic #pubPath pubPath=publicCerts.store </pre>
         <br style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;" />
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">根据该验证的properties可以看出，使用者只拥有公钥，没有私钥，并且也只知道访问密钥库的密码，而不能知道生成密钥对的密码。</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">五、说明：</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">注意实际操作中，公钥、私钥、证书等文件的存放路径。</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">以上代码需要用到truelicense的一些包，可以自行网上搜，也可以下载我的完整工程，里面附带了所需的jar包。</p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">以上两个完整工程提供下载：<a rel="nofollow" target="_blank" href="http://download.csdn.net/detail/luckymelina/7141131" style="margin: 0px; padding: 0px; color: #3377aa; text-decoration: none;">http://download.csdn.net/detail/luckymelina/7141131</a></p>
         <p style="margin: 0px; padding: 0px; color: #222222; font-family: Verdana, Arial, Helvetica; font-size: 13px; line-height: 25px;">GOOD LUCK!小伙伴们加油！欢迎与我交流。</p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/04/30/413072.html" title="permalink">2014-04-30 03:32</a> ivaneeo 阅读(4749) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/04/30/413072.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=413072">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=413072">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl75_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/04/28/413006.html">java调用mysql获取不到连接的问题</a> 
        </div> 
        <div class="postText">
          &nbsp;&nbsp;&nbsp;&nbsp; 摘要: 之前做了一个web项目的时候，好好的网站第二天总是会提示using the Connector/J connection property 'autoReconnect=true' to avoid this problem.&nbsp; 这样的错误1com.mysql.jdbc.CommunicationsException: The last packet successfully recei...&nbsp;&nbsp;
         <a href="http://www.blogjava.net/ivanwan/archive/2014/04/28/413006.html">阅读全文</a> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/04/28/413006.html" title="permalink">2014-04-28 13:32</a> ivaneeo 阅读(257) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/04/28/413006.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=413006">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=413006">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl76_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/04/04/411974.html">RabbitMQ 3.3.0远程guest能访问</a> 
        </div> 
        <div class="postText"> 
         <div>
          /etc/rabbitmq.conf:
          <br />
          <br />[
         </div>
         <div>
          &nbsp; &nbsp; {rabbit, [{loopback_users, []}]}
         </div>
         <div>
          ].
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/04/04/411974.html" title="permalink">2014-04-04 21:28</a> ivaneeo 阅读(1224) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/04/04/411974.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=411974">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=411974">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl77_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/04/01/411763.html">java使用Xuggler获得视频的时长，分辨率，高宽等信息</a> 
        </div> 
        <div class="postText"> 
         <pre java="" prettyprinted"="">
          <div>
           http://outofmemory.cn/code-snippet/4079/java-usage-Xuggler-get-video-shichang-fen-bianlv-high-kuan-kind-information
          </div></pre> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/04/01/411763.html" title="permalink">2014-04-01 00:44</a> ivaneeo 阅读(167) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/04/01/411763.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=411763">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=411763">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl78_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/03/28/411623.html">Canvas里的globalCompositeOperation</a> 
        </div> 
        <div class="postText"> 
         <strong>Canvas</strong>里的
         <strong>globalCompositeOperation</strong>是个很少用到的函数,不太熟悉程序绘图的同学们估计压根都不知道这玩意是干什么的.
         <br />
         <br />简单来说,
         <strong>Composite(组合)</strong>,就是对你在绘图中,后绘制的图形与先绘制的图形之间的组合显示效果,比如在国画中,你先画一笔红色,再来一笔绿色,相交的部分是一种混色,而在油画中,绿色就会覆盖掉相交部分的红色,这在程序绘图中的处理就是Composite,Canvas API中对应的函数就是globalCompositeOperation,跟globalAlpha一样,这个属性是全局的,所以在使用的时候要注意save和restore.
         <br />
         <br />我在练习这个函数的时候,用的是chrome浏览器,但是测试结果却跟实际应该出现的结果不太一致,开始我以为是写错了,检查数遍却没有问题,疑惑之下换了各种浏览器来测试,真是灏,每个浏览器居然都不一样,连同核心的chrome和safari都不一样...下面是测试结果.
         <br />
         <br />
         <img alt="" src="http://dl.iteye.com/upload/picture/pic/71054/9f086ab0-932c-3195-884b-cfc8aa3d8ce4.jpg" />
         <br />
         <span style="font-size: large;">chrome</span>
         <br />
         <br />
         <img alt="" src="http://dl.iteye.com/upload/picture/pic/71056/bb7bff56-5939-36bb-b325-f82695410862.jpg" />
         <br />
         <span style="font-size: large;">firefox</span>
         <br />
         <br />
         <img alt="" src="http://dl.iteye.com/upload/picture/pic/71058/9292f201-bb95-30ec-8920-b9836bd20baa.jpg" />
         <br />
         <span style="font-size: large;">opera</span>
         <br />
         <br />
         <img alt="" src="http://dl.iteye.com/upload/picture/pic/71060/8742ecdb-3f3c-3840-82df-90c846e80f5b.jpg" />
         <br />
         <span style="font-size: large;">safari</span>
         <br />
         <br />
         <img class="magplus" title="点击查看原始大小图片" alt="" src="http://dl.iteye.com/upload/picture/pic/71062/af2e011f-faa8-3f70-819a-8f445dae60a0.jpg" width="760" height="619" />
         <br />
         <span style="font-size: large;">firefox官方网站给的实际效果图</span>
         <br />
         <br />下面是每一个选项的说明(我表达的可能不太明白,看图吧):
         <br />
         <br />
         <strong>source-over</strong> 默认,相交部分由后绘制图形的填充(颜色,渐变,纹理)覆盖,全部浏览器通过
         <br />
         <br />
         <strong>source-in</strong> 只绘制相交部分,由后绘制图形的填充覆盖,其余部分透明,webkit两兄弟没有通过
         <br />
         <br />
         <strong>source-out</strong> 只绘制后绘制图形不相交的部分,由后绘制图形的填充覆盖,其余部分透明,webkit两兄弟没有通过
         <br />
         <br />
         <strong>source-atop</strong> 后绘制图形不相交的部分透明,相交部分由后绘制图形的填充覆盖,全部浏览器通过
         <br />
         <br />
         <strong>destination-over</strong> 相交部分由先绘制图形的填充(颜色,渐变,纹理)覆盖,全部浏览器通过
         <br />
         <br />
         <strong>destination-in</strong> 只绘制相交部分,由先绘制图形的填充覆盖,其余部分透明,webkit两兄弟没有通过
         <br />
         <br />
         <strong>destination-out</strong> 只绘制先绘制图形不相交的部分,由先绘制图形的填充覆盖,其余部分透明,全部浏览器通过
         <br />
         <br />
         <strong>destination-atop</strong> 先绘制图形不相交的部分透明,相交部分由先绘制图形的填充覆盖,webkit两兄弟没有通过
         <br />
         <br />
         <strong>lighter</strong> 相交部分由根据先后图形填充来增加亮度,全部浏览器通过
         <br />
         <br />
         <strong>darker</strong> 相交部分由根据先后图形填充来降低亮度,chrome通过,firefox官方说Firefox 3.6 / Thunderbird 3.1 / Fennec 1.0以后版本移除这个效果-0-,why?safari看似可以,但是无论你什么颜色,它都给填充成黑色,opera无效果
         <br />
         <br />
         <strong>copy</strong> 只绘制后绘制图形,只有opera通过
         <br />
         <br />
         <strong>xor</strong> 相交部分透明,全部浏览器通过
         <br />
         <br />结果太令人无语了,特别是firefox那个新版本移除,我靠,为嘛啊?chrome和safari难兄难弟,成绩一塌糊涂,难道是webkit核心的问题?safari那个填充黑色很有IE6-中png透明问题的风范...opera表现很抢眼,只有一个效果未实现,继续努力!
         <br />
         <br />评分及浏览器版本:
         <br />Chrome dev 7.0.503.0 : 7/12
         <br />Firefox 3.6.6 : 10/12
         <br />Opera 10.53 : 11/12
         <br />Safari 4.0.3(531.9.1) : 6/12 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/28/411623.html" title="permalink">2014-03-28 15:48</a> ivaneeo 阅读(132) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/28/411623.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=411623">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=411623">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl79_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/03/25/411464.html">Guacamole管理员模式</a> 
        </div> 
        <div class="postText"> 
         <h2> <span id="Logging_In_to_Guacamole">&nbsp;Logging In to Guacamole </span></h2> 
         <p>You can access the web login screen for Guacamole from the server at <a rel="nofollow" free"="" href="http://127.0.0.1:8080/guacamole">http://127.0.0.1:8080/guacamole</a> </p>
         <p>The default user is &quot;guacadmin&quot;, with the default password of &quot;guacadmin&quot;. You can change your password by editing your own user in the administration screen. </p>
         <p>With everything configured correctly you should be able to access the web login screen through Amahi at <a rel="nofollow" free"="" href="http://guacamole.yourhdaname.com:8080/guacamole/">http://guacamole.yourhdaname.com:8080/guacamole/</a></p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/25/411464.html" title="permalink">2014-03-25 18:36</a> ivaneeo 阅读(128) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/25/411464.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=411464">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=411464">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl80_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/03/19/411202.html">haproxy ssl和ssh配置</a> 
        </div> 
        <div class="postText"> 
         <div>
          <h2>Using HAProxy to make SSH and SSL available on the same port</h2> 
          <p>Certain places firewall TCP ports other than the most common ports. There are <a href="http://en.wikipedia.org/wiki/Tunneling_protocol#SSH_tunneling">many</a> <a href="https://help.ubuntu.com/community/SSH_VPN">techniques</a> for <a href="http://www.daemon.be/maarten/dnstunnel.html">bypassing</a> such <a href="http://tools.ietf.org/html/rfc2549">restrictions</a>. One simple approach is to run a SSH daemon on port 443, however a downside of this is you need to dedicate an IP address to this SSH service.</p> 
          <p>There is quite a neat technique for making SSH and SSL share a port; in the SSL protocol clients should write first, whereas in SSH the server should write first; therefore by waiting to see if the client writes data it is possible to make a guess as to if the client is an SSL client or a SSH client.</p> 
          <p>I'm not the first person to think this up, <a href="http://search.cpan.org/dist/Net-Proxy">Net::Proxy</a> has a script called <a href="http://search.cpan.org/%7Ebook/Net-Proxy-0.08/script/sslh">sslh</a> and confusingly there is also a C implementation also called <a href="http://www.rutschle.net/tech/sslh.shtml">sslh</a>.</p> 
          <p>I recently switched my web server to use <a href="http://haproxy.1wt.eu/">HAProxy</a> to allow me some more flexiblity in how I configure things (especially now the development version has keepalive support). While reading the (incredibly detailed) <a href="http://haproxy.1wt.eu/#docs">documentation</a> I noticed it should be able to do the <em>sslh</em> technique.</p> 
          <p>Doing this needs the (currently) in development HAProxy 1.4 (support was added for content switching TCP as well as HTTP in <a href="http://haproxy.1wt.eu/git?p=haproxy.git;a=commit;h=1d0dfb155df56f256b615049a0d9333595a35501">this commit</a> -- thanks to Cyril Bont&eacute; on the mailing list for confirming that).</p> 
          <p>The configuration looks something like the following (global section omitted, you'll want to run it as a user other than root and chroot it if you actually use this).</p> 
          <pre><span style="font-family: verdana, 'courier new';">defaults</span></pre>
          <p>&nbsp; timeout connect 5s</p> 
          <p>&nbsp; timeout client 50s</p> 
          <p>&nbsp; timeout server 20s</p> 
          <p><br /></p> 
          <p>listen ssl :443</p> 
          <p>&nbsp; tcp-request inspect-delay 2s</p> 
          <p>&nbsp; acl is_ssl req_ssl_ver 2:3.1</p> 
          <p>&nbsp; tcp-request content accept if is_ssl</p> 
          <p>&nbsp; use_backend ssh if !is_ssl</p> 
          <p>&nbsp; server www-ssl :444</p> 
          <p>&nbsp; timeout client 2h</p> 
          <p><br /></p> 
          <p>backend ssh</p> 
          <p>&nbsp; mode tcp</p> 
          <p>&nbsp; server ssh :22</p> 
          <p>&nbsp; timeout server 2h</p>
          <p><br /><br />This listens on port 443, forwards it to port 444 (where the actual SSL web server is listening) unless it is <strong>not</strong> SSLv2, SSLv3 or TLSv1 traffic, in which case it forwards it to the ssh backend listening on port 22.</p> 
          <p>Obviously as I said earlier this is only a guess that is subject to network conditions such as packet loss. I'm not recommending you use this technique on a production site, but for a low traffic machine where you want to run both protocols it is very useful. (By increasing the timeout for SSH you increase the chances of a correct result, but also add a potentially annoying delay).</p> 
          <p>Sometimes layer 7 filtering techniques are in use and just listening on port 443 is not enough. In this case you can <a href="http://dag.wieers.com/howto/ssh-http-tunneling/">use SSH inside SSL</a>.</p> 
         </div>
         <div post-info"=""></div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/19/411202.html" title="permalink">2014-03-19 01:53</a> ivaneeo 阅读(769) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/19/411202.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=411202">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=411202">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl81_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/03/14/410999.html">反射实例</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://blog.sina.com.cn/s/blog_6b8fc5470101fi4b.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/14/410999.html" title="permalink">2014-03-14 00:31</a> ivaneeo 阅读(150) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/14/410999.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=410999">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=410999">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl82_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/03/12/410946.html">apt-get install 错误</a> 
        </div> 
        <div class="postText"> 
         <span style="font-family: Tahoma, Arial, Helvetica, sans-serif, SimSun; background-color: #ffffff;">dpkg-deb: error: subprocess paste was killed by signal (Broken pipe)<br /><br /><br /></span>
         <span style="font-family: Tahoma, Arial, Helvetica, sans-serif, SimSun; line-height: 26.600000381469727px; background-color: #ffffff;">已解决： cd/var/lib/dpkg</span>
         <br style="font-family: Tahoma, Arial, Helvetica, sans-serif, SimSun; line-height: 26.600000381469727px; background-color: #ffffff;" />
         <span style="font-family: Tahoma, Arial, Helvetica, sans-serif, SimSun; line-height: 26.600000381469727px; background-color: #ffffff;">sudo mv info info.bak</span>
         <br style="font-family: Tahoma, Arial, Helvetica, sans-serif, SimSun; line-height: 26.600000381469727px; background-color: #ffffff;" />
         <span style="font-family: Tahoma, Arial, Helvetica, sans-serif, SimSun; line-height: 26.600000381469727px; background-color: #ffffff;">sudo mkdir info</span> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/12/410946.html" title="permalink">2014-03-12 19:00</a> ivaneeo 阅读(964) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/12/410946.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=410946">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=410946">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl83_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/03/11/410878.html">haproxzy配置</a> 
        </div> 
        <div class="postText"> 
         <div>
          # this config needs haproxy-1.1.28 or haproxy-1.2.1
         </div>
         <div></div>
         <div>
          global
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; log 127.0.0.1 &nbsp; local0
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; log 127.0.0.1 &nbsp; local1 notice
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; #log loghost &nbsp; &nbsp;local0 info
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; maxconn 4096
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; tune.bufsize 20480
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; tune.maxrewrite 2048
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; #chroot /usr/share/haproxy
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; user haproxy
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; group haproxy
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; daemon
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; #debug
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; #quiet
         </div>
         <div></div>
         <div>
          defaults
         </div>
         <div>
          &nbsp; &nbsp; log global
         </div>
         <div>
          &nbsp; &nbsp; mode tcp
         </div>
         <div>
          &nbsp; &nbsp; option tcplog
         </div>
         <div>
          &nbsp; &nbsp; option dontlognull
         </div>
         <div>
          &nbsp; &nbsp; option tcp-smart-accept
         </div>
         <div>
          &nbsp; &nbsp; option tcp-smart-connect
         </div>
         <div>
          &nbsp; &nbsp; #option dontlog-normal
         </div>
         <div>
          &nbsp; &nbsp; retries 3
         </div>
         <div>
          &nbsp; &nbsp; option redispatch
         </div>
         <div>
          &nbsp; &nbsp; timeout connect 1h
         </div>
         <div>
          &nbsp; &nbsp; timeout client &nbsp;1h &nbsp;
         </div>
         <div>
          &nbsp; &nbsp; timeout server &nbsp;1h
         </div>
         <div>
          &nbsp; &nbsp; maxconn 40000
         </div>
         <div>
          &nbsp; &nbsp; option redispatch
         </div>
         <div></div>
         <div>
          listen rabbitmq_cluster 0.0.0.0:5672
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;mode tcp
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;maxconn 2000
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;balance roundrobin
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;server &nbsp; rabbit1 172.20.21.1:5672 check inter 2000 rise 2 fall 3
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;server &nbsp; rabbit2 172.20.21.2:5672 check inter 2000 rise 2 fall 3
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;server &nbsp; rabbit3 172.20.21.3:5672 check inter 2000 rise 2 fall 3
         </div>
         <div></div>
         <div>
          listen &nbsp;mariadb_cluster
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; bind 0.0.0.0:3306
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; mode tcp &nbsp; &nbsp; &nbsp;&nbsp;
         </div>
         <div>
          <span style="white-space:pre"> </span>#option tcpka
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; option mysql-check user haproxy #mysql.... &nbsp;root.mysql.....
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; #balance leastconn &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #....
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; balance roundrobin
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; server mysql1 172.20.21.1:3306 weight 1 check &nbsp;inter 1s rise 2 fall 2
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; server mysql2 172.20.21.2:3306 weight 1 check &nbsp;inter 1s rise 2 fall 2
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp; server mysql3 172.20.21.3:3306 weight 1 check &nbsp;inter 1s rise 2 fall 2
         </div>
         <div></div>
         <div>
          listen ssdb_cluster 0.0.0.0:8888
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;mode tcp
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;maxconn 2000
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;balance roundrobin
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;server &nbsp; ssdb1 172.20.21.1:8888 check inter 2000 rise 2 fall 3
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;server &nbsp; ssdb2 172.20.21.2:8888 check inter 2000 rise 2 fall 3
         </div>
         <div></div>
         <div>
          listen 49 0.0.0.0:3389
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;mode tcp
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;maxconn 2000
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;balance source
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;option tcpka
         </div>
         <div>
          &nbsp; &nbsp; &nbsp; &nbsp;server &nbsp; 49 172.20.0.49:3389 check inter 2000 rise 2 fall 3
         </div>
         <div></div>
         <div></div>
         <div>
          listen stats :1936
         </div>
         <div>
          &nbsp; &nbsp; mode http
         </div>
         <div>
          &nbsp; &nbsp; stats enable
         </div>
         <div>
          &nbsp; &nbsp; stats hide-version
         </div>
         <div>
          &nbsp; &nbsp; stats realm Haproxy\ Statistics
         </div>
         <div>
          &nbsp; &nbsp; stats uri /
         </div>
         <div>
          &nbsp; &nbsp; stats auth admin:admin
         </div>
         <div></div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/11/410878.html" title="permalink">2014-03-11 15:22</a> ivaneeo 阅读(153) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/11/410878.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=410878">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=410878">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl84_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/03/11/410873.html"> heapaudit内存分析工具</a> 
        </div> 
        <div class="postText"> 
         <div>
          https://github.com/foursquare/heapaudit
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/11/410873.html" title="permalink">2014-03-11 14:45</a> ivaneeo 阅读(239) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/11/410873.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=410873">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=410873">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl85_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/03/02/410495.html">ubuntu mariadb install</a> 
        </div> 
        <div class="postText">
          &nbsp;&nbsp;&nbsp;&nbsp; 摘要: Install MariaDB Galera Cluster in Ubuntuby&nbsp;SECAGUY&nbsp;on&nbsp;2 JULY 2013&nbsp;&middot;&nbsp;LEAVE A COMMENTI am going to show you on how to install MariaDB Cluster (with Galera) in Ubuntu Precis...&nbsp;&nbsp;
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/02/410495.html">阅读全文</a> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/02/410495.html" title="permalink">2014-03-02 00:26</a> ivaneeo 阅读(346) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/03/02/410495.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=410495">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=410495">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl86_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/02/20/410123.html">temp</a> 
        </div> 
        <div class="postText"> 
         <div>
          http://www.wangzhongyuan.com/archives/351.html
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/02/20/410123.html" title="permalink">2014-02-20 23:02</a> ivaneeo 阅读(106) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/02/20/410123.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=410123">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=410123">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl87_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2014/02/20/410119.html">如何杀死僵尸进程呢？</a> 
        </div> 
        <div class="postText"> 
         <h2>如何杀死僵尸进程呢？</h2> 
         <p>一般僵尸进程很难直接kill掉，不过您可以kill僵尸爸爸。父进程死后，僵尸进程成为”孤儿进程”，过继给1号进程init，init始终会负责清理僵尸进程．它产生的所有僵尸进程也跟着消失。</p> 
         <div> 
          <p>ps&nbsp;-e&nbsp;-o&nbsp;ppid,stat&nbsp;|&nbsp;grep&nbsp;Z&nbsp;|&nbsp;cut&nbsp;-d”&nbsp;”&nbsp;-f2&nbsp;|&nbsp;xargs&nbsp;kill&nbsp;-9</p> 
          <p>或</p> 
          <p>kill&nbsp;-HUP&nbsp;`ps&nbsp;-A&nbsp;-ostat,ppid&nbsp;|&nbsp;grep&nbsp;-e&nbsp;’^[Zz]‘&nbsp;|&nbsp;awk&nbsp;’{print&nbsp;$2}’`</p> 
          <p>当然您可以自己编写更好的shell脚本，欢迎与大家分享。</p> 
         </div> 
         <p>另外子进程死后，会发送SIGCHLD信号给父进程，父进程收到此信号后，执行waitpid()函数为子进程收尸。就是基于这样的原理：就算父进 程没有调用wait，内核也会向它发送SIGCHLD消息，而此时，尽管对它的默认处理是忽略，如果想响应这个消息，可以设置一个处理函数。</p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/02/20/410119.html" title="permalink">2014-02-20 19:49</a> ivaneeo 阅读(240) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2014/02/20/410119.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=410119">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=410119">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl88_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/12/26/408072.html">各种连接池参数比较</a> 
        </div> 
        <div class="postText"> 
         <div id="version-info" notemacro="" padded"="">
          <br /> 
         </div> 
         <div> 
          <div> 
           <table>
            <tbody> 
             <tr> 
              <th>&nbsp;</th> 
              <th> Druid </th> 
              <th> DBCP </th> 
              <th> C3P0 </th> 
              <th> JBoss </th> 
              <th> Weblogic </th> 
              <th> BonCP </th> 
             </tr> 
             <tr> 
              <th> 数据库用户名称 </th> 
              <td> Username </td> 
              <td> Username </td> 
              <td> User </td> 
              <td> user-name </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 数据库密码 </th> 
              <td> Password </td> 
              <td> Password </td> 
              <td> Password </td> 
              <td> password</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 驱动名称 </th> 
              <td> DriverClassName </td> 
              <td> DriverClassName </td> 
              <td> DriverClass </td> 
              <td> driver-class </td> 
              <td> DriverName </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> JDBC连接串 </th> 
              <td> Url </td> 
              <td> Url </td> 
              <td> JdbcUrl </td> 
              <td> connection-url </td> 
              <td> Url </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> JDBC连接属性 </th> 
              <td> Properties </td> 
              <td> Properties </td> 
              <td> Properties </td> 
              <td> connection-property </td> 
              <td> Properties </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 初始化大小 </th> 
              <td> InitialSize </td> 
              <td> InitialSize </td> 
              <td> InitialPoolSize </td> 
              <td>&nbsp;</td> 
              <td> Initial Capacity </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 连接池最小空闲 </th> 
              <td> MinIdle </td> 
              <td> MinIdle </td> 
              <td> MinPoolSize </td> 
              <td> min-pool-size </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 连接池最大空闲 </th> 
              <td> MaxIdle </td> 
              <td> MaxIdle </td> 
              <td> MaxPoolSize </td> 
              <td> max-pool-size </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 连接池最大使用连接数量 </th> 
              <td> MaxActive </td> 
              <td> MaxActive </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> MaximumCapacity </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 最小逐出时间 </th> 
              <td> MinEvictableIdleTimeMillis </td> 
              <td> MinEvictableIdleTimeMillis</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 最多等待线程 </th> 
              <td> MaxWaitThreadCount </td> 
              <td> MaxWaitThreadCount </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> HighestNumWaiters </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 连接池增长步长 </th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> AcquireIncrement </td> 
              <td>&nbsp;</td> 
              <td> CapacityIncrement </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 获取连接时测试是否有效</th> 
              <td> TestOnBorrow </td> 
              <td> TestOnBorrow </td> 
              <td> TestConnectionOnCheckout </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 归还连接时是否测试有效 </th> 
              <td> TestOnReturn </td> 
              <td> TestOnReturn </td> 
              <td> TestConnectionOnCheckin </td> 
              <td>&nbsp;</td> 
              <td> TestConnectionsOnReserve </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 测试有效用的SQL Query </th> 
              <td> ValidationQuery </td> 
              <td> ValidationQuery </td> 
              <td> PreferredTestQuery </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 测试有效的超时时间 </th> 
              <td> ValidationQueryTimeout </td> 
              <td> ValidationQueryTimeout </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 连接初始化SQL </th> 
              <td> ConnectionInitSqls </td> 
              <td> ConnectionInitSqls </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> InitSQL </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 连接最大存活实现 </th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> MaxConnectionAge </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 连接泄漏的超时时间 </th> 
              <td> RemoveAbandonedTimeout </td> 
              <td> RemoveAbandonedTimeout </td> 
              <td> UnreturnedConnectionTimeout </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 关闭泄漏的连接时打印堆栈信息 </th> 
              <td> LogAbandoned </td> 
              <td> LogAbandoned </td> 
              <td> DebugUnreturnedConnectionStackTraces </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 逐出连接的检测时间间隔</th> 
              <td> TimeBetweenEvictionRunsMillis </td> 
              <td> TimeBetweenEvictionRunsMillis </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> ShrinkFrequencySeconds </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> Statement缓存算法 </th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> StatementCacheType</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> Statement缓存大小 </th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> StatementCacheSize</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> TestTableName</td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> SecondsToTrustAnIdlePoolConnection </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> ConnectionCreationRetryFrequencySeconds </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> LoginDelaySeconds </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> Profile Connection Usage </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> Profile Connection Reservation Wait </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> Profile Connection Leak </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> Profile Connection Reservation Failed </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> Profile Statement Cache Entry </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> Profile Statement Usage </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> Profile Connection Last Usage </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> Profile Connection Multithreaded Usage </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> Profile Harvest Frequency Seconds </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 连接池扩展 </th> 
              <td> Filters </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> DriverInterceptor </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> CredentialMappingEnabled </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> InactiveConnectionTimeoutSeconds </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> ConnectionReserveTimeoutSeconds </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th>&nbsp;</th> 
              <td> QueryTimeout </td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> StatementTimeout </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 连接池关闭时对正在使用连接的处理方式 </th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> IgnoreInUseConnectionsEnabled </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 把连接放到ThreadLocal中 </th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> PinnedToThread </td> 
              <td>&nbsp;</td> 
             </tr> 
             <tr> 
              <th> 关闭“赃”连接（调用过getVendorConnection方法） </th> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td>&nbsp;</td> 
              <td> RemoveInfectedConnections </td> 
              <td>&nbsp;</td>
             </tr>
            </tbody>
           </table>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/12/26/408072.html" title="permalink">2013-12-26 16:02</a> ivaneeo 阅读(200) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/12/26/408072.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=408072">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=408072">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl89_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/12/25/408014.html">3种LVS/Nginx/HAProxy负载均衡器的对比分析</a> 
        </div> 
        <div class="postText"> 
         <div>
          <p>现在网站发展的趋势对网络负载均衡的使用是随着网站规模的提升根据不同的阶段来使用不同的技术：</p> 
          <p>一种是通过硬件来进行进行，常见的硬件有比较昂贵的NetScaler、F5、Radware和Array等商用的负载均衡器，它的优点就是有专业的维护团队来对这些服务进行维护、缺点就是花销太大，所以对于规模较小的网络服务来说暂时还没有需要使用；另外一种就是类似于LVS/HAProxy、Nginx的基于Linux的开源免费的负载均衡软件策略,这些都是通过软件级别来实现，所以费用非常低廉，所以我个也比较推荐大家采用第二种方案来实施自己网站的负载均衡需求。</p> 
          <p>近期朋友刘鑫(紫雨荷雪)的项目成功上线了，PV达到了亿级/日的访问量，最前端用的是HAProxy+Keepalived双机作的负载均衡器 /反向代理，整个网站非常稳定；这让我更坚定了以前跟老男孩前辈聊的关于网站架构比较合理设计的架构方案：即Nginx /HAProxy+Keepalived作Web最前端的负载均衡器，后端的MySQL数据库架构采用一主多从，读写分离的方式，采用LVS+Keepalived的方式。</p> 
          <p>在这里我也有一点要跟大家申明下：很多朋友担心软件级别的负载均衡在高并发流量冲击下的稳定情况，事实是我们通过成功上线的许多网站发现，它们的稳 定性也是非常好的，宕机的可能性微乎其微，所以我现在做的项目，基本上没考虑服务级别的高可用了。相信大家对这些软件级别的负载均衡软件都已经有了很深的 的认识，下面我就它们的特点和适用场合分别说明下。</p> 
          <p>LVS：使用集群技术和Linux操作系统实现一个高性能、高可用的服务器，它具有很好的可伸缩性（Scalability)、可靠性（Reliability)和可管理性（Manageability)，感谢章文嵩博士为我们提供如此强大实用的开源软件。</p> 
          <p><strong>LVS的特点是：<br /> </strong></p> 
          <ol>
           <li>抗负载能力强、是工作在网络4层之上仅作分发之用，没有流量的产生，这个特点也决定了它在负载均衡软件里的性能最强的；</li>
           <li>配置性比较低，这是一个缺点也是一个优点，因为没有可太多配置的东西，所以并不需要太多接触，大大减少了人为出错的几率；</li>
           <li>工作稳定，自身有完整的双机热备方案，如LVS+Keepalived和LVS+Heartbeat，不过我们在项目实施中用得最多的还是LVS/DR+Keepalived；</li>
           <li>无流量，保证了均衡器IO的性能不会收到大流量的影响；</li>
           <li>应用范围比较广，可以对所有应用做负载均衡；</li>
           <li>软件本身不支持正则处理，不能做动静分离，这个就比较遗憾了；其实现在许多网站在这方面都有较强的需求，这个是Nginx/HAProxy+Keepalived的优势所在。</li>
           <li>如果是网站应用比较庞大的话，实施LVS/DR+Keepalived起来就比较复杂了，特别后面有Windows Server应用的机器的话，如果实施及配置还有维护过程就比较复杂了，相对而言，Nginx/HAProxy+Keepalived就简单多了。<span style="color: #c0c0c0">站长教学网 eduyo.com</span></li>
          </ol> 
          <p><strong>Nginx的特点是：<br /> </strong></p> 
          <ol>
           <li>工作在网络的7层之上，可以针对http应用做一些分流的策略，比如针对域名、目录结构，它的正则规则比HAProxy更为强大和灵活，这也是许多朋友喜欢它的原因之一；</li>
           <li>Nginx对网络的依赖非常小，理论上能ping通就就能进行负载功能，这个也是它的优势所在；</li>
           <li>Nginx安装和配置比较简单，测试起来比较方便；</li>
           <li>也可以承担高的负载压力且稳定，一般能支撑超过几万次的并发量；</li>
           <li>Nginx可以通过端口检测到服务器内部的故障，比如根据服务器处理网页返回的状态码、超时等等，并且会把返回错误的请求重新提交到另一个节点，不过其中缺点就是不支持url来检测；</li>
           <li>Nginx仅能支持http和Email，这样就在适用范围上面小很多，这个它的弱势；</li>
           <li>Nginx不仅仅是一款优秀的负载均衡器/反向代理软件，它同时也是功能强大的Web应用服务器。LNMP现在也是非常流行的web架构，大有和以前最流行的LAMP架构分庭抗争之势，在高流量的环境中也有很好的效果。</li>
           <li>Nginx现在作为Web反向加速缓存越来越成熟了，很多朋友都已在生产环境下投入生产了，而且反映效果不错，速度比传统的Squid服务器更快，有兴趣的朋友可以考虑用其作为反向代理加速器。</li>
          </ol> 
          <p><strong>HAProxy的特点是：<br /> </strong></p> 
          <ol>
           <li>HAProxy是支持虚拟主机的，以前有朋友说这个不支持虚拟主机，我这里特此更正一下。</li>
           <li>能够补充Nginx的一些缺点比如Session的保持，Cookie的引导等工作</li>
           <li>支持url检测后端的服务器出问题的检测会有很好的帮助。</li>
           <li>它跟LVS一样，本身仅仅就只是一款负载均衡软件；单纯从效率上来讲HAProxy更会比Nginx有更出色的负载均衡速度，在并发处理上也是优于Nginx的。</li>
           <li>HAProxy可以对Mysql读进行负载均衡，对后端的MySQL节点进行检测和负载均衡，不过在后端的MySQL slaves数量超过10台时性能不如LVS，所以我向大家推荐LVS+Keepalived。</li>
           <li>HAProxy的算法现在也越来越多了，具体有如下8种：<br /> ① roundrobin，表示简单的轮询，这个不多说，这个是负载均衡基本都具备的；<br /> ② static-rr，表示根据权重，建议关注；<br /> ③ leastconn，表示最少连接者先处理，建议关注；<br /> ④ source，表示根据请求源IP，这个跟Nginx的IP_hash机制类似，我们用其作为解决session问题的一种方法，建议关注；<br /> ⑤ ri，表示根据请求的URI；<br /> ⑥ rl_param，表示根据请求的URl参数'balance url_param' requires an URL parameter name；<br /> ⑦ hdr(name)，表示根据HTTP请求头来锁定每一次HTTP请求；<br /> ⑧ rdp-cookie(name)，表示根据据cookie(name)来锁定并哈希每一次TCP请求。</li>
          </ol> 
          <p>&nbsp;</p> 
          <h3>&nbsp;</h3> 
          <h3>Nginx和LVS作对比的结果</h3> 
          <p>1、Nginx工作在网络的7层，所以它可以针对http应用本身来做分流策略，比如针对域名、目录结构等，相比之下LVS并不具备这样的功能，所 以 Nginx单凭这点可利用的场合就远多于LVS了；但Nginx有用的这些功能使其可调整度要高于LVS，所以经常要去触碰触碰，由LVS的第2条优点 看，触碰多了，人为出问题的几率也就会大。<br /> 2、Nginx对网络的依赖较小，理论上只要ping得通，网页访问正常，Nginx就能连得通，Nginx同时还能区分内外网，如果是同时拥有内外网的 节点，就相当于单机拥有了备份线路；LVS就比较依赖于网络环境，目前来看服务器在同一网段内并且LVS使用direct方式分流，效果较能得到保证。另 外注意，LVS需要向托管商至少申请多一个ip来做Visual IP，貌似是不能用本身的IP来做VIP的。要做好LVS管理员，确实得跟进学习很多有关网络通信方面的知识，就不再是一个HTTP那么简单了。<span style="color: #c0c0c0">站长教学网 eduyo.com</span><br /> 3、Nginx安装和配置比较简单，测试起来也很方便，因为它基本能把错误用日志打印出来。LVS的安装和配置、测试就要花比较长的时间了，因为同上所述，LVS对网络依赖比较大，很多时候不能配置成功都是因为网络问题而不是配置问题，出了问题要解决也相应的会麻烦得多。<br /> 4、Nginx也同样能承受很高负载且稳定，但负载度和稳定度差LVS还有几个等级：Nginx处理所有流量所以受限于机器IO和配置；本身的bug也还是难以避免的；Nginx没有现成的双机热备方案，所以跑在单机上还是风险较大，单机上的事情全都很难说。<br /> 5、Nginx可以检测到服务器内部的故障，比如根据服务器处理网页返回的状态码、超时等等，并且会把返回错误的请求重新提交到另一个节点。目前LVS中 ldirectd也能支持针对服务器内部的情况来监控，但LVS的原理使其不能重发请求。重发请求这点，譬如用户正在上传一个文件，而处理该上传的节点刚 好在上传过程中出现故障，Nginx会把上传切到另一台服务器重新处理，而LVS就直接断掉了，如果是上传一个很大的文件或者很重要的文件的话，用户可能 会因此而恼火。<br /> 6、Nginx对请求的异步处理可以帮助节点服务器减轻负载，假如使用apache直接对外服务，那么出现很多的窄带链接时apache服务器将会占用大 量内存而不能释放，使用多一个Nginx做apache代理的话，这些窄带链接会被Nginx挡住，apache上就不会堆积过多的请求，这样就减少了相 当多的内存占用。这点使用squid也有相同的作用，即使squid本身配置为不缓存，对apache还是有很大帮助的。LVS没有这些功能，也就无法能 比较。<br /> 7、Nginx能支持http和email（email的功能估计比较少人用），LVS所支持的应用在这点上会比Nginx更多。在使用上，一般最前端所 采取的策略应是LVS，也就是DNS的指向应为LVS均衡器，LVS的优点令它非常适合做这个任务。重要的ip地址，最好交由LVS托管，比如数据库的 ip、webservice服务器的ip等等，这些ip地址随着时间推移，使用面会越来越大，如果更换ip则故障会接踵而至。所以将这些重要ip交给 LVS托管是最为稳妥的，这样做的唯一缺点是需要的VIP数量会比较多。Nginx可作为LVS节点机器使用，一是可以利用Nginx的功能，二是可以利 用Nginx的性能。当然这一层面也可以直接使用squid，squid的功能方面就比Nginx弱不少了，性能上也有所逊色于Nginx。Nginx也 可作为中层代理使用，这一层面Nginx基本上无对手，唯一可以撼动Nginx的就只有lighttpd了，不过lighttpd目前还没有能做到 Nginx完全的功能，配置也不那么清晰易读。另外，中层代理的IP也是重要的，所以中层代理也拥有一个VIP和LVS是最完美的方案了。具体的应用还得 具体分析，如果是比较小的网站（日PV&lt;1000万），用Nginx就完全可以了，如果机器也不少，可以用DNS轮询，LVS所耗费的机器还是比较 多的；大型网站或者重要的服务，机器不发愁的时候，要多多考虑利用LVS</p>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/12/25/408014.html" title="permalink">2013-12-25 12:34</a> ivaneeo 阅读(4508) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/12/25/408014.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=408014">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=408014">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl90_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/12/25/408013.html">HaProxy的负载均衡策略</a> 
        </div> 
        <div class="postText"> 
         <div>
          <div id="blog_content"> 
           <p>roundrobin &nbsp;Each server is used in turns, according to their weights.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;This is the smoothest and fairest algorithm when the server's<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;processing time remains equally distributed. This algorithm<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;is dynamic, which means that server weights may be adjusted<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;on the fly for slow starts for instance. It is limited by<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;design to 4128 active servers per backend. Note that in some<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;large farms, when a server becomes up after having been down<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for a very short time, it may sometimes take a few hundreds<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;requests for it to be re-integrated into the farm and start<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;receiving traffic. This is normal, though very rare. It is<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;indicated here in case you would have the chance to observe<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;it, so that you don't worry.<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;roundrobin:每个server根据权重依次被轮询，</p> 
           <div>
            这个算法是动态的，意味着
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;server的权重可以实时地被调整。对于每个haproxy的backend servers的数目
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;而言被限制在4128个活跃数目之内。
            <br />
            <br />
            <br /> &nbsp; &nbsp; &nbsp;static-rr &nbsp; Each server is used in turns, according to their weights.
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;This algorithm is as similar to roundrobin except that it is
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;static, which means that changing a server's weight on the
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fly will have no effect. On the other hand, it has no design
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;limitation on the number of servers, and when a server goes
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;up, it is always immediately reintroduced into the farm, once
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the full map is recomputed. It also uses slightly less CPU to
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;run (around -1%).
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;静态roundrobin(static-rr):跟roundrobin类似，唯一的区别是不可以动态实时
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;server权重和backend 的server数目没有上限。
            <br />
            <br /> &nbsp; &nbsp; &nbsp;leastconn &nbsp; The server with the lowest number of connections receives the
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;connection. Round-robin is performed within groups of servers
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;of the same load to ensure that all servers will be used. Use
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;of this algorithm is recommended where very long sessions are
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;expected, such as LDAP, SQL, TSE, etc... but is not very well
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;suited for protocols using short sessions such as HTTP. This
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;algorithm is dynamic, which means that server weights may be
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;adjusted on the fly for slow starts for instance.
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;最小连接数目负载均衡策略（leastconn）：round-robin适合于各个server负载相同的情况。
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;最小连接数目算法适合于长时间会话，如LDAP，SQL，TSE，但是并不适合于HTTP短连接的协议。
            <br />
            <br /> &nbsp; &nbsp; &nbsp;source &nbsp; &nbsp; &nbsp;The source IP address is hashed and divided by the total
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;weight of the running servers to designate which server will
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;receive the request. This ensures that the same client IP
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;address will always reach the same server as long as no
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;server goes down or up. If the hash result changes due to the
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;number of running servers changing, many clients will be
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;directed to a different server. This algorithm is generally
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used in TCP mode where no cookie may be inserted. It may also
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;be used on the Internet to provide a best-effort stickiness
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;to clients which refuse session cookies. This algorithm is
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;static by default, which means that changing a server's
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;weight on the fly will have no effect, but this can be
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;changed using &quot;hash-type&quot;.
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;源IP hash散列调度：将源ip地址进行hash，再根据hasn求模或者一致性hash定位到
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hash表中的server上。相同的ip地址的请求被分发到同一个server上。但当server的数量变化时，
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;来自于同一client的请求可能会被分发到不同的server上。这个算法通常用在没有cookie的tcp模式下。
            <br />
            <br /> &nbsp; &nbsp; &nbsp;uri &nbsp; &nbsp; &nbsp; &nbsp; The left part of the URI (before the question mark) is hashed
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;and divided by the total weight of the running servers. The
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;result designates which server will receive the request. This
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ensures that a same URI will always be directed to the same
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;server as long as no server goes up or down. This is used
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with proxy caches and anti-virus proxies in order to maximize
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the cache hit rate. Note that this algorithm may only be used
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;in an HTTP backend. This algorithm is static by default,
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;which means that changing a server's weight on the fly will
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;have no effect, but this can be changed using &quot;hash-type&quot;.
            <br />
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;This algorithm support two optional parameters &quot;len&quot; and
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;depth&quot;, both followed by a positive integer number. These
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;options may be helpful when it is needed to balance servers
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;based on the beginning of the URI only. The &quot;len&quot; parameter
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;indicates that the algorithm should only consider that many
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;characters at the beginning of the URI to compute the hash.
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Note that having &quot;len&quot; set to 1 rarely makes sense since most
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;URIs start with a leading &quot;/&quot;.
            <br />
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;The &quot;depth&quot; parameter indicates the maximum directory depth
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;to be used to compute the hash. One level is counted for each
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;slash in the request. If both parameters are specified, the
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;evaluation stops when either is reached.
            <br />
            <br /> &nbsp; &nbsp; &nbsp;url_param &nbsp; The URL parameter specified in argument will be looked up in
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the query string of each HTTP GET request.
            <br />
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;If the modifier &quot;check_post&quot; is used, then an HTTP POST
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;request entity will be searched for the parameter argument,
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;when it is not found in a query string after a question mark
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;('?') in the URL. Optionally, specify a number of octets to
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wait for before attempting to search the message body. If the
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;entity can not be searched, then round robin is used for each
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;request. For instance, if your clients always send the LB
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;parameter in the first 128 bytes, then specify that. The
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;default is 48. The entity data will not be scanned until the
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;required number of octets have arrived at the gateway, this
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;is the minimum of: (default/max_wait, Content-Length or first
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;chunk length). If Content-Length is missing or zero, it does
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;not need to wait for more data than the client promised to
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;send. When Content-Length is present and larger than
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;max_wait&gt;, then waiting is limited to &lt;max_wait&gt; and it is
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;assumed that this will be enough data to search for the
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;presence of the parameter. In the unlikely event that
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Transfer-Encoding: chunked is used, only the first chunk is
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;scanned. Parameter values separated by a chunk boundary, may
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;be randomly balanced if at all.
            <br />
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;If the parameter is found followed by an equal sign ('=') and
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;a value, then the value is hashed and divided by the total
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;weight of the running servers. The result designates which
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;server will receive the request.
            <br />
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;This is used to track user identifiers in requests and ensure
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that a same user ID will always be sent to the same server as
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;long as no server goes up or down. If no value is found or if
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the parameter is not found, then a round robin algorithm is
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;applied. Note that this algorithm may only be used in an HTTP
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;backend. This algorithm is static by default, which means
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that changing a server's weight on the fly will have no
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;effect, but this can be changed using &quot;hash-type&quot;.
            <br />
            <br /> &nbsp; &nbsp; &nbsp;hdr(name) &nbsp; The HTTP header &lt;name&gt; will be looked up in each HTTP request.
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Just as with the equivalent ACL 'hdr()' function, the header
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;name in parenthesis is not case sensitive. If the header is
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;absent or if it does not contain any value, the roundrobin
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;algorithm is applied instead.
            <br />
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;An optional 'use_domain_only' parameter is available, for
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;reducing the hash algorithm to the main domain part with some
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;specific headers such as 'Host'. For instance, in the Host
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;value &quot;
            <a target="_blank" href="http://haproxy.1wt.eu/">haproxy.1wt.eu</a> &quot;, only &quot;1wt&quot; will be considered.
            <br />
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;This algorithm is static by default, which means that
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;changing a server's weight on the fly will have no effect,
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;but this can be changed using &quot;hash-type&quot;.
            <br />
            <br /> &nbsp; &nbsp; &nbsp;rdp-cookie
            <br /> &nbsp; &nbsp; &nbsp;rdp-cookie(name)
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;The RDP cookie &lt;name&gt; (or &quot;mstshash&quot; if omitted) will be
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;looked up and hashed for each incoming TCP request. Just as
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with the equivalent ACL 'req_rdp_cookie()' function, the name
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;is not case-sensitive. This mechanism is useful as a degraded
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;persistence mode, as it makes it possible to always send the
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;same user (or the same session ID) to the same server. If the
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cookie is not found, the normal roundrobin algorithm is
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used instead.
            <br />
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Note that for this to work, the frontend must ensure that an
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RDP cookie is already present in the request buffer. For this
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;you must use 'tcp-request content accept' rule combined with
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;a 'req_rdp_cookie_cnt' ACL.
            <br />
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;This algorithm is static by default, which means that
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;changing a server's weight on the fly will have no effect,
            <br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;but this can be changed us
           </div> 
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/12/25/408013.html" title="permalink">2013-12-25 12:32</a> ivaneeo 阅读(215) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/12/25/408013.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=408013">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=408013">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl91_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/12/22/407867.html">mariadb集群负载</a> 
        </div> 
        <div class="postText">
          1.安装mariadb on ubuntu
         <br />
         <div>
          http://blog.secaserver.com/2013/07/install-mariadb-galera-cluster-ubuntu/
          <br />
          <br />3 在服务器上用mysql -h 192.168.0.1 -u root -p mysql命令登录mysql数据库 
          <br />
          <br />然后用grant命令下放权限。 
          <br />
          <br />GRANT ALL PRIVILEGES ON *.* TO root@localhost IDENTIFIED BY 'root-password' WITH GRANT OPTION; 
          <br />
          <br />GRANT ALL PRIVILEGES ON *.* TO root@127.0.0.1 IDENTIFIED BY 'root-password' WITH GRANT OPTION; 
          <br />
          <br />GRANT ALL PRIVILEGES ON *.* TO root@'%' IDENTIFIED BY 'root-password' WITH GRANT OPTION; 
          <br />
          <br />例如： 
          <br /> GRANT&nbsp;&nbsp; ALL&nbsp;&nbsp; PRIVILEGES&nbsp;&nbsp; ON&nbsp;&nbsp; *.*&nbsp;&nbsp; TO&nbsp;&nbsp; root@'%'&nbsp;&nbsp; identified&nbsp;&nbsp; by&nbsp;&nbsp; '123456'&nbsp;&nbsp; 
          <br />
          <br />注意：自己根据情况修改以上命令中的 “用户”“ip地址”“密码”。&nbsp;
          <br />
          <br />2 安装和配置haproxy
          <br />
          <pre>option mysql-check [ user &lt;username&gt; ]   <br /><span style="font-family: verdana, 'courier new';"> USE mysql;       INSERT INTO user (Host,User) values ('&lt;ip_of_haproxy&gt;','&lt;username&gt;');       FLUSH PRIVILEGES</span>heck <br /><br />only consists in parsing the Mysql Handshake Initialisation packet or   Error packet, we don't send anything in this mode. It was reported that it   can generate lockout if check is too frequent and/or if there is not enough   traffic. In fact, you need in this case to check MySQL &quot;max_connect_errors&quot;   value as if a connection is established successfully within fewer than MySQL   &quot;max_connect_errors&quot; attempts after a previous connection was interrupted,   the error count for the host is cleared to zero. If HAProxy's server get   blocked, the &quot;FLUSH HOSTS&quot; statement is the only way to unblock it.<br /><br />配置：<br />
           <div>
            # this config needs haproxy-1.1.28 or haproxy-1.2.1  global         
            <br />log 127.0.0.1   
            <br />local0 info    
            <br />#日志相关         
            <br />log 127.0.0.1   
            <br />local1 notice         
            <br />maxconn 4096         
            <br />daemon         
            <br />#debug         
            <br />#quiet  defaults        
            <br /> log     global         mode    http         #option httplog         option  dontlognull         retries 3         option redispatch         maxconn         2000         contimeout      5000         clitimeout      50000         srvtimeout      50000  listen  mysql         bind 0.0.0.0:3333   #代理端口         mode tcp              #模式 TCP         option mysql-check user haproxy #mysql健康检查  root为mysql登录用户名         balance roundrobin            #调度算法         server mysql1 172.20.21.1:3306 weight 1 check  inter 1s rise 2 fall 2         server mysql2 172.20.21.2:3306 weight 1 check  inter 1s rise 2 fall 2         server mysql3 172.20.21.3:3306 weight 1 check  inter 1s rise 2 fall 2  listen stats :1936     mode http     stats enable     stats hide-version     stats realm Haproxy\ Statistics     stats uri /     stats auth admin:admin
           </div></pre>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/12/22/407867.html" title="permalink">2013-12-22 02:57</a> ivaneeo 阅读(457) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/12/22/407867.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=407867">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=407867">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl92_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/12/16/407652.html">RabbitMQ Cluster</a> 
        </div> 
        <div class="postText"> 
         <div>
          <h3> 如何安bRabbitMQ Cluster </h3> 
          <div> 
          </div> 
          <div style="clear: both;"> 
           <a href="http://4.bp.blogspot.com/-v2DvygLxq9E/T_wnN7hBjoI/AAAAAAAAOho/i-NkWnPh_sE/s1600/1298763156493336.png" style="margin-left: 1em; margin-right: 1em;"><img src="http://4.bp.blogspot.com/-v2DvygLxq9E/T_wnN7hBjoI/AAAAAAAAOho/i-NkWnPh_sE/s1600/1298763156493336.png" alt="" border="0" /></a>
          </div> 
          <br /> 建立yh境cy系y是最花rg的，趁著今天重新安b一MRabbitMQ 的yh境，把所有的步E和序都整理起戆伞
          <br /> 
          <br /> 
          <h3> <span style="font-size: large;"><strong><u>安bRabbitMQ</u></strong></span></h3> 
          <div>
           <h3>Our APT repository</h3> 
           <p>To use our APT repository:</p> 
           <ol>
            <li> Add the following line to your <span "="">/etc/apt/sources.list</span>: <pre>deb http://www.rabbitmq.com/debian/ testing main</pre> (Please note that the word <span "="">testing</span> in this line refers to the state of our release of RabbitMQ, not any particular Debian distribution. You can use it with Debian stable, testing or unstable, as well as with Ubuntu. We describe the release as &quot;testing&quot; to emphasise that we release somewhat frequently.) </li>
            <li> (optional) To avoid warnings about unsigned packages, add our <a href="http://www.rabbitmq.com/rabbitmq-signing-key-public.asc">public key</a> to your trusted key list using <span "="">apt-key(8)</span>: <pre>wget http://www.rabbitmq.com/rabbitmq-signing-key-public.asc sudo apt-key add rabbitmq-signing-key-public.asc</pre> </li>
            <li> Run <span "="">apt-get update</span>. </li>
            <li> Install packages as usual; for instance, <pre>sudo apt-get install rabbitmq-server</pre></li>
           </ol>
          </div>
          <code> </code> 
          <br /> 
          <br /> 
          <h3> <u><strong><span style="font-size: large;">O定Cluster</span></strong></u></h3> 
          <br /> 最易的方法就是先樱cluster master nodea生 /var/lib/rabbitmq/.erlang.cookie @份文件，然後再把@份文件copy 到 每一cluster nodel的目下面去，接下砭⒖RabbitMQ - 
          <a href="http://www.rabbitmq.com/clustering.html#creating" target="_blank">create cluster</a>@份文件，例事先建立3台的cluster。
          <br /> &nbsp; 
          <br /> 1. 用刻rabbitMQ
          <br /> 
          <code> # <span style="color: #e06666;">rabbit1$ rabbitmq-server -detached</span><br /> # <span style="color: #e06666;">rabbit2$ rabbitmq-server -detached</span><br /> # <span style="color: #e06666;">rabbit3$ rabbitmq-server -detached</span><br /> </code> 
          <br /> 2. _J每一台rabbitmq 是否是standaloneB
          <br /> 
          <br /> 
          <code> # <span style="color: #e06666;">rabbit1$ rabbitmqctl cluster_status</span><br /> Cluster status of node rabbit@rabbit1 ...<br /> [{nodes,[{disc,[rabbit@rabbit1]}]},{running_nodes,[rabbit@rabbit1]}]<br /> ...done.<br /> # <span style="color: #e06666;">rabbit2$ rabbitmqctl cluster_status</span><br /> Cluster status of node rabbit@rabbit2 ...<br /> [{nodes,[{disc,[rabbit@rabbit2]}]},{running_nodes,[rabbit@rabbit2]}]<br /> ...done.<br /> # <span style="color: #e06666;">rabbit3$ rabbitmqctl cluster_status</span><br /> Cluster status of node rabbit@rabbit3 ...<br /> [{nodes,[{disc,[rabbit@rabbit3]}]},{running_nodes,[rabbit@rabbit3]}]<br /> ...done.</code> 
          <br /> 3. 依序加入cluster
          <br /> 
          <br /> 
          <code> rabbit2$ <span style="color: #e06666;">rabbitmqctl stop_app</span> <br /> Stopping node rabbit@rabbit2 ...done. <br /> rabbit2$ <span style="color: #ea9999;">rabbitmqctl reset </span><br /> Resetting node rabbit@rabbit2 ...done. <br /> rabbit2$ <span style="color: #e06666;">rabbitmqctl cluster rabbit@rabbit1</span> <br /> Clustering node rabbit@rabbit2 with [rabbit@rabbit1] ...done. <br /> rabbit2$ <span style="color: #e06666;">rabbitmqctl start_app</span> <br /> Starting node rabbit@rabbit2 ...done.&nbsp;</code>
          <br /> 
          <br /> 4. _Jcluster status是否正_加入
          <br /> 
          <br /> 
          <code> rabbit1$ <span style="color: #e06666;">rabbitmqctl cluster_status</span><br /> Cluster status of node rabbit@rabbit1 ...<br /> [{nodes,[{disc,[rabbit@rabbit1]},{ram,[rabbit@rabbit2]}]},<br /> {running_nodes,[rabbit@rabbit2,rabbit@rabbit1]}]<br /> ...done.<br /> rabbit2$ <span style="color: #e06666;">rabbitmqctl cluster_status</span><br /> Cluster status of node rabbit@rabbit2 ...<br /> [{nodes,[{disc,[rabbit@rabbit1]},{ram,[rabbit@rabbit2]}]},<br /> {running_nodes,[rabbit@rabbit1,rabbit@rabbit2]}]<br /> ...done.<br /> </code> 
          <br /> 
          <br /> 
          <h3> <span style="font-size: large;"><strong><u>O定Web Management Plugin</u></strong></span></h3> 
          <br /> ⒖ rabbitmq - 
          <a href="http://www.rabbitmq.com/management.html" target="_blank">Management Plugin</a>，重c是要在Cluster node的每一台都要安b@plugin
          <br /> 
          <code> # rabbitmq-plugins enable rabbitmq_management&nbsp;</code>
          <br /> 安b好以後，要得重⒎ 
          <br /> 
          <code> # service rabbitmq-server restart </code> 
          <br /> 
          <br /> O定好就可以B到http://server-name:55672/#/ 看看web 介面有]有起恚AO的ぬ密a都是guest，如果是炔y那]PS，如果是要B到外面，一定得要改ぬ密a和permission。
          <br /> 
          <br /> 
          <br /> 
          <h3> <span style="font-size: large;"><u><strong>O定ぬ</strong></u></span></h3> 
          <br /> 最後我可以O定一vhost 以及@vhost的ぬ密a和嘞
          <br /> 
          <br /> 
          <code> #rabbitmqctl add_vhost /demo<br /> #rabbitmqctl add_user demo mypass<br /> #rabbitmqctl set_permissions -p /demo demo &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;<br /><br />启动HAProxy<br />
           <div>
            <div>
             /etc/default/haproxy
             <br />
             <div>
              # Set ENABLED to 1 if you want the init script to start haproxy.
              <br />ENABLED=1
             </div>
             <br />启动日志
             <br />
             <div>
              /etc/rsyslog.d
              <br />
              <br />添加文件haproxy.conf:
              <br />
              <div>
               $ModLoad imudp
               <br />$UDPServerRun 514
               <br />
               <br />local0.*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -/var/log/haproxy-0.log
               <br />local1.*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -/var/log/haproxy-1.log
              </div>
             </div>
            </div>
           </div><br />HAProxy配置<br />
           <div>
            <div>
             # this config needs haproxy-1.1.28 or haproxy-1.2.1
             <br />
             <br />global
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log 127.0.0.1&nbsp;&nbsp; local0
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log 127.0.0.1&nbsp;&nbsp; local1 notice
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #log loghost&nbsp;&nbsp;&nbsp; local0 info
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxconn 4096
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #chroot /usr/share/haproxy
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user haproxy
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; group haproxy
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; daemon
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #debug
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #quiet
             <br />
             <br />defaults
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log&nbsp;&nbsp;&nbsp;&nbsp; global
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mode&nbsp;&nbsp;&nbsp; tcp
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; option&nbsp; tcplog
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; option&nbsp; dontlognull
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; retries 3
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; option redispatch
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxconn 2000
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contimeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5000
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clitimeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50000
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; srvtimeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50000
             <br />
             <br />listen rabbitmq_cluster 0.0.0.0:5678
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mode tcp
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; balance roundrobin
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; server&nbsp;&nbsp; rabbit65 192.168.1.200:5672 check inter 2000 rise 2 fall 3
             <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; server&nbsp;&nbsp; rabbit66 192.168.1.201:5672 check inter 2000 rise 2 fall 3
             <br />listen stats :1936
             <br />&nbsp;&nbsp;&nbsp; mode http
             <br />&nbsp;&nbsp;&nbsp; stats enable
             <br />&nbsp;&nbsp;&nbsp; stats hide-version
             <br />&nbsp;&nbsp;&nbsp; stats realm Haproxy\ Statistics
             <br />&nbsp;&nbsp;&nbsp; stats uri /
             <br />&nbsp;&nbsp;&nbsp; stats auth admin:admin
            </div>
           </div></code>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/12/16/407652.html" title="permalink">2013-12-16 19:11</a> ivaneeo 阅读(371) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/12/16/407652.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=407652">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=407652">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl93_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/11/15/406398.html">Linux下高并发socket最大连接数(转)</a> 
        </div> 
        <div class="postText"> 
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　<a id="k530832709" href="http://www.chinabyte.com/keyword/Linux/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">Linux</a>下高并发socket最大连接数所受的限制问题</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　1、修改用户进程可打开文件数限制</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　在Linux平台上，无论编写客户端程序还是服务端程序，在进行高并发TCP连接处理时，最高的并发数量都要受到系统对用户单一进程同时可打开文件数量的限制(这是因为系统为每个TCP连接都要创建一个socket句柄，每个socket句柄同时也是一个文件句柄)。可使用ulimit命令查看系统允许当前用户进程打开的文件数限制：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　[speng@as4 ~]$ ulimit -n</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　1024</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　这表示当前用户的每个进程最多允许同时打开1024个文件，这1024个文件中还得除去每个进程必然打开的标准输入，标准输出，标准错误，<a id="k530768927" href="http://server.chinabyte.com/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">服务器</a>监听 socket,进程间通讯的<a id="k530834966" href="http://www.chinabyte.com/keyword/unix/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">unix</a>域socket等文件，那么剩下的可用于客户端socket连接的文件数就只有大概1024-10=1014个左右。也就是说缺省情况下，基于Linux的通讯程序最多允许同时1014个TCP并发连接。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　对于想支持更高数量的TCP并发连接的通讯处理程序，就必须修改Linux对当前用户的进程同时打开的文件数量的软限制(soft limit)和硬限制(hardlimit)。其中软限制是指Linux在当前系统能够承受的范围内进一步限制用户同时打开的文件数;硬限制则是根据系统硬件资源状况(主要是系统内存)计算出来的系统最多可同时打开的文件数量。通常软限制小于或等于硬限制。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　修改上述限制的最简单的办法就是使用ulimit命令：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　[speng@as4 ~]$ ulimit -n</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　上述命令中，在中指定要设置的单一进程允许打开的最大文件数。如果系统回显类似于&quot;Operation notpermitted&quot;之类的话，说明上述限制修改失败，实际上是因为在中指定的数值超过了Linux系统对该用户打开文件数的软限制或硬限制。因此，就需要修改Linux系统对用户的关于打开文件数的软限制和硬限制。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　第一步，修改/etc/security/limits.conf文件，在文件中添加如下行：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　speng soft nofile 10240</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　speng hard nofile 10240</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　其中speng指定了要修改哪个用户的打开文件数限制，可用'*'号表示修改所有用户的限制;</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　soft或hard指定要修改软限制还是硬限制;10240则指定了想要修改的新的限制值，即最大打开文件数(请注意软限制值要小于或等于硬限制)。修改完后保存文件。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　第二步，修改/etc/pam.d/login文件，在文件中添加如下行：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　<a id="k531803120" href="http://www.chinabyte.com/keyword/session/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">session</a>&nbsp;required /lib/security/pam_limits.so 这是告诉Linux在用户完成系统登录后，应该调用pam_limits.so<a id="k530847329" href="http://www.chinabyte.com/keyword/%E6%A8%A1%E5%9D%97/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">模块</a>来设置系统对该用户可使用的各种资源数量的最大限制(包括用户可打开的最大文件数限制)，而pam_limits.so模块就会从/etc/security/limits.conf文件中读取配置来设置这些限制值。修改完后保存此文件。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　第三步，查看Linux系统级的最大打开文件数限制，使用如下命令：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　[speng@as4 ~]$ cat /proc/sys/<a id="k531802501" href="http://www.chinabyte.com/keyword/fs/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">fs</a>/file-max</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　12158</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　这表明这台Linux系统最多允许同时打开(即包含所有用户打开文件数总和)12158个文件，是Linux系统级硬限制，所有用户级的打开文件数限制都不应超过这个数值。通常这个系统级硬限制是Linux系统在启动时根据系统硬件资源状况计算出来的最佳的最大同时打开文件数限制，如果没有特殊需要，不应该修改此限制，除非想为用户级打开文件数限制设置超过此限制的值。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　修改此硬限制的方法是修改/etc/rc.local脚本，在脚本中添加如下行：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　echo 22158 &gt; /proc/sys/fs/file-max</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　这是让Linux在启动完成后强行将系统级打开文件数硬限制设置为22158.修改完后保存此文件。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　完成上述步骤后重启系统，一般情况下就可以将Linux系统对指定用户的单一进程允许同时打开的最大文件数限制设为指定的数值。如果重启后用 ulimit-n命令查看用户可打开文件数限制仍然低于上述步骤中设置的最大值，这可能是因为在用户登录脚本/etc/profile中使用ulimit -n命令已经将用户可同时打开的文件数做了限制。由于通过ulimit-n修改系统对用户可同时打开文件的最大数限制时，新修改的值只能小于或等于上次 ulimit-n设置的值，因此想用此命令增大这个限制值是不可能的。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　所以，如果有上述问题存在，就只能去打开/etc/profile脚本文件，在文件中查找是否使用了ulimit-n限制了用户可同时打开的最大文件数量，如果找到，则删除这行命令，或者将其设置的值改为合适的值，然后保存文件，用户退出并重新登录系统即可。 通过上述步骤，就为支持高并发TCP连接处理的通讯处理程序解除关于打开文件数量方面的系统限制。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　2、修改网络内核对TCP连接的有关限制</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　在Linux上编写支持高并发TCP连接的客户端通讯处理程序时，有时会发现尽管已经解除了系统对用户同时打开文件数的限制，但仍会出现并发TCP连接数增加到一定数量时，再也无法成功建立新的TCP连接的现象。出现这种现在的原因有多种。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　第一种原因可能是因为Linux网络内核对本地端口号范围有限制。此时，进一步分析为什么无法建立TCP连接，会发现问题出在connect()调用返回失败，查看系统错误提示消息是&quot;Can't assign requestedaddress&quot;.同时，如果在此时用tcpdump工具监视网络，会发现根本没有TCP连接时客户端发SYN包的网络流量。这些情况说明问题在于本地Linux系统内核中有限制。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　其实，问题的根本原因在于Linux内核的<a id="k530840217" href="http://www.chinabyte.com/keyword/TCP/IP/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">TCP/IP</a>协议实现模块对系统中所有的客户端TCP连接对应的本地端口号的范围进行了限制(例如，内核限制本地端口号的范围为1024~32768之间)。当系统中某一时刻同时存在太多的TCP客户端连接时，由于每个TCP客户端连接都要占用一个唯一的本地端口号(此端口号在系统的本地端口号范围限制中)，如果现有的TCP客户端连接已将所有的本地端口号占满，则此时就无法为新的TCP客户端连接分配一个本地端口号了，因此系统会在这种情况下在connect()调用中返回失败，并将错误提示消息设为&quot;Can't assignrequested<a id="k531804915" href="http://www.chinabyte.com/keyword/address/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">&nbsp;address</a>&quot;.</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　有关这些控制逻辑可以查看Linux内核源代码，以linux2.6内核为例，可以查看tcp_<a id="k530835814" href="http://www.chinabyte.com/keyword/IPv4/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">ipv4</a>.c文件中如下函数：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　static int tcp_v4_hash_connect(struct sock *sk)</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　请注意上述函数中对变量sysctl_local_port_range的访问控制。变量sysctl_local_port_range的初始化则是在tcp.c文件中的如下函数中设置：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　void __init tcp_init(void)</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　内核编译时默认设置的本地端口号范围可能太小，因此需要修改此本地端口范围限制。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　第一步，修改/etc/sysctl.conf文件，在文件中添加如下行：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.ip_local_port_range = 1024 65000</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　这表明将系统对本地端口范围限制设置为1024~65000之间。请注意，本地端口范围的最小值必须大于或等于1024;而端口范围的最大值则应小于或等于65535.修改完后保存此文件。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　第二步，执行sysctl命令：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　[speng@as4 ~]$ sysctl -p</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　如果系统没有错误提示，就表明新的本地端口范围设置成功。如果按上述端口范围进行设置，则理论上单独一个进程最多可以同时建立60000多个TCP客户端连接。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　第二种无法建立TCP连接的原因可能是因为Linux网络内核的IP_TABLE<a id="k530831307" href="http://www.chinabyte.com/keyword/%E9%98%B2%E7%81%AB%E5%A2%99/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">防火墙</a>对最大跟踪的TCP连接数有限制。此时程序会表现为在 connect()调用中阻塞，如同死机，如果用tcpdump工具监视网络，也会发现根本没有TCP连接时客户端发SYN包的网络流量。由于 IP_TABLE防火墙在内核中会对每个TCP连接的状态进行跟踪，跟踪信息将会放在位于内核内存中的conntrackdatabase中，这个<a id="k530831516" href="http://soft.chinabyte.com/database/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">数据库</a>的大小有限，当系统中存在过多的TCP连接时，数据库容量不足，IP_TABLE无法为新的TCP连接建立跟踪信息，于是表现为在connect()调用中阻塞。此时就必须修改内核对最大跟踪的TCP连接数的限制，方法同修改内核对本地端口号范围的限制是类似的：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　第一步，修改/etc/sysctl.conf文件，在文件中添加如下行：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.ip_conntrack_max = 10240</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　这表明将系统对最大跟踪的TCP连接数限制设置为10240.请注意，此限制值要尽量小，以节省对内核内存的占用。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　第二步，执行sysctl命令：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　[speng@as4 ~]$ sysctl -p</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　如果系统没有错误提示，就表明系统对新的最大跟踪的TCP连接数限制修改成功。如果按上述参数进行设置，则理论上单独一个进程最多可以同时建立10000多个TCP客户端连接。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　3、使用支持高并发网络I/O的编程技术在Linux上编写高并发TCP连接应用程序时，必须使用合适的网络I/O技术和I/O事件分派机制。可用的I/O技术有同步I/O,非阻塞式同步I/O(也称反应式I/O)，以及异步I/O.在高TCP并发的情形下，如果使用同步I/O,这会严重阻塞程序的运转，除非为每个TCP连接的I/O创建一个线程。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　但是，过多的线程又会因系统对线程的调度造成巨大开销。因此，在高TCP并发的情形下使用同步 I/O是不可取的，这时可以考虑使用非阻塞式同步I/O或异步I/O.非阻塞式同步I/O的技术包括使用select()，poll()，epoll等机制。异步I/O的技术就是使用AIO.</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　从I/O事件分派机制来看，使用select()是不合适的，因为它所支持的并发连接数有限(通常在1024个以内)。如果考虑性能，poll()也是不合适的，尽管它可以支持的较高的TCP并发数，但是由于其采用&quot;轮询&quot;机制，当并发数较高时，其运行效率相当低，并可能存在I/O事件分派不均，导致部分TCP连接上的I/O出现&quot;饥饿&quot;现象。而如果使用epoll或AIO,则没有上述问题(早期Linux内核的AIO技术实现是通过在内核中为每个 I/O请求创建一个线程来实现的，这种实现机制在高并发TCP连接的情形下使用其实也有严重的性能问题。但在最新的Linux内核中，AIO的实现已经得到改进)。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　综上所述，在开发支持高并发TCP连接的Linux应用程序时，应尽量使用epoll或AIO技术来实现并发的TCP连接上的I/O控制，这将为提升程序对高并发TCP连接的支持提供有效的I/O保证。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　内核参数sysctl.conf的优化</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　/etc/sysctl.conf 是用来控制linux网络的配置文件，对于依赖网络的程序(如<a id="k530844826" href="http://www.chinabyte.com/keyword/web%E6%9C%8D%E5%8A%A1%E5%99%A8/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">web服务器</a>和cache服务器)非常重要，RHEL默认提供的最好调整。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　推荐配置(把原/etc/sysctl.conf内容清掉，把下面内容复制进去)：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.ip_local_port_range = 1024 65536</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.core.rmem_max=16777216</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.core.wmem_max=16777216</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_rmem=4096 87380 16777216</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_wmem=4096 65536 16777216</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_fin_timeout = 10</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_tw_recycle = 1</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_timestamps = 0</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_window_scaling = 0</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_sack = 0</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.core.netdev_max_backlog = 30000</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_no_metrics_save=1</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.core.somaxconn = 262144</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_syncookies = 0</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_max_orphans = 262144</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_max_syn_backlog = 262144</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_synack_retries = 2</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　net.ipv4.tcp_syn_retries = 2</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　这个配置参考于cache服务器varnish的推荐配置和SunOne<a id="k531123022" href="http://www.chinabyte.com/keyword/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E7%BB%9F/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">&nbsp;服务器系统</a>优化的推荐配置。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　varnish调优推荐配置的地址为：http://varnish.projects.linpro.no/wiki/Performance</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　不过varnish推荐的配置是有问题的，实际运行表明&quot;net.ipv4.tcp_fin_timeout = 3&quot;的配置会导致页面经常打不开;并且当网友使用的是IE6<a id="k530831780" href="http://www.chinabyte.com/keyword/%E6%B5%8F%E8%A7%88%E5%99%A8/" target="_blank" style="text-decoration: none; color: #333333; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #d30010;">浏览器</a>时，访问网站一段时间后，所有网页都会</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　打不开，重启浏览器后正常。可能是国外的网速快吧，我们国情决定需要调整&quot;net.ipv4.tcp_fin_timeout = 10&quot;,在10s的情况下，一切正常(实际运行结论)。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　修改完毕后，执行：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　/sbin/sysctl -p /etc/sysctl.conf</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　/sbin/sysctl -w net.ipv4.route.flush=1</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　命令生效。为了保险起见，也可以reboot系统。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　调整文件数：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　linux系统优化完网络必须调高系统允许打开的文件数才能支持大的并发，默认1024是远远不够的。</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　执行命令：</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　Shell代码</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　echo ulimit -HSn 65536 》 /etc/rc.local</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　echo ulimit -HSn 65536 》/root/.bash_profile</p>
         <p style="margin: 0px 0px 26px; padding: 0pt; border: 0px; font-size: 16px; line-height: 28px; font-family: Verdana, Arial, Helvetica, sans-serif, 'microsoft yahei'; color: #555555;">　　ulimit -HSn 65536</p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/11/15/406398.html" title="permalink">2013-11-15 20:00</a> ivaneeo 阅读(317) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/11/15/406398.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=406398">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=406398">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl94_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/11/15/406397.html">Ubuntu 报too many open files错误解决方案(转)</a> 
        </div> 
        <div class="postText"> 
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="font-size: 18px;">如何设置呢，官方是这样的：</span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><strong><span style="font-size: 18px;">第一步：配置/etc/security/limits.conf</span></strong></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"></p>
         <pre style="white-space: pre-wrap; word-wrap: break-word; color: #333333; background-color: #eeeeee; border: 1px dashed #666666; padding: 15px 20px; overflow: auto; line-height: 15px;"><span style="font-size: 18px;">sudo vim /etc/security/limits.conf 文件尾追加  * hard nofile 40960 * soft nofile 40960</span></pre>
         <span style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff;"><span style="font-size: 18px;">4096可以自己设置，四列参数的设置见英文，简单讲一下：</span></span>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="font-size: 18px;">第一列，可以是用户，也可以是组，要用@group这样的语法，也可以是通配符如*%</span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="font-size: 18px;">第二列，两个值：hard，硬限制，soft，软件限制，一般来说soft要比hard小，hard是底线，决对不能超过，超过soft报警，直到hard数</span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="font-size: 18px;">第三列，见列表，打开文件数是nofile</span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="font-size: 18px;">第四列，数量，这个也不能设置太大</span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="font-size: 18px;"><br /></span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><strong><span style="font-size: 18px;">第二步：/etc/pam.d/su(官方)或/etc/pam.d/common-session(网络)</span></strong></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"></p>
         <pre style="white-space: pre-wrap; word-wrap: break-word; color: #333333; background-color: #eeeeee; border: 1px dashed #666666; padding: 15px 20px; overflow: auto; line-height: 15px;"><span style="font-size: 18px;">sudo vim /etc/pam.d/su 将 pam_limits.so 这一行注释去掉  重起系统</span></pre>
         <pre style="white-space: pre-wrap; word-wrap: break-word; color: #333333; background-color: #eeeeee; border: 1px dashed #666666; padding: 15px 20px; overflow: auto; line-height: 15px;"><span style="font-size: 18px;">sudo vim /etc/pam.d/common-session 加上以下一行 session required pam_limits.so </span></pre>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="color: #ff0000;"><strong><span style="font-size: 18px;">打开/etc/pam.d/su，发现是包含/etc/pam.d/common-session这个文件的，所以修改哪个文件都应该是可以的</span></strong></span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="color: #ff0000;"><strong><span style="font-size: 18px;">我的修改是在/etc/pam.d/common-session文件中进行的。</span></strong></span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="font-size: 18px;"><br /></span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="font-size: 18px;">官方只到第二步，就重启系统了，没有第三步，好象不行，感觉是不是全是第三步的作用？！</span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><strong><span style="font-size: 18px;">第三步：配置/etc/profile</span></strong></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="font-size: 18px;">最后一行加上</span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"></p>
         <pre style="white-space: pre-wrap; word-wrap: break-word; color: #333333; background-color: #eeeeee; border: 1px dashed #666666; padding: 15px 20px; overflow: auto; line-height: 15px;"><span style="font-size: 18px;">ulimit -SHn 40960</span></pre>
         <span style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; font-size: 18px;"><br /></span>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><span style="font-size: 18px;">重启，ulimit -n 验证，显示40960就没问题了</span></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><br /></p>
         <p style="color: #333333; font-family: Arial; line-height: 26px; background-color: #ffffff; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px;"><strong><span style="font-size: 24px; color: #ff0000;">注意以上三步均是要使用root权限进行修改。</span></strong></p> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/11/15/406397.html" title="permalink">2013-11-15 19:58</a> ivaneeo 阅读(2026) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/11/15/406397.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=406397">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=406397">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl95_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/11/14/406344.html">infinispan linux内核调优</a> 
        </div> 
        <div class="postText"> 
         <div>
          /etc/sysctl.conf
          <br />
          <br />net.core.rmem_default = 25696000
         </div>
         <div>
          net.core.rmem_max = 25696000
         </div>
         <div>
          net.core.wmem_default = 25696000
         </div>
         <div>
          net.core.wmem_max = 25696000
         </div>
         <div>
          net.ipv4.tcp_timestamps = 0
         </div>
         <div>
          net.ipv4.tcp_sack =1
         </div>
         <div>
          net.ipv4.tcp_window_scaling = 1
          <br />
          <br />hotrod方式：
          <br />
          <div>
           nohup ./bin/startServer.sh -r hotrod -l 172.20.21.1 -c ./etc/config-samples/distributed-udp.xml -p 11222 &amp;
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/11/14/406344.html" title="permalink">2013-11-14 17:56</a> ivaneeo 阅读(298) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/11/14/406344.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=406344">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=406344">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl96_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/10/12/404912.html">Single Sign On with OpenSSH and Kerberos</a> 
        </div> 
        <div class="postText"> 
         <div>
          <p>From a convenience perspective, I want to authenticate as infrequently as possible. However, security requirements suggest that I should be authenticated for all sorts of services. This means that Single Sign On and forwardable authentication credentials would be useful.</p> 
          <p>Within an individual organisation at least, it is useful and fairly straightforward to have centralised control for authentication services. More and more authorisation and applications services are able to use centralised authentication services such as <a external"="" href="http://en.wikipedia.org/wiki/Kerberos_%28protocol%29">Kerberos</a>.</p> 
          <p>This document will demonstrate how to configure a machine running OpenSSH server to use GSSAPI so that users can log in if they have authorised kerberos tickets. This is not the place for extensive explanations about tickets or how to set up the Key Distribution Center(KDC) in the first place or how to build or install the necessary software on various different unixlike systems. Likely, your distribution's package management system can provide you with what you need.</p> 
          <div id="id1"> 
           <h3>Kerberos</h3> 
           <p>All destination machines should have <cite>/etc/krb5.conf</cite> modified to allow forwardable tickets:</p> 
           <pre>[libdefaults]     default_realm = ALLGOODBITS.ORG     forwardable = TRUE [realms]     ALLGOODBITS.ORG = {                     kdc = kerberos.allgoodbits.org                     } </pre> 
           <p>Using kadmin, create a principal for a user:</p> 
           <pre>kadmin&gt; ank &lt;username&gt;@&lt;REALM&gt; </pre> 
           <p>Here the process differs depending upon whether you're using <a external"="" href="http://www.kerberos.org">MIT Kerberos</a> (probably) or <a external"="" href="http://www.h5l.org">Heimdal</a>.</p> 
           <div id="mit"> 
            <h4>MIT</h4> 
            <p>Create a principal for the host:</p> 
            <pre>kadmin&gt; ank -randkey host/&lt;FQDN&gt;@&lt;REALM&gt; </pre> 
            <p>Extract the key for the host principal to a keytab file and locate it correctly on the ssh server:</p> 
            <pre>kadmin&gt; ktadd -k /tmp/&lt;FQDN&gt;.keytab host/&lt;FQDN&gt; </pre> 
           </div> 
           <div id="heimdal"> 
            <h4>Heimdal</h4> 
            <p>Create a principal for the host:</p> 
            <pre>kadmin&gt; ank -r host/&lt;FQDN&gt;@&lt;REALM&gt; </pre> 
            <p>Extract the key for the host principal to a keytab file and locate it correctly on the ssh server:</p> 
            <pre>kadmin&gt; ext -k /tmp/&lt;FQDN&gt;.keytab host/&lt;FQDN&gt;@&lt;REALM&gt; </pre> 
           </div> 
          </div> 
          <div id="ssh"> 
           <h3>SSH</h3> 
           <p>Then we need to take the keytab file into which you extracted the key for the host principal and copy it to the location on the ssh server where sshd will look for it, probably /etc/krb5.keytab.</p> 
           <p>We need to configure sshd_config(5). The important options start with GSSAPI, not to be confused with the Kerberos options which are merely for KDC-validated password authentication; the GSSAPI method allows authentication and login based upon existing tickets. In other words, the &quot;Kerberos&quot; method requires you to enter your password (again), GSSAPI will allow login based on upon the tickets you already have.</p> 
           <p>sshd_config:</p> 
           <pre>GSSAPIAuthentication yes GSSAPICleanupCredentials yes PermitRootLogin without-password </pre> 
           <p>ssh_config:</p> 
           <pre>GSSAPIAuthentication yes GSSAPIDelegateCredentials yes </pre> 
          </div> 
          <div id="pam"> 
           <h3>PAM</h3> 
           <p>Linux Pluggable Authentication Modules(<a external"="" href="http://www.kernel.org/pub/linux/libs/pam">PAM</a>) provide a common framework for authentication/authorisation for applications.</p> 
           <p>/etc/pam.d/common-account:</p> 
           <pre>account sufficient      pam_krb5.so     use_first_pass </pre> 
           <p>/etc/pam.d/common-auth:</p> 
           <pre>auth    sufficient      pam_krb5.so     use_first_pass </pre> 
           <p>/etc/pam.d/common-password:</p> 
           <pre>password        sufficient      pam_krb5.so </pre> 
           <p>/etc/pam.d/common-session:</p> 
           <pre>session optional      pam_krb5.so </pre> 
           <p>This is sufficient to allow OpenAFS based home directories because although AFS uses Kerberosv4, MIT Kerberos does 5 to 4 ticket conversion on the fly.</p> 
          </div> 
          <div id="troubleshooting"> 
           <h3>Troubleshooting</h3> 
           <ul>
            <li>As with anything concerned with kerberos, make sure you have NTP and DNS working properly before you even start.</li>
            <li><cite>ssh -v</cite> can give you a lot of valuable information.</li>
            <li>read your logs.</li>
           </ul> 
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/10/12/404912.html" title="permalink">2013-10-12 18:12</a> ivaneeo 阅读(171) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/10/12/404912.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=404912">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=404912">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl97_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/10/08/404720.html">infinispan启动</a> 
        </div> 
        <div class="postText"> 
         <div>
          nohup ./bin/startServer.sh -r hotrod -l 172.20.21.3 -c ./etc/config-samples/distributed-udp.xml -p 11222 &amp;
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/10/08/404720.html" title="permalink">2013-10-08 10:49</a> ivaneeo 阅读(233) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/10/08/404720.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=404720">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=404720">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl98_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/10/08/404716.html">Hazelcast River Plugin for ElasticSearch</a> 
        </div> 
        <div class="postText"> 
         <div>
          https://github.com/sksamuel/elasticsearch-river-hazelcast
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/10/08/404716.html" title="permalink">2013-10-08 00:57</a> ivaneeo 阅读(281) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/10/08/404716.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=404716">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=404716">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl99_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/10/04/404680.html">elasticsearch安装配置及中文分词</a> 
        </div> 
        <div class="postText"> 
         <div>
          ElasticSearch是一个基于Lucene构建的开源，分布式，RESTful搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。支持通过HTTP使用JSON进行数据索引。&nbsp; 
          <p><span>　　我们建立一个网站或应用程序，并要添加搜索功能，令我们受打击的是：搜索工作是很难的。我们希望我们的搜索解决方案要快，我们希望 有一个零配置和一个完全免费的搜索模式，我们希望能够简单地使用JSON通过HTTP的索引数据，我们希望我们的搜索服务器始终可用，我们希望能够一台开 始并扩展到数百，我们要实时搜索，我们要简单的多租户，我们希望建立一个云的解决方案。Elasticsearch旨在解决所有这些问题和更多的。</span></p> 
          <h2>安装</h2> 
          <p><span>　　以windows操作系统和ES0.19.7版本为例：</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　①下载elasticsearch-0.19.7.zip</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　②直接解压至某目录，设置该目录为ES_HOME环境变量</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　③安装JDK，并设置JAVA_HOME环境变量</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　④在windows下，运行 %ES_HOME%\bin\elasticsearch.bat即可运行<br /></span></p> 
          <p><strong>分布式搜索elasticsearch单机与服务器环境搭建</strong></p> 
          <div id="article_content"> 
           <p>&nbsp; &nbsp; &nbsp; 先到<a href="http://www.elasticsearch.org/download/">http://www.elasticsearch.org/download/</a><span>下 载最新版的elasticsearch运行包，本文写时最新的是0.19.1，作者是个很勤快的人，es的更新很频繁，bug修复得很快。下载完解开有三 个包:bin是运行的脚本，config是设置文件，lib是放依赖的包。如果你要装插件的话就要多新建一个plugins的文件夹，把插件放到这个文件 夹中。<br /></span></p> 
           <p>1.单机环境：</p> 
           <p>单机版的elasticsearch运行很简单，linux下直接&nbsp;bin/elasticsearch就运行了，windows运行bin/elasticsearch.bat。如果是在局域网中运行elasticsearch集群也是很简单的，只要cluster.name设置一致，并且机器在同一网段下，启动的es会自动发现对方，组成集群。</p> 
           <p>2.服务器环境：</p> 
           <p>如果是在服务器上就可以使用elasticsearch-servicewrapper这个es插件，它支持通过参数，指定是在后台或前台运行es，并且支持启动，停止，重启es服务（默认es脚本只能通过ctrl+c关闭es）。使用方法是到<a href="https://github.com/elasticsearch/elasticsearch-servicewrapper">https://github.com/elasticsearch/elasticsearch-servicewrapper</a>下载service文件夹，放到es的bin目录下。下面是命令集合：<br />bin/service/elasticsearch +<br />console 在前台运行es<br />start 在后台运行es<br />stop 停止es<br />install 使es作为服务在服务器启动时自动启动<br />remove 取消启动时自动启动</p> 
           <p>在service目录下有个elasticsearch.conf配置文件，主要是设置一些java运行环境参数，其中比较重要的是下面的</p> 
           <p>参数：</p> 
           <p>#es的home路径，不用用默认值就可以<br />set.default.ES_HOME=&lt;Path to ElasticSearch Home&gt;</p> 
           <p>#分配给es的最小内存<br />set.default.ES_MIN_MEM=256</p> 
           <p>#分配给es的最大内存<br />set.default.ES_MAX_MEM=1024</p> 
           <p><br /># 启动等待超时时间（以秒为单位）<br />wrapper.startup.timeout=300</p> 
           <p># 关闭等待超时时间（以秒为单位）</p> 
           <p>wrapper.shutdown.timeout=300</p> 
           <p># ping超时时间(以秒为单位)</p> 
           <p>wrapper.ping.timeout=300</p> 
          </div> 
          <h2>安装插件</h2> 
          <p><span>　　以head插件为例：</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　联网时，直接运行%ES_HOME%\bin\plugin -install mobz/elasticsearch-head</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　不联网时，下载elasticsearch-head的zipball的master包，把内容解压到%ES_HOME%\plugin\head\_site目录下，[该插件为site类型插件]</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　安装完成，重启服务，在浏览器打开 http://localhost:9200/_plugin/head/ 即可<br /></span></p> 
          <h2>ES概念</h2> 
          <p><span>　　cluster</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span><span>　　代表一个集群，集群中有多个节点，其中有一个为主节点，这个主节点是可以通过选举产生的，主从节点是对于集群内部来说 的。es的一个概念就是去中心化，字面上理解就是无中心节点，这是对于集群外部来说的，因为从外部来看es集群，在逻辑上是个整体，你与任何一个节点的通 信和与整个es集群通信是等价的。</span></span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　shards</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　代表索引分片，es可以把一个完整的索引分成多个分片，这样的好处是可以把一个大的索引拆分成多个，分布到不同的节点上。构成分布式搜索。分片的数量只能在索引创建前指定，并且索引创建后不能更改。</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　replicas</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　代表索引副本，es可以设置多个索引的副本，副本的作用一是提高系统的容错性，当个某个节点某个分片损坏或丢失时可以从副本中恢复。二是提高es的查询效率，es会自动对搜索请求进行负载均衡。</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　recovery</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　代表数据恢复或叫数据重新分布，es在有节点加入或退出时会根据机器的负载对索引分片进行重新分配，挂掉的节点重新启动时也会进行数据恢复。</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　river</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span><span>　　代表es的一个数据源，也是其它存储方式（如：数据库）同步数据到es的一个方法。它是以插件方式存在的一个es服 务，通过读取river中的数据并把它索引到es中，官方的river有couchDB的，RabbitMQ的，Twitter的，Wikipedia 的。</span></span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　gateway</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span><span>　　代表es索引的持久化存储方式，es默认是先把索引存放到内存中，当内存满了时再持久化到硬盘。当这个es集群关闭再 重新启动时就会从gateway中读取索引数据。es支持多种类型的gateway，有本地文件系统（默认），分布式文件系统，Hadoop的HDFS和 amazon的s3云存储服务。</span></span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　discovery.zen</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　代表es的自动发现节点机制，es是一个基于p2p的系统，它先通过广播寻找存在的节点，再通过多播协议来进行节点之间的通信，同时也支持点对点的交互。</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　Transport</span></p> 
          <div>
           &nbsp;
          </div> 
          <p><span>　　代表es内部节点或集群与客户端的交互方式，默认内部是使用tcp协议进行交互，同时它支持http协议（json格式）、thrift、servlet、memcached、zeroMQ等的传输协议（通过插件方式集成）。<br /></span></p> 
          <p><strong>分布式搜索elasticsearch中文分词集成</strong></p> 
          <div id="article_content"> 
           <p>elasticsearch官方只提供smartcn这个中文分词插件，效果不是很好，好在国内有medcl大神（国内最早研究es的人之一）写的两个中文分词插件，一个是ik的，一个是mmseg的，下面分别介绍下两者的用法，其实都差不多的，先安装插件，命令行：<br />安装ik插件：</p> 
           <p>plugin&nbsp;-install&nbsp;medcl/elasticsearch-analysis-ik/1.1.0 &nbsp;</p> 
           <p>下载ik相关配置词典文件到config目录</p> 
           <div bg_plain"="">
            <ol start="1">
             <li><span>cd&nbsp;config&nbsp;&nbsp;</span></li>
             <li>wget&nbsp;http://github.com/downloads/medcl/elasticsearch-analysis-ik/ik.zip&nbsp;--no-check-certificate&nbsp;&nbsp;</li>
             <li>unzip&nbsp;ik.zip&nbsp;&nbsp;</li>
             <li>rm&nbsp;ik.zip&nbsp;&nbsp;</li>
            </ol>
           </div> 
           <p>安装mmseg插件：</p> 
           <div bg_plain"="">
            <ol start="1">
             <li><span>bin/plugin&nbsp;-install&nbsp;medcl/elasticsearch-analysis-mmseg/1.1.0&nbsp;&nbsp;</span></li>
            </ol>
           </div> 
           <p>下载相关配置词典文件到config目录</p> 
           <div bg_plain"="">
            <ol start="1">
             <li><span>cd&nbsp;config&nbsp;&nbsp;</span></li>
             <li>wget&nbsp;http://github.com/downloads/medcl/elasticsearch-analysis-mmseg/mmseg.zip&nbsp;--no-check-certificate&nbsp;&nbsp;</li>
             <li>unzip&nbsp;mmseg.zip&nbsp;&nbsp;</li>
             <li>rm&nbsp;mmseg.zip&nbsp;&nbsp;</li>
            </ol>
           </div> 
           <p>分词配置</p> 
           <p>ik分词配置，在elasticsearch.yml文件中加上</p> 
           <div bg_html"="">
            <ol start="1">
             <li><span>index:&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;analysis:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;analyzer:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ik:&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias:&nbsp;[ik_analyzer]&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;org.elasticsearch.index.analysis.IkAnalyzerProvider&nbsp;&nbsp;</li>
            </ol>
           </div> 
           <p>或</p> 
           <div bg_html"="">
            <ol start="1">
             <li><span>index.analysis.analyzer.ik.type&nbsp;:&nbsp;“ik”&nbsp;&nbsp;</span></li>
            </ol>
           </div> 
           <p>这两句的意义相同<br />mmseg分词配置，也是在在elasticsearch.yml文件中</p> 
           <div bg_html"="">
            <ol start="1">
             <li><span>index:&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;analysis:&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;analyzer:&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mmseg:&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias:&nbsp;[news_analyzer,&nbsp;mmseg_analyzer]&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;org.elasticsearch.index.analysis.MMsegAnalyzerProvider&nbsp;&nbsp;</li>
            </ol>
           </div> 
           <p>或</p> 
           <div bg_html"="">
            <ol start="1">
             <li><span>index.analysis.analyzer.default.type&nbsp;:&nbsp;&quot;mmseg&quot;&nbsp;&nbsp;</span></li>
            </ol>
           </div> 
           <p>mmseg分词还有些更加个性化的参数设置如下</p> 
           <div bg_html"="">
            <ol start="1">
             <li><span>index:&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;analysis:&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;tokenizer:&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mmseg_maxword:&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;mmseg&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seg_type:&nbsp;&quot;max_word&quot;&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mmseg_complex:&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;mmseg&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seg_type:&nbsp;&quot;complex&quot;&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mmseg_simple:&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;mmseg&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seg_type:&nbsp;&quot;simple&quot;&nbsp;&nbsp;</li>
            </ol>
           </div> 
           <p>这样配置完后插件安装完成，启动es就会加载插件。</p> 
           <p>定义mapping</p> 
           <p>在添加索引的mapping时就可以这样定义分词器</p> 
           <div bg_plain"="">
            <ol start="1">
             <li><span>{&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&quot;page&quot;:{&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;properties&quot;:{&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;title&quot;:{&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&quot;string&quot;,&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;indexAnalyzer&quot;:&quot;ik&quot;,&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;searchAnalyzer&quot;:&quot;ik&quot;&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;content&quot;:{&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&quot;string&quot;,&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;indexAnalyzer&quot;:&quot;ik&quot;,&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;searchAnalyzer&quot;:&quot;ik&quot;&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</li>
             <li>}&nbsp;&nbsp;</li>
            </ol>
           </div> 
           <p>indexAnalyzer为索引时使用的分词器，searchAnalyzer为搜索时使用的分词器。</p> 
           <p>java mapping代码如下：</p> 
           <div bg_java"="">
            <ol start="1">
             <li><span>XContentBuilder&nbsp;content&nbsp;=&nbsp;XContentFactory.jsonBuilder().startObject()&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.startObject(<span>&quot;page&quot;)&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.startObject(<span>&quot;properties&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.startObject(<span>&quot;title&quot;)&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.field(<span>&quot;type&quot;,&nbsp;&quot;string&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.field(<span>&quot;indexAnalyzer&quot;,&nbsp;&quot;ik&quot;)&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.field(<span>&quot;searchAnalyzer&quot;,&nbsp;&quot;ik&quot;)&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.endObject()&nbsp;&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.startObject(<span>&quot;code&quot;)&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.field(<span>&quot;type&quot;,&nbsp;&quot;string&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.field(<span>&quot;indexAnalyzer&quot;,&nbsp;&quot;ik&quot;)&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.field(<span>&quot;searchAnalyzer&quot;,&nbsp;&quot;ik&quot;)&nbsp;&nbsp;</span></li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.endObject()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.endObject()&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.endObject()&nbsp;&nbsp;</li>
             <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.endObject()&nbsp;&nbsp;</li>
            </ol>
           </div> 
           <p>定义完后操作索引就会以指定的分词器来进行分词。</p> 
           <p>&nbsp;附：</p> 
           <p>ik分词插件项目地址：<a href="https://github.com/medcl/elasticsearch-analysis-ik">https://github.com/medcl/elasticsearch-analysis-ik</a></p> 
           <p>mmseg分词插件项目地址：<a href="https://github.com/medcl/elasticsearch-analysis-mmseg">https://github.com/medcl/elasticsearch-analysis-mmseg</a></p> 
           <p>如果觉得配置麻烦，也可以下载个配置好的es版本，地址如下：<a href="https://github.com/medcl/elasticsearch-rtf">https://github.com/medcl/elasticsearch-rtf</a></p> 
          </div> 
          <p>&nbsp;</p> 
          <div> 
           <h3><strong>elasticsearch的基本用法</strong></h3> 
          </div> 
          <div id="blog_content">
           <br />最大的特点：&nbsp;
           <br />1. 数据库的 database, 就是&nbsp; index&nbsp;
           <br />2. 数据库的 table,&nbsp; 就是 tag&nbsp;
           <br />3. 不要使用browser， 使用curl来进行客户端操作.&nbsp; 否则会出现 java heap ooxx...&nbsp;
           <br />
           <br />curl:&nbsp; -X 后面跟 RESTful ：&nbsp; GET, POST ...&nbsp;
           <br />-d 后面跟数据。 (d = data to send)&nbsp;
           <br />
           <br />1. create:&nbsp;&nbsp;
           <br />
           <br />指定 ID 来建立新记录。 （貌似PUT， POST都可以）&nbsp;
           <br />$ curl -XPOST localhost:9200/films/md/2 -d '&nbsp;
           <br />{ &quot;name&quot;:&quot;hei yi ren&quot;, &quot;tag&quot;: &quot;good&quot;}'&nbsp;
           <br />
           <br />使用自动生成的 ID 建立新纪录：&nbsp;
           <br />$ curl -XPOST localhost:9200/films/md -d '&nbsp;
           <br />{ &quot;name&quot;:&quot;ma da jia si jia3&quot;, &quot;tag&quot;: &quot;good&quot;}'&nbsp;
           <br />
           <br />2. 查询：&nbsp;
           <br />2.1 查询所有的 index, type:&nbsp;
           <br />$ curl localhost:9200/_search?pretty=true&nbsp;
           <br />
           <br />2.2 查询某个index下所有的type:&nbsp;
           <br />$ curl localhost:9200/films/_search&nbsp;
           <br />
           <br />2.3 查询某个index 下， 某个 type下所有的记录：&nbsp;
           <br />$ curl localhost:9200/films/md/_search?pretty=true&nbsp;
           <br />
           <br />2.4 带有参数的查询：&nbsp;&nbsp;
           <br />$ curl localhost:9200/films/md/_search?q=tag:good&nbsp;
           <br />{&quot;took&quot;:7,&quot;timed_out&quot;:false,&quot;_shards&quot;:{&quot;total&quot;:5,&quot;successful&quot;:5,&quot;failed&quot;:0},&quot;hits&quot;:{&quot;total&quot;:2,&quot;max_score&quot;:1.0,&quot;hits&quot;:[{&quot;_index&quot;:&quot;film&quot;,&quot;_type&quot;:&quot;md&quot;,&quot;_id&quot;:&quot;2&quot;,&quot;_score&quot;:1.0, &quot;_source&quot; :&nbsp;
           <br />{ &quot;name&quot;:&quot;hei yi ren&quot;, &quot;tag&quot;: &quot;good&quot;}},{&quot;_index&quot;:&quot;film&quot;,&quot;_type&quot;:&quot;md&quot;,&quot;_id&quot;:&quot;1&quot;,&quot;_score&quot;:0.30685282, &quot;_source&quot; :&nbsp;
           <br />{ &quot;name&quot;:&quot;ma da jia si jia&quot;, &quot;tag&quot;: &quot;good&quot;}}]}}&nbsp;
           <br />
           <br />2.5 使用JSON参数的查询： （注意 query 和 term 关键字）&nbsp;
           <br />$ curl localhost:9200/film/_search -d '&nbsp;
           <br />{&quot;query&quot; : { &quot;term&quot;: { &quot;tag&quot;:&quot;bad&quot;}}}'&nbsp;
           <br />
           <br />3. update&nbsp;&nbsp;
           <br />$ curl -XPUT localhost:9200/films/md/1 -d { ...(data)... }&nbsp;
           <br />
           <br />4. 删除。 删除所有的：&nbsp;
           <br />$ curl -XDELETE localhost:9200/films
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/10/04/404680.html" title="permalink">2013-10-04 02:09</a> ivaneeo 阅读(15598) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/10/04/404680.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=404680">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=404680">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl100_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/09/29/404613.html">debian6开机启动脚本的方法 </a> 
        </div> 
        <div class="postText"> 
         <div>
          <p>在debian6中，加入开机启动脚本的方法与debian5不同了，直接做符号链接到runlevel已经不起作用了，提示缺少LSB信息，并且用insserv来替代update-rc.d：</p> 
          <p><a href="mailto:root@r410:/etc/rc2.d">root@14:/etc/rc2.d</a># update-rc.d -n&nbsp; php_fastcgi.sh&nbsp; defaults&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /> update-rc.d: using dependency based boot sequencing<br /> insserv: warning: script 'K02php_fastcgi' missing LSB tags and overrides<br /> insserv: warning: script 'K01php_fastcgi.sh' missing LSB tags and overrides<br /> insserv: warning: script 'php_fastcgi.sh' missing LSB tags and overrides<br /> insserv: warning: current start runlevel(s) (empty) of script `php_fastcgi.sh' overwrites defaults (2 3 4 5).<br /> insserv: warning: current stop runlevel(s) (0) of script `php_fastcgi.sh' overwrites defaults (0 1 6).<br /> insserv: dryrun, not creating .depend.boot, .depend.start, and .depend.stop<br /> </p> 
          <p># insserv /etc/init.d/php_fastcgi.sh <br /> insserv: warning: script 'K02php_fastcgi' missing LSB tags and overrides<br /> insserv: warning: script 'php_fastcgi.sh' missing LSB tags and overrides</p> 
          <p>&nbsp;</p> 
          <p>debian6中将脚本加入到开机启动的方法：</p> 
          <p>在脚本中加入LSB描述信息。<br /> <a href="mailto:root@14">root@14</a>:~# more&nbsp; /etc/init.d/php_fastcgi.sh&nbsp;&nbsp;&nbsp; <br /> #!/bin/sh<br /> ### BEGIN INIT INFO<br /> # Provides:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; php_fastcgi.sh<br /> # Required-Start:&nbsp;&nbsp;&nbsp; $local_fs $remote_fs $network $syslog<br /> # Required-Stop:&nbsp;&nbsp;&nbsp;&nbsp; $local_fs $remote_fs $network $syslog<br /> # Default-Start:&nbsp;&nbsp;&nbsp;&nbsp; 2 3 4 5<br /> # Default-Stop:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 1 6<br /> # Short-Description: starts the php_fastcgi daemon<br /> # Description:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; starts php_fastcgi using start-stop-daemon<br /> ### END INIT INFO</p> 
          <p>安装启动脚本到system init script。<br /> <a href="mailto:root@14">root@14</a>:~# insserv -v -d /etc/init.d/php_fastcgi.sh </p> 
          <p>重启机器试试吧。</p>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/09/29/404613.html" title="permalink">2013-09-29 14:45</a> ivaneeo 阅读(2918) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/09/29/404613.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=404613">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=404613">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl101_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/09/10/403916.html">linux下发送广播 </a> 
        </div> 
        <div class="postText"> 
         <div>
          linux 广播 255.255.255.255 
          <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sendto error: Network is unreachable<br /> </p> 
          <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 全网广播</p> 
          <p><br /> </p> 
          <p>场景：</p> 
          <p>&nbsp; &nbsp; 今天调试linux 网络编程的广播，当向255.255.255.255 的某个端口发送广播包的时候，sendto 返回 -1，错误原因是：</p> sendto error: Network is unreachable。
         </div>
         <br />
         <br />
         <div>
          <p>2. 指令的解决方法：</p> 
          <p style="color:#333333; font-family:tahoma,宋体; font-size:14px; line-height:22px; background-color:#efefef"> oute add -net 255.255.255.255 netmask 255.255.255.255 dev eth0 metric 1</p> 
          <p style="color:#333333; font-family:tahoma,宋体; font-size:14px; line-height:22px; background-color:#efefef"> 或者</p> 
          <p style="color:#333333; font-family:tahoma,宋体; font-size:14px; line-height:22px; background-color:#efefef"> route add -host 255.255.255.255 dev eth0</p> 
         </div>
         <br />
         <br />
         <div>
          http://blog.csdn.net/qiaoliang328/article/details/8881474
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/09/10/403916.html" title="permalink">2013-09-10 19:40</a> ivaneeo 阅读(272) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/09/10/403916.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=403916">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=403916">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl102_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/08/17/402964.html">windows 添加虚拟网卡loop</a> 
        </div> 
        <div class="postText"> 
         <div>
          devcon install c:\windows\inf\netloop.inf *MSLOOP
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/08/17/402964.html" title="permalink">2013-08-17 11:20</a> ivaneeo 阅读(197) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/08/17/402964.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=402964">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=402964">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl103_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/08/14/402818.html">windows改机器名</a> 
        </div> 
        <div class="postText"> 
         <div>
          reg add &quot;HKEY_CURRENT_USER\Software\Microsoft\Windows\ShellNoRoam&quot; /v @ /t REG_SZ /d &quot;%Name%&quot; /f 
          <br />reg add &quot;HKLM\SYSTEM\CurrentControlSet\Control\ComputerName\ComputerName&quot; /v &quot;ComputerName&quot; /t REG_SZ /d &quot;%Name%&quot; /f 
          <br />reg add &quot;HKLM\SYSTEM\CurrentControlSet\Control\ComputerName\ActiveComputerName&quot; /v &quot;ComputerName&quot; /t REG_SZ /d &quot;%Name%&quot; /f 
          <br />reg add &quot;HKLM\SYSTEM\CurrentControlSet\Services\Eventlog&quot; /v &quot;ComputerName&quot; /t REG_SZ /d &quot;%Name%&quot; /f 
          <br />reg add &quot;HKLM\SYSTEM\CurrentControlSet\Control\ComputerName\ComputerName&quot; /v &quot;ComputerName&quot; /t REG_SZ /d &quot;%Name%&quot; /f 
          <br />reg add &quot;HKLM\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters&quot; /v &quot;NV Hostname&quot; /t REG_SZ /d &quot;%Name%&quot; /f 
          <br />reg add &quot;HKLM\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters&quot; /v &quot;Hostname&quot; /t REG_SZ /d &quot;%Name%&quot; /f 
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/08/14/402818.html" title="permalink">2013-08-14 22:38</a> ivaneeo 阅读(168) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/08/14/402818.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=402818">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=402818">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl104_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/06/29/401074.html">Cloudera Impala TarBall 编译、安装与配置</a> 
        </div> 
        <div class="postText"> 
         <div>
          <p>Impala是由Cloudera开发的高性能实时计算工具，相比Hive性能提升了几十、甚至近百倍，基本思想是将计算分发到每个 Datanode所在的节点，依靠内存实现数据的缓存进行快速计算，类似的系统还有Berkeley的Shark。从实际测试来看，Impala效率确实 不错，由于Impala大量使用C++实现，不使用CDH的Image而自己编译安装要费不少功夫，这里记录一下安装配置过程和碰到的一些问题。我在测试 时候使用的是CentOS6.2。<br /> 一些基本的安装步骤在这里，但我在安装的时候碰到一些问题，这里再详细说明一下过程。</p> 
          <p><strong>1.安装所需的依赖lib，这一步没有什么不同</strong></p> 
          <div>
           sudo yum install boost-test boost-program-options libevent-devel automake libtool flex bison gcc-c++ openssl-devel make cmake doxygen.x86_64 glib-devel boost-devel python-devel bzip2-devel svn libevent-devel cyrus-sasl-devel wget git unzip
          </div> 
          <p><strong>2.安装LLVM</strong>，按照流程做即可，注意要在多台机器上编译安装Impala的话，只用在一台机器上执行下面蓝色的部分，再把llvm分发到多台机器上执行后面红色部分的指令就可以了，没必要每个机器都通过svn下载一遍源代码，很费时。</p> 
          <div> 
           <div style="color:blue">
             wget http://llvm.org/releases/3.2/llvm-3.2.src.tar.gz
            <br /> tar xvzf llvm-3.2.src.tar.gz
            <br /> cd llvm-3.2.src/tools
            <br /> svn co http://llvm.org/svn/llvm-project/cfe/tags/RELEASE_32/final/ clang
            <br /> cd ../projects
            <br /> svn co http://llvm.org/svn/llvm-project/compiler-rt/tags/RELEASE_32/final/ compiler-rt 
           </div> 
           <div style="color:red">
             cd ..
            <br /> ./configure Cwith-pic
            <br /> make -j4 REQUIRES_RTTI=1
            <br /> sudo make install 
           </div> 
          </div> 
          <p><strong>3.安装Maven</strong>，这个没什么好说的，按照步骤，设置一下环境变量即可，Maven是为了后面build impala源代码用的。</p> 
          <div>
           wget http://www.fightrice.com/mirrors/apache/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz
           <br /> tar xvf apache-maven-3.0.4.tar.gz &amp;&amp; sudo mv apache-maven-3.0.4 /usr/local
          </div> 
          <p>修改~/.bashrc，增加maven环境变量</p> 
          <div>
           export M2_HOME=/usr/local/apache-maven-3.0.4
           <br /> export M2=$M2_HOME/bin
           <br /> export PATH=$M2:$PATH
          </div> 
          <p>更新环境变量，查看mvn版本是否正确</p> 
          <div>
           source ~/.bashrc
           <br /> mvn -version
          </div> 
          <p><strong>4.下载Impala源代码</strong></p> 
          <div>
           git clone https://github.com/cloudera/impala.git
          </div> 
          <p><strong>5.设置Impala环境变量，编译时需要</strong></p> 
          <div>
           cd impala
           <br /> ./bin/impala-config.sh
          </div> 
          <p><strong>6.下载impala依赖的第三方package</strong></p> 
          <div>
           cd thirdparty
           <br /> ./download_thirdparty.sh
          </div> 
          <p>注意这里其中一个包cyrus-sasl-2.1.23可能下载失败，可以自行搜索(CSDN里面就有)下载下来然后解压缩到thirdparty 文件夹，最好是在执行完download_thirdparty.sh之后做这一步，因为download_thirdparty.sh会把所有目录下下 载下来的tar.gz给删除掉。</p> 
          <p><strong>7.理论上现在可以开始build impala了</strong>，但是实际build过程中可能会出现问题，我碰到的问题和 Boost相关的(具体错误不记得了)，最后发现是由于boost版本太低导致的，CentOS 6.2系统默认yum源中的boost和boost-devel版本是1.41，但是impala编译需要1.44以上的版本，因此需要做的是自己重新编 译boost，我用的是boost 1.46版本。</p> 
          <div>
           #删除已安装的boost和boost-devel
           <br /> yum remove boost
           <br /> yum remove boost-devel
           <br /> #下载boost
           <br /> #可以去(http://www.boost.org/users/history/)下载boost
           <br /> #下载后解压缩
           <br /> tar xvzf boost_1_46_0.tar.gz
           <br /> mv boost_1_46_0 /usr/local/
           <br /> cd /usr/include
           <br /> ./bootstrap.sh
           <br /> ./bjam
           <br /> #执行后若打印以下内容，则表示安装成功
           <br /> # The Boost C++ Libraries were successfully built!
           <br /> # The following directory should be added to compiler include paths:
           <br /> # /usr/local/boost_1_46_0
           <br /> # The following directory should be added to linker library paths:
           <br /> # /usr/local/boost_1_46_0/stage/lib
           <br /> #现在还需要设置Boost环境变量和Impala环境变量 
           <p>export BOOST_ROOT=’/usr/local/boost_1_46_0′<br /> export IMPALA_HOME=’/home/extend/impala’</p> 
           <p>#注意一下，这里虽然安装了boost，但是我在实际使用的时候，编译还是会报错的，报的错误是找不到这个包：#libboost_filesystem-mt.so，这个包是由boost-devel提供的，所以我的做法是把boost-devel给重新装上<br /> #我没有试过如果之前不删除boost-devel会不会有问题，能确定的是按这里写的流程做是没问题的</p> 
           <p>yum install boost-devel </p>
          </div> 
          <p><strong>8.现在终于可以编译impala了</strong></p> 
          <div>
           cd $IMPALA_HOME
           <br /> ./build_public.sh -build_thirdparty
           <br /> #编译首先会编译C++部分，然后再用mvn编译java部分，整个过程比较慢，我在虚拟机上大概需要1-2个小时。
           <br /> #Impala编译完后的东西在be/build/debug里面
          </div> 
          <p><strong>9.启动impala_shell需要用到的python包</strong></p> 
          <div>
           #第一次执行impalad_shell可能会报错，这里需要安装python的两个包:thrift和prettytable，使用easy_install即可
           <br /> easy_install prettytable
           <br /> easy_install thrift
          </div> 
          <p><strong>10.</strong>如果你以为到这里就万事大吉就太天真了，在配置、启动、使用Impala的时候还会有很多奇葩的问题；</p> 
          <p><strong>问题1：Hive和Hadoop使用的版本</strong><br /> CDH对版本的依赖要求比较高，为了保证Impala正常运行，强烈建议使用Impala里面thirdparty目录中自带的Hadoop(native lib已经编译好的)和Hive版本。<br /> Hadoop的配置文件在$HADOOP_HOME/etc/hadoop中，要注意的是需要启用native lib</p> 
          <div> 
           <div xml="" geshi"="" style="overflow:auto;white-space:nowrap;">
            <div codecolorer"="" style="white-space:nowrap">
             #修改hadoop的core-site.xml，除了这个选项之外，其他配置和问题2中的core-site.xml一致
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>hadoop.native.lib
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>true
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;description<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Should native hadoop libraries, if present, be used.
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/description<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
            </div>
           </div> 
          </div> 
          <p><strong>问题2：Impala的配置文件位置</strong><br /> Impala默认使用的配置文件路径是在bin/set-classpath.sh中配置的，建议把CLASSPATH部分改成</p> 
          <div>
           CLASSPATH=\
           <br /> $IMPALA_HOME/conf:\
           <br /> $IMPALA_HOME/fe/target/classes:\
           <br /> $IMPALA_HOME/fe/target/dependency:\
           <br /> $IMPALA_HOME/fe/target/test-classes:\
           <br /> ${HIVE_HOME}/lib/datanucleus-core-2.0.3.jar:\
           <br /> ${HIVE_HOME}/lib/datanucleus-enhancer-2.0.3.jar:\
           <br /> ${HIVE_HOME}/lib/datanucleus-rdbms-2.0.3.jar:\
           <br /> ${HIVE_HOME}/lib/datanucleus-connectionpool-2.0.3.jar:
          </div> 
          <p>即要求Impala使用其目录下的Conf文件夹作为配置文件，然后创建一下Conf目录，把3样东西拷贝进来：core-site.xml、hdfs-site.xml、hive-site.xml。<br /> core-site.xml的配置，下面几个选项是必须要配置的，</p> 
          <div> 
           <div xml="" geshi"="" style="overflow:auto;white-space:nowrap;">
            <div codecolorer"="" style="white-space:nowrap">
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml</span> <span style="color: #000066;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml-stylesheet</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text/xsl&quot;</span> <span style="color: #000066;">href</span>=<span style="color: #ff0000;">&quot;configuration.xsl&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>fs.defaultFS
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>hdfs://10.200.4.11:9000
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>dfs.client.read.shortcircuit
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>true
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>dfs.client.use.legacy.blockreader.local
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>false
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>dfs.client.read.shortcircuit.skip.checksum
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>false
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
            </div>
           </div> 
          </div> 
          <p>hdfs-site.xml的配置</p> 
          <div> 
           <div xml="" geshi"="" style="overflow:auto;white-space:nowrap;">
            <div codecolorer"="" style="white-space:nowrap">
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml</span> <span style="color: #000066;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span> <span style="color: #000066;">encoding</span>=<span style="color: #ff0000;">&quot;UTF-8&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml-stylesheet</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text/xsl&quot;</span> <span style="color: #000066;">href</span>=<span style="color: #ff0000;">&quot;configuration.xsl&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>dfs.block.local-path-access.user
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>${your user}
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>dfs.datanode.hdfs-blocks-metadata.enabled
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>true
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>dfs.datanode.data.dir
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>${yourdatadir}
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; &nbsp;
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>dfs.client.use.legacy.blockreader.local
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; &nbsp;
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>false
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; &nbsp;
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>dfs.datanode.data.dir.perm
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; &nbsp;
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>750
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>dfs.client.file-block-storage-locations.timeout
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>5000
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>dfs.domain.socket.path
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>/home/extend/cdhhadoop/dn.8075
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
            </div>
           </div> 
          </div> 
          <p>最后是hive-site.xml，这个比较简单，指定使用DBMS为元数据存储即可(impala必须和hive共享元数据，因为impala无 法create table)；Hive-site.xml使用mysql作为metastore的说明在很多地方都可以查到，配置如下：</p> 
          <div> 
           <div xml="" geshi"="" style="overflow:auto;white-space:nowrap;">
            <div codecolorer"="" style="white-space:nowrap">
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml</span> <span style="color: #000066;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml-stylesheet</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text/xsl&quot;</span> <span style="color: #000066;">href</span>=<span style="color: #ff0000;">&quot;configuration.xsl&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>javax.jdo.option.ConnectionURL
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>jdbc:mysql://10.28.0.190:3306/impala?createDatabaseIfNotExist=true
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;description<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>JDBC connect string for a JDBC metastore
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/description<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>javax.jdo.option.ConnectionDriverName
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>com.mysql.jdbc.Driver
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;description<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Driver class name for a JDBC metastore
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/description<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>javax.jdo.option.ConnectionUserName
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>root
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;description<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>username to use against metastore database
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/description<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>javax.jdo.option.ConnectionPassword
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/name<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>root
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/value<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> &nbsp; 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;description<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>password to use against metastore database
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/description<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/property<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
             <br /> 
             <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
            </div>
           </div> 
          </div> 
          <p>记得把mysql-connector的jar包给拷贝到hive的lib里面去，同样也要拷贝给impala ( 拷贝至$IMPALA_HOME/fe/target/dependency)</p> 
          <p><strong>11.启动Impala</strong>。到此，Impala是可以正常启动的。这里说明一下，官方文档没有说很清楚Impala的Service之间是如何互相协调的，按照官方的步骤，最后通过如下方法来在一台机器上启动Impala Service：</p> 
          <div>
            #启动单机impala service
           <br /> ${IMPALA_HOME}/bin/start-impalad.sh -use_statestore=false
           <br /> #启动impala shell
           <br /> ${IMPALA_HOME}/bin/impala-shell.sh 
          </div> 
          <p>然后impala-shell就可以连接到localhost进行查询了；注意，这里只是单机查询，可以用来验证你的Impala是否正常work 了；如何启动一个Impala集群，跳到第12步。这里继续说一下可能遇到的问题，我遇到的一个比较奇葩的问题是show tables和count(1)没有问题，但是select * from table的时候impala在读取数据的时候就崩溃了(有时报错could not find method close from class org/apache/hadoop/fs/FSDataInputStream with signature ()V )，这里修改了两个地方解决这个问题:</p> 
          <p>a.修改impala的set-classpath.sh并移除$IMPALA_HOME/fe/target/dependency目录中除了hadoop-auth-2.0.0-*.jar之外所有hadoop-*开头的jar包。</p> 
          <div>
            #把impala dependency中和hadoop相关的包给弄出来，只保留auth
           <br /> mv $IMPALA_HOME/fe/target/dependency/hadoo* $IMPALA_HOME
           <br /> mv $IMPALA_HOME/hadoop-auth*.jar mv $IMPALA_HOME/fe/target/dependency
           <br /> #修改bin/set-classpath.sh，将$HADOOP_HOME中的lib给加入，在set-classpath.sh最后一行export CLASSPATH之前#添加
           <br /> for jar in `ls $HADOOP_HOME/share/hadoop/common/*.jar`; do
           <br /> CLASSPATH=${CLASSPATH}:$jar
           <br /> done
           <br /> for jar in `ls $HADOOP_HOME/share/hadoop/yarn/*.jar`; do
           <br /> CLASSPATH=${CLASSPATH}:$jar
           <br /> done
           <br /> for jar in `ls $HADOOP_HOME/share/hadoop/hdfs/*.jar`; do
           <br /> CLASSPATH=${CLASSPATH}:$jar
           <br /> done
           <br /> for jar in `ls $HADOOP_HOME/share/hadoop/mapreduce/*.jar`; do
           <br /> CLASSPATH=${CLASSPATH}:$jar
           <br /> done
           <br /> for jar in `ls $HADOOP_HOME/share/hadoop/tools/lib/*.jar`; do
           <br /> CLASSPATH=${CLASSPATH}:$jar
           <br /> done 
          </div> 
          <p>b.注意到Impala对待table的时候只能够使用hive的默认列分隔符，如果在hive里面create table的时候使用了自定义的分隔符，Impala servive就会在读数据的时候莫名其妙的崩溃。</p> 
          <p><strong>12.启动Impala 集群</strong><br /> Impala实际上由两部分组成，一个是StateStore，用来协调各个机器计算，相当于Master，然后就是Impalad，相当于Slave，启动方法如下：</p> 
          <div>
            #启动statestore
           <br /> #方法1，直接利用impala/bin下面的这个python脚本
           <br /> #这个脚本会启动一个StateStore，同时启动-s个数量的Impala Service在本机
           <br /> $IMPALA_HOME/bin/start-impala-cluster.py -s 1 Clog_dir /home/extend/impala/impalaLogs
           <br /> #方法2，手动启动StateStore
           <br /> $IMPALA_HOME/be/build/debug/statestore/statestored -state_store_port=24000 
           <p>#启动impala service<br /> #在每个编译安装了impala的节点上执行命令<br /> #参数-state_store_host指定启动了stateStore的机器名<br /> #-nn即namenode，指定hadoop的namenode<br /> #-nn_port是namenode的HDFS入口端口号<br /> $IMPALA_HOME/bin/start-impalad.sh -state_store_host=m11 -nn=m11 -nn_port=9000 </p>
          </div> 
          <p>正常启动之后，访问http://${stateStore_Server}:25010/ 可以看到StateStore的状态，其中的subscribers页面可以看到已经连接上的impala service node；</p> 
          <p><strong>13.使用Impala客户端</strong><br /> 这一步最简单，随便找一个机器启动</p> $IMPALA_HOME/bin/impala-shell.sh
          <br /> #启动之后可以随便连接一个impala service
          <br /> connect m12
          <br /> #连接上之后就可以执行show tables之类的操作了
          <br /> #需要注意的是，如果hive创建表或更新了表结构，impala的节点是不知道的
          <br /> #必须通过客户端连接各个impala service并执行refresh来刷新metadata
          <br /> #或者重启所有impala service
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/06/29/401074.html" title="permalink">2013-06-29 17:12</a> ivaneeo 阅读(1192) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/06/29/401074.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (1)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=401074">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=401074">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl105_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/06/07/400369.html">网格内存</a> 
        </div> 
        <div class="postText"> 
         <div>
          nohup ./bin/startServer.sh -r hotrod -l 172.20.21.1 -c ./etc/config-samples/distributed-udp.xml -p 11222 &amp;
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/06/07/400369.html" title="permalink">2013-06-07 19:32</a> ivaneeo 阅读(177) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/06/07/400369.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=400369">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=400369">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl106_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/05/20/399500.html">Windows 终端服务的 Kerberos 化验证</a> 
        </div> 
        <div class="postText">
          http://www.ibm.com/developerworks/cn/aix/library/au-kerbauthent/
         <br /> 
         <div id="xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd"></div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/05/20/399500.html" title="permalink">2013-05-20 12:15</a> ivaneeo 阅读(155) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/05/20/399500.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=399500">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=399500">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl107_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/05/18/399447.html">Authenticate Windows to Unix Kerberos</a> 
        </div> 
        <div class="postText"> 
         <h2><a name="s2">Kerberos Server Configuration</a></h2>
         <p class="info">These notes are for MIT Kerberos 1.3 or higher.</p>
         <ul class="list">
          <li> <tt class="file">/etc/krb5.conf</tt> </li>
          <p class="info">The <tt class="file">/etc/krb5.conf</tt> configuration file should include <tt class="code">rc4-hmac</tt> support under the <tt class="code">[libdefaults]</tt> section. Windows XP uses <tt class="code">rc4-hmac</tt>. However, do not include <tt class="code">rc4-hmac</tt> in the <tt class="code">default*</tt> encryption types, as older Unix clients may not support <tt class="code">rc4-hmac</tt>.</p>
          <p class="data">[libdefaults]<br /> default_realm = EXAMPLE.ORG<br /> default_etypes = des3-hmac-sha1 des-cbc-crc<br /> default_tkt_enctypes = des3-hmac-sha1 des-cbc-crc<br /> default_tgs_enctypes = des3-hmac-sha1 des-cbc-crc<br /> permitted_enctypes = des3-hmac-sha1 des-cbc-crc rc4-hmac<br /> dns_lookup_realm = false<br /> dns_lookup_kdc = true</p>
          <li> <tt class="file">kdc.conf</tt> </li>
          <p class="info">The <tt class="file">kdc.conf</tt> configuration file on the Kerberos servers must support <tt class="code">rc4-hmac</tt> as an encryption type.</p>
          <p class="data">[realms]<br /> EXAMPLE.ORG = {<br /> database_name = /var/kerberos/krb5kdc/principal<br /> key_stash_file = /var/kerberos/krb5kdc/.k5.EXAMPLE.ORG<br /> supported_enctypes = des3-hmac-sha1:normal des-cbc-crc:normal <span class="rbr">?</span><br />rc4-hmac:normal<br /> }<br /></p>
         </ul>
         <h2><a name="s3">Windows Client Setup</a></h2>
         <ul class="list">
          <li>Kerberos Configuration</li>
          <p class="info">Use the <tt class="cmd">ksetup.exe</tt> command to add the site Kerberos servers.</p>
          <p class="data-shell">$ <kbd>ksetup.exe /addkdc EXAMPLE.ORG kerberos-1.example.org</kbd><br />$ <kbd>ksetup.exe /addkdc EXAMPLE.ORG kerberos-2.example.org</kbd><br />$ <kbd>ksetup.exe /addkdc EXAMPLE.ORG kerberos.example.org</kbd><br />$ <kbd>ksetup.exe /addkpasswd EXAMPLE.ORG kerberos.example.org</kbd><br />$ <kbd>ksetup.exe /setrealm EXAMPLE.ORG</kbd></p>
          <li>Host principals</li>
          <p class="info">Create <tt class="code">host</tt> principals on each Windows client, then use the same password to create an equivalent principal in the MIT Kerberos database. If using an installation system such as <a href="http://unattended.sourceforge.net/">Unattended</a>, use a script to generate the random password and setup the host principal.</p>
          <p class="data">#!/usr/bin/perl<br /><br />my $domain = 'example.org';<br /><br />my $password = '';<br />my @chars = grep { /[[:print:]]/ and /\S/ } map { chr } 1..128;<br />$password .= $chars[rand @chars] for 1..(int (rand 7)) + 8;<br /><br />system qw{ksetup.exe /setcomputerpassword}, $password;<br /><br />print &quot;Principal: host/&quot;, lc( $ENV{COMPUTERNAME} ), &quot;.$domain\n&quot;;<br />print &quot;Password: $password\n&quot;;</p>
          <p class="info">Then, use <tt class="cmd">kdamin</tt> to add an equivalent principal to the Kerberos database, using the same password as above. Use the <tt class="cmd-arg">-e rc4-hmac:normal</tt> encryption option if adding a principal for a Windows XP system.</p>
          <p class="data-shell">kadmin: <kbd>ank -e rc4-hmac:normal host/client.example.org</kbd></p>
          <li>User Mapping</li>
          <p class="info">User mapping translates local accounts to the Kerberos domain. See <a href="http://www.novosial.org/cfengine/modules/users/index.html"><tt class="cmd">module:users</tt></a> for user account management under CFEngine.</p>
          <p class="data-shell">$ <kbd>ksetup.exe /mapuser * *</kbd></p>
         </ul>
         <h2><a name="s4">Samba</a></h2>
         <p class="info">Windows clients can authenticate to <a href="http://www.samba.org/">Samba</a> using Kerberos. Use Samba version 3.0.14a or higher on the server, and enable Kerberos support in the <tt class="file">smb.conf</tt> configuration file.</p>
         <p class="data">[global]<br /> use kerberos keytab = yes<br /> realm = EXAMPLE.ORG<br /> security = ads</p>
         <p class="info">Multiple <tt class="code">host</tt> and <tt class="code">cifs</tt> principals must be created for each Samba server, as principals are case sensitive, and Windows systems may randomly start using <tt class="host">Server.example.org</tt> or <tt class="host">SERVER.EXAMPLE.ORG</tt> when connecting. Extract these principals to the <tt class="file">/etc/krb5.keytab</tt> file on each Samba server.</p>
         <p class="data-shell">kadmin: <kbd>ank -randkey host/server.example.org</kbd><br />kadmin: <kbd>ank -randkey host/Server.example.org</kbd><br />kadmin: <kbd>ank -randkey host/SERVER.EXAMPLE.ORG</kbd><br />kadmin: <kbd>ank -randkey cifs/server.example.org</kbd><br />kadmin: <kbd>ank -randkey cifs/Server.example.org</kbd><br />kadmin: <kbd>ank -randkey cifs/SERVER.EXAMPLE.ORG</kbd><br />kadmin: <kbd>ktadd -k /etc/krb5.keytab host/server.example.org</kbd><br />kadmin: <kbd>ktadd -k /etc/krb5.keytab host/Server.example.org</kbd><br />kadmin: <kbd>ktadd -k /etc/krb5.keytab host/SERVER.EXAMPLE.ORG</kbd><br />kadmin: <kbd>ktadd -k /etc/krb5.keytab cifs/server.example.org</kbd><br />kadmin: <kbd>ktadd -k /etc/krb5.keytab cifs/Server.example.org</kbd><br />kadmin: <kbd>ktadd -k /etc/krb5.keytab cifs/SERVER.EXAMPLE.ORG</kbd></p> 
         <div class="footer">
          <a href="http://www.novosial.org/index.html"><img style="border: 0; float: right; margin-top: 1em; margin-right: 1em; margin-bottom: 5em" src="http://novosial.org/NovosialLogo.gif" alt="NovoSial Icon" height="64" width="64" /></a> 
          <p>This document is released into the public domain. Version 1.3.1</p> 
         </div> 
         <div id="xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd"></div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/05/18/399447.html" title="permalink">2013-05-18 15:04</a> ivaneeo 阅读(208) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/05/18/399447.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=399447">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=399447">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl108_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/05/08/399014.html">2008 r2</a> 
        </div> 
        <div class="postText"> 
         <br /> 
         <div id="xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd"></div>
         <div>
          1.首先安装后，有一个180天的试用期。
         </div> 
         <div>
          2.在180天试用期即将结束时，使用下面的评估序列号激活Svr 2008 R2 可以重新恢复180天试用期
         </div> 
         <div>
          Windows Server 2008 R2 Web: KBV3Q-DJ8W7-VPB64-V88KG-82C49
         </div> 
         <div>
          Windows Server 2008 R2 Standard: 4GGC4-9947F-FWFP3-78P6F-J9HDR
         </div> 
         <div>
          Windows Server 2008 R2 Enterprise: 7PJBC-63K3J-62TTK-XF46D-W3WMD
         </div> 
         <div>
          Windows Server 2008 R2 Datacenter: QX7TD-2CMJR-D7WWY-KVCYC-6D2YT
         </div> 
         <div>
          3.在180天试用期即将结束时，用“Rearm”后,重新输入上面的序列号,重启电脑,剩余时间又恢复到180天。微软官方文档中声明该命令只能重复使用5次。
         </div> 
         <div>
          4.上面的方法5次后，此后将无法再次使用。就要进行下一步，修改注册表中的一处键值(SkipRearm),以后就可以再次使用“Rearm”的命令，这个键值总共可以修改8次。
         </div> 
         <div>
          5.因此……。
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/05/08/399014.html" title="permalink">2013-05-08 17:47</a> ivaneeo 阅读(183) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/05/08/399014.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=399014">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=399014">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl109_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2013/04/22/398234.html">ull convert to string</a> 
        </div> 
        <div class="postText"> 
         <div>
          &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; char Str[20];
          <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;int ret;
          <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ret = sprintf(Str, &quot;%llu&quot;,ifconfig.flags);
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/04/22/398234.html" title="permalink">2013-04-22 21:29</a> ivaneeo 阅读(194) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2013/04/22/398234.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=398234">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=398234">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl110_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2012/12/29/393627.html">2012-12-29</a> 
        </div> 
        <div class="postText">
          1.资源池要展示的。
         <br />
         <div>
          2.在初始化和后期是可以管理的。
          <br />分别在资源中心和基础设施里面加模块就可以了。
          <br />资源中心就是展示。
          <br />不参与管理。
          <br />资源中心全是统计性的和展示性的。 
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/12/29/393627.html" title="permalink">2012-12-29 23:11</a> ivaneeo 阅读(198) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/12/29/393627.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=393627">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=393627">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl111_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2012/12/19/393221.html">ubuntu kerberos配置</a> 
        </div> 
        <div class="postText"> 
         <br /> 
         <div id="xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd"></div>https://help.ubuntu.com/10.04/serverguide/kerberos.html
         <br />
         <h2 class="title" style="clear: both">Kerberos</h2> 
         <p> <span class="application"><strong>Kerberos</strong></span> is a network authentication system based on the principal of a trusted third party. The other two parties being the user and the service the user wishes to authenticate to. Not all services and applications can use Kerberos, but for those that can, it brings the network environment one step closer to being Single Sign On (SSO). </p> 
         <p> This section covers installation and configuration of a Kerberos server, and some example client configurations. </p> 
         <div class="sect2" title="Overview"> 
          <div class="titlepage"> 
           <div> 
            <div> 
             <h3 class="title">Overview</h3> 
            </div> 
           </div> 
          </div> 
          <p> If you are new to Kerberos there are a few terms that are good to understand before setting up a Kerberos server. Most of the terms will relate to things you may be familiar with in other environments: </p> 
          <div class="itemizedlist"> 
           <ul class="itemizedlist" type="disc">
            <li class="listitem"> <p> <span class="emphasis"><em>Principal:</em></span> any users, computers, and services provided by servers need to be defined as Kerberos Principals. </p> </li>
            <li class="listitem"> <p> <span class="emphasis"><em>Instances:</em></span> are used for service principals and special administrative principals. </p> </li>
            <li class="listitem"> <p> <span class="emphasis"><em>Realms:</em></span> the unique realm of control provided by the Kerberos installation. Usually the DNS domain converted to uppercase (EXAMPLE.COM). </p> </li>
            <li class="listitem"> <p> <span class="emphasis"><em>Key Distribution Center:</em></span> (KDC) consist of three parts, a database of all principals, the authentication server, and the ticket granting server. For each realm there must be at least one KDC. </p> </li>
            <li class="listitem"> <p> <span class="emphasis"><em>Ticket Granting Ticket:</em></span> issued by the Authentication Server (AS), the Ticket Granting Ticket (TGT) is encrypted in the user's password which is known only to the user and the KDC. </p> </li>
            <li class="listitem"> <p> <span class="emphasis"><em>Ticket Granting Server:</em></span> (TGS) issues service tickets to clients upon request. </p> </li>
            <li class="listitem"> <p> <span class="emphasis"><em>Tickets:</em></span> confirm the identity of the two principals. One principal being a user and the other a service requested by the user. Tickets establish an encryption key used for secure communication during the authenticated session. </p> </li>
            <li class="listitem"> <p> <span class="emphasis"><em>Keytab Files:</em></span> are files extracted from the KDC principal database and contain the encryption key for a service or host. </p> </li>
           </ul> 
          </div> 
          <p> To put the pieces together, a Realm has at least one KDC, preferably two for redundancy, which contains a database of Principals. When a user principal logs into a workstation, configured for Kerberos authentication, the KDC issues a Ticket Granting Ticket (TGT). If the user supplied credentials match, the user is authenticated and can then request tickets for Kerberized services from the Ticket Granting Server (TGS). The service tickets allow the user to authenticate to the service without entering another username and password. </p> 
         </div> 
         <div class="sect2" title="Kerberos Server"> 
          <div class="titlepage"> 
           <div> 
            <div> 
             <h3 class="title">Kerberos Server</h3> 
            </div> 
           </div> 
          </div> 
          <div class="sect3" title="Installation"> 
           <div class="titlepage"> 
            <div> 
             <div> 
              <h4 class="title">Installation</h4> 
             </div> 
            </div> 
           </div> 
           <p> Before installing the Kerberos server a properly configured DNS server is needed for your domain. Since the Kerberos Realm by convention matches the domain name, this section uses the <span class="emphasis"><em>example.com</em></span> domain configured in <a class="xref" href="https://help.ubuntu.com/10.04/serverguide/dns-configuration.html#dns-primarymaster-configuration" title="Primary Master">the section called “Primary Master”</a>. </p> 
           <p> Also, Kerberos is a time sensitive protocol. So if the local system time between a client machine and the server differs by more than five minutes (by default), the workstation will not be able to authenticate. To correct the problem all hosts should have their time synchronized using the <span class="emphasis"><em>Network Time Protocol (NTP)</em></span>. For details on setting up NTP see <a class="xref" href="https://help.ubuntu.com/10.04/serverguide/NTP.html" title="Time Synchronisation with NTP">the section called “Time Synchronisation with NTP”</a>. </p> 
           <p> The first step in installing a Kerberos Realm is to install the <span class="application"><strong>krb5-kdc</strong></span> and <span class="application"><strong>krb5-admin-server</strong></span> packages. From a terminal enter: </p> 
           <pre class="screen"><span class="command"><strong>sudo apt-get install krb5-kdc krb5-admin-server</strong></span>
</pre> 
           <p> You will be asked at the end of the install to supply a name for the Kerberos and Admin servers, which may or may not be the same server, for the realm. </p> 
           <p> Next, create the new realm with the <span class="application"><strong>kdb5_newrealm</strong></span> utility: </p> 
           <pre class="screen"><span class="command"><strong>sudo krb5_newrealm</strong></span>
</pre> 
          </div> 
          <div class="sect3" title="Configuration"> 
           <div class="titlepage"> 
            <div> 
             <div> 
              <h4 class="title">Configuration</h4> 
             </div> 
            </div> 
           </div> 
           <p> The questions asked during installation are used to configure the <code class="filename">/etc/krb5.conf</code> file. If you need to adjust the Key Distribution Center (KDC) settings simply edit the file and restart the <span class="application"><strong>krb5-kdc</strong></span> daemon. </p> 
           <div class="procedure"> 
            <ol class="procedure" type="1">
             <li class="step" title="Step 1"> <p> Now that the KDC running an admin user is needed. It is recommended to use a different username from your everyday username. Using the <span class="application"><strong>kadmin.local</strong></span> utility in a terminal prompt enter: </p> <pre class="screen"><span class="command"><strong>sudo kadmin.local</strong></span>
<code class="computeroutput">Authenticating as principal root/admin@EXAMPLE.COM with password.
kadmin.local:</code><strong class="userinput"><code> addprinc steve/admin</code></strong>
<code class="computeroutput">WARNING: no policy specified for steve/admin@EXAMPLE.COM; defaulting to no policy
Enter password for principal &quot;steve/admin@EXAMPLE.COM&quot;: 
Re-enter password for principal &quot;steve/admin@EXAMPLE.COM&quot;: 
Principal &quot;steve/admin@EXAMPLE.COM&quot; created.
kadmin.local:</code><strong class="userinput"><code> quit</code></strong>
</pre> <p> In the above example <span class="italic">steve</span> is the <span class="emphasis"><em>Principal</em></span>, <span class="italic">/admin</span> is an <span class="emphasis"><em>Instance</em></span>, and <span class="italic">@EXAMPLE.COM</span> signifies the realm. The <span class="italic">&quot;every day&quot;</span> Principal would be <span class="emphasis"><em>steve@EXAMPLE.COM</em></span>, and should have only normal user rights. </p> 
              <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"> 
               <table summary="Note" border="0"> 
                <tbody>
                 <tr> 
                  <td rowspan="2" align="center" valign="top" width="25"> <img alt="[Note]" src="https://help.ubuntu.com/libs/admon/note.png" /> </td> 
                  <th align="left"><br /></th> 
                 </tr> 
                 <tr> 
                  <td align="left" valign="top"> <p> Replace <span class="emphasis"><em>EXAMPLE.COM</em></span> and <span class="emphasis"><em>steve</em></span> with your Realm and admin username. </p> </td> 
                 </tr> 
                </tbody>
               </table> 
              </div> </li>
             <li class="step" title="Step 2"> <p> Next, the new admin user needs to have the appropriate Access Control List (ACL) permissions. The permissions are configured in the <code class="filename">/etc/krb5kdc/kadm5.acl</code> file: </p> <pre class="programlisting">steve/admin@EXAMPLE.COM        *
</pre> <p> This entry grants <span class="emphasis"><em>steve/admin</em></span> the ability to perform any operation on all principals in the realm. </p> </li>
             <li class="step" title="Step 3"> <p> Now restart the <span class="application"><strong>krb5-admin-server</strong></span> for the new ACL to take affect: </p> <pre class="screen"><span class="command"><strong>sudo /etc/init.d/krb5-admin-server restart</strong></span>
</pre> </li>
             <li class="step" title="Step 4"> <p> The new user principal can be tested using the <span class="application"><strong>kinit utility</strong></span>: </p> <pre class="screen"><span class="command"><strong>kinit steve/admin</strong></span>
<code class="computeroutput">steve/admin@EXAMPLE.COM's Password:</code>
</pre> <p> After entering the password, use the <span class="application"><strong>klist</strong></span> utility to view information about the Ticket Granting Ticket (TGT): </p> <pre class="screen"><span class="command"><strong>klist</strong></span>
<code class="computeroutput">Credentials cache: FILE:/tmp/krb5cc_1000
        Principal: steve/admin@EXAMPLE.COM

  Issued           Expires          Principal
Jul 13 17:53:34  Jul 14 03:53:34  krbtgt/EXAMPLE.COM@EXAMPLE.COM</code>
</pre> <p> You may need to add an entry into the <code class="filename">/etc/hosts</code> for the KDC. For example: </p> <pre class="programlisting">192.168.0.1   kdc01.example.com       kdc01
</pre> <p> Replacing <span class="emphasis"><em>192.168.0.1</em></span> with the IP address of your KDC. </p> </li>
             <li class="step" title="Step 5"> <p> In order for clients to determine the KDC for the Realm some DNS SRV records are needed. Add the following to <code class="filename">/etc/named/db.example.com</code>: </p> <pre class="programlisting">_kerberos._udp.EXAMPLE.COM.     IN SRV 1  0 88  kdc01.example.com.
_kerberos._tcp.EXAMPLE.COM.     IN SRV 1  0 88  kdc01.example.com.
_kerberos._udp.EXAMPLE.COM.     IN SRV 10 0 88  kdc02.example.com. 
_kerberos._tcp.EXAMPLE.COM.     IN SRV 10 0 88  kdc02.example.com. 
_kerberos-adm._tcp.EXAMPLE.COM. IN SRV 1  0 749 kdc01.example.com.
_kpasswd._udp.EXAMPLE.COM.      IN SRV 1  0 464 kdc01.example.com.
</pre> 
              <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"> 
               <table summary="Note" border="0"> 
                <tbody>
                 <tr> 
                  <td rowspan="2" align="center" valign="top" width="25"> <img alt="[Note]" src="https://help.ubuntu.com/libs/admon/note.png" /> </td> 
                  <th align="left"><br /></th> 
                 </tr> 
                 <tr> 
                  <td align="left" valign="top"> <p> Replace <span class="emphasis"><em>EXAMPLE.COM</em></span>, <span class="emphasis"><em>kdc01</em></span>, and <span class="emphasis"><em>kdc02</em></span> with your domain name, primary KDC, and secondary KDC. </p> </td> 
                 </tr> 
                </tbody>
               </table> 
              </div> <p> See <a class="xref" href="https://help.ubuntu.com/10.04/serverguide/dns.html" title="Chapter&nbsp;7.&nbsp;Domain Name Service (DNS)">Chapter&nbsp;7, <em>Domain Name Service (DNS)</em></a> for detailed instructions on setting up DNS. </p> </li>
            </ol> 
           </div> 
           <p> Your new Kerberos Realm is now ready to authenticate clients. </p> 
          </div> 
         </div> 
         <div class="sect2" title="Secondary KDC"> 
          <div class="titlepage"> 
           <div> 
            <div> 
             <h3 class="title">Secondary KDC</h3> 
            </div> 
           </div> 
          </div> 
          <p> Once you have one Key Distribution Center (KDC) on your network, it is good practice to have a Secondary KDC in case the primary becomes unavailable. </p> 
          <div class="procedure"> 
           <ol class="procedure" type="1">
            <li class="step" title="Step 1"> <p> First, install the packages, and when asked for the Kerberos and Admin server names enter the name of the Primary KDC: </p> <pre class="screen"><span class="command"><strong>sudo apt-get install krb5-kdc krb5-admin-server</strong></span>
</pre> </li>
            <li class="step" title="Step 2"> <p> Once you have the packages installed, create the Secondary KDC's host principal. From a terminal prompt, enter: </p> <pre class="screen"><span class="command"><strong>kadmin -q &quot;addprinc -randkey host/kdc02.example.com&quot;</strong></span>
</pre> 
             <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"> 
              <table summary="Note" border="0"> 
               <tbody>
                <tr> 
                 <td rowspan="2" align="center" valign="top" width="25"> <img alt="[Note]" src="https://help.ubuntu.com/libs/admon/note.png" /> </td> 
                 <th align="left"><br /></th> 
                </tr> 
                <tr> 
                 <td align="left" valign="top"> <p> After, issuing any <span class="application"><strong>kadmin</strong></span> commands you will be prompted for your <span class="emphasis"><em>username/admin@EXAMPLE.COM</em></span> principal password. </p> </td> 
                </tr> 
               </tbody>
              </table> 
             </div> </li>
            <li class="step" title="Step 3"> <p> Extract the <span class="emphasis"><em>keytab</em></span> file: </p> <pre class="screen"><span class="command"><strong>kadmin -q &quot;ktadd -k keytab.kdc02 host/kdc02.example.com&quot;</strong></span>
</pre> </li>
            <li class="step" title="Step 4"> <p> There should now be a <code class="filename">keytab.kdc02</code> in the current directory, move the file to <code class="filename">/etc/krb5.keytab</code>: </p> <pre class="screen"><span class="command"><strong>sudo mv keytab.kdc02 /etc/krb5.keytab</strong></span>
</pre> 
             <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"> 
              <table summary="Note" border="0"> 
               <tbody>
                <tr> 
                 <td rowspan="2" align="center" valign="top" width="25"> <img alt="[Note]" src="https://help.ubuntu.com/libs/admon/note.png" /> </td> 
                 <th align="left"><br /></th> 
                </tr> 
                <tr> 
                 <td align="left" valign="top"> <p> If the path to the <code class="filename">keytab.kdc02</code> file is different adjust accordingly. </p> </td> 
                </tr> 
               </tbody>
              </table> 
             </div> <p> Also, you can list the principals in a Keytab file, which can be useful when troubleshooting, using the <span class="application"><strong>klist</strong></span> utility: </p> <pre class="screen"><span class="command"><strong>sudo klist -k /etc/krb5.keytab</strong></span>
</pre> </li>
            <li class="step" title="Step 5"> <p> Next, there needs to be a <code class="filename">kpropd.acl</code> file on each KDC that lists all KDCs for the Realm. For example, on both primary and secondary KDC, create <code class="filename">/etc/krb5kdc/kpropd.acl</code>: </p> <pre class="programlisting">host/kdc01.example.com@EXAMPLE.COM
host/kdc02.example.com@EXAMPLE.COM
</pre> </li>
            <li class="step" title="Step 6"> <p> Create an empty database on the <span class="emphasis"><em>Secondary KDC</em></span>: </p> <pre class="screen"><span class="command"><strong>sudo kdb5_util -s create</strong></span>
</pre> </li>
            <li class="step" title="Step 7"> <p> Now start the <span class="application"><strong>kpropd</strong></span> daemon, which listens for connections from the <span class="application"><strong>kprop</strong></span> utility. <span class="application"><strong>kprop</strong></span> is used to transfer dump files: </p> <pre class="screen"><span class="command"><strong>sudo kpropd -S</strong></span>
</pre> </li>
            <li class="step" title="Step 8"> <p> From a terminal on the <span class="emphasis"><em>Primary KDC</em></span>, create a dump file of the principal database: </p> <pre class="screen"><span class="command"><strong>sudo kdb5_util dump /var/lib/krb5kdc/dump</strong></span>
</pre> </li>
            <li class="step" title="Step 9"> <p> Extract the Primary KDC's <span class="emphasis"><em>keytab</em></span> file and copy it to <code class="filename">/etc/krb5.keytab</code>: </p> <pre class="screen"><span class="command"><strong>kadmin -q &quot;ktadd -k keytab.kdc01 host/kdc01.example.com&quot;</strong></span>
<span class="command"><strong>sudo mv keytab.kdc01 /etc/kr5b.keytab</strong></span>
</pre> 
             <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"> 
              <table summary="Note" border="0"> 
               <tbody>
                <tr> 
                 <td rowspan="2" align="center" valign="top" width="25"> <img alt="[Note]" src="https://help.ubuntu.com/libs/admon/note.png" /> </td> 
                 <th align="left"><br /></th> 
                </tr> 
                <tr> 
                 <td align="left" valign="top"> <p> Make sure there is a <span class="emphasis"><em>host</em></span> for <span class="emphasis"><em>kdc01.example.com</em></span> before extracting the Keytab. </p> </td> 
                </tr> 
               </tbody>
              </table> 
             </div> </li>
            <li class="step" title="Step 10"> <p> Using the <span class="application"><strong>kprop</strong></span> utility push the database to the Secondary KDC: </p> <pre class="screen"><span class="command"><strong>sudo kprop -r EXAMPLE.COM -f /var/lib/krb5kdc/dump kdc02.example.com</strong></span>
</pre> 
             <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"> 
              <table summary="Note" border="0"> 
               <tbody>
                <tr> 
                 <td rowspan="2" align="center" valign="top" width="25"> <img alt="[Note]" src="https://help.ubuntu.com/libs/admon/note.png" /> </td> 
                 <th align="left"><br /></th> 
                </tr> 
                <tr> 
                 <td align="left" valign="top"> <p> There should be a <span class="emphasis"><em>SUCCEEDED</em></span> message if the propagation worked. If there is an error message check <code class="filename">/var/log/syslog</code> on the secondary KDC for more information. </p> </td> 
                </tr> 
               </tbody>
              </table> 
             </div> <p> You may also want to create a <span class="application"><strong>cron</strong></span> job to periodically update the database on the Secondary KDC. For example, the following will push the database every hour: </p> <pre class="programlisting"># m h  dom mon dow   command
0 * * * * /usr/sbin/kdb5_util dump /var/lib/krb5kdc/dump &amp;&amp; /usr/sbin/kprop -r EXAMPLE.COM -f /var/lib/krb5kdc/dump kdc02.example.com
</pre> </li>
            <li class="step" title="Step 11"> <p> Back on the <span class="emphasis"><em>Secondary KDC</em></span>, create a <span class="emphasis"><em>stash</em></span> file to hold the Kerberos master key: </p> <pre class="screen"><span class="command"><strong>sudo kdb5_util stash</strong></span>
</pre> </li>
            <li class="step" title="Step 12"> <p> Finally, start the <span class="application"><strong>krb5-kdc</strong></span> daemon on the Secondary KDC: </p> <pre class="screen"><span class="command"><strong>sudo /etc/init.d/krb5-kdc start</strong></span>
</pre> </li>
           </ol> 
          </div> 
          <p> The <span class="emphasis"><em>Secondary KDC</em></span> should now be able to issue tickets for the Realm. You can test this by stopping the <span class="application"><strong>krb5-kdc</strong></span> daemon on the Primary KDC, then use <span class="application"><strong>kinit</strong></span> to request a ticket. If all goes well you should receive a ticket from the Secondary KDC. </p> 
         </div> 
         <div class="sect2" title="Kerberos Linux Client"> 
          <div class="titlepage"> 
           <div> 
            <div> 
             <h3 class="title">Kerberos Linux Client</h3> 
            </div> 
           </div> 
          </div> 
          <p> This section covers configuring a Linux system as a <span class="application"><strong>Kerberos</strong></span> client. This will allow access to any kerberized services once a user has successfully logged into the system. </p> 
          <div class="sect3" title="Installation"> 
           <div class="titlepage"> 
            <div> 
             <div> 
              <h4 class="title">Installation</h4> 
             </div> 
            </div> 
           </div> 
           <p> In order to authenticate to a Kerberos Realm, the <span class="application"><strong>krb5-user</strong></span> and <span class="application"><strong>libpam-krb5</strong></span> packages are needed, along with a few others that are not strictly necessary but make life easier. To install the packages enter the following in a terminal prompt: </p> 
           <pre class="screen"><span class="command"><strong>sudo apt-get install krb5-user libpam-krb5 libpam-ccreds auth-client-config</strong></span>
</pre> 
           <p> The <span class="application"><strong>auth-client-config</strong></span> package allows simple configuration of PAM for authentication from multiple sources, and the <span class="application"><strong>libpam-ccreds</strong></span> will cache authentication credentials allowing you to login in case the Key Distribution Center (KDC) is unavailable. This package is also useful for laptops that may authenticate using Kerberos while on the corporate network, but will need to be accessed off the network as well. </p> 
          </div> 
          <div class="sect3" title="Configuration"> 
           <div class="titlepage"> 
            <div> 
             <div> 
              <h4 class="title">Configuration</h4> 
             </div> 
            </div> 
           </div> 
           <p> To configure the client in a terminal enter: </p> 
           <pre class="screen"><span class="command"><strong>sudo dpkg-reconfigure krb5-config</strong></span>
</pre> 
           <p> You will then be prompted to enter the name of the Kerberos Realm. Also, if you don't have DNS configured with Kerberos <span class="emphasis"><em>SRV</em></span> records, the menu will prompt you for the hostname of the Key Distribution Center (KDC) and Realm Administration server. </p> 
           <p> The <span class="application"><strong>dpkg-reconfigure</strong></span> adds entries to the <code class="filename">/etc/krb5.conf</code> file for your Realm. You should have entries similar to the following: </p> 
           <pre class="programlisting">[libdefaults]
        default_realm = EXAMPLE.COM
...
[realms]
        EXAMPLE.COM = }                
                kdc = 192.168.0.1               
                admin_server = 192.168.0.1
        }
</pre> 
           <p> You can test the configuration by requesting a ticket using the <span class="application"><strong>kinit</strong></span> utility. For example: </p> 
           <pre class="screen"><span class="command"><strong>kinit steve@EXAMPLE.COM</strong></span>
<code class="computeroutput">Password for steve@EXAMPLE.COM:</code>
</pre> 
           <p> When a ticket has been granted, the details can be viewed using <span class="application"><strong>klist</strong></span>: </p> 
           <pre class="screen"><span class="command"><strong>klist</strong></span>
<code class="computeroutput">Ticket cache: FILE:/tmp/krb5cc_1000
Default principal: steve@EXAMPLE.COM

Valid starting     Expires            Service principal
07/24/08 05:18:56  07/24/08 15:18:56  krbtgt/EXAMPLE.COM@EXAMPLE.COM
        renew until 07/25/08 05:18:57


Kerberos 4 ticket cache: /tmp/tkt1000
klist: You have no tickets cached</code>
</pre> 
           <p> Next, use the <span class="application"><strong>auth-client-config</strong></span> to configure the <span class="application"><strong>libpam-krb5</strong></span> module to request a ticket during login: </p> 
           <pre class="screen"><span class="command"><strong>sudo auth-client-config -a -p kerberos_example</strong></span>
</pre> 
           <p> You will should now receive a ticket upon successful login authentication. </p> 
          </div> 
         </div> 
         <div class="sect2" title="Resources"> 
          <div class="titlepage"> 
           <div> 
            <div> 
             <h3 class="title">Resources</h3> 
            </div> 
           </div> 
          </div> 
          <div class="itemizedlist"> 
           <ul class="itemizedlist" type="disc">
            <li class="listitem"> <p> For more information on Kerberos see the <a class="ulink" href="http://web.mit.edu/Kerberos/" target="_top">MIT Kerberos</a> site. </p> </li>
            <li class="listitem"> <p> The <a class="ulink" href="https://help.ubuntu.com/community/Kerberos" target="_top">Ubuntu Wiki Kerberos</a> page has more details. </p> </li>
            <li class="listitem"> <p> O'Reilly's <a class="ulink" href="http://oreilly.com/catalog/9780596004033/" target="_top">Kerberos: The Definitive Guide</a> is a great reference when setting up Kerberos. </p> </li>
            <li class="listitem"> <p> Also, feel free to stop by the <span class="emphasis"><em>#ubuntu-server</em></span> IRC channel on <a class="ulink" href="http://freenode.net/" target="_top">Freenode</a> if you have Kerberos questions. </p> </li>
           </ul> 
          </div> 
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/12/19/393221.html" title="permalink">2012-12-19 18:15</a> ivaneeo 阅读(2205) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/12/19/393221.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=393221">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=393221">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl112_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2012/12/11/392754.html">Nginx配置SSL证书部署HTTPS网站</a> 
        </div> 
        <div class="postText"> 
         <div>
          <h2>一、什么是 SSL 证书，什么是 HTTPS</h2> 
          <p>SSL 证书是一种数字证书，它使用 Secure Socket Layer 协议在浏览器和 Web 服务器之间建立一条安全通道，从而实现：<br /> 1、数据信息在客户端和服务器之间的加密传输，保证双方传递信息的安全性，不可被第三方窃听；<br /> 2、用户可以通过服务器证书验证他所访问的网站是否真实可靠。<br /> （via<a href="http://baike.baidu.com/view/1009264.htm" title="SSL证书" target="_blank">百度百科</a>）</p> 
          <p>HTTPS 是以安全为目标的 HTTP 通道，即 HTTP 下加入 SSL 加密层。HTTPS 不同于 HTTP 的端口，HTTP默认端口为80，HTTPS默认端口为443.<br /> </p>
          <div>
           <div aligncenter"=""> 
           </div>
          </div> 
          <h2>二、什么网站需要使用SSL证书</h2> 
          <p><strong>1、购物交易类网站</strong><br /> 不用多说，网上银行、支付宝、Paypal等肯定会全程加密以保护你的信息安全。</p> 
          <p><strong>2、注册与登陆</strong><br /> 一些大的网站，比如电子邮箱，注册会员或者登陆的时候，会专门通过SSL通道，保证密码安全不被窃取。</p> 
          <p><strong>3、某些在线代理</strong><br /> 这个。。。嗯哼，就不说了。</p> 
          <p><strong>4、装B</strong><br /> 比如我……</p> 
          <h2>三、自行颁发不受浏览器信任的SSL证书</h2> 
          <p>为晒晒IQ网颁发证书。ssh登陆到服务器上，终端输入以下命令，使用<a href="http://www.lovelucy.info/tag/openssl" title="openssl安全加密解密编程" target="_blank">openssl</a>生成RSA密钥及证书。</p> 
          <div>
           <table>
            <tbody>
             <tr>
              <td><pre style="font-family:monospace;"><span style="color: #666666; font-style: italic;"># 生成一个RSA密钥 </span> $ openssl genrsa <span style="color: #660033;">-des3</span> <span style="color: #660033;">-out</span> 33iq.key <span style="color: #000000;">1024</span> &nbsp; <span style="color: #666666; font-style: italic;"># 拷贝一个不需要输入密码的密钥文件</span> $ openssl rsa <span style="color: #660033;">-in</span> 33iq.key <span style="color: #660033;">-out</span> 33iq_nopass.key &nbsp; <span style="color: #666666; font-style: italic;"># 生成一个证书请求</span> $ openssl req <span style="color: #660033;">-new</span> <span style="color: #660033;">-key</span> 33iq.key <span style="color: #660033;">-out</span> 33iq.csr &nbsp; <span style="color: #666666; font-style: italic;"># 自己签发证书</span> $ openssl x509 <span style="color: #660033;">-req</span> <span style="color: #660033;">-days</span> <span style="color: #000000;">365</span> <span style="color: #660033;">-in</span> 33iq.csr <span style="color: #660033;">-signkey</span> 33iq.key <span style="color: #660033;">-out</span> 33iq.crt</pre></td>
             </tr>
            </tbody>
           </table>
          </div> 
          <p>第3个命令是生成证书请求，会提示输入省份、城市、域名信息等，重要的是，email一定要是你的域名后缀的。这样就有一个 csr 文件了，提交给 ssl 提供商的时候就是这个 csr 文件。当然我这里并没有向证书提供商申请，而是在第4步自己签发了证书。</p> 
          <p><a href="http://cdn.lovelucy.info/wordpress/wp-content/uploads/2011/10/openssl_keygen.png"><img src="http://cdn.lovelucy.info/wordpress/wp-content/uploads/2011/10/openssl_keygen.png" alt="使用openssl生成密钥和证书" title="使用openssl生成密钥和证书" size-full="" wp-image-738"="" height="591" width="586" /></a></p> 
          <p>编辑配置文件nginx.conf，给站点加上HTTPS协议</p> 
          <div>
           <table>
            <tbody>
             <tr>
              <td><pre style="font-family:monospace;">server <span style="color: #7a0874; font-weight: bold;">{</span>     server_name YOUR_DOMAINNAME_HERE;     listen <span style="color: #000000;">443</span>;     ssl on;     ssl_certificate <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>local<span style="color: #000000; font-weight: bold;">/</span>nginx<span style="color: #000000; font-weight: bold;">/</span>conf<span style="color: #000000; font-weight: bold;">/</span>33iq.crt;     ssl_certificate_key <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>local<span style="color: #000000; font-weight: bold;">/</span>nginx<span style="color: #000000; font-weight: bold;">/</span>conf<span style="color: #000000; font-weight: bold;">/</span>33iq_nopass.key;     <span style="color: #666666; font-style: italic;"># 若ssl_certificate_key使用33iq.key，则每次启动Nginx服务器都要求输入key的密码。</span> <span style="color: #7a0874; font-weight: bold;">}</span></pre></td>
             </tr>
            </tbody>
           </table>
          </div> 
          <p>重启Nginx后即可通过https访问网站了。</p> 
          <p>自行颁发的SSL证书能够实现加密传输功能，但浏览器并不信任，会出现以下提示：<br /> <a href="http://cdn.lovelucy.info/wordpress/wp-content/uploads/2011/09/ssl_error.png"><img src="http://cdn.lovelucy.info/wordpress/wp-content/uploads/2011/09/ssl_error.png" alt="不信任的安全证书" title="ssl_error" size-full="" wp-image-730"="" height="294" width="489" /></a></p> 
          <h2>四、受浏览器信任的证书</h2> 
          <p>要获取受浏览器信任的证书，则需要到证书提供商处申请。证书授证中心，又叫做CA机构，为每个使用公开密钥的用户发放一个数字证书。浏览器在默认情况下内置了一些CA机构的证书，使得这些机构颁发的证书受到信任。<a href="http://www.verisign.com/cn/" title="VeriSign认证服务" target="_blank">VeriSign</a>即 是一个著名的国外CA机构，工行、建行、招行、支付宝、财付通等网站均使用VeriSign的证书，而网易邮箱等非金融网站采用的是中国互联网信息中心 CNNIC颁发的SSL证书。一般来说，一个证书的价格不菲，以VeriSign的证书为例，价格在每年8000元人民币左右。</p> 
          <p>据说也有免费的证书可以申请。和VeriSign一样，<a href="http://www.startssl.com" title="StartCom" target="_blank">StartSSL</a>也 是一家CA机构，它的根证书很久之前就被一些具有开源背景的浏览器支持（Firefox浏览器、谷歌Chrome浏览器、苹果Safari浏览器等）。后 来StartSSL竟然搞定了微软：在升级补丁中，微软更新了通过Windows根证书认证（Windows Root Certificate Program）的厂商清单，并首次将StartCom公司列入了该认证清单。现在，在Windows 7或安装了升级补丁的Windows Vista或Windows XP操作系统中，系统会完全信任由StartCom这类免费数字认证机构认证的数字证书，从而使StartSSL也得到了IE浏览器的支持。（来源及<a href="http://blog.s135.com/startssl/" title=" 全球可信并且唯一免费的HTTPS(SSL)证书颁发机构：StartSSL" target="_blank">申请步骤</a>）</p> 
          <h2>五、只针对注册、登陆进行https加密处理</h2> 
          <p>既然HTTPS能保证安全，为什么全世界大部分网站都仍旧在使用HTTP呢？使用HTTPS协议，对服务器来说是很大的负载开销。从性能上考虑，我 们无法做到对于每个用户的每个访问请求都进行安全加密（当然，Google这种大神除外）。作为一个普通网站，我们所追求的只是在进行交易、密码登陆等操 作时的安全。通过配置Nginx服务器，可以使用rewrite来做到这一点。</p> 
          <p>在https server下加入如下配置：</p> 
          <div>
           <table>
            <tbody>
             <tr>
              <td><pre style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">(</span><span style="color: #007800;">$uri</span> <span style="color: #000000; font-weight: bold;">!</span>~<span style="color: #000000; font-weight: bold;">*</span> <span style="color: #ff0000;">&quot;/logging.php$&quot;</span><span style="color: #7a0874; font-weight: bold;">)</span> <span style="color: #7a0874; font-weight: bold;">{</span>     rewrite ^<span style="color: #000000; font-weight: bold;">/</span><span style="color: #7a0874; font-weight: bold;">(</span>.<span style="color: #000000; font-weight: bold;">*</span><span style="color: #7a0874; font-weight: bold;">)</span>$ http:<span style="color: #000000; font-weight: bold;">//</span><span style="color: #007800;">$host</span><span style="color: #000000; font-weight: bold;">/</span><span style="color: #007800;">$1</span> redirect; <span style="color: #7a0874; font-weight: bold;">}</span></pre></td>
             </tr>
            </tbody>
           </table>
          </div> 
          <p>在http server下加入如下配置：</p> 
          <div>
           <table>
            <tbody>
             <tr>
              <td><pre style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">(</span><span style="color: #007800;">$uri</span> ~<span style="color: #000000; font-weight: bold;">*</span> <span style="color: #ff0000;">&quot;/logging.php$&quot;</span><span style="color: #7a0874; font-weight: bold;">)</span> <span style="color: #7a0874; font-weight: bold;">{</span>     rewrite ^<span style="color: #000000; font-weight: bold;">/</span><span style="color: #7a0874; font-weight: bold;">(</span>.<span style="color: #000000; font-weight: bold;">*</span><span style="color: #7a0874; font-weight: bold;">)</span>$ https:<span style="color: #000000; font-weight: bold;">//</span><span style="color: #007800;">$host</span><span style="color: #000000; font-weight: bold;">/</span><span style="color: #007800;">$1</span> redirect; <span style="color: #7a0874; font-weight: bold;">}</span></pre></td>
             </tr>
            </tbody>
           </table>
          </div> 
          <p>这样一来，用户会且只会在访问logging.php的情况下，才会通过https访问。</p> 
          <p>更新：有一些开发框架会根据 $_SERVER['HTTPS'] 这个 PHP 变量是否为 on 来判断当前的访问请求是否是使用 https。为此我们需要在 Nginx 配置文件中添加一句来设置这个变量。遇到 https 链接重定向后会自动跳到 http 问题的同学可以参考一下。</p> 
          <div>
           <table>
            <tbody>
             <tr>
              <td><pre style="font-family:monospace;">server <span style="color: #7a0874; font-weight: bold;">{</span>     ...     listen <span style="color: #000000;">443</span>;     location \.php$ <span style="color: #7a0874; font-weight: bold;">{</span>         ...         include fastcgi_params;         fastcgi_param HTTPS on; <span style="color: #666666; font-style: italic;"># 多加这一句</span>     <span style="color: #7a0874; font-weight: bold;">}</span> <span style="color: #7a0874; font-weight: bold;">}</span> &nbsp; server <span style="color: #7a0874; font-weight: bold;">{</span>     ...     listen <span style="color: #000000;">80</span>;     location \.php$ <span style="color: #7a0874; font-weight: bold;">{</span>         ...         include fastcgi_params;     <span style="color: #7a0874; font-weight: bold;">}</span> <span style="color: #7a0874; font-weight: bold;">}</span></pre></td>
             </tr>
            </tbody>
           </table>
          </div> 
          <p>参考链接：<br /> <a href="http://zou.lu/nginx-https-ssl-module" title="Nginx 配置 SSL 证书 + HTTPS 站点小记" target="_blank">http://zou.lu/nginx-https-ssl-module</a><br /> <a href="http://blog.s135.com/startssl/" title="全球可信并且唯一免费的HTTPS(SSL)证书颁发机构：StartSSL" target="_blank">http://blog.s135.com/startssl/</a><br /> <a href="http://www.baalchina.net/2008/08/nginx-https-rewrite/" title="Nginx下只针对logging.php进行https处理的重写规则" target="_blank">http://www.baalchina.net/2008/08/nginx-https-rewrite/</a></p> 
          <div id="wumiiBtnDiv" style="clear: both; overflow: visible; position: relative; left: 0px; top: 0px; height: 28px; margin: 0px; padding: 10px 0px 0px; text-shadow: none; text-indent: 0px;"> 
           <div id="wumiiLikeBtnDiv" style="position: static; float: left; display: inline; width: 89px; height: 28px; margin: 0px 0px 0px 240px; padding: 0px; background: url(&quot;http://static.wumii.cn/images/blogWidget/widget_buttons_skyBlue.png&quot;) no-repeat scroll 0px 0px transparent; text-indent: 0px;"> 
            <a href="http://www.wumii.com/item/19cpoZVtE" target="_blank" id="wumiiNumLikes" style="float:left;width:38px;height:20px;line-height:21px;margin:4px 0 0 4px;padding:0;border:none;background-color:#fff;color:#5a738a;letter-spacing:0;text-decoration:none;text-align:center;text-indent:0;font-size:12px;">0</a> 
           </div> 
           <div id="wumiiRecommendBtnDiv" style="position: static; clear: none; float: left; display: inline; height: 28px; margin: 0px; padding: 0px 5px; text-indent: 0px;"> 
           </div> 
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/12/11/392754.html" title="permalink">2012-12-11 02:42</a> ivaneeo 阅读(10699) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/12/11/392754.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=392754">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=392754">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl113_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2012/11/06/390893.html">mysql超时设置的问题</a> 
        </div> 
        <div class="postText"> 
         <br /> 
         <div id="xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd"></div>
         <p><span>com.mysql.jdbc.CommunicationsException: The last packet successfully received from the server was58129 seconds ago.The last packet sent successfully to the server was 58129 seconds ago, which is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.</span></p> 
         <p>&nbsp;</p> 
         <p><span>查了一下，原来是mysql超时设置的问题<br /><span>如果连接闲置8小时 (8小时内没有进行数据库操作), mysql就会自动断开连接, 要重启tomcat. <br /></span></span></p> 
         <p>&nbsp;</p> 
         <p>&nbsp;</p> 
         <p style="margin: 0cm 0cm 0pt;"><span>解决办法：</span> </p> 
         <p>&nbsp;</p> 
         <p>&nbsp;</p> 
         <p><span>&nbsp;&nbsp;&nbsp; 一种. 如果不用hibernate的话, 则在　connection url中加参数: </span><span>autoReconnect=true</span></p> 
         <p><span>jdbc.url=jdbc:mysql://ipaddress:3306/database?autoReconnect=true&amp;amp;autoReconnectForPools=true<br /></span></p> 
         <p>&nbsp;</p> 
         <p><span><br />&nbsp;&nbsp;&nbsp; 二种。用hibernate的话, 加如下属性: <br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;connection.autoReconnect&quot;&gt;true&lt;/property&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;connection.autoReconnectForPools&quot;&gt;true&lt;/property&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;connection.is-connection-validation-required&quot;&gt;true&lt;/property&gt;</p> 
         <p>&nbsp;</p> 
         <p><br />&nbsp;&nbsp;&nbsp; 三。要是还用c3p0连接池: <br /><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;hibernate.c3p0.acquire_increment&quot;&gt;1&lt;/property&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;hibernate.c3p0.idle_test_period&quot;&gt;0&lt;/property&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;0&lt;/property&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;<span>hibernate.</span>c3p0.validate&quot;&gt;true&lt;/property&gt;</p> 
         <p>&nbsp;</p> 
         <p>&nbsp;</p> 
         <p>　四。最不好的解决方案</p> 
         <p>&nbsp;</p> 
         <p>使用Connector/J连接MySQL数据库，程序运行较长时间后就会报以下错误：</p> 
         <p>Communications link failure，The last packet successfully received from the server was *** millisecond ago.The last packet successfully sent to the server was ***&nbsp; millisecond ago。</p> 
         <p>其中错误还会提示你修改wait_timeout或是使用Connector/J的autoReconnect属性避免该错误。</p> 
         <p>后来查了一些资料，才发现遇到这个问题的人还真不少，大部分都是使用连接池方式时才会出现这个问题，短连接应该很难出现这个问题。这个问题的原因：</p> 
         <p>MySQL服务器默认的“wait_timeout”是28800秒即8小时，意味着如果一个连接的空闲时间超过8个小时，MySQL将自动断开该连接，而连接池却认为该连接还是有效的(因为并未校验连接的有效性)，当应用申请使用该连接时，就会导致上面的报错。</p> 
         <p>1.按照错误的提示，可以在JDBC URL中使用autoReconnect属性，实际测试时使用了autoReconnect=true&amp; failOverReadOnly=false，不过并未起作用，使用的是5.1版本，可能真像网上所说的只对4之前的版本有效。</p> 
         <p>2.没办法，只能修改MySQL的参数了，wait_timeout最大为31536000即1年，在my.cnf中加入：</p> 
         <p>[mysqld] </p> 
         <p>wait_timeout=31536000 </p> 
         <p>interactive_timeout=31536000</p> 重启生效，需要同时修改这两个参数 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/11/06/390893.html" title="permalink">2012-11-06 16:29</a> ivaneeo 阅读(1591) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/11/06/390893.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=390893">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=390893">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl114_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2012/11/02/390692.html">mysql资增长不能从0开始</a> 
        </div> 
        <div class="postText">
          SET SQL_MODE=&quot;NO_AUTO_VALUE_ON_ZERO&quot;
         <br />NO_AUTO_VALUE_ON_ZERO影响AUTO_INCREMENT列的处理。一般情况，你可以向该列插入NULL或0生成下一个序列号。NO_AUTO_VALUE_ON_ZERO禁用0，因此只有NULL可以生成下一个序列号。
         <br />
         <br />如 果将0保存到表的AUTO_INCREMENT列，该模式会很有用。(不推荐采用该惯例)。例如，如果你用mysqldump转储表并重载，MySQL遇 到0值一般会生成新的序列号，生成的表的内容与转储的表不同。重载转储文件前启用NO_AUTO_VALUE_ON_ZERO可以解决该问题。 
         <div id="xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd"></div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/11/02/390692.html" title="permalink">2012-11-02 15:45</a> ivaneeo 阅读(238) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/11/02/390692.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=390692">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=390692">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl115_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2012/10/20/389916.html">Virtual Desktop</a> 
        </div> 
        <div class="postText"> 
         <div>
          <div>
           <div style="overflow: hidden">
            <div style="font-family:Consolas,'Lucida Console',monospace;padding-left:7px;word-wrap:break-word;color:#000000">
             8 Virtual Desktop program: Ulteo, NX Enteprise Server, FoSS CLOUD, Orcale Virtualbox, Thinstuff, JetClouding, Go Grid,2xCloud Computing
            </div>
           </div>
          </div> 
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/10/20/389916.html" title="permalink">2012-10-20 13:18</a> ivaneeo 阅读(271) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/10/20/389916.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=389916">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=389916">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl116_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2012/06/08/380368.html">kvm创建</a> 
        </div> 
        <div class="postText"> 
         <div>
          <div>
           sudo qemu-img create -f qcow2 -o size=30240M,preallocation=metadata win2003_hda.img
          </div>
          <div>
           http://blog.kreyolys.com/2011/09/27/kvm-virtual-machines-disk-format-file-basedqcow2-or-block-devicelvm2/---比较
          </div>
          <div>
           sudo virt-install \
           <br />--name win2003_test \
           <br />--ram=1024 \
           <br />--vcpus=2 \
           <br />--disk /kvm/win2003_hda.img,bus=virtio \
           <br />--network bridge:br0,model=virtio \
           <br />--vnc \
           <br />--accelerate \
           <br />-c /share/os/win2003-i386.iso \
           <br />--disk /home/kvm/virtio-win-1.1.16.vfd,device=floppy \
           <br />-c /home/kvm/virtio-win-0.1-22.iso \
           <br />--os-type=windows \
           <br />--os-variant=win2k3 \
           <br />--noapic \
           <br />--connect \
           <br />qemu:///system \
           <br />--hvm
          </div>
          <br />
          <div>
           http://www.howtoforge.com/installing-kvm-guests-with-virt-install-on-ubuntu-12.04-lts-server
           <br />
           <br />
           <div>
            <p><a href="http://www.linuxwind.org/download/virtio-win-1.1.16.vfd"><span style="color:#000000;"><span style="font-size:14px;"><span style="font-family:lucida sans unicode,lucida grande,sans-serif;"><span style="line-height: 24px; ">http://www.linuxwind.org/download/</span>virtio-win-1.1.16.vfd</span></span></span></a></p> 
            <p><a href="http://alt.fedoraproject.org/pub/alt/virtio-win/latest/images/bin/virtio-win-0.1-22.iso"><span style="color:#000000;"><span style="font-size:14px;"><span style="font-family:lucida sans unicode,lucida grande,sans-serif;">http://alt.fedoraproject.org/pub/alt/virtio-win/latest/images/bin/virtio-win-0.1-22.iso</span></span></span></a></p>
           </div>
           <br />半虚拟化参考：
           <br />
           <div>
            <ol>
             <li>
              <div>
               #!/bin/sh
              </div></li>
             <li>
              <div>
               WINISO=/path/to/win7.iso &nbsp; &nbsp;#Windows ISO
              </div></li>
             <li>
              <div>
               INSTALLDISK=win7virtio.img &nbsp;#Disk location. Can be LVM LV
              </div></li>
             <li>
              <div>
               VFD=http://alt.fedoraproject.org/pub/alt/virtio-win/latest/images/bin/virtio-win-1.1.16.vfd
              </div></li>
             <li>
              <div>
               DRVRISO=http://alt.fedoraproject.org/pub/alt/virtio-win/latest/images/bin/virtio-win-0.1-22.iso
              </div></li>
             <li>
              <div>
               &nbsp;
              </div></li>
             <li>
              <div>
               [ -e $(basename $VFD) ] &nbsp; &nbsp; || wget $VFD
              </div></li>
             <li>
              <div>
               [ -e $(basename $DRVRISO) ] || wget $DRVRISO
              </div></li>
             <li>
              <div>
               [ -e $INSTALLDISK ] &nbsp; &nbsp; &nbsp; &nbsp; || qemu-img create $INSTALLDISK 30G
              </div></li>
             <li>
              <div>
               &nbsp;
              </div></li>
             <li>
              <div>
               sudo virt-install -c qemu:///system --virt-type kvm --name win7virtio --ram 1024 --disk path=&quot;$INSTALLDISK&quot;,bus=virtio \
              </div></li>
             <li>
              <div>
               --disk $(basename $VFD),device=floppy --os-variant win7 --cdrom $(basename $DRVRISO) --cdrom &quot;$WINISO&quot; --vcpus 2
              </div></li>
             <li>
              <div>
               ENDING OF BASH SCRIPT 
              </div></li>
            </ol>
            <p>其他参考：</p>
            <p>&nbsp;</p>
            <div>
             <p>In my previous article <a title="KVM Guests: Using Virt-Install to Import an Existing Disk Image" href="http://blog.allanglesit.com/2011/03/kvm-guests-using-virt-install-to-import-an-existing-disk-image/">KVM Guests: Using Virt-Install to Import an Existing Disk Image</a> we discussed how to use virt-install to import an existing disk image, which already has an OS installed into it.&nbsp; Additionally in <a title="KVM Guests: Using Virt-Install to Install Debian and Ubuntu Guests" href="http://blog.allanglesit.com/2011/03/kvm-guests-using-virt-install-to-install-debian-and-ubuntu-guests/">KVM Guests: Using Virt-Install to Install Debian and Ubuntu Guests</a> I documented how to initiate an install directly off of the apt mirror of your choice for Debian and Ubuntu Guests using virt-install.&nbsp; In this article we will use virt-install to create a guest and begin the installation using a CD or ISO image for installation media.</p> 
             <p><strong>Assumptions I Have Made</strong></p> 
             <ul>
              <li>My KVM host is Ubuntu 10.10 and I am assuming that yours is as well.&nbsp; If it is not then the syntax might be slightly different or may not include the same features.</li>
              <li>That you have kvm installed on the host and you can manually create VMs using virt-manager and they work perfectly.</li>
              <li>That you have a bridge configured and working on other guests.</li>
              <li>That you have virt-install and libvirt-bin installed as well as virt-manager or virt-viewer so that you can complete the install after the virt-install command has completed.</li>
              <li>That you are trying to import disk images that support VirtIO devices (most recent Linux distributions, Windows does not natively support the VirtIO interface, so you will had to have manually installed the VirtIO drivers into your disk image).</li>
             </ul> 
             <p><strong>The Basic Command</strong></p> 
             <pre># virt-install -n vmname -r 2048 --os-type=linux --os-variant=ubuntu --disk /kvm/images/disk/vmname_boot.img,device=disk,bus=virtio,size=40,sparse=true,format=raw -w bridge=br0,model=virtio --vnc --noautoconsole -c /kvm/images/iso/ubuntu.iso</pre> 
             <p><strong>Parameters Detailed</strong></p> 
             <ul>
              <li>-n <em>vmname</em> [the name of your VM]</li>
              <li>-r <em>2048</em> [the amount of RAM in MB for your VM]</li>
              <li>Cos-type=<em>linux</em> [the type of OS linux or windows]</li>
              <li>Cos-variant=<em>ubuntu</em> [the distribution or version of Windows for a full list see man virt-install]</li>
              <li>Cdisk <em>/kvm/images/disk/vmname_boot.img</em>,device=<em>disk</em>,bus=<em>virtio</em>,size=<em>40</em>,sparse=<em>true</em>,format=<em>raw </em> [this is a long one you define the path, then comma delimited options, device is the type of storage cdrom, disk, floppy, bus is the interface ide, scsi, usb, virtio - virtio is the fastest but you need to install the drivers for Windows and older versions of Linux don't have support]</li>
              <li>-w bridge=<em>br0</em>,model=<em>virtio</em> [the network configuration, in this case we are connecting to a bridge named br0, and using the virtio drivers which perform much better if you are using an OS which doesn't support virtio you can use e1000 or rtl8139.&nbsp; You could alternatively use --nonetworks if you do not need networking]</li>
              <li>Cvnc [configures the graphics card to use VNC allowing you to use virt-viewer or virt-manager to see the desktop as if you were at the a monitor of a physical machine]</li>
              <li>Cnoautoconsole [configures the installer to NOT automatically try to open virt-viewer to view the console to complete the installation - this is helpful if you are working on a remote system through SSH]</li>
              <li>-c <em>/kvm/images/iso/ubuntu.iso</em> [this option specifies the cdrom device or iso image with which to boot off of.&nbsp; You could additionally specify the cdrom device as a disk device, and not use the -c option, it will then boot off of the cdrom if you don't specify another installation method]</li>
             </ul> 
             <p><strong>LVM Disk Variation</strong></p> 
             <pre># virt-install -n vmname -r 2048 --os-type=linux --os-variant=ubuntulucid  --disk  /dev/vg_name/lv_name,device=disk,bus=virtio  -w bridge=br0,model=virtio --vnc --noautoconsole -c  /kvm/images/iso/ubuntu.iso</pre> 
             <p><strong>No VirtIO Variation (Uses IDE and e1000 NIC Emulation)</strong></p> 
             <pre># virt-install -n vmname -r 2048 --os-type=linux  --os-variant=ubuntulucid --disk  /kvm/images/disk/vmname_boot.img,device=disk,bus=ide,size=40,sparse=true,format=raw  -w bridge=br0,model=e1000 --vnc --noautoconsole -c  /kvm/images/iso/ubuntu.iso</pre> 
             <p><strong>Define VM Without Installation Method</strong></p> 
             <pre># virt-install -n vmname -r 2048 --os-type=linux --os-variant=ubuntulucid --disk /kvm/images/disk/vmname_boot.img,device=disk,bus=virtio,size=40,sparse=true,format=raw --disk /kvm/images/iso/ubuntu.iso,device=cdrom -w bridge=br0,model=virtio --vnc --noautoconsole</pre>
            </div>
            <br />
            <p>&nbsp;</p>
           </div>
          </div>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/06/08/380368.html" title="permalink">2012-06-08 17:55</a> ivaneeo 阅读(666) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/06/08/380368.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=380368">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=380368">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl117_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2012/04/26/376670.html">在windows下使用Xming+Putty显示Linux下软件图形界面</a> 
        </div> 
        <div class="postText"> 
         <div>
          ################### 
          <br />#安装Xming 和 Putty: 
          <br />################### 
          <br />Xming是一个在Microsoft Windows操作系统上运行X Window System（也常称为X11或X X的工作站）的自由软件，可用于在Windows运行Linux的程序（需要在本地Windows上运行一个X Server，即是本程序）。 
          <br />Linux 以及各种Unix like的操作系统现在都用基于X Window图形界面。但是由于体积臃肿导致在Linux运行3D游戏十分困难。但是得益于其接口良好、扩展性和可移植性优秀的特点（重要的是具有网络透 明性），利用它可以很方便的远程启动Linux的图形程序。 
          <br /> 
          <br />下载地址： 
          <br />
          <a rel="nofollow" href="https://sourceforge.net/projects/xming/" target="_blank">https://sourceforge.net/projects/xming/</a> 
          <br />或者
          <a rel="nofollow" href="http://www.straightrunning.com/XmingNotes/" target="_blank">http://www.straightrunning.com/XmingNotes/</a> 
          <br /> 
          <br />Xming 用OpenGL展示界面 
          <br />Xming-fonts 标准X字体,部分传统的X应用的显示也需要这些字体 
          <br />Xming-mesa 用更慢的Mesa展示界面, 有时X转发会更好 
          <br />Xming-portable-PuTTY 提供X界面转发ssh程序 
          <br />Xming-tools-and-clients 提供一些X应用专用的工具 
          <br /> 
          <br />Putty: 
          <a rel="nofollow" href="http://www.putty.org/" target="_blank">http://www.putty.org/</a> 
          <br /> 
          <br />#################################################### 
          <br /># 通过SSH来使用Xming,在putty terminal 中打开Linux下的图形界面 
          <br />#################################################### 
          <br />1)保证Linux server中 /etc/ssh/sshd_config 
          <br /> X11Forwarding yes 
          <br /> 
          <br />2)Putty中X11 forwarding: 
          <br /> 
          <br />Putty Configuration--&gt;Preffered SSH protocal version-&gt;SSH版本是2. 
          <br /> 
          <br />Connection--&gt;SSH--&gt;X11--&gt;Enable X11 forwarding, X display location填上localhost:0, 下面的协议选择MIT-Magic-Cookie-1. 
          <br /> 
          <br />3)windows下起linux下的图形界面 
          <br /> 
          <br />启动Xming,&quot;Display number&quot;中的数字, 使用默认的0. 
          <br /> 
          <br />使用Putty连接Linux server,在putty终端下运行 
          <br /> 
          <br />set DISPLAY=10.160.13.229:0（注意：这里IP是Xming安装程序所在的主机的IP地址，即：X Server的IP地址,这里就是你的windows的地址，X Client是linux 服务器） 
          <br /> 
          <br />（DISPLAY 环境变量格式如下hostname: displaynumber.screennumber,我们需要知道，在某些机器上，可能有多个显示设备共享使用同一套输入设备，例如在一台PC上连接 两台CRT显示器，但是它们只共享使用一个键盘和一个鼠标。这一组显示设备就拥有一个共同的displaynumber，而这组显示设备中的每个单独的设 备则拥有自己单独的 screennumber。displaynumber和screennumber都是从零开始的数字。这样，对于我们普通用户来说， displaynumber、screennumber就都是0。 
          <br /> 
          <br />hostname指Xserver所在的主机主机名或者ip地址, 图形将显示在这一机器上, 可以是启动了图形界面的Linux/Unix机器, 也可以是安装了Exceed, X-Deep/32等Windows平台运行的Xserver的Windows机器.如果Host为空, 则表示Xserver运行于本机, 并且图形程序(Xclient)使用unix socket方式连接到Xserver, 而不是TCP方式. 
          <br /> 
          <br />使用TCP方式连接时, displaynumber为连接的端口减去6000的值, 如果displaynumber为0, 则表示连接到6000端口; 
          <br /> 
          <br />使用unix socket方式连接时则表示连接的unix socket的路径,如果displaynumber为0, 则表示连接到/tmp/.X11-unix/X0 . 
          <br /> 
          <br />creennumber则几乎总是0. ） 
          <br /> 
          <br />然后运行gvim，发现linux下的gvim显示在你的windows桌面上了。 
          <br /> 
          <br />如果出现： 
          <br /> Xlib: connection to &quot;10.160.13.229:0.0&quot; refused by server Xlib: No protocol specified 
          <br /> 
          <br />在右下角点击Xming server的view log,发现有如下消息 
          <br /> 
          <br />AUDIT: ... Xming: client 4 rejected from IP 10.160.23.18 
          <br /> 
          <br />这个10.160.23.18正是linux server的地址 
          <br /> 
          <br />
          <strong>解决办法： <br />右键桌面上的Xming图标，修改Xming的命令，<span style="background-color: #ff0000;">取消权限控制</span>，使用-ac选项： <br /></strong> 
          <strong><br />C:\Program Files\XMing\Xming.exe :0 -clipboard -multiwindow -ac </strong>
          <br /> 
          <br />然后启动Xming,发现可以在windows下显示linux的图形界面了。。
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/04/26/376670.html" title="permalink">2012-04-26 12:21</a> ivaneeo 阅读(6620) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/04/26/376670.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (2)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=376670">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=376670">收藏</a> 
        </div> 
       </div> <br /> 
       <div class="post"> 
        <div class="postTitle"> 
         <a id="ArchiveDay1_SingleDay_DayList_ctl118_TitleUrl" href="http://www.blogjava.net/ivanwan/archive/2012/04/17/374949.html">Nginx 的 location 指令的匹配规则</a> 
        </div> 
        <div class="postText"> 
         <div>
          <span style="font-size:18px; color:#345286">Nginx 的 location 指令，允许对不同的 URI 进行不同的配置，既可以是字符串，也可以是正则表达式。使用正则表达式，须使用以下前缀：</span>
          <span style="font-size:18px"><br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (1) <strong>~*</strong>, 表示不区分大小写的匹配。</span>
          <span style="font-size:18px"><br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (2) <strong>~</strong>, 表示区分大小写的匹配。</span>
          <span style="font-size:18px"><br /> <br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对于非正则的匹配，即字符串匹配，有如下前缀：</span>
          <span style="font-size:18px"><br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (1) <strong>^~</strong>, 表示匹配到字符串后，终止正则匹配。</span>
          <span style="font-size:18px"><br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (2) <strong>=</strong>, 表示精确匹配。</span>
          <span style="font-size:18px"><br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (3) <strong>@</strong>, 当然，这个也算不上字符串匹配。如果可以，你也可以将其理解成是正则匹配。它是一个命名标记，这种 location 不会用于正常的请求，它们通常只用于处理内部的重定向。</span>
          <span style="font-size:18px"><br /> <br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在匹配过程中，Nginx 将首先匹配字符串，然后匹配正则表达式。匹配到第一个正则表达式后，会停止搜索。如果匹配到正则表达式，则使用正则表达式的搜索结果，如果没有匹配到正则表达式，则使用字符串的搜索结果。</span>
          <span style="font-size:18px"><br /> <br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上面这段话的意思是说，有一个字符串和正则表达式均能匹配上，那么会使用正则表达式的搜索结果。这里，我们可以使用前缀<strong>&quot;^~&quot;</strong> 来禁止匹配到字符串后，继续检查正则表达式。匹配到 URI 后，将停止搜索。</span>
          <span style="font-size:18px"><br /> <br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 使用前缀 <strong>&quot;=&quot;</strong> 可以进行精确的 URI 匹配，如果找到匹配的 URI，则停止搜索。&quot;location = /&quot; 只能匹配到 &quot;/&quot;，而 &quot;/test.html&quot; 则不能被匹配。</span>
          <span style="font-size:18px"><br /> <br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 正则表达式的匹配，按照它们在配置文件中的顺序进行，写在前面的优先。</span>
          <span style="font-size:18px"><br /> <br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 另外，前缀 <strong>&quot;@&quot;</strong> 是一个命名标记，这种 location 不会用于正常的请求，它们通常只用于处理内部的重定向(例如：error_page, try_files)。</span>
          <span style="font-size:18px"><br /> <br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最后总结一下匹配的过程：</span>
          <span style="font-size:18px"><br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (1) 前缀 <strong>&quot;=&quot;</strong> 先进行匹配，如果找到了，终止搜索。</span>
          <span style="font-size:18px"><br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (2) 对所有其它 location 进行非正则的匹配，找到最精确匹配(对于 /blog/admin/ 这个 URI, location /blog 要比 location / 长，因此 location /blog 要比 location / 要精确)的那个。如果找到的这个是带<strong>&quot;^~&quot;</strong> 前缀的，则终止搜索并直接返回找到的这个，否则开始正则查找。<strong>会不会出现所有的非正则匹配都无法匹配到 URI 呢，当然，你若不定义一个 location /，这种情况的确会发生，没关系啊，它会进行正则查找的。</strong></span>
          <span style="font-size:18px"><br /> </span>
          <span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (3) 正则查找，按照我们配置文件中配置的 location 顺序进行查找。</span>
          <span style="font-size:18px"><br /> </span> 
          <p><span style="font-size:18px; color:#345286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (4) 如果正则查找匹配成功，则使用此正则匹配的 location，否则，使用第二步查找的结果。如果『否则』发生了，同时，第二步中的粗体字部分的假设的情况也发生了，怎么办？404 会等着你的。</span></p> 
          <p><span style="font-size:18px; color:#345286"><br /> </span></p> 
          <p><span style="font-size:18px; color:#345286">参考：</span><a href="http://blog.csdn.net/fengmo_q/article/details/6683377">nginx location的管理以及查找</a></p> 
          <p><br /> </p> 
          <p style="margin-top:11px; margin-right:0px; margin-bottom:11px; margin-left:0px"> 例子：</p> 
          <blockquote style="padding-top:1px; padding-right:10px; padding-bottom:1px; padding-left:10px; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:10px; background-color:#efefef"> 
           <p style="margin-top:11px; margin-right:0px; margin-bottom:11px; margin-left:0px"> location = / {<br /> # 只匹配 / 查询。<br /> [ configuration A ]<br /> }</p> 
          </blockquote> 
          <blockquote style="padding-top:1px; padding-right:10px; padding-bottom:1px; padding-left:10px; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:10px; background-color:#efefef"> 
           <p style="margin-top:11px; margin-right:0px; margin-bottom:11px; margin-left:0px"> location / {<br /> # 匹配任何查询，因为所有请求都已 / 开头。但是正则表达式规则和长的块规则将被优先和查询匹配。<br /> [ configuration B ]<br /> }</p> 
          </blockquote> 
          <blockquote style="padding-top:1px; padding-right:10px; padding-bottom:1px; padding-left:10px; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:10px; background-color:#efefef"> 
           <p style="margin-top:11px; margin-right:0px; margin-bottom:11px; margin-left:0px"> location ^~ /images/ {<br /> # 匹配任何已 /images/ 开头的任何查询并且停止搜索。任何正则表达式将不会被测试。<br /> [ configuration C ]<br /> }</p> 
          </blockquote> 
          <blockquote style="padding-top:1px; padding-right:10px; padding-bottom:1px; padding-left:10px; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:10px; background-color:#efefef"> 
           <p style="margin-top:11px; margin-right:0px; margin-bottom:11px; margin-left:0px"> location ~* \.(gif|jpg|jpeg)$ {<br /> # 匹配任何已 gif、jpg 或 jpeg 结尾的请求。然而所有 /images/ 目录的请求将使用 Configuration C。<br /> [ configuration D ]<br /> }</p> 
          </blockquote> 
          <p style="margin-top:11px; margin-right:0px; margin-bottom:11px; margin-left:0px"> <strong>例子请求:</strong></p> 
          <p style="margin-top:11px; margin-right:0px; margin-bottom:11px; margin-left:0px"> </p> 
          <p align="left">1， /&nbsp;&nbsp;&nbsp;-&gt;&nbsp;&nbsp; 精确匹配到第1个location，匹配停止，使用configuration A<br /> 2，/some/other/url&nbsp;&nbsp;&nbsp; -&gt;&nbsp; 首先前缀部分字符串匹配到了第2个location，然后进行正则匹配，显然没有匹配上，则使用第2个location的配置configurationB<br /> 3，/images /1.jpg&nbsp; -&gt;&nbsp; 首先前缀部分字符串匹配到了第2个location，但是接着对第3个location也前缀匹配上了，而且这时已经是配置文件里面对这个url的最大字 符串匹配了，并且location带有 &quot;^~&quot; 前缀，则不再进行正则匹配，最终使用configuration C<br /> 4，/some/other/path/to/1.jpg&nbsp; -&gt; 首先前缀部分同样字符串匹配到了第2个location，然后进行正则匹配，这时正则匹配成功，则使用congifuration D</p> 
          <p style="margin-top:11px; margin-right:0px; margin-bottom:11px; margin-left:0px"> </p> 
          <p style="margin-top:11px; margin-right:0px; margin-bottom:11px; margin-left:0px"> 注意：按任意顺序定义这4个配置结果将仍然一样。</p>
         </div> 
        </div> 
        <div class="postFoot">
          posted @ 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/04/17/374949.html" title="permalink">2012-04-17 19:45</a> ivaneeo 阅读(887) | 
         <a href="http://www.blogjava.net/ivanwan/archive/2012/04/17/374949.html#FeedBack" title="comments, pingbacks, trackbacks">评论 (0)</a> |&nbsp;
         <a href="http://www.blogjava.net/ivanwan/admin/EditPosts.aspx?postid=374949">编辑</a>&nbsp;
         <a href="http://www.blogjava.net/ivanwan/AddToFavorite.aspx?id=374949">收藏</a> 
        </div> 
       </div> <br /> </td>
     </tr> 
    </tbody>
   </table> 
   <p id="footer"> Copyright @ ivaneeo<br /> Powered by: <a href="http://scottwater.com/blog" target="_blank">.Text</a> and <a href="http://asp.net" target="_blank">ASP.NET</a> <br /> Theme by: <a href="http://www.DotNetMonster.com" target="_blank">.NET Monster</a> </p> 
  </form> 
  <script type="text/javascript" src="/script/ShowHidden.js"></script> 
  <script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-476124-3']);
	  _gaq.push(['_trackPageview']);

	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>   
 </body>
</html>